System.register("chunks:///_virtual/__DEV__.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "a6d57q2JxVGDLKQmmAQpiCQ", "__DEV__", undefined);
      var __DEV__ = exports('__DEV__', true);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AchivementManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LoadingManager.ts', './Manager.ts', './Config.ts', './ResourceManager.ts', './EquipmentManager.ts', './BackpackManager.ts', './AchivementManager2.ts', './index6.ts', './Message.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, LoadingManager, Manager, Config, resourceManager, equipmentManager, backpackManager, isDayTask, getAchivement, getAllAchivements, getAchivementKey, Rx, message;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      Manager = module.Manager;
    }, function (module) {
      Config = module.Config;
    }, function (module) {
      resourceManager = module.resourceManager;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      isDayTask = module.isDayTask;
      getAchivement = module.getAchivement;
      getAllAchivements = module.getAllAchivements;
      getAchivementKey = module.getAchivementKey;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      message = module.message;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1e34cXy1H9FiasutgW8NDqf", "AchivementManager", undefined);
      var AchivementResourceHistory = function AchivementResourceHistory(dto) {
        // 基础资源
        this.resource = {
          addGold: 0,
          addDiamond: 0,
          reduceGold: 0,
          reduceDiamond: 0
        };
        // 击杀记录
        this.kill = {};
        // 获取物品记录
        this.itemHistory = {};
        // 使用物品记录
        this.useItemHistory = {};
        // 获取装备记录
        this.equipHistory = {};
        // 已经领取的任务
        this.hasGetReward = [];
        // 已经完成的任务
        this.hasComplete = [];
        if (!dto) return;
        Object.assign(this, dto);
      };
      var AchivementDTO = function AchivementDTO(data) {
        this.dayTaskTime = Date.now();
        this.dayTaskData = new AchivementResourceHistory();
        this.achivementData = new AchivementResourceHistory();
        if (data) {
          this.dayTaskTime = data.dayTaskTime;
          this.dayTaskData = data.dayTaskData;
          this.achivementData = data.achivementData;
        }
      };
      var AchivementData = exports('AchivementData', /*#__PURE__*/function () {
        function AchivementData(data) {
          var _this = this;
          this.dayTaskTime = Date.now();
          this.dayTaskData = new AchivementResourceHistory();
          this.achivementData = new AchivementResourceHistory();
          if (data) {
            if (new Date(data.dayTaskTime).toDateString() !== new Date().toDateString() || data.dayTaskTime === 0 || this.dayTaskTime === 0) {
              this.dayTaskTime = Date.now();
              this.dayTaskData = new AchivementResourceHistory();
            } else {
              this.dayTaskTime = data.dayTaskTime;
              this.dayTaskData = new AchivementResourceHistory(data.dayTaskData);
            }
            this.achivementData = new AchivementResourceHistory(data.achivementData);
          }
          setTimeout(function () {
            Array.from(getAllAchivements()).forEach(function (achivement) {
              var achivementKey = getAchivementKey(achivement);
              if (_this.hasComplete(achivementKey) || _this.hasGetReward(achivementKey)) return;
              var stop = false;
              var runner = Rx.effect(function () {
                var progress = achivement.progress;
                if (progress.progress / progress.maxProgress >= 1) {
                  _this.completeTask(achivementKey);
                  message.taskNotify(achivement);
                  stop = true;
                  if (runner) runner.effect.stop();
                }
              });
              if (stop) runner.effect.stop();
            });
          });
          return;
        }
        var _proto = AchivementData.prototype;
        _proto.hasGetReward = function hasGetReward(key) {
          if (isDayTask(key)) {
            if (this.dayTaskData.hasGetReward.indexOf(key) !== -1) return true;
          } else {
            if (this.achivementData.hasGetReward.indexOf(key) !== -1) return true;
          }
          return false;
        };
        _proto.hasComplete = function hasComplete(key) {
          if (isDayTask(key)) {
            if (this.dayTaskData.hasComplete.indexOf(key) !== -1) return true;
          } else {
            if (this.achivementData.hasComplete.indexOf(key) !== -1) return true;
          }
          return false;
        };
        _proto.completeTask = function completeTask(key) {
          if (isDayTask(key)) {
            if (this.dayTaskData.hasComplete.indexOf(key) !== -1) return;
            this.dayTaskData.hasComplete.push(key);
          } else {
            if (this.achivementData.hasComplete.indexOf(key) !== -1) return;
            this.achivementData.hasComplete.push(key);
          }
        };
        _proto.getRewardTask = function getRewardTask(key) {
          if (isDayTask(key)) {
            // 已经获取过奖励
            if (this.dayTaskData.hasGetReward.indexOf(key) !== -1) return;
            // 添加奖励
            var achivement = getAchivement(key);
            if (!achivement) return;
            achivement.getRewards(resourceManager, backpackManager, equipmentManager);
            this.dayTaskData.hasGetReward.push(key);
          } else {
            // 已经获取过奖励
            if (this.achivementData.hasGetReward.indexOf(key) !== -1) return;
            // 添加奖励
            var _achivement = getAchivement(key);
            if (!_achivement) return;
            _achivement.getRewards(resourceManager, backpackManager, equipmentManager);
            this.achivementData.hasGetReward.push(key);
          }
        }

        // 添加击杀记录
        ;

        _proto.addKillRecord = function addKillRecord(key) {
          this.dayTaskData.kill[key] = (this.dayTaskData.kill[key] || 0) + 1;
          this.achivementData.kill[key] = (this.achivementData.kill[key] || 0) + 1;
        };
        return AchivementData;
      }());
      var achivementManager = exports('achivementManager', new Manager({
        storageKey: "slaughter:game:achivement",
        descrypt: Config.descrypt,
        Constructor: AchivementData,
        DtoCostructor: AchivementDTO
      }));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              // 监听资源变化
              resourceManager.data.on("goldChange", function (num) {
                if (num > 0) {
                  achivementManager.data.achivementData.resource.addGold += Math.abs(num);
                  achivementManager.data.dayTaskData.resource.addGold += Math.abs(num);
                } else {
                  achivementManager.data.achivementData.resource.reduceGold += Math.abs(num);
                  achivementManager.data.dayTaskData.resource.reduceGold += Math.abs(num);
                }
                achivementManager.save();
              });
              resourceManager.data.on("diamondChange", function (num) {
                if (num > 0) {
                  achivementManager.data.achivementData.resource.addDiamond += Math.abs(num);
                  achivementManager.data.dayTaskData.resource.addDiamond += Math.abs(num);
                } else {
                  achivementManager.data.achivementData.resource.reduceDiamond += Math.abs(num);
                  achivementManager.data.dayTaskData.resource.reduceDiamond += Math.abs(num);
                }
                achivementManager.save();
              });
              // 监听装备获得变化
              equipmentManager.data.on("addEquipment", function (equip) {
                achivementManager.data.achivementData.equipHistory[equip.prototype] = achivementManager.data.achivementData.equipHistory[equip.prototype] + 1 || 0;
                achivementManager.data.dayTaskData.equipHistory[equip.prototype] = achivementManager.data.dayTaskData.equipHistory[equip.prototype] + 1 || 0;
                achivementManager.save();
              });
              // 添加物品
              backpackManager.data.on("addItem", function (item) {
                achivementManager.data.achivementData.itemHistory[item.prototype] += achivementManager.data.achivementData.itemHistory[item.prototype] + item.count || 0;
                achivementManager.data.dayTaskData.itemHistory[item.prototype] += achivementManager.data.dayTaskData.itemHistory[item.prototype] + item.count || 0;
                achivementManager.save();
              });
              // 减少物品
              backpackManager.data.on("reduceItem", function (item) {
                achivementManager.data.achivementData.useItemHistory[item.prototype] += achivementManager.data.achivementData.useItemHistory[item.prototype] + item.count || 0;
                achivementManager.data.dayTaskData.useItemHistory[item.prototype] += achivementManager.data.dayTaskData.useItemHistory[item.prototype] + item.count || 0;
                achivementManager.save();
              });
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AchivementManager2.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createForOfIteratorHelperLoose, cclegacy;
  return {
    setters: [function (module) {
      _createForOfIteratorHelperLoose = module.createForOfIteratorHelperLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "addb9OaTvFPx4i6S7z/9SWx", "AchivementManager", undefined);
      // 所有成就
      var AllAchivements = new Map();
      var AllDayTaskAchivements = new Map();

      // 注册成就
      var RegisterAchivement = exports('RegisterAchivement', function RegisterAchivement(key, dayTask) {
        if (dayTask === void 0) {
          dayTask = false;
        }
        return function (T) {
          var t = new T();
          AllAchivements.set(key, t);
          if (dayTask) {
            AllDayTaskAchivements.set(key, t);
          }
        };
      });

      // 获取所有成就
      var getAllAchivements = exports('getAllAchivements', function getAllAchivements() {
        return AllAchivements.values();
      });

      // 获取成就
      var getAchivement = exports('getAchivement', function getAchivement(key) {
        return AllAchivements.get(key);
      });

      // 获取所有每日任务
      var getAllDayTaskAchivements = exports('getAllDayTaskAchivements', function getAllDayTaskAchivements() {
        return AllDayTaskAchivements.values();
      });

      // 判断是否是每日任务
      var isDayTask = exports('isDayTask', function isDayTask(achive) {
        if (typeof achive === 'string') {
          return AllDayTaskAchivements.has(achive);
        }
        var r = false;
        AllDayTaskAchivements.forEach(function (v, k) {
          if (achive === v) {
            r = true;
          }
        });
        return r;
      });

      // 获取成就key
      var getAchivementKey = exports('getAchivementKey', function getAchivementKey(achivement) {
        for (var _iterator = _createForOfIteratorHelperLoose(AllAchivements), _step; !(_step = _iterator()).done;) {
          var _step$value = _step.value,
            key = _step$value[0],
            value = _step$value[1];
          if (value === achivement) {
            return key;
          }
        }
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AchivementPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Message.ts'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, message;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      message = module.message;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1cd71G0qO1CSYkqG2elGv6O", "AchivementPrototype", undefined);
      var AchivementPrototype = exports('AchivementPrototype', /*#__PURE__*/function () {
        function AchivementPrototype() {}
        var _proto = AchivementPrototype.prototype;
        // 图标
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", null);
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }() // 进度
        ;
        // 获取奖励
        _proto.getRewards = function getRewards(resourceManager, backpackManager, equipmentManager) {
          var reward = this.rewards;
          if (reward.gold) resourceManager.data.addGold(reward.gold);
          if (reward.diamond) resourceManager.data.addGold(reward.diamond);
          if (reward.items) reward.items.forEach(function (item) {
            return backpackManager.data.addItem(item.prototype, item.count);
          });
          if (reward.equipment) reward.equipment.forEach(function (equipment) {
            return equipmentManager.data.addEquipment(equipment.prototype, equipment.quality);
          });
          message.congratulations(reward.gold || 0, reward.diamond || 0, reward.items || [], reward.equipment || []);
          resourceManager.save();
          backpackManager.save();
          equipmentManager.save();
        };
        _createClass(AchivementPrototype, [{
          key: "name",
          get:
          // 名称
          function get() {
            return "";
          }

          // 描述
        }, {
          key: "description",
          get: function get() {
            return "";
          }
        }, {
          key: "progress",
          get: function get() {
            return {
              progress: 0,
              maxProgress: 0
            };
          }

          // 开启
        }, {
          key: "open",
          get: function get() {
            return true;
          }

          // 奖励
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 0,
              diamond: 0,
              items: [],
              equipment: []
            };
          }
        }]);
        return AchivementPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Apollo.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './PlayerCharacterManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, RegisterPlayerCharacter;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      RegisterPlayerCharacter = module.RegisterPlayerCharacter;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "91035v5WK9AwYpBK1yGBBFy", "Apollo", undefined);
      var Brave_Entry = (_dec = RegisterLanguageEntry("Apollo"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "太阳神 阿波罗";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Apollo";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "アポロ";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("Apollo Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "太阳神阿波罗，拥有强大的力量和智慧";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Apollo, the god of the sun";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "アポロ、太陽の神";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Apollo = exports('Apollo', (_dec3 = RegisterCharacter("Apollo"), _dec4 = RegisterPlayerCharacter("Apollo", 1), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(Apollo, _CharacterPrototype);
        function Apollo() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 1200,
            maxMp: 250,
            physicalAttack: 60,
            magicAttack: 80,
            physicalDefense: 15,
            magicDefense: 15,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 0,
            magicPenetration: 10,
            lightAttack: 25,
            darkAttack: 25,
            attackSpeed: 1.0
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 100,
            maxMp: 20,
            physicalAttack: 10,
            magicAttack: 5,
            physicalDefense: 5,
            magicDefense: 5,
            lightResistance: 4,
            darkResistance: 2
          });
          return _this;
        }
        var _proto = Apollo.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Apollo/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Player/Apollo/hero000157", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        }

        // 攻击动画Promise会在攻击动作计算完成后resolve
        ;

        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(Apollo, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Apollo").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Apollo Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return Apollo;
      }(CharacterPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/arrayInstrumentations.ts", ['cc', './index8.ts', './constants.ts', './dep.ts', './effect.ts', './reactive.ts', './general.ts'], function (exports) {
  var cclegacy, TrackOpTypes, track, ARRAY_ITERATE_KEY, pauseTracking, startBatch, endBatch, resetTracking, toRaw, isShallow, toReactive, isProxy, isArray;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      TrackOpTypes = module.TrackOpTypes;
    }, function (module) {
      track = module.track;
      ARRAY_ITERATE_KEY = module.ARRAY_ITERATE_KEY;
    }, function (module) {
      pauseTracking = module.pauseTracking;
      startBatch = module.startBatch;
      endBatch = module.endBatch;
      resetTracking = module.resetTracking;
    }, function (module) {
      toRaw = module.toRaw;
      isShallow = module.isShallow;
      toReactive = module.toReactive;
      isProxy = module.isProxy;
    }, function (module) {
      isArray = module.isArray;
    }],
    execute: function () {
      exports({
        reactiveReadArray: reactiveReadArray,
        shallowReadArray: shallowReadArray
      });
      var _arrayInstrumentation;
      cclegacy._RF.push({}, "ad783fweLZJKIlx/Ehfs8pt", "arrayInstrumentations", undefined);

      /**
       * Track array iteration and return:
       * - if input is reactive: a cloned raw array with reactive values
       * - if input is non-reactive or shallowReactive: the original raw array
       */
      function reactiveReadArray(array) {
        var raw = toRaw(array);
        if (raw === array) return raw;
        track(raw, TrackOpTypes.ITERATE, ARRAY_ITERATE_KEY);
        return isShallow(array) ? raw : raw.map(toReactive);
      }

      /**
       * Track array iteration and return raw array
       */
      function shallowReadArray(arr) {
        track(arr = toRaw(arr), TrackOpTypes.ITERATE, ARRAY_ITERATE_KEY);
        return arr;
      }
      var arrayInstrumentations = exports('arrayInstrumentations', (_arrayInstrumentation = {
        __proto__: null
      }, _arrayInstrumentation[Symbol.iterator] = function () {
        return iterator(this, Symbol.iterator, toReactive);
      }, _arrayInstrumentation.concat = function concat() {
        var _reactiveReadArray;
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        return (_reactiveReadArray = reactiveReadArray(this)).concat.apply(_reactiveReadArray, args.map(function (x) {
          return isArray(x) ? reactiveReadArray(x) : x;
        }));
      }, _arrayInstrumentation.entries = function entries() {
        return iterator(this, 'entries', function (value) {
          value[1] = toReactive(value[1]);
          return value;
        });
      }, _arrayInstrumentation.every = function every(fn, thisArg) {
        return apply(this, 'every', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.filter = function filter(fn, thisArg) {
        return apply(this, 'filter', fn, thisArg, function (v) {
          return v.map(toReactive);
        }, arguments);
      }, _arrayInstrumentation.find = function find(fn, thisArg) {
        return apply(this, 'find', fn, thisArg, toReactive, arguments);
      }, _arrayInstrumentation.findIndex = function findIndex(fn, thisArg) {
        return apply(this, 'findIndex', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.findLast = function findLast(fn, thisArg) {
        return apply(this, 'findLast', fn, thisArg, toReactive, arguments);
      }, _arrayInstrumentation.findLastIndex = function findLastIndex(fn, thisArg) {
        return apply(this, 'findLastIndex', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.forEach = function forEach(fn, thisArg) {
        return apply(this, 'forEach', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.includes = function includes() {
        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          args[_key2] = arguments[_key2];
        }
        // @ts-ignore
        return searchProxy(this, 'includes', args);
      }, _arrayInstrumentation.indexOf = function indexOf() {
        for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
          args[_key3] = arguments[_key3];
        }
        return searchProxy(this, 'indexOf', args);
      }, _arrayInstrumentation.join = function join(separator) {
        return reactiveReadArray(this).join(separator);
      }, _arrayInstrumentation.lastIndexOf = function lastIndexOf() {
        for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
          args[_key4] = arguments[_key4];
        }
        return searchProxy(this, 'lastIndexOf', args);
      }, _arrayInstrumentation.map = function map(fn, thisArg) {
        return apply(this, 'map', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.pop = function pop() {
        return noTracking(this, 'pop');
      }, _arrayInstrumentation.push = function push() {
        for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
          args[_key5] = arguments[_key5];
        }
        return noTracking(this, 'push', args);
      }, _arrayInstrumentation.reduce = function reduce(fn) {
        for (var _len6 = arguments.length, args = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
          args[_key6 - 1] = arguments[_key6];
        }
        return _reduce(this, 'reduce', fn, args);
      }, _arrayInstrumentation.reduceRight = function reduceRight(fn) {
        for (var _len7 = arguments.length, args = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {
          args[_key7 - 1] = arguments[_key7];
        }
        return _reduce(this, 'reduceRight', fn, args);
      }, _arrayInstrumentation.shift = function shift() {
        return noTracking(this, 'shift');
      }, _arrayInstrumentation.some = function some(fn, thisArg) {
        return apply(this, 'some', fn, thisArg, undefined, arguments);
      }, _arrayInstrumentation.splice = function splice() {
        for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
          args[_key8] = arguments[_key8];
        }
        return noTracking(this, 'splice', args);
      }, _arrayInstrumentation.toReversed = function toReversed() {
        // @ts-expect-error user code may run in es2016+
        return reactiveReadArray(this).toReversed();
      }, _arrayInstrumentation.toSorted = function toSorted(comparer) {
        // @ts-expect-error user code may run in es2016+
        return reactiveReadArray(this).toSorted(comparer);
      }, _arrayInstrumentation.toSpliced = function toSpliced() {
        var _reactiveReadArray2;
        // @ts-expect-error user code may run in es2016+
        return (_reactiveReadArray2 = reactiveReadArray(this)).toSpliced.apply(_reactiveReadArray2, arguments);
      }, _arrayInstrumentation.unshift = function unshift() {
        for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
          args[_key9] = arguments[_key9];
        }
        return noTracking(this, 'unshift', args);
      }, _arrayInstrumentation.values = function values() {
        return iterator(this, 'values', toReactive);
      }, _arrayInstrumentation));

      // instrument iterators to take ARRAY_ITERATE dependency
      function iterator(self, method, wrapValue) {
        // note that taking ARRAY_ITERATE dependency here is not strictly equivalent
        // to calling iterate on the proxified array.
        // creating the iterator does not access any array property:
        // it is only when .next() is called that length and indexes are accessed.
        // pushed to the extreme, an iterator could be created in one effect scope,
        // partially iterated in another, then iterated more in yet another.
        // given that JS iterator can only be read once, this doesn't seem like
        // a plausible use-case, so this tracking simplification seems ok.
        var arr = shallowReadArray(self);
        var iter = arr[method]();
        if (arr !== self && !isShallow(self)) {
          iter._next = iter.next;
          iter.next = function () {
            var result = iter._next();
            if (result.value) {
              result.value = wrapValue(result.value);
            }
            return result;
          };
        }
        return iter;
      }

      // in the codebase we enforce es2016, but user code may run in environments
      // higher than that
      var arrayProto = Array.prototype;
      // instrument functions that read (potentially) all items
      // to take ARRAY_ITERATE dependency
      function apply(self, method, fn, thisArg, wrappedRetFn, args) {
        var arr = shallowReadArray(self);
        var needsWrap = arr !== self && !isShallow(self);
        var methodFn = arr[method];

        // #11759
        // If the method being called is from a user-extended Array, the arguments will be unknown
        // (unknown order and unknown parameter types). In this case, we skip the shallowReadArray
        // handling and directly call apply with self.
        if (methodFn !== arrayProto[method]) {
          var _result = methodFn.apply(self, args);
          return needsWrap ? toReactive(_result) : _result;
        }
        var wrappedFn = fn;
        if (arr !== self) {
          if (needsWrap) {
            wrappedFn = function wrappedFn(item, index) {
              return fn.call(this, toReactive(item), index, self);
            };
          } else if (fn.length > 2) {
            wrappedFn = function wrappedFn(item, index) {
              return fn.call(this, item, index, self);
            };
          }
        }
        var result = methodFn.call(arr, wrappedFn, thisArg);
        return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;
      }

      // instrument reduce and reduceRight to take ARRAY_ITERATE dependency
      function _reduce(self, method, fn, args) {
        var arr = shallowReadArray(self);
        var wrappedFn = fn;
        if (arr !== self) {
          if (!isShallow(self)) {
            wrappedFn = function wrappedFn(acc, item, index) {
              return fn.call(this, acc, toReactive(item), index, self);
            };
          } else if (fn.length > 3) {
            wrappedFn = function wrappedFn(acc, item, index) {
              return fn.call(this, acc, item, index, self);
            };
          }
        }
        return arr[method].apply(arr, [wrappedFn].concat(args));
      }

      // instrument identity-sensitive methods to account for reactive proxies
      function searchProxy(self, method, args) {
        var arr = toRaw(self);
        track(arr, TrackOpTypes.ITERATE, ARRAY_ITERATE_KEY);
        // we run the method using the original args first (which may be reactive)
        var res = arr[method].apply(arr, args);

        // if that didn't work, run it again using raw values.
        if ((res === -1 || res === false) && isProxy(args[0])) {
          args[0] = toRaw(args[0]);
          return arr[method].apply(arr, args);
        }
        return res;
      }

      // instrument length-altering mutation methods to avoid length being tracked
      // which leads to infinite loops in some cases (#2137)
      function noTracking(self, method, args) {
        if (args === void 0) {
          args = [];
        }
        pauseTracking();
        startBatch();
        var res = toRaw(self)[method].apply(self, args);
        endBatch();
        resetTracking();
        return res;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AssetManager.ts", ['cc', './index3.ts'], function (exports) {
  var cclegacy, CcNative;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CcNative = module.CcNative;
    }],
    execute: function () {
      exports('getBaseModManager', getBaseModManager);
      cclegacy._RF.push({}, "3d8335k0A5NNLIZuOmKEKl3", "AssetManager", undefined);
      var baseModManager = null;
      function getBaseModManager() {
        if (baseModManager) return baseModManager;
        return baseModManager = new CcNative.Asset.AssetManager("ModBaseResource");
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AssetManager2.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, assetManager;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      assetManager = module.assetManager;
    }],
    execute: function () {
      cclegacy._RF.push({}, "53ec0rhFbFMYo9x+jVsdgFy", "AssetManager", undefined);

      // 资源缓存
      var CACHE_RESOURCE = new Map();

      // 资源上一次使用时间
      var RESOURCE_LAST_TIME = new Map();

      // bundle管理
      var ASSETS_MANAGER_MAP = new Map();

      // 用于合并多次加载的相同资源
      var AWAIT_LOAD_RESOURCE = new Map();

      // 资源管理类
      var CcAssetManager = exports('CcAssetManager', /*#__PURE__*/function () {
        // 构造器
        function CcAssetManager(bundleName) {
          var _this = this;
          // bundle
          this.bundle = void 0;
          // 所有等待成功的函数
          this.awaitResolveFunc = [];
          this.bundleName = bundleName;
          // 是否有缓存
          if (this.bundle = ASSETS_MANAGER_MAP.get(bundleName)) return;
          assetManager.loadBundle(bundleName, function (err, b) {
            if (err) {
              console.log(bundleName);
              console.error(err);
              return;
            }
            _this.bundle = b;
            ASSETS_MANAGER_MAP.set(bundleName, _this.bundle);
            // 清空等待数组
            _this.awaitResolveFunc.forEach(function (c) {
              return c();
            });
            _this.awaitResolveFunc.length = 0;
          });
        }

        // 加载
        var _proto = CcAssetManager.prototype;
        _proto.load = /*#__PURE__*/
        function () {
          var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(path, type, cache) {
            var _this2 = this;
            var cachePath, promise;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (cache === void 0) {
                    cache = false;
                  }
                  if (this.bundle) {
                    _context2.next = 4;
                    break;
                  }
                  _context2.next = 4;
                  return new Promise(function (res) {
                    return _this2.awaitResolveFunc.push(res);
                  });
                case 4:
                  cachePath = this.bundleName + "/" + path;
                  RESOURCE_LAST_TIME.set(cachePath, Date.now());
                  if (!AWAIT_LOAD_RESOURCE.get(cachePath)) {
                    _context2.next = 8;
                    break;
                  }
                  return _context2.abrupt("return", AWAIT_LOAD_RESOURCE.get(cachePath));
                case 8:
                  if (!CACHE_RESOURCE.get(cachePath)) {
                    _context2.next = 10;
                    break;
                  }
                  return _context2.abrupt("return", CACHE_RESOURCE.get(cachePath));
                case 10:
                  promise = new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res, rej) {
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          _this2.bundle.load(path, type, function (err, data) {
                            AWAIT_LOAD_RESOURCE["delete"](cachePath);
                            if (err) {
                              return rej(err);
                            }
                            var assetPack = new AssetPack(data, cachePath);
                            res(assetPack);
                            if (cache) CACHE_RESOURCE.set(cachePath, assetPack);
                          });
                        case 1:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  })));
                  AWAIT_LOAD_RESOURCE.set(cachePath, promise);
                  return _context2.abrupt("return", promise);
                case 13:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function load(_x, _x2, _x3) {
            return _load.apply(this, arguments);
          }
          return load;
        }() // 加载文件夹
        ;

        _proto.loadDir = /*#__PURE__*/
        function () {
          var _loadDir = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(path, type, cache) {
            var _this3 = this;
            var cachePath, promise;
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  if (cache === void 0) {
                    cache = false;
                  }
                  if (this.bundle) {
                    _context4.next = 4;
                    break;
                  }
                  _context4.next = 4;
                  return new Promise(function (res) {
                    return _this3.awaitResolveFunc.push(res);
                  });
                case 4:
                  cachePath = this.bundleName + "/" + path;
                  RESOURCE_LAST_TIME.set(cachePath, Date.now());
                  if (!AWAIT_LOAD_RESOURCE.get(cachePath)) {
                    _context4.next = 8;
                    break;
                  }
                  return _context4.abrupt("return", AWAIT_LOAD_RESOURCE.get(cachePath));
                case 8:
                  if (!CACHE_RESOURCE.get(cachePath)) {
                    _context4.next = 10;
                    break;
                  }
                  return _context4.abrupt("return", CACHE_RESOURCE.get(cachePath));
                case 10:
                  promise = new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(res, rej) {
                    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                      while (1) switch (_context3.prev = _context3.next) {
                        case 0:
                          _this3.bundle.loadDir(path, type, function (err, data) {
                            AWAIT_LOAD_RESOURCE["delete"](cachePath);
                            if (err) {
                              return rej(err);
                            }
                            var arr = [];
                            for (var i = 0; i < data.length; i++) {
                              var _asset = data[i];
                              arr.push(new AssetPack(_asset, cachePath));
                            }
                            res(arr);
                            if (cache) CACHE_RESOURCE.set(cachePath, arr);
                          });
                        case 1:
                        case "end":
                          return _context3.stop();
                      }
                    }, _callee3);
                  })));
                  AWAIT_LOAD_RESOURCE.set(cachePath, promise);
                  return _context4.abrupt("return", promise);
                case 13:
                case "end":
                  return _context4.stop();
              }
            }, _callee4, this);
          }));
          function loadDir(_x6, _x7, _x8) {
            return _loadDir.apply(this, arguments);
          }
          return loadDir;
        }();
        return CcAssetManager;
      }());
      var AssetPack = exports('AssetPack', /*#__PURE__*/function () {
        function AssetPack(asset, cachePath) {
          this.asset = asset;
          this.cachePath = cachePath;
        }
        var _proto2 = AssetPack.prototype;
        _proto2.addRef = function addRef() {
          this.asset.addRef();
        };
        _proto2.decRef = function decRef() {
          this.asset.decRef();
          if (this.asset.refCount === 0) {
            CACHE_RESOURCE["delete"](this.cachePath);
          }
        };
        _createClass(AssetPack, [{
          key: "value",
          get: function get() {
            return this.asset;
          }
        }]);
        return AssetPack;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AssetManager3.ts", ['cc', './index3.ts'], function (exports) {
  var cclegacy, CcNative;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CcNative = module.CcNative;
    }],
    execute: function () {
      exports('getCustomModManager', getCustomModManager);
      cclegacy._RF.push({}, "9a305w5P1ZEk73XT7DZJL+Y", "AssetManager", undefined);
      var customModManager = null;
      function getCustomModManager() {
        if (customModManager) return customModManager;
        return customModManager = new CcNative.Asset.AssetManager("ModCustomResource");
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AutoAudioVolume.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, AudioSource, Enum, settingManager, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      AudioSource = module.AudioSource;
      Enum = module.Enum;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "bfbd7m4BjZECqIwWvKI/3uJ", "AutoAudioVolume", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property,
        requireComponent = _decorator.requireComponent;
      var AutoAudioVolume = exports('AutoAudioVolume', (_dec = ccclass('AutoAudioVolume'), _dec2 = requireComponent(AudioSource), _dec3 = property({
        type: Enum({
          Back: 0,
          Effect: 1
        })
      }), _dec(_class = _dec2(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(AutoAudioVolume, _ExtensionComponent);
        function AutoAudioVolume() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "audioType", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = AutoAudioVolume.prototype;
        _proto.start = function start() {
          var _this2 = this;
          this.effect(function () {
            if (_this2.audioType === 0) {
              _this2.node.getComponent(AudioSource).volume = settingManager.data.backVolume;
            } else {
              _this2.node.getComponent(AudioSource).volume = settingManager.data.effectVolume;
            }
          });
        };
        return AutoAudioVolume;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "audioType", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return 0;
        }
      }), _class2)) || _class) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/AutoTransformLabel.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Label, ExtensionComponent, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _dec2, _class;
      cclegacy._RF.push({}, "bb02b7qP7tLSKDwHqIqhgB/", "AutoTransformLabel", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property,
        requireComponent = _decorator.requireComponent;
      var AutoTransformLabel = exports('AutoTransformLabel', (_dec = ccclass('AutoTransformLabel'), _dec2 = requireComponent(Label), _dec(_class = _dec2(_class = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(AutoTransformLabel, _ExtensionComponent);
        function AutoTransformLabel() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _this.label = void 0;
          return _this;
        }
        var _proto = AutoTransformLabel.prototype;
        _proto.onLoad = function onLoad() {
          var _this2 = this;
          this.label = this.node.getComponent(Label);
          var key = this.label.string;
          this.effect(function () {
            _this2.label.string = LanguageManager.getEntry(key).getValue(settingManager.data.language);
          });
        };
        return AutoTransformLabel;
      }(ExtensionComponent)) || _class) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BackpackManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Manager.ts', './Config.ts', './ItemManager.ts', './HpMedicine.ts', './MpMedicine.ts'], function (exports) {
  var _inheritsLoose, cclegacy, Manager, BaseEventManagerData, Config, getItemPrototype, getMedicineItemKey, HpMedicine, MpMedicine;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Manager = module.Manager;
      BaseEventManagerData = module.BaseEventManagerData;
    }, function (module) {
      Config = module.Config;
    }, function (module) {
      getItemPrototype = module.getItemPrototype;
      getMedicineItemKey = module.getMedicineItemKey;
    }, function (module) {
      HpMedicine = module.HpMedicine;
    }, function (module) {
      MpMedicine = module.MpMedicine;
    }],
    execute: function () {
      cclegacy._RF.push({}, "49aadme379KS6AmZkQxiG9l", "BackpackManager", undefined);
      var BackpackDTO = function BackpackDTO(data) {
        this.items = [];
        if (data) {
          this.items = data.items;
        }
      };
      var BackpackData = exports('BackpackData', /*#__PURE__*/function (_BaseEventManagerData) {
        _inheritsLoose(BackpackData, _BaseEventManagerData);
        function BackpackData(data) {
          var _this;
          _this = _BaseEventManagerData.call(this) || this;
          _this.items = [{
            prototype: "Stone",
            count: 25
          }, {
            prototype: getMedicineItemKey(HpMedicine),
            count: 30
          }, {
            prototype: getMedicineItemKey(MpMedicine),
            count: 30
          }];
          if (data) {
            // 剔除数量为0或者不存在物品
            _this.items = data.items.filter(function (i) {
              return i && i.count > 0 && getItemPrototype(i.prototype);
            });
          }
          return _this;
        }
        var _proto = BackpackData.prototype;
        _proto.useItem = function useItem(instance, count) {
          instance.proto.use(count);
          this.emit("useItem", instance);
        };
        _proto.reduceCount = function reduceCount(itemKey, count) {
          for (var i = 0; i < this.items.length; i++) {
            var item = this.items[i];
            if (item.prototype === itemKey) {
              item.count -= count;
              if (item.count <= 0) {
                this.items.splice(i, 1);
              }
              this.emit("reduceItem", item);
              return;
            }
          }
          return;
        };
        _proto.addItem = function addItem(itemKey, count) {
          if (!itemKey || !getItemPrototype(itemKey)) return;
          for (var i = 0; i < this.items.length; i++) {
            var _item = this.items[i];
            if (_item.prototype === itemKey) {
              _item.count += count;
              this.emit("addItem", _item);
              return _item;
            }
          }
          var item = {
            prototype: itemKey,
            count: count
          };
          this.items.push(item);
          this.emit("addItem", item);
          return item;
        };
        _proto.hasItem = function hasItem(itemKey, count) {
          for (var i = 0; i < this.items.length; i++) {
            var item = this.items[i];
            if (item.prototype === itemKey) {
              return item.count >= count;
            }
          }
          return false;
        };
        return BackpackData;
      }(BaseEventManagerData));
      var backpackManager = exports('backpackManager', new Manager({
        storageKey: "slaughter:game:backpack",
        descrypt: Config.descrypt,
        Constructor: BackpackData,
        DtoCostructor: BackpackDTO
      }));
      try {
        // @ts-ignore
        window.backpackManager = backpackManager;
      } catch (e) {}
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BackpackPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './ExtensionComponent.ts', './LanguageManager.ts', './index6.ts', './BackpackManager.ts', './EquipmentManager.ts', './SettingManager.ts', './Share.ts', './EquipmentInstance.ts', './ItemInstance.ts', './EquipmentManager2.ts', './ItemManager.ts', './DetailInfoPrefab.ts', './EquipmentItemPrefab.ts', './ModuleVirtualListPrefab.ts', './SpineAnimation.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Prefab, Sprite, Color, find, CcNative, ExtensionComponent, LanguageManager, Rx, backpackManager, equipmentManager, settingManager, createPlayerInstance, EquipmentInstance, ItemInstance, getEquipmentPrototype, getItemPrototype, DetailInfoPrefab, EquipmentItemPrefab, ModuleVirtualListPrefab, SpineAnimation;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Sprite = module.Sprite;
      Color = module.Color;
      find = module.find;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      createPlayerInstance = module.createPlayerInstance;
    }, function (module) {
      EquipmentInstance = module.EquipmentInstance;
    }, function (module) {
      ItemInstance = module.ItemInstance;
    }, function (module) {
      getEquipmentPrototype = module.getEquipmentPrototype;
    }, function (module) {
      getItemPrototype = module.getItemPrototype;
    }, function (module) {
      DetailInfoPrefab = module.DetailInfoPrefab;
    }, function (module) {
      EquipmentItemPrefab = module.EquipmentItemPrefab;
    }, function (module) {
      ModuleVirtualListPrefab = module.ModuleVirtualListPrefab;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6;
      cclegacy._RF.push({}, "4b170V4KthCkrXrm/NcQgOc", "BackpackPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var BackpackPrefab = exports('BackpackPrefab', (_dec = ccclass('BackpackPrefab'), _dec2 = property(Prefab), _dec3 = property(Prefab), _dec4 = property(Prefab), _dec5 = property(SpineAnimation), _dec6 = property(ModuleVirtualListPrefab), _dec7 = property(ModuleVirtualListPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(BackpackPrefab, _ExtensionComponent);
        function BackpackPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "DetailInfoPrefab", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "EquipmentItemPrefab", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ChangeCharacterPrefab", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "SpineAnimation", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "EquipmentsModuleVirtualListPrefab", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ItemsModuleVirtualListPrefab", _descriptor6, _assertThisInitialized(_this));
          // 修改展示数据
          _this.showDataType = Rx.ref("equipment");
          // equipment | item
          // 修改是否展示详细信息
          _this.showDetailProperty = Rx.ref(false);
          // 关闭回调
          _this._onClose = function () {};
          // 物品节点缓存
          _this.itemsCahceNode = new WeakMap();
          // 节点缓存
          _this.equipmentsCacheNode = new Map();
          return _this;
        }
        var _proto = BackpackPrefab.prototype;
        _proto.onClose = function onClose(fn) {
          this._onClose = fn;
        }

        // 关闭
        ;

        _proto.close = function close() {
          this.node.active = false;
          this.closeShowUserDetail();
          this.changeToEquipment();
          this._onClose();
        }

        // 开始生命周期
        ;

        _proto.start = function start() {
          var _this2 = this;
          var itemBtn = this.node.getChildByName("Ui").getChildByName("Item");
          var equipmentBtn = this.node.getChildByName("Ui").getChildByName("Equipment");
          // 渲染已经装备的装备
          this.effect(function () {
            return _this2.initHasEquipment();
          });
          // 渲染动画
          this.effect(function () {
            return _this2.initAnimation();
          });
          // 渲染背包中的物品
          this.effect(function () {
            _this2.EquipmentsModuleVirtualListPrefab.node.active = false;
            _this2.ItemsModuleVirtualListPrefab.node.active = false;
            if (_this2.showDataType.value === "equipment") {
              equipmentBtn.getComponent(Sprite).color = new Color(255, 255, 255);
              itemBtn.getComponent(Sprite).color = new Color(180, 180, 180);
              _this2.EquipmentsModuleVirtualListPrefab.node.active = true;
              _this2.initEquipments();
            }
            if (_this2.showDataType.value === "item") {
              equipmentBtn.getComponent(Sprite).color = new Color(180, 180, 180);
              itemBtn.getComponent(Sprite).color = new Color(255, 255, 255);
              _this2.ItemsModuleVirtualListPrefab.node.active = true;
              _this2.initItem();
            }
          });
        }

        // 初始化动画 
        ;

        _proto.initAnimation = function initAnimation() {
          var _this3 = this;
          var character = createPlayerInstance();
          character.proto.skeletonData().then(function (sk) {
            _this3.SpineAnimation.skeletonData = sk;
            _this3.SpineAnimation.playAnimation(character.proto.animation.animations.idle);
          });
        };
        // 初始化物品
        _proto.initItem = function initItem() {
          var _this4 = this;
          var canvasNode = find('Canvas');
          this.ItemsModuleVirtualListPrefab.setVirtualList(backpackManager.data.items.filter(function (item) {
            return item.count > 0;
          }), function (dto, index) {
            if (_this4.itemsCahceNode.has(dto)) return _this4.itemsCahceNode.get(dto);
            if (dto.count === 0 || !getItemPrototype(dto.prototype)) return null;
            var node = CcNative.instantiate(_this4.EquipmentItemPrefab);
            var equipmentItemPrefab = node.getComponent(EquipmentItemPrefab);
            var detailNode = CcNative.instantiate(_this4.DetailInfoPrefab);
            var setItemInfo = function setItemInfo() {
              var _backpackManager$data, _backpackManager$data2;
              var instance = new ItemInstance({
                count: (_backpackManager$data = (_backpackManager$data2 = backpackManager.data.items.find(function (i) {
                  return i.prototype === dto.prototype;
                })) == null ? void 0 : _backpackManager$data2.count) != null ? _backpackManager$data : 0,
                Proto: getItemPrototype(dto.prototype)
              });
              equipmentItemPrefab.setInfo(instance, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
                var getDetail;
                return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                  while (1) switch (_context3.prev = _context3.next) {
                    case 0:
                      getDetail = /*#__PURE__*/function () {
                        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
                          var _backpackManager$data3, _backpackManager$data4;
                          var instance;
                          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                            while (1) switch (_context2.prev = _context2.next) {
                              case 0:
                                instance = new ItemInstance({
                                  count: (_backpackManager$data3 = (_backpackManager$data4 = backpackManager.data.items.find(function (i) {
                                    return i.prototype === dto.prototype;
                                  })) == null ? void 0 : _backpackManager$data4.count) != null ? _backpackManager$data3 : 0,
                                  Proto: getItemPrototype(dto.prototype)
                                });
                                _context2.t0 = instance.proto.name;
                                _context2.next = 4;
                                return instance.proto.icon();
                              case 4:
                                _context2.t1 = _context2.sent;
                                _context2.t2 = LanguageManager.getEntry("Count").getValue(settingManager.data.language) + " " + instance.count;
                                _context2.t3 = instance.proto.description;
                                _context2.t4 = instance.proto.canUse ? [{
                                  label: LanguageManager.getEntry("Use").getValue(settingManager.data.language),
                                  callback: function () {
                                    var _callback = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(close) {
                                      var _backpackManager$data5, _backpackManager$data6;
                                      var count;
                                      return _regeneratorRuntime().wrap(function _callee$(_context) {
                                        while (1) switch (_context.prev = _context.next) {
                                          case 0:
                                            backpackManager.data.useItem(instance, 1);
                                            count = (_backpackManager$data5 = (_backpackManager$data6 = backpackManager.data.items.find(function (i) {
                                              return i.prototype === dto.prototype;
                                            })) == null ? void 0 : _backpackManager$data6.count) != null ? _backpackManager$data5 : 0;
                                            _context.t0 = detailNode.getComponent(DetailInfoPrefab);
                                            _context.next = 5;
                                            return getDetail();
                                          case 5:
                                            _context.t1 = _context.sent;
                                            _context.t0.setDetail.call(_context.t0, _context.t1);
                                            if (!(count <= 0)) {
                                              _context.next = 10;
                                              break;
                                            }
                                            close();
                                            return _context.abrupt("return");
                                          case 10:
                                          case "end":
                                            return _context.stop();
                                        }
                                      }, _callee);
                                    }));
                                    function callback(_x) {
                                      return _callback.apply(this, arguments);
                                    }
                                    return callback;
                                  }()
                                }] : [];
                                _context2.t5 = {
                                  title: _context2.t0,
                                  icon: _context2.t1,
                                  rightMessage: _context2.t2,
                                  bottomMessage: _context2.t3,
                                  buttons: _context2.t4
                                };
                                _context2.t6 = [_context2.t5];
                                _context2.t7 = function closeCallback() {
                                  canvasNode.removeChild(detailNode);
                                  setItemInfo();
                                };
                                return _context2.abrupt("return", {
                                  content: _context2.t6,
                                  closeCallback: _context2.t7
                                });
                              case 12:
                              case "end":
                                return _context2.stop();
                            }
                          }, _callee2);
                        }));
                        return function getDetail() {
                          return _ref2.apply(this, arguments);
                        };
                      }();
                      _context3.t0 = detailNode.getComponent(DetailInfoPrefab);
                      _context3.next = 4;
                      return getDetail();
                    case 4:
                      _context3.t1 = _context3.sent;
                      _context3.t0.setDetail.call(_context3.t0, _context3.t1);
                      canvasNode.addChild(detailNode);
                    case 7:
                    case "end":
                      return _context3.stop();
                  }
                }, _callee3);
              })));
            };
            setItemInfo();
            _this4.itemsCahceNode.set(dto, node);
            return node;
          });
        };
        // 初始化所有装备
        _proto.initEquipments = function initEquipments() {
          var _this5 = this;
          // canvas节点
          var canvasNode = find('Canvas');
          // 设置虚拟列表
          this.EquipmentsModuleVirtualListPrefab.setVirtualList(equipmentManager.data.equipments, function (dto, index) {
            var node = null;
            if (_this5.equipmentsCacheNode.has(dto)) node = _this5.equipmentsCacheNode.get(dto);else node = CcNative.instantiate(_this5.EquipmentItemPrefab);
            var equipmentItemPrefab = node.getComponent(EquipmentItemPrefab);
            var instance = new EquipmentInstance({
              id: dto.id,
              lv: dto.lv,
              quality: dto.quality,
              Proto: getEquipmentPrototype(dto.prototype)
            });
            var comparisonDTO = equipmentManager.data.equipment[instance.proto.type];
            var comparison = comparisonDTO ? new EquipmentInstance({
              id: comparisonDTO.id,
              lv: comparisonDTO.lv,
              quality: comparisonDTO.quality,
              Proto: getEquipmentPrototype(comparisonDTO.prototype)
            }) : null;
            equipmentItemPrefab.setInfo(instance, function () {
              return showDetail(instance, comparison, equipmentItemPrefab);
            });
            _this5.equipmentsCacheNode.set(dto, node);
            return node;
          });
          // 展示详情
          var showDetail = /*#__PURE__*/function () {
            var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(instance, comparison, equipmentItemPrefab) {
              var node, content;
              return _regeneratorRuntime().wrap(function _callee4$(_context4) {
                while (1) switch (_context4.prev = _context4.next) {
                  case 0:
                    if (instance) {
                      _context4.next = 2;
                      break;
                    }
                    return _context4.abrupt("return");
                  case 2:
                    node = CcNative.instantiate(_this5.DetailInfoPrefab);
                    content = [];
                    if (!comparison) {
                      _context4.next = 15;
                      break;
                    }
                    _context4.t0 = content;
                    _context4.t1 = comparison.proto.name;
                    _context4.next = 9;
                    return comparison.proto.icon();
                  case 9:
                    _context4.t2 = _context4.sent;
                    _context4.t3 = comparison.proto.propertyDescription;
                    _context4.t4 = comparison.proto.description;
                    _context4.t5 = equipmentItemPrefab.getQualitySpriteFrame(comparison.quality);
                    _context4.t6 = {
                      title: _context4.t1,
                      icon: _context4.t2,
                      rightMessage: _context4.t3,
                      bottomMessage: _context4.t4,
                      boxIcon: _context4.t5
                    };
                    _context4.t0.push.call(_context4.t0, _context4.t6);
                  case 15:
                    _context4.t7 = content;
                    _context4.t8 = instance.proto.name;
                    _context4.next = 19;
                    return instance.proto.icon();
                  case 19:
                    _context4.t9 = _context4.sent;
                    _context4.t10 = instance.proto.propertyDescription;
                    _context4.t11 = instance.proto.description;
                    _context4.t12 = equipmentItemPrefab.getQualitySpriteFrame(instance.quality);
                    _context4.t13 = [{
                      label: LanguageManager.getEntry("Equipment").getValue(settingManager.data.language),
                      callback: function callback(close) {
                        close();
                        equipmentManager.data.equip(instance);
                        equipmentManager.save();
                      }
                    }];
                    _context4.t14 = {
                      title: _context4.t8,
                      icon: _context4.t9,
                      rightMessage: _context4.t10,
                      bottomMessage: _context4.t11,
                      boxIcon: _context4.t12,
                      buttons: _context4.t13
                    };
                    _context4.t7.push.call(_context4.t7, _context4.t14);
                    node.getComponent(DetailInfoPrefab).setDetail({
                      content: content,
                      closeCallback: function closeCallback() {
                        return canvasNode.removeChild(node);
                      }
                    });
                    canvasNode.addChild(node);
                  case 28:
                  case "end":
                    return _context4.stop();
                }
              }, _callee4);
            }));
            return function showDetail(_x2, _x3, _x4) {
              return _ref3.apply(this, arguments);
            };
          }();
        }

        // 初始化已经装备的装备
        ;

        _proto.initHasEquipment = function initHasEquipment() {
          var _this6 = this;
          var hasEquipmentNode = this.node.getChildByName("InfoPanel").getChildByName("HasEquipment");
          var character = createPlayerInstance();
          // 展示详情
          var showDetail = /*#__PURE__*/function () {
            var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(instance) {
              var node;
              return _regeneratorRuntime().wrap(function _callee5$(_context5) {
                while (1) switch (_context5.prev = _context5.next) {
                  case 0:
                    if (instance) {
                      _context5.next = 2;
                      break;
                    }
                    return _context5.abrupt("return");
                  case 2:
                    node = CcNative.instantiate(_this6.DetailInfoPrefab);
                    _context5.t0 = node.getComponent(DetailInfoPrefab);
                    _context5.t1 = instance.proto.name;
                    _context5.next = 7;
                    return instance.proto.icon();
                  case 7:
                    _context5.t2 = _context5.sent;
                    _context5.t3 = instance.proto.propertyDescription;
                    _context5.t4 = instance.proto.description;
                    _context5.t5 = hasEquipmentNode.children[0].getComponent(EquipmentItemPrefab).getQualitySpriteFrame(instance.quality);
                    _context5.t6 = [{
                      label: LanguageManager.getEntry("Unload").getValue(settingManager.data.language),
                      callback: function callback() {
                        equipmentManager.data.unequip(instance.proto.type);
                        _this6.node.removeChild(node);
                        equipmentManager.save();
                      }
                    }];
                    _context5.t7 = {
                      title: _context5.t1,
                      icon: _context5.t2,
                      rightMessage: _context5.t3,
                      bottomMessage: _context5.t4,
                      boxIcon: _context5.t5,
                      buttons: _context5.t6
                    };
                    _context5.t8 = [_context5.t7];
                    _context5.t9 = function closeCallback() {
                      return _this6.node.removeChild(node);
                    };
                    _context5.t10 = {
                      content: _context5.t8,
                      closeCallback: _context5.t9
                    };
                    _context5.t0.setDetail.call(_context5.t0, _context5.t10);
                    _this6.node.addChild(node);
                  case 18:
                  case "end":
                    return _context5.stop();
                }
              }, _callee5);
            }));
            return function showDetail(_x5) {
              return _ref4.apply(this, arguments);
            };
          }();
          // 渲染装备
          hasEquipmentNode.getChildByName("Weapon").getComponent(EquipmentItemPrefab).setInfo(character.equipments.weapon, character.equipments.weapon ? function () {
            return showDetail(character.equipments.weapon);
          } : void 0);
          hasEquipmentNode.getChildByName("Armor").getComponent(EquipmentItemPrefab).setInfo(character.equipments.armor, character.equipments.armor ? function () {
            return showDetail(character.equipments.armor);
          } : void 0);
          hasEquipmentNode.getChildByName("Accessory").getComponent(EquipmentItemPrefab).setInfo(character.equipments.accessory, character.equipments.accessory ? function () {
            return showDetail(character.equipments.accessory);
          } : void 0);
          hasEquipmentNode.getChildByName("Shoes").getComponent(EquipmentItemPrefab).setInfo(character.equipments.shoes, character.equipments.shoes ? function () {
            return showDetail(character.equipments.shoes);
          } : void 0);
          return;
        }

        // 切换角色
        ;

        _proto.changeCharacter = function changeCharacter() {
          var node = CcNative.instantiate(this.ChangeCharacterPrefab);
          this.onClose = function () {
            return node.destroy();
          };
          this.node.addChild(node);
        }

        // 改变展示类型
        ;

        _proto.changeToItem = function changeToItem() {
          this.showDataType.value = "item";
        };
        _proto.changeToEquipment = function changeToEquipment() {
          this.showDataType.value = "equipment";
        }

        // 改变展示用户详细信息
        ;

        _proto.openShowUserDetail = function openShowUserDetail() {
          this.showDetailProperty.value = true;
        };
        _proto.closeShowUserDetail = function closeShowUserDetail() {
          this.showDetailProperty.value = false;
        };
        return BackpackPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "DetailInfoPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "EquipmentItemPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "ChangeCharacterPrefab", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "SpineAnimation", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "EquipmentsModuleVirtualListPrefab", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "ItemsModuleVirtualListPrefab", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/baseHandlers.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts', './arrayInstrumentations.ts', './constants.ts', './dep.ts', './reactive.ts', './ref.ts', './general.ts', './makeMap.ts'], function (exports) {
  var _inheritsLoose, cclegacy, warn, arrayInstrumentations, TriggerOpTypes, TrackOpTypes, ReactiveFlags, trigger, track, ITERATE_KEY, isReadonly, isShallow, toRaw, shallowReadonlyMap, readonlyMap, shallowReactiveMap, reactiveMap, readonly, reactive, isRef, isArray, isIntegerKey, hasOwn, hasChanged, isSymbol, isObject, makeMap;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      arrayInstrumentations = module.arrayInstrumentations;
    }, function (module) {
      TriggerOpTypes = module.TriggerOpTypes;
      TrackOpTypes = module.TrackOpTypes;
      ReactiveFlags = module.ReactiveFlags;
    }, function (module) {
      trigger = module.trigger;
      track = module.track;
      ITERATE_KEY = module.ITERATE_KEY;
    }, function (module) {
      isReadonly = module.isReadonly;
      isShallow = module.isShallow;
      toRaw = module.toRaw;
      shallowReadonlyMap = module.shallowReadonlyMap;
      readonlyMap = module.readonlyMap;
      shallowReactiveMap = module.shallowReactiveMap;
      reactiveMap = module.reactiveMap;
      readonly = module.readonly;
      reactive = module.reactive;
    }, function (module) {
      isRef = module.isRef;
    }, function (module) {
      isArray = module.isArray;
      isIntegerKey = module.isIntegerKey;
      hasOwn = module.hasOwn;
      hasChanged = module.hasChanged;
      isSymbol = module.isSymbol;
      isObject = module.isObject;
    }, function (module) {
      makeMap = module.makeMap;
    }],
    execute: function () {
      cclegacy._RF.push({}, "0339fKdkglDzoUHkLVUWrLb", "baseHandlers", undefined);
      var isNonTrackableKeys = /*@__PURE__*/makeMap("__proto__,__v_isRef,__isVue");
      var builtInSymbols = new Set( /*@__PURE__*/
      Object.getOwnPropertyNames(Symbol)
      // ios10.x Object.getOwnPropertyNames(Symbol) can enumerate 'arguments' and 'caller'
      // but accessing them on Symbol leads to TypeError because Symbol is a strict mode
      // function
      .filter(function (key) {
        return key !== 'arguments' && key !== 'caller';
      }).map(function (key) {
        return Symbol[key];
      }).filter(isSymbol));
      function hasOwnProperty(key) {
        // #10455 hasOwnProperty may be called with non-string values
        if (!isSymbol(key)) key = String(key);
        var obj = toRaw(this);
        track(obj, TrackOpTypes.HAS, key);
        return obj.hasOwnProperty(key);
      }
      var BaseReactiveHandler = /*#__PURE__*/function () {
        function BaseReactiveHandler(_isReadonly, _isShallow) {
          if (_isReadonly === void 0) {
            _isReadonly = false;
          }
          if (_isShallow === void 0) {
            _isShallow = false;
          }
          this._isReadonly = _isReadonly;
          this._isShallow = _isShallow;
        }
        var _proto = BaseReactiveHandler.prototype;
        _proto.get = function get(target, key, receiver) {
          if (key === ReactiveFlags.SKIP) return target[ReactiveFlags.SKIP];
          var isReadonly = this._isReadonly,
            isShallow = this._isShallow;
          if (key === ReactiveFlags.IS_REACTIVE) {
            return !isReadonly;
          } else if (key === ReactiveFlags.IS_READONLY) {
            return isReadonly;
          } else if (key === ReactiveFlags.IS_SHALLOW) {
            return isShallow;
          } else if (key === ReactiveFlags.RAW) {
            if (receiver === (isReadonly ? isShallow ? shallowReadonlyMap : readonlyMap : isShallow ? shallowReactiveMap : reactiveMap).get(target) ||
            // receiver is not the reactive proxy, but has the same prototype
            // this means the receiver is a user proxy of the reactive proxy
            Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {
              return target;
            }
            // early return undefined
            return;
          }
          var targetIsArray = isArray(target);
          if (!isReadonly) {
            var fn;
            if (targetIsArray && (fn = arrayInstrumentations[key])) {
              return fn;
            }
            if (key === 'hasOwnProperty') {
              return hasOwnProperty;
            }
          }
          var res = Reflect.get(target, key,
          // if this is a proxy wrapping a ref, return methods using the raw ref
          // as receiver so that we don't have to call `toRaw` on the ref in all
          // its class methods
          isRef(target) ? target : receiver);
          if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
            return res;
          }
          if (!isReadonly) {
            track(target, TrackOpTypes.GET, key);
          }
          if (isShallow) {
            return res;
          }
          if (isRef(res)) {
            // ref unwrapping - skip unwrap for Array + integer key.
            return targetIsArray && isIntegerKey(key) ? res : res.value;
          }
          if (isObject(res)) {
            // Convert returned value into a proxy as well. we do the isObject check
            // here to avoid invalid value warning. Also need to lazy access readonly
            // and reactive here to avoid circular dependency.
            return isReadonly ? readonly(res) : reactive(res);
          }
          return res;
        };
        return BaseReactiveHandler;
      }();
      var MutableReactiveHandler = /*#__PURE__*/function (_BaseReactiveHandler) {
        _inheritsLoose(MutableReactiveHandler, _BaseReactiveHandler);
        function MutableReactiveHandler(isShallow) {
          if (isShallow === void 0) {
            isShallow = false;
          }
          return _BaseReactiveHandler.call(this, false, isShallow) || this;
        }
        var _proto2 = MutableReactiveHandler.prototype;
        _proto2.set = function set(target, key, value, receiver) {
          var oldValue = target[key];
          if (!this._isShallow) {
            var isOldValueReadonly = isReadonly(oldValue);
            if (!isShallow(value) && !isReadonly(value)) {
              oldValue = toRaw(oldValue);
              value = toRaw(value);
            }
            if (!isArray(target) && isRef(oldValue) && !isRef(value)) {
              if (isOldValueReadonly) {
                return false;
              } else {
                oldValue.value = value;
                return true;
              }
            }
          }
          var hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
          var result = Reflect.set(target, key, value, isRef(target) ? target : receiver);
          // don't trigger if target is something up in the prototype chain of original
          if (target === toRaw(receiver)) {
            if (!hadKey) {
              trigger(target, TriggerOpTypes.ADD, key, value);
            } else if (hasChanged(value, oldValue)) {
              trigger(target, TriggerOpTypes.SET, key, value, oldValue);
            }
          }
          return result;
        };
        _proto2.deleteProperty = function deleteProperty(target, key) {
          var hadKey = hasOwn(target, key);
          var oldValue = target[key];
          var result = Reflect.deleteProperty(target, key);
          if (result && hadKey) {
            trigger(target, TriggerOpTypes.DELETE, key, undefined, oldValue);
          }
          return result;
        };
        _proto2.has = function has(target, key) {
          var result = Reflect.has(target, key);
          if (!isSymbol(key) || !builtInSymbols.has(key)) {
            track(target, TrackOpTypes.HAS, key);
          }
          return result;
        };
        _proto2.ownKeys = function ownKeys(target) {
          track(target, TrackOpTypes.ITERATE, isArray(target) ? 'length' : ITERATE_KEY);
          return Reflect.ownKeys(target);
        };
        return MutableReactiveHandler;
      }(BaseReactiveHandler);
      var ReadonlyReactiveHandler = /*#__PURE__*/function (_BaseReactiveHandler2) {
        _inheritsLoose(ReadonlyReactiveHandler, _BaseReactiveHandler2);
        function ReadonlyReactiveHandler(isShallow) {
          if (isShallow === void 0) {
            isShallow = false;
          }
          return _BaseReactiveHandler2.call(this, true, isShallow) || this;
        }
        var _proto3 = ReadonlyReactiveHandler.prototype;
        _proto3.set = function set(target, key) {
          {
            warn("Set operation on key \"" + String(key) + "\" failed: target is readonly.", target);
          }
          return true;
        };
        _proto3.deleteProperty = function deleteProperty(target, key) {
          {
            warn("Delete operation on key \"" + String(key) + "\" failed: target is readonly.", target);
          }
          return true;
        };
        return ReadonlyReactiveHandler;
      }(BaseReactiveHandler);
      var mutableHandlers = exports('mutableHandlers', /*@__PURE__*/new MutableReactiveHandler());
      var readonlyHandlers = exports('readonlyHandlers', /*@__PURE__*/new ReadonlyReactiveHandler());
      var shallowReactiveHandlers = exports('shallowReactiveHandlers', /*@__PURE__*/new MutableReactiveHandler(true));

      // Props handlers are special in the sense that it should not unwrap top-level
      // refs (in order to allow refs to be explicitly passed down), but should
      // retain the reactivity of the normal readonly object.
      var shallowReadonlyHandlers = exports('shallowReadonlyHandlers', /*@__PURE__*/new ReadonlyReactiveHandler(true));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BaseInstanceProperty.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "047dflYIX1Dp4nck9TxCjwK", "BaseInstanceProperty", undefined);
      var BaseInstanceProperty = exports('BaseInstanceProperty', /*#__PURE__*/function () {
        function BaseInstanceProperty() {
          // 等级
          this.lv = 1;
        }
        _createClass(BaseInstanceProperty, [{
          key: "maxHp",
          get:
          // 最大生命值
          function get() {
            return 0;
          }
          // 最大魔法值
        }, {
          key: "maxMp",
          get: function get() {
            return 0;
          }
          // 物理攻击力
        }, {
          key: "physicalAttack",
          get: function get() {
            return 0;
          }
          // 魔法攻击力
        }, {
          key: "magicAttack",
          get: function get() {
            return 0;
          }
          // 光属性攻击力
        }, {
          key: "lightAttack",
          get: function get() {
            return 0;
          }
          // 暗属性攻击力
        }, {
          key: "darkAttack",
          get: function get() {
            return 0;
          }
          // 物理防御力
        }, {
          key: "physicalDefense",
          get: function get() {
            return 0;
          }
          // 魔法防御力
        }, {
          key: "magicDefense",
          get: function get() {
            return 0;
          }
          // 光属性抗性
        }, {
          key: "lightResistance",
          get: function get() {
            return 0;
          }
          // 暗属性抗性
        }, {
          key: "darkResistance",
          get: function get() {
            return 0;
          }
          // 物理穿透
        }, {
          key: "physicalPenetration",
          get: function get() {
            return 0;
          }
          // 魔法穿透
        }, {
          key: "magicPenetration",
          get: function get() {
            return 0;
          }
          // 暴击率 0 - 1
        }, {
          key: "criticalRate",
          get: function get() {
            return 0;
          }
          // 暴击伤害
        }, {
          key: "criticalDamage",
          get: function get() {
            return 0;
          }
          // 攻击速度
        }, {
          key: "attackSpeed",
          get: function get() {
            return 0;
          }
          // 冷却指数
        }, {
          key: "coolDown",
          get: function get() {
            return 0;
          }
        }]);
        return BaseInstanceProperty;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BasePrototypeProperty.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "53f0eWQejVCL55KW3cVf5u4", "BasePrototypeProperty", undefined);
      var BasePrototypeProperty = exports('BasePrototypeProperty', /*#__PURE__*/function () {
        // 构造器
        function BasePrototypeProperty(propertyData) {
          var _this = this;
          // 自定义getter
          this.getterMap = new Map();
          // 生命值信息
          this._maxHp = 0;
          // 魔法值信息
          this._maxMp = 0;
          // 物理攻击力信息
          this._physicalAttack = 0;
          // 魔法攻击力信息
          this._magicAttack = 0;
          // 光属性攻击力信息
          this._lightAttack = 0;
          // 暗属性伤害信息
          this._darkAttack = 0;
          // 物理防御力信息
          this._physicalDefense = 0;
          // 魔法防御力信息
          this._magicDefense = 0;
          // 光属性抗性信息
          this._lightResistance = 0;
          // 暗属性抗性信息
          this._darkResistance = 0;
          // 物理穿透信息
          this._physicalPenetration = 0;
          // 魔法穿透信息
          this._magicPenetration = 0;
          // 暴击率信息
          this._criticalRate = 0;
          // 暴击伤害信息
          this._criticalDamage = 0;
          // 冷却指数
          this._coolDown = 0;
          // 攻击速度信息
          this._attackSpeed = 0;
          if (propertyData) {
            Object.keys(propertyData).forEach(function (key) {
              if (_this.hasOwnProperty("_" + key)) {
                _this["_" + key] = propertyData[key];
              }
            });
          }
        }

        // 设置属性信息
        var _proto = BasePrototypeProperty.prototype;
        _proto.setProperty = function setProperty(key, value) {
          if (typeof value === "number") {
            if (this.hasOwnProperty("_" + key)) {
              this["_" + key] = value;
            }
          } else {
            this.getterMap.set(key, value);
          }
          return this;
        };
        _createClass(BasePrototypeProperty, [{
          key: "maxHp",
          get: function get() {
            if (this.getterMap.get("maxHp")) {
              return this.getterMap.get("maxHp")(this._maxHp);
            }
            return this._maxHp;
          }
        }, {
          key: "maxMp",
          get: function get() {
            if (this.getterMap.get("maxMp")) {
              return this.getterMap.get("maxMp")(this._maxMp);
            }
            return this._maxMp;
          }
        }, {
          key: "physicalAttack",
          get: function get() {
            if (this.getterMap.get("physicalAttack")) {
              return this.getterMap.get("physicalAttack")(this._physicalAttack);
            }
            return this._physicalAttack;
          }
        }, {
          key: "magicAttack",
          get: function get() {
            if (this.getterMap.get("magicAttack")) {
              return this.getterMap.get("magicAttack")(this._magicAttack);
            }
            return this._magicAttack;
          }
        }, {
          key: "lightAttack",
          get: function get() {
            if (this.getterMap.get("lightAttack")) {
              return this.getterMap.get("lightAttack")(this._lightAttack);
            }
            return this._lightAttack;
          }
        }, {
          key: "darkAttack",
          get: function get() {
            if (this.getterMap.get("darkAttack")) {
              return this.getterMap.get("darkAttack")(this._darkAttack);
            }
            return this._darkAttack;
          }
        }, {
          key: "physicalDefense",
          get: function get() {
            if (this.getterMap.get("physicalDefense")) {
              return this.getterMap.get("physicalDefense")(this._physicalDefense);
            }
            return this._physicalDefense;
          }
        }, {
          key: "magicDefense",
          get: function get() {
            if (this.getterMap.get("magicDefense")) {
              return this.getterMap.get("magicDefense")(this._magicDefense);
            }
            return this._magicDefense;
          }
        }, {
          key: "lightResistance",
          get: function get() {
            if (this.getterMap.get("lightResistance")) {
              return this.getterMap.get("lightResistance")(this._lightResistance);
            }
            return this._lightResistance;
          }
        }, {
          key: "darkResistance",
          get: function get() {
            if (this.getterMap.get("darkResistance")) {
              return this.getterMap.get("darkResistance")(this._darkResistance);
            }
            return this._darkResistance;
          }
        }, {
          key: "physicalPenetration",
          get: function get() {
            if (this.getterMap.get("physicalPenetration")) {
              return this.getterMap.get("physicalPenetration")(this._physicalPenetration);
            }
            return this._physicalPenetration;
          }
        }, {
          key: "magicPenetration",
          get: function get() {
            if (this.getterMap.get("magicPenetration")) {
              return this.getterMap.get("magicPenetration")(this._magicPenetration);
            }
            return this._magicPenetration;
          }
        }, {
          key: "criticalRate",
          get: function get() {
            if (this.getterMap.get("criticalRate")) {
              return this.getterMap.get("criticalRate")(this._criticalRate);
            }
            return this._criticalRate;
          }
        }, {
          key: "criticalDamage",
          get: function get() {
            if (this.getterMap.get("criticalDamage")) {
              return this.getterMap.get("criticalDamage")(this._criticalDamage);
            }
            return this._criticalDamage;
          }
        }, {
          key: "coolDown",
          get: function get() {
            if (this.getterMap.has("coolDown")) {
              return this.getterMap.get("coolDown")(this._coolDown);
            }
            return this._coolDown;
          }
        }, {
          key: "attackSpeed",
          get: function get() {
            if (this.getterMap.get("attackSpeed")) {
              return this.getterMap.get("attackSpeed")(this._attackSpeed);
            }
            return this._attackSpeed;
          }
        }]);
        return BasePrototypeProperty;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Brave.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './PlayerCharacterManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, RegisterPlayerCharacter;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      RegisterPlayerCharacter = module.RegisterPlayerCharacter;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "b12b9h0oMVG07Hn61ZYyPio", "Brave", undefined);
      var Brave_Entry = (_dec = RegisterLanguageEntry("Brave"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "勇者";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Brave";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "勇者";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("Brave Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "被世界意志选中的人，拥有各项均衡的属性和极大的成长空间";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A person chosen by the will of the world, with balanced attributes and great growth potential.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "世界の意志に選ばれた者、各項目が均衡の取れた属性と大きな成長の可能性を持つ。";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Brave = exports('Brave', (_dec3 = RegisterCharacter("Brave"), _dec4 = RegisterPlayerCharacter("Brave"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(Brave, _CharacterPrototype);
        function Brave() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 1000,
            maxMp: 150,
            physicalAttack: 80,
            magicAttack: 40,
            physicalDefense: 20,
            magicDefense: 20,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 5,
            magicPenetration: 5,
            attackSpeed: 1.0
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 100,
            maxMp: 10,
            physicalAttack: 10,
            magicAttack: 5,
            physicalDefense: 5,
            magicDefense: 5,
            lightResistance: 2,
            darkResistance: 2
          });
          return _this;
        }
        var _proto = Brave.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Player/Brave/hero0001", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        }

        // 攻击动画Promise会在攻击动作计算完成后resolve
        ;

        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack01",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Attack02",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(Brave, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Brave").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Brave Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return Brave;
      }(CharacterPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BuffInstance.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9cda35vp6lEhqBzZSREVNTs", "BuffInstance", undefined);
      var BuffInstance = exports('BuffInstance',
      // 构造器
      function BuffInstance(option) {
        // 数据区域
        this.data = new Map();
        // 对应的原型
        this.proto = null;
        // 所属角色
        this.character = null;
        // 创建的角色
        this.creator = null;
        // 额外属性
        this.extraProperty = {};
        this.proto = new option.Proto(this);
        if (option.character) this.character = option.character;
        if (option.extraProperty) this.extraProperty = option.extraProperty;
        this.creator = option.creator || this.character;
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BuffManager.ts", ['cc', './BuffPrototype.ts'], function (exports) {
  var cclegacy, BuffPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      BuffPrototype = module.BuffPrototype;
    }],
    execute: function () {
      exports({
        getAllBuffKeys: getAllBuffKeys,
        getBuffKey: getBuffKey,
        getBuffPrototype: getBuffPrototype
      });
      cclegacy._RF.push({}, "943b817cqNCa7Hq0T7e1xDo", "BuffManager", undefined);

      // 该文件用于管理游戏中的Buff系统
      var registry = new Map();
      var registryReverse = new Map();
      // 装备用品注册装饰器
      var RegisterBuff = exports('RegisterBuff', function RegisterBuff(key) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
        };
      });

      // 获取所有注册的装备原型key
      function getAllBuffKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取装备原型
      function getBuffPrototype(key) {
        return registry.get(key);
      }

      // 根据装备原型或者实例获取key
      function getBuffKey(proto) {
        if (proto instanceof BuffPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/BuffPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "99ad3P2ijhM7LNBqe/cNeq3", "BuffPrototype", undefined);
      var BuffPrototype = exports('BuffPrototype', /*#__PURE__*/function () {
        // 保存对应的实例
        function BuffPrototype(instance) {
          this.instance = instance;
        }
        // 图标信息 Sprite
        var _proto = BuffPrototype.prototype;
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }() // 被添加时的回调
        ;

        _proto.onAdd = function onAdd() {}
        // 被移除时的回调
        ;

        _proto.onRemove = function onRemove() {}
        // 每一帧回调
        ;

        _proto.tick = function tick(dt) {};
        _createClass(BuffPrototype, [{
          key: "name",
          get:
          // 名称信息
          function get() {
            return "Buff Name";
          }
          // 描述信息
        }, {
          key: "description",
          get: function get() {
            return "Buff Description";
          }
        }]);
        return BuffPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Burn.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './SettingManager.ts', './BuffPrototype.ts', './CharacterPrototype.ts', './BuffManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, settingManager, BuffPrototype, DamageType, FromType, RegisterBuff;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      BuffPrototype = module.BuffPrototype;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }, function (module) {
      RegisterBuff = module.RegisterBuff;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "ff19bPivSNDkr1XKUYdvra4", "Burn", undefined);
      var Name = (_dec = RegisterLanguageEntry("Burn"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "灼烧";
          }
        }, {
          key: "en",
          get: function get() {
            return "Burn";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "燃焼";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("Burn Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            return "\u6BCF\u79D2\u53D7\u5230 " + this.data.damage + " \u4F24\u5BB3, \u6301\u7EED5\u79D2";
          }
        }, {
          key: "en",
          get: function get() {
            return "Take " + this.data.damage + " damage per second, lasts for 5 seconds";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "\u6BCE\u79D2 " + this.data.damage + " \u306E\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u308B\u30015\u79D2\u6301\u7D9A";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var Burn = exports('Burn', (_dec3 = RegisterBuff("Burn"), _dec3(_class3 = /*#__PURE__*/function (_BuffPrototype) {
        _inheritsLoose(Burn, _BuffPrototype);
        function Burn() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _BuffPrototype.call.apply(_BuffPrototype, [this].concat(args)) || this;
          _this.tickTime = 0;
          _this.effectTime = 0;
          return _this;
        }
        var _proto = Burn.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Buff/Burn/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.tick = function tick(dt) {
          this.tickTime += dt;
          if (this.tickTime >= (this.instance.data.get("time") || 5)) this.instance.character.removeBuff({
            Proto: Burn
          });
          if (this.effectTime > this.tickTime) return;
          this.effectTime += 1;
          this.instance.character.beDamage({
            atk: this.instance.data.get("damage") || 0,
            type: DamageType.real,
            fromType: FromType.buff,
            from: this.instance.character
          });
        };
        _createClass(Burn, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Burn").getValue(settingManager.data.language, {
              damage: this.instance.data.get("damage")
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Burn Description").getValue(settingManager.data.language, {
              damage: this.instance.data.get("damage")
            });
          }
        }]);
        return Burn;
      }(BuffPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ChangeCharacterPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './PlayerCharacterManager.ts', './CharacterInstance.ts', './ModuleVirtualListPrefab.ts', './CharacterManager.ts', './SpineAnimation.ts', './SkillManager2.ts', './Message.ts', './LanguageEntry.ts', './SettingManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createForOfIteratorHelperLoose, _createClass, cclegacy, _decorator, Node, Label, instantiate, Sprite, Button, ExtensionComponent, getPlayerCharacterPrototype, getAllPlayerCharacterMapKeys, getPlayerCharacterSort, CharacterInstance, ModuleVirtualListPrefab, characterManager, SpineAnimation, skillManager, message, LanguageEntry, settingManager;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createForOfIteratorHelperLoose = module.createForOfIteratorHelperLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      Label = module.Label;
      instantiate = module.instantiate;
      Sprite = module.Sprite;
      Button = module.Button;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      getPlayerCharacterPrototype = module.getPlayerCharacterPrototype;
      getAllPlayerCharacterMapKeys = module.getAllPlayerCharacterMapKeys;
      getPlayerCharacterSort = module.getPlayerCharacterSort;
    }, function (module) {
      CharacterInstance = module.CharacterInstance;
    }, function (module) {
      ModuleVirtualListPrefab = module.ModuleVirtualListPrefab;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      skillManager = module.skillManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3;
      cclegacy._RF.push({}, "e3a1bi5Pq1CgIHp461nfKYJ", "ChangeCharacterPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ChangeCharacterPrefab = exports('ChangeCharacterPrefab', (_dec = ccclass('ChangeCharacterPrefab'), _dec2 = property(Node), _dec3 = property(ModuleVirtualListPrefab), _dec4 = property(SpineAnimation), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ChangeCharacterPrefab, _ExtensionComponent);
        function ChangeCharacterPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 角色头像模板
          _initializerDefineProperty(_this, "TemplateAvatarNode", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "virtualListPrefab", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "spineAnimation", _descriptor3, _assertThisInitialized(_this));
          // 关闭回调
          _this.closeCallback = null;
          // 当前选择的角色
          _this.currentSelectCharacter = "";
          return _this;
        }
        var _proto = ChangeCharacterPrefab.prototype;
        // 关闭选择角色界面
        _proto.close = function close() {
          var _this$node$parent;
          (_this$node$parent = this.node.parent) == null || _this$node$parent.removeChild(this.node);
          if (this.closeCallback) {
            this.closeCallback();
            this.closeCallback = null;
          }
        }

        // 开始
        ;

        _proto.start = function start() {
          this.currentSelectCharacter = characterManager.data.currentCharacter;
          this.renderCharacter();
          this.renderAllCharacter();
        }

        // 渲染展示角色
        ;

        _proto.renderCharacter = function renderCharacter() {
          var _this2 = this;
          var instance = new CharacterInstance({
            Proto: getPlayerCharacterPrototype(this.currentSelectCharacter)
          });
          // 渲染名称
          this.node.getChildByName("Show").getChildByName("Name").getComponent(Label).string = instance.proto.name;
          // 绑定动画
          instance.proto.skeletonData().then(function (skeletonData) {
            _this2.spineAnimation.skeletonData = skeletonData;
            _this2.spineAnimation.playAnimation(instance.proto.animation.animations.idle);
          });
        }

        // 渲染所有角色
        ;

        _proto.renderAllCharacter = function renderAllCharacter() {
          var _this3 = this;
          // 移除
          this.TemplateAvatarNode.parent = null;
          // 获取所有角色
          var allCharacterKeys = getAllPlayerCharacterMapKeys().sort(function (k1, k2) {
            return getPlayerCharacterSort(k1) - getPlayerCharacterSort(k2);
          });
          // 缓存
          var playerNodeCache = new Map();
          // 遍历所有角色
          var _loop = function _loop() {
            var key = _step.value;
            var lock = !characterManager.data.characters.includes(key);
            var instance = new CharacterInstance({
              Proto: getPlayerCharacterPrototype(key)
            });
            var avatar = instantiate(_this3.TemplateAvatarNode);
            var maskNode = avatar.getChildByName("Mask");
            var iconNode = avatar.getChildByName("Icon");
            var lockNode = avatar.getChildByName("Lock");
            if (lock) lockNode.active = true;else lockNode.active = false;
            playerNodeCache.set(key, avatar);
            instance.proto.icon().then(function (res) {
              return iconNode.getComponent(Sprite).spriteFrame = res;
            });
            if (_this3.currentSelectCharacter === key) maskNode.active = false;else maskNode.active = true;
            avatar.on(Button.EventType.CLICK, function () {
              Array.from(playerNodeCache.values()).forEach(function (node) {
                return node.getChildByName("Mask").active = true;
              });
              _this3.currentSelectCharacter = key;
              maskNode.active = false;
              _this3.renderCharacter();
            });
          };
          for (var _iterator = _createForOfIteratorHelperLoose(allCharacterKeys), _step; !(_step = _iterator()).done;) {
            _loop();
          }
          this.virtualListPrefab.setVirtualList(allCharacterKeys, function (key) {
            return playerNodeCache.get(key);
          });
          return;
        }

        // 出战
        ;

        _proto.goIntoBattle = function goIntoBattle() {
          var lock = !characterManager.data.characters.includes(this.currentSelectCharacter);
          if (lock) {
            var entry = new ( /*#__PURE__*/function (_LanguageEntry) {
              _inheritsLoose(_class4, _LanguageEntry);
              function _class4() {
                return _LanguageEntry.apply(this, arguments) || this;
              }
              _createClass(_class4, [{
                key: "chs",
                get: function get() {
                  return "请先解锁该角色";
                }
              }, {
                key: "en",
                get: function get() {
                  return "Please unlock the character first";
                }
              }, {
                key: "jpn",
                get: function get() {
                  return "キャラクターをロックしてください";
                }
              }]);
              return _class4;
            }(LanguageEntry))();
            message.toast(entry.getValue(settingManager.data.language));
            return;
          }
          skillManager.data.skills = [];
          characterManager.data.currentCharacter = this.currentSelectCharacter;
          characterManager.save();
          skillManager.save();
          this.close();
        };
        return ChangeCharacterPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "TemplateAvatarNode", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "virtualListPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "spineAnimation", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterInstance.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './CharacterPrototype.ts', './CharacterInstanceProperty.ts', './EquipmentInstance.ts', './EquipmentManager2.ts', './BuffInstance.ts', './BuffManager.ts', './FightProgress.ts', './DamageCalculation.ts', './SkillInstance.ts', './SkillPrototype.ts', './SkillManager.ts'], function (exports) {
  var _inheritsLoose, _asyncToGenerator, _regeneratorRuntime, _extends, _createClass, _assertThisInitialized, cclegacy, warn, FromType, DamageType, CharacterInstanceProperty, EquipmentInstance, getEquipmentPrototype, BuffInstance, getBuffPrototype, DeathProgress, BuffProgress, ReduceHpProgress, IncreaseHpProgress, ReduceMpProgress, IncreaseMpProgress, DamageProgress, HealProgress, AttackProgress, SkillProgress, physicalDamage, magicDamage, lightDamage, darkDamage, SkillInstance, SkillFailReason, getSkillPrototype;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _extends = module.extends;
      _createClass = module.createClass;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, function (module) {
      FromType = module.FromType;
      DamageType = module.DamageType;
    }, function (module) {
      CharacterInstanceProperty = module.CharacterInstanceProperty;
    }, function (module) {
      EquipmentInstance = module.EquipmentInstance;
    }, function (module) {
      getEquipmentPrototype = module.getEquipmentPrototype;
    }, function (module) {
      BuffInstance = module.BuffInstance;
    }, function (module) {
      getBuffPrototype = module.getBuffPrototype;
    }, function (module) {
      DeathProgress = module.DeathProgress;
      BuffProgress = module.BuffProgress;
      ReduceHpProgress = module.ReduceHpProgress;
      IncreaseHpProgress = module.IncreaseHpProgress;
      ReduceMpProgress = module.ReduceMpProgress;
      IncreaseMpProgress = module.IncreaseMpProgress;
      DamageProgress = module.DamageProgress;
      HealProgress = module.HealProgress;
      AttackProgress = module.AttackProgress;
      SkillProgress = module.SkillProgress;
    }, function (module) {
      physicalDamage = module.physicalDamage;
      magicDamage = module.magicDamage;
      lightDamage = module.lightDamage;
      darkDamage = module.darkDamage;
    }, function (module) {
      SkillInstance = module.SkillInstance;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
    }, function (module) {
      getSkillPrototype = module.getSkillPrototype;
    }],
    execute: function () {
      cclegacy._RF.push({}, "235cdfNrN5D04Mq5vFPPF7s", "CharacterInstance", undefined);
      var CharacterEvent = exports('CharacterEvent', /*#__PURE__*/function (CharacterEvent) {
        CharacterEvent["ReduceHp"] = "ReduceHp";
        CharacterEvent["IncreaseHp"] = "IncreaseHp";
        CharacterEvent["ReduceMp"] = "ReduceMp";
        CharacterEvent["IncreaseMp"] = "IncreaseMp";
        CharacterEvent["BeDamage"] = "BeDamage";
        CharacterEvent["BeHeal"] = "BeHeal";
        CharacterEvent["HpToZero"] = "HpToZero";
        CharacterEvent["Death"] = "Death";
        return CharacterEvent;
      }({})); // 死亡事件
      var CharacterInstance = exports('CharacterInstance', /*#__PURE__*/function (_CharacterInstancePro) {
        _inheritsLoose(CharacterInstance, _CharacterInstancePro);
        var _proto = CharacterInstance.prototype;
        _proto.on = function on(e, callback) {
          var set = this.eventMap.get(e);
          if (!set) this.eventMap.set(e, set = new Set());
          set.add(callback);
        };
        _proto.off = function off(e, callback) {
          var _this$eventMap$get;
          if (!callback) {
            this.eventMap["delete"](e);
            return;
          }
          (_this$eventMap$get = this.eventMap.get(e)) == null || _this$eventMap$get["delete"](callback);
        };
        _proto.emit = function emit(e) {
          for (var _len = arguments.length, arg = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            arg[_key - 1] = arguments[_key];
          }
          var set = this.eventMap.get(e);
          if (!set) return;
          set.forEach(function (c) {
            return c.apply(void 0, arg);
          });
        }

        // 构造器
        ;

        function CharacterInstance(option) {
          var _this;
          _this = _CharacterInstancePro.call(this) || this;
          // 事件代码
          _this.eventMap = new Map();
          // 是否已经死亡
          _this._hasDeath = false;
          // 进入预死亡阶段
          _this._preDeath = false;
          _this.lv = option.lv || 1;
          _this.proto = new option.Proto(_assertThisInitialized(_this));
          if (option.buffs) _this.initBuffs(option.buffs);
          if (option.equipments) _this.initEquipments(option.equipments);
          if (option.skills) _this.initSkills(option.skills);
          if (option.extraProperty) _this.extraProperty = option.extraProperty;
          return _this;
        }

        // 初始化装备
        _proto.initEquipments = function initEquipments(equipments) {
          var _this2 = this;
          Object.keys(equipments).forEach(function (k) {
            var dto = equipments[k];
            if (!dto) return;
            var Proto = getEquipmentPrototype(dto.prototype);
            if (Proto) {
              _this2.equipments[k] = new EquipmentInstance({
                id: dto.id,
                lv: dto.lv,
                character: _this2,
                quality: dto.quality,
                extraProperty: dto.extraProperty,
                Proto: Proto
              });
            } else warn("Can not found equipment by prototype key: " + dto.prototype);
          });
        }

        // 初始化buff
        ;

        _proto.initBuffs = function initBuffs(buffs) {
          var _this$buffs;
          var list = buffs.map(function (dto) {
            var Proto = getBuffPrototype(dto.prototype);
            if (Proto) {
              var instance = new BuffInstance({
                Proto: Proto,
                extraProperty: dto.extraProperty
              });
              return instance;
            } else warn("Can not found buff by prototype key: " + dto.prototype);
          });
          (_this$buffs = this.buffs).push.apply(_this$buffs, list);
        }

        // 初始化技能
        ;

        _proto.initSkills = function initSkills(skills) {
          var _this3 = this,
            _this$skills;
          var list = skills.map(function (dto) {
            var Proto = getSkillPrototype(dto.prototype);
            if (Proto) {
              var skill = new SkillInstance({
                characterInstance: _this3,
                lv: dto.lv,
                Proto: Proto
              });
              setTimeout(function () {
                return skill.proto.onCreate();
              });
              return skill;
            } else warn("Can not found skill by prototype key: " + dto.prototype);
          });
          (_this$skills = this.skills).push.apply(_this$skills, list);
        }

        // 触发战斗流程事件
        ;

        _proto.emitProgress = /*#__PURE__*/
        function () {
          var _emitProgress = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, progress) {
            var _this4 = this;
            return _regeneratorRuntime().wrap(function _callee2$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  return _context5.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
                    var hasNext, keys, _loop, i, _loop2, _i, _loop3, _i2;
                    return _regeneratorRuntime().wrap(function _callee$(_context4) {
                      while (1) switch (_context4.prev = _context4.next) {
                        case 0:
                          hasNext = false;
                          progress.next = function () {
                            hasNext = true;
                            res(null);
                          };
                          // 装备生效
                          keys = Object.keys(_this4.equipments);
                          _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                            var equipment;
                            return _regeneratorRuntime().wrap(function _loop$(_context) {
                              while (1) switch (_context.prev = _context.next) {
                                case 0:
                                  if (!hasNext) {
                                    _context.next = 2;
                                    break;
                                  }
                                  return _context.abrupt("return", 1);
                                case 2:
                                  equipment = _this4.equipments[keys[i]];
                                  if (!equipment) {
                                    _context.next = 6;
                                    break;
                                  }
                                  _context.next = 6;
                                  return new Promise(function (res) {
                                    if (equipment.proto[e]) equipment.proto[e](progress, res);else res(null);
                                  });
                                case 6:
                                case "end":
                                  return _context.stop();
                              }
                            }, _loop);
                          });
                          i = 0;
                        case 5:
                          if (!(i < keys.length)) {
                            _context4.next = 12;
                            break;
                          }
                          return _context4.delegateYield(_loop(), "t0", 7);
                        case 7:
                          if (!_context4.t0) {
                            _context4.next = 9;
                            break;
                          }
                          return _context4.abrupt("break", 12);
                        case 9:
                          i++;
                          _context4.next = 5;
                          break;
                        case 12:
                          _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2() {
                            var buff;
                            return _regeneratorRuntime().wrap(function _loop2$(_context2) {
                              while (1) switch (_context2.prev = _context2.next) {
                                case 0:
                                  if (!hasNext) {
                                    _context2.next = 2;
                                    break;
                                  }
                                  return _context2.abrupt("return", 1);
                                case 2:
                                  buff = _this4.buffs[_i];
                                  _context2.next = 5;
                                  return new Promise(function (res) {
                                    if (buff.proto[e]) buff.proto[e](progress, res);else res(null);
                                  });
                                case 5:
                                case "end":
                                  return _context2.stop();
                              }
                            }, _loop2);
                          });
                          _i = 0;
                        case 14:
                          if (!(_i < _this4.buffs.length)) {
                            _context4.next = 21;
                            break;
                          }
                          return _context4.delegateYield(_loop2(), "t1", 16);
                        case 16:
                          if (!_context4.t1) {
                            _context4.next = 18;
                            break;
                          }
                          return _context4.abrupt("break", 21);
                        case 18:
                          _i++;
                          _context4.next = 14;
                          break;
                        case 21:
                          _loop3 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop3() {
                            var skill;
                            return _regeneratorRuntime().wrap(function _loop3$(_context3) {
                              while (1) switch (_context3.prev = _context3.next) {
                                case 0:
                                  if (!hasNext) {
                                    _context3.next = 2;
                                    break;
                                  }
                                  return _context3.abrupt("return", 1);
                                case 2:
                                  skill = _this4.skills[_i2];
                                  _context3.next = 5;
                                  return new Promise(function (res) {
                                    if (skill.proto[e]) skill.proto[e](progress, res);else res(null);
                                  });
                                case 5:
                                case "end":
                                  return _context3.stop();
                              }
                            }, _loop3);
                          });
                          _i2 = 0;
                        case 23:
                          if (!(_i2 < _this4.skills.length)) {
                            _context4.next = 30;
                            break;
                          }
                          return _context4.delegateYield(_loop3(), "t2", 25);
                        case 25:
                          if (!_context4.t2) {
                            _context4.next = 27;
                            break;
                          }
                          return _context4.abrupt("break", 30);
                        case 27:
                          _i2++;
                          _context4.next = 23;
                          break;
                        case 30:
                          if (hasNext) {
                            _context4.next = 33;
                            break;
                          }
                          _context4.next = 33;
                          return new Promise(function (res) {
                            if (_this4.proto[e]) _this4.proto[e](progress, res);else res(null);
                          });
                        case 33:
                          res(null);
                        case 34:
                        case "end":
                          return _context4.stop();
                      }
                    }, _callee);
                  }))));
                case 1:
                case "end":
                  return _context5.stop();
              }
            }, _callee2);
          }));
          function emitProgress(_x, _x2) {
            return _emitProgress.apply(this, arguments);
          }
          return emitProgress;
        }();
        // 尝试死亡
        _proto.death = function death(option) {
          var _this5 = this;
          if (this._hasDeath || this._preDeath) return;
          this._preDeath = true;
          var progress = new DeathProgress();
          progress.from = option.from;
          progress.damage = option.damage;
          this.emitProgress("beforeDeath", progress).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
            return _regeneratorRuntime().wrap(function _callee4$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  _this5._preDeath = false;
                  if (!(_this5.hp > 0)) {
                    _context7.next = 3;
                    break;
                  }
                  return _context7.abrupt("return");
                case 3:
                  _this5._hasDeath = true;
                  new Promise(function (res) {
                    _this5.proto.playDieAnimation(progress, function () {}, res);
                  }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
                    return _regeneratorRuntime().wrap(function _callee3$(_context6) {
                      while (1) switch (_context6.prev = _context6.next) {
                        case 0:
                          _this5.emit(CharacterEvent.Death, option);
                        case 1:
                        case "end":
                          return _context6.stop();
                      }
                    }, _callee3);
                  })));
                  _context7.next = 7;
                  return _this5.emitProgress("afterDeath", progress);
                case 7:
                case "end":
                  return _context7.stop();
              }
            }, _callee4);
          })));
        }

        // 添加buff
        ;

        _proto.addBuff = function addBuff(option) {
          if (this._hasDeath) return;
          var progress = new BuffProgress();
          progress.target = option.target || this;
          progress.from = option.from || this;
          progress.buff.push(option.Proto);
          progress.target.emitProgress("beforeAddBuff", progress).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
            return _regeneratorRuntime().wrap(function _callee5$(_context8) {
              while (1) switch (_context8.prev = _context8.next) {
                case 0:
                  progress.buff.forEach(function (Proto) {
                    // 剔除同类型的buff
                    for (var i = 0; i < progress.target.buffs.length; i++) {
                      var b = progress.target.buffs[i];
                      if (b.proto instanceof Proto) return;
                    }
                    var buff = new BuffInstance({
                      Proto: Proto,
                      creator: progress.from,
                      character: progress.target,
                      extraProperty: option.extraProperty
                    });
                    if (option.data) {
                      Object.keys(option.data).forEach(function (k) {
                        return buff.data.set(k, option.data[k]);
                      });
                    }
                    progress.target.buffs.push(buff);
                    buff.proto.onAdd();
                  });
                  _context8.next = 3;
                  return progress.target.emitProgress("afterAddBuff", progress);
                case 3:
                case "end":
                  return _context8.stop();
              }
            }, _callee5);
          })));
          return;
        }

        // 移除buff
        ;

        _proto.removeBuff = function removeBuff(option) {
          if (this._hasDeath) return;
          var progress = new BuffProgress();
          progress.target = option.target || this;
          progress.from = option.from || this;
          progress.buff = [option.Proto];
          progress.target.emitProgress("beforeRemoveBuff", progress).then(function () {
            progress.buff.forEach(function (b) {
              for (var i = 0; i < progress.target.buffs.length; i++) {
                var buff = progress.target.buffs[i];
                if (buff.proto.constructor === b) {
                  progress.target.buffs.splice(i, 1);
                  buff.proto.onRemove();
                  return;
                }
              }
            });
            return progress.target.emitProgress("afterRemoveBuff", progress);
          })["finally"](function () {});
          return;
        }

        // 减少生命值(纯粹减少)
        ;

        _proto.reduceHp = function reduceHp(option) {
          var _this6 = this;
          if (this._hasDeath) return;
          var progress = new ReduceHpProgress();
          progress = _extends({}, progress, option);
          this.emitProgress("beforeReduceHp", progress).then(function () {
            _this6.hp = (_this6.maxHp * _this6.hp - progress.reduce) / _this6.maxHp;
            _this6.emit(CharacterEvent.ReduceHp, progress);
            if (_this6.hp <= 0) {
              _this6.hp = 0;
              _this6.emit(CharacterEvent.HpToZero, progress);
              // 尝试死亡
              _this6.death({
                from: progress.from,
                damage: progress.reduce
              });
            }
            return _this6.emitProgress("afterReduceHp", progress);
          })["finally"](function () {});
          return;
        }

        // 增加生命值(纯粹增加)
        ;

        _proto.increaseHp = function increaseHp(option) {
          var _this7 = this;
          if (this._hasDeath) return;
          option.from = option.from || this;
          option.fromType = option.fromType || FromType.skill;
          var progress = new IncreaseHpProgress();
          progress = _extends({}, progress, option);
          this.emitProgress("beforeIncreaseHp", progress).then(function () {
            _this7.hp = (_this7.maxHp * _this7.hp + progress.increase) / _this7.maxHp;
            _this7.emit(CharacterEvent.IncreaseHp, progress);
            return _this7.emitProgress("afterIncreaseHp", progress);
          });
        }

        // 减少生魔法值(纯粹减少)
        ;

        _proto.reduceMp = function reduceMp(option) {
          var _this8 = this;
          if (this._hasDeath) return;
          var progress = new ReduceMpProgress();
          progress = _extends({}, progress, option);
          this.emitProgress("beforeReduceMp", progress).then(function () {
            _this8.mp = (_this8.maxMp * _this8.mp - progress.reduce) / _this8.maxMp;
            _this8.emit(CharacterEvent.ReduceMp, progress);
            return _this8.emitProgress("afterReduceMp", progress);
          });
        }

        // 增加魔法值(纯粹增加)
        ;

        _proto.increaseMp = function increaseMp(option) {
          var _this9 = this;
          if (this._hasDeath) return;
          option.from = option.from || this;
          option.fromType = option.fromType || FromType.skill;
          var progress = new IncreaseMpProgress();
          progress = _extends({}, progress, option);
          this.emitProgress("beforeIncreaseMp", progress).then(function () {
            _this9.mp = (_this9.maxMp * _this9.mp + option.increase) / _this9.maxMp;
            _this9.emit(CharacterEvent.IncreaseMp, option);
            return _this9.emitProgress("afterIncreaseMp", progress);
          });
        }

        // 伤害角色
        ;

        _proto.beDamage = function beDamage(option) {
          var _this10 = this;
          if (this._hasDeath) return;
          var progress = new DamageProgress();
          progress.damage = option.atk;
          progress.from = option.from;
          progress.target = this;
          progress.fromType = option.fromType;
          progress.damageType = option.type;
          progress.damageRate = 1.0;
          progress.critical = option.critical || false;
          this.emitProgress("beforeBeDamage", progress).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
            var damage;
            return _regeneratorRuntime().wrap(function _callee6$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  damage = progress.damage * progress.damageRate;
                  if (progress.damageType === DamageType.physic) {
                    progress.target.reduceHp({
                      reduce: physicalDamage(damage, progress.from.physicalPenetration, progress.target.physicalDefense),
                      from: progress.from,
                      type: progress.damageType,
                      fromType: progress.fromType,
                      critical: progress.critical
                    });
                  } else if (progress.damageType === DamageType.magic) {
                    progress.target.reduceHp({
                      reduce: magicDamage(damage, progress.from.magicPenetration, progress.target.magicDefense),
                      from: progress.from,
                      type: progress.damageType,
                      fromType: progress.fromType,
                      critical: progress.critical
                    });
                  } else if (progress.damageType === DamageType.light) {
                    progress.target.reduceHp({
                      reduce: lightDamage(damage, progress.target.lightResistance, progress.target.darkResistance),
                      from: progress.from,
                      type: progress.damageType,
                      fromType: progress.fromType,
                      critical: progress.critical
                    });
                  } else if (progress.damageType === DamageType.dark) {
                    progress.target.reduceHp({
                      reduce: darkDamage(damage, progress.target.darkResistance, progress.target.lightResistance),
                      from: progress.from,
                      type: progress.damageType,
                      fromType: progress.fromType,
                      critical: progress.critical
                    });
                  } else if (progress.damageType === DamageType.real) {
                    progress.target.reduceHp({
                      reduce: damage,
                      from: progress.from,
                      type: progress.damageType,
                      fromType: progress.fromType,
                      critical: progress.critical
                    });
                  }
                  _this10.emit(CharacterEvent.BeDamage, progress);
                  _context9.next = 5;
                  return _this10.emitProgress("afterBeDamage", progress);
                case 5:
                case "end":
                  return _context9.stop();
              }
            }, _callee6);
          })))["finally"](function () {});
          return;
        }

        // 治疗角色
        ;

        _proto.beHeal = function beHeal(option) {
          var _this11 = this;
          if (this._hasDeath) return;
          var progress = new HealProgress();
          progress.heal = option.heal;
          progress.from = option.from;
          progress.target = this;
          progress.healRate = 1.0;
          progress.fromType = option.fromType;
          this.emitProgress("beforeHeal", progress).then(function () {
            _this11.increaseHp({
              increase: progress.heal,
              from: progress.from,
              fromType: progress.fromType
            });
            _this11.emit(CharacterEvent.BeHeal, progress);
            _this11.emitProgress("afterHeal", progress);
          });
        }

        // 普通攻击某一个角色
        ;

        _proto.attackCharacter = function attackCharacter(option) {
          var _this12 = this;
          if (this._hasDeath || this._preDeath) {
            option.animationComplete && option.animationComplete(new AttackProgress());
            return;
          }
          // 流程
          var progress = new AttackProgress();
          progress.from = this;
          progress.target = option.target;

          // 是否暴击
          progress.critical = this.criticalRate > Math.random();
          return this.emitProgress("beforeAttack", progress).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
            var damageRate;
            return _regeneratorRuntime().wrap(function _callee7$(_context10) {
              while (1) switch (_context10.prev = _context10.next) {
                case 0:
                  _context10.next = 2;
                  return new Promise(function (res) {
                    progress.from.proto.playAttackAnimation(progress, function () {
                      option.animationComplete && option.animationComplete(progress);
                    }, res);
                  });
                case 2:
                  // 伤害浮动和暴击伤害
                  damageRate = (Math.random() * 0.2 + 0.9) * (progress.critical ? progress.from.criticalDamage : 1); // 基础物理伤害
                  progress.target.beDamage({
                    atk: progress.from.physicalAttack * progress.damageRateType.physic * damageRate,
                    type: DamageType.physic,
                    from: progress.from,
                    fromType: FromType.attack,
                    critical: progress.critical
                  });
                  // 基础魔法伤害
                  progress.target.beDamage({
                    atk: progress.from.magicAttack * progress.damageRateType.magic * damageRate,
                    type: DamageType.magic,
                    from: progress.from,
                    fromType: FromType.attack,
                    critical: progress.critical
                  });
                  // 基础光伤害
                  progress.target.beDamage({
                    atk: progress.from.lightAttack * progress.damageRateType.light,
                    type: DamageType.light,
                    from: progress.from,
                    fromType: FromType.attack,
                    critical: false
                  });
                  // 基础暗伤害
                  progress.target.beDamage({
                    atk: progress.from.darkAttack * progress.damageRateType.dark,
                    type: DamageType.dark,
                    from: progress.from,
                    fromType: FromType.attack,
                    critical: false
                  });
                  _context10.next = 9;
                  return _this12.emitProgress("afterAttack", progress);
                case 9:
                case "end":
                  return _context10.stop();
              }
            }, _callee7);
          })));
        }

        // 判断技能是否可用
        ;

        _proto.isSkillAble = /*#__PURE__*/
        function () {
          var _isSkillAble = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(skill, progress) {
            var _this13 = this;
            return _regeneratorRuntime().wrap(function _callee8$(_context11) {
              while (1) switch (_context11.prev = _context11.next) {
                case 0:
                  if (!(this._preDeath || this._hasDeath)) {
                    _context11.next = 2;
                    break;
                  }
                  return _context11.abrupt("return", false);
                case 2:
                  // 流程
                  if (!progress) {
                    progress = new SkillProgress();
                    progress.from = this;
                    progress.skill = skill;
                    progress.type = "test";
                    progress.cost = skill.proto.cost;
                    progress.coolTime = skill.coolTime;
                  }
                  return _context11.abrupt("return", new Promise(function (res) {
                    _this13.emitProgress("beforeUseSkill", progress).then(function () {
                      if (progress.cost.hp > progress.from.hp * progress.from.maxHp) {
                        progress.skill.proto.useFail(SkillFailReason.NotEnoughCoast, progress);
                        return res(false);
                      }
                      // console.log(progress.cost.mp , progress.from.mp * progress.from.maxMp)
                      if (progress.cost.mp > progress.from.mp * progress.from.maxMp) {
                        progress.skill.proto.useFail(SkillFailReason.NotEnoughCoast, progress);
                        return res(false);
                      }
                      if (progress.skill.coolTime > 0) {
                        progress.skill.proto.useFail(SkillFailReason.CoolDown, progress);
                        return res(false);
                      }
                      res(true);
                    });
                  }));
                case 4:
                case "end":
                  return _context11.stop();
              }
            }, _callee8, this);
          }));
          function isSkillAble(_x4, _x5) {
            return _isSkillAble.apply(this, arguments);
          }
          return isSkillAble;
        }() // 使用技能
        ;

        _proto.useSkill = function useSkill(option) {
          var _this14 = this;
          if (this._hasDeath || this._preDeath) {
            option.animationComplete && option.animationComplete();
            return;
          }
          var progress = new SkillProgress();
          progress.from = this;
          progress.skill = option.skill;
          progress.type = "use";
          progress.cost = progress.skill.proto.cost;
          progress.coolTime = progress.skill.proto.coolTime;
          this.isSkillAble(option.skill, progress).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(able) {
            return _regeneratorRuntime().wrap(function _callee9$(_context12) {
              while (1) switch (_context12.prev = _context12.next) {
                case 0:
                  if (able) {
                    _context12.next = 2;
                    break;
                  }
                  return _context12.abrupt("return", option.animationComplete && option.animationComplete());
                case 2:
                  if (option.useAble) option.useAble();
                  _context12.next = 5;
                  return new Promise(function (res) {
                    progress.from.proto.playSkillAnimation(progress, function () {
                      option.animationComplete && option.animationComplete();
                    }, res);
                  });
                case 5:
                  _context12.next = 7;
                  return progress.skill.proto.use({
                    use: progress.from
                  });
                case 7:
                  progress.from.reduceMp({
                    reduce: progress.cost.mp,
                    from: progress.from
                  });
                  progress.from.reduceHp({
                    reduce: progress.cost.hp,
                    type: DamageType.real,
                    from: progress.from,
                    fromType: FromType.skillCost,
                    critical: false
                  });
                  // 计算冷却缩减后的冷却
                  progress.skill.coolTime = progress.coolTime;
                  _context12.next = 12;
                  return _this14.emitProgress("afterUseSkill", progress);
                case 12:
                case "end":
                  return _context12.stop();
              }
            }, _callee9);
          })));
          return;
        }

        // 添加额外属性
        ;

        _proto.addProperty = function addProperty(property) {
          var _this15 = this;
          Object.keys(property).forEach(function (key) {
            _this15.extraProperty[key] = (property[key] || 0) + (_this15.extraProperty[key] || 0);
          });
        };
        _createClass(CharacterInstance, [{
          key: "hasDeath",
          get: function get() {
            return this._hasDeath;
          }
        }]);
        return CharacterInstance;
      }(CharacterInstanceProperty));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterInstanceProperty.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BaseInstanceProperty.ts'], function (exports) {
  var _inheritsLoose, _createClass, cclegacy, BaseInstanceProperty;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      BaseInstanceProperty = module.BaseInstanceProperty;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1475dW9YR1C6Icb/oOv0ZEg", "CharacterInstanceProperty", undefined);
      var CharacterInstanceProperty = exports('CharacterInstanceProperty', /*#__PURE__*/function (_BaseInstanceProperty) {
        _inheritsLoose(CharacterInstanceProperty, _BaseInstanceProperty);
        function CharacterInstanceProperty() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _BaseInstanceProperty.call.apply(_BaseInstanceProperty, [this].concat(args)) || this;
          // 对应的原型
          _this.proto = null;
          // buff列表
          _this.buffs = [];
          // 技能列表
          _this.skills = [];
          // 装备列表
          _this.equipments = {
            armor: null,
            shoes: null,
            weapon: null,
            accessory: null
          };
          // 额外属性
          _this.extraProperty = {};
          // 当前生命值
          _this._hp = 1;
          // 当前魔法值
          _this._mp = 1;
          return _this;
        }
        _createClass(CharacterInstanceProperty, [{
          key: "hp",
          get:
          // 生命值范围 0 - 1
          function get() {
            return this._hp;
          },
          set: function set(value) {
            if (value > 1) value = 1;
            if (value < 0) value = 0;
            this._hp = value;
          }
        }, {
          key: "mp",
          get:
          // 魔法值范围 0 - 1
          function get() {
            return this._mp;
          },
          set: function set(value) {
            if (value > 1) value = 1;
            if (value < 0) value = 0;
            this._mp = value;
          }

          // 最大生命值
        }, {
          key: "maxHp",
          get: function get() {
            var _this2 = this;
            var base = this.proto.baseProperty.maxHp;
            var grow = this.proto.growProperty.maxHp * (this.lv - 1);
            var extra = this.extraProperty.maxHp || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this2.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.maxHp : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.maxHp ? sum + bf.extraProperty.maxHp : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.maxHp ? sum + sk.proto.extraProperty.maxHp : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 最大魔法值
        }, {
          key: "maxMp",
          get: function get() {
            var _this3 = this;
            var base = this.proto.baseProperty.maxMp;
            var grow = this.proto.growProperty.maxMp * (this.lv - 1);
            var extra = this.extraProperty.maxMp || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this3.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.maxMp : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.maxMp ? sum + bf.extraProperty.maxMp : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.maxMp ? sum + sk.proto.extraProperty.maxMp : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 物理攻击力
        }, {
          key: "physicalAttack",
          get: function get() {
            var _this4 = this;
            var base = this.proto.baseProperty.physicalAttack;
            var grow = this.proto.growProperty.physicalAttack * (this.lv - 1);
            var extra = this.extraProperty.physicalAttack || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this4.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.physicalAttack : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.physicalAttack ? sum + bf.extraProperty.physicalAttack : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.physicalAttack ? sum + sk.proto.extraProperty.physicalAttack : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 魔法攻击力
        }, {
          key: "magicAttack",
          get: function get() {
            var _this5 = this;
            var base = this.proto.baseProperty.magicAttack;
            var grow = this.proto.growProperty.magicAttack * (this.lv - 1);
            var extra = this.extraProperty.magicAttack || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this5.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.magicAttack : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.magicAttack ? sum + bf.extraProperty.magicAttack : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.magicAttack ? sum + sk.proto.extraProperty.magicAttack : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 光属性攻击力
        }, {
          key: "lightAttack",
          get: function get() {
            var _this6 = this;
            var base = this.proto.baseProperty.lightAttack;
            var grow = this.proto.growProperty.lightAttack * (this.lv - 1);
            var extra = this.extraProperty.lightAttack || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this6.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.lightAttack : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.lightAttack ? sum + bf.extraProperty.lightAttack : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.lightAttack ? sum + sk.proto.extraProperty.lightAttack : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 暗属性攻击力
        }, {
          key: "darkAttack",
          get: function get() {
            var _this7 = this;
            var base = this.proto.baseProperty.darkAttack;
            var grow = this.proto.growProperty.darkAttack * (this.lv - 1);
            var extra = this.extraProperty.darkAttack || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this7.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.darkAttack : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.darkAttack ? sum + bf.extraProperty.darkAttack : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.darkAttack ? sum + sk.proto.extraProperty.darkAttack : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 物理防御力
        }, {
          key: "physicalDefense",
          get: function get() {
            var _this8 = this;
            var base = this.proto.baseProperty.physicalDefense;
            var grow = this.proto.growProperty.physicalDefense * (this.lv - 1);
            var extra = this.extraProperty.physicalDefense || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this8.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.physicalDefense : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.physicalDefense ? sum + bf.extraProperty.physicalDefense : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.physicalDefense ? sum + sk.proto.extraProperty.physicalDefense : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 魔法防御力
        }, {
          key: "magicDefense",
          get: function get() {
            var _this9 = this;
            var base = this.proto.baseProperty.magicDefense;
            var grow = this.proto.growProperty.magicDefense * (this.lv - 1);
            var extra = this.extraProperty.magicDefense || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this9.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.magicDefense : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.magicDefense ? sum + bf.extraProperty.magicDefense : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.magicDefense ? sum + sk.proto.extraProperty.magicDefense : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 光属性抗性
        }, {
          key: "lightResistance",
          get: function get() {
            var _this10 = this;
            var base = this.proto.baseProperty.lightResistance;
            var grow = this.proto.growProperty.lightResistance * (this.lv - 1);
            var extra = this.extraProperty.lightResistance || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this10.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.lightResistance : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.lightResistance ? sum + bf.extraProperty.lightResistance : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.lightResistance ? sum + sk.proto.extraProperty.lightResistance : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 暗属性抗性
        }, {
          key: "darkResistance",
          get: function get() {
            var _this11 = this;
            var base = this.proto.baseProperty.darkResistance;
            var grow = this.proto.growProperty.darkResistance * (this.lv - 1);
            var extra = this.extraProperty.darkResistance || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this11.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.darkResistance : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.darkResistance ? sum + bf.extraProperty.darkResistance : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.darkResistance ? sum + sk.proto.extraProperty.darkResistance : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 物理穿透
        }, {
          key: "physicalPenetration",
          get: function get() {
            var _this12 = this;
            var base = this.proto.baseProperty.physicalPenetration;
            var grow = this.proto.growProperty.physicalPenetration * (this.lv - 1);
            var extra = this.extraProperty.physicalPenetration || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this12.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.physicalPenetration : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.physicalPenetration ? sum + bf.extraProperty.physicalPenetration : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.physicalPenetration ? sum + sk.proto.extraProperty.physicalPenetration : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 魔法穿透
        }, {
          key: "magicPenetration",
          get: function get() {
            var _this13 = this;
            var base = this.proto.baseProperty.magicPenetration;
            var grow = this.proto.growProperty.magicPenetration * (this.lv - 1);
            var extra = this.extraProperty.magicPenetration || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this13.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.magicPenetration : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.magicPenetration ? sum + bf.extraProperty.magicPenetration : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.magicPenetration ? sum + sk.proto.extraProperty.magicPenetration : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
          // 暴击率 0 - 1
        }, {
          key: "criticalRate",
          get: function get() {
            var _this14 = this;
            var base = this.proto.baseProperty.criticalRate;
            var extra = this.extraProperty.criticalRate || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this14.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.criticalRate : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.criticalRate ? sum + bf.extraProperty.criticalRate : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.criticalRate ? sum + sk.proto.extraProperty.criticalRate : sum;
            }, 0);
            return base + extra + equip + buff + skill;
          }
          // 暴击伤害
        }, {
          key: "criticalDamage",
          get: function get() {
            var _this15 = this;
            var base = this.proto.baseProperty.criticalDamage;
            var extra = this.extraProperty.criticalDamage || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this15.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.criticalDamage : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.criticalDamage ? sum + bf.extraProperty.criticalDamage : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.criticalDamage ? sum + sk.proto.extraProperty.criticalDamage : sum;
            }, 0);
            return base + extra + equip + buff + skill;
          }

          // 攻击速度
        }, {
          key: "attackSpeed",
          get: function get() {
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.attackSpeed ? sum + bf.extraProperty.attackSpeed : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.attackSpeed ? sum + sk.proto.extraProperty.attackSpeed : sum;
            }, 0);
            if (this.equipments.weapon) {
              return Math.max(0.4, Math.min(this.equipments.weapon.attackSpeed + buff + skill, 3));
            } else {
              return Math.max(0.4, Math.min(this.proto.baseProperty.attackSpeed + buff + skill, 3));
            }
          }

          // 冷却缩减
        }, {
          key: "coolDown",
          get: function get() {
            var _this16 = this;
            var base = this.proto.baseProperty.coolDown;
            var grow = this.proto.growProperty.coolDown * (this.lv - 1);
            var extra = this.extraProperty.coolDown || 0;
            var equip = Object.keys(this.equipments).map(function (k) {
              return _this16.equipments[k];
            }).reduce(function (sum, eq) {
              return eq ? sum + eq.coolDown : sum;
            }, 0);
            var buff = this.buffs.reduce(function (sum, bf) {
              return bf.extraProperty.coolDown ? sum + bf.extraProperty.coolDown : sum;
            }, 0);
            var skill = this.skills.reduce(function (sum, sk) {
              return sk.proto.extraProperty.coolDown ? sum + sk.proto.extraProperty.coolDown : sum;
            }, 0);
            return base + grow + extra + equip + buff + skill;
          }
        }]);
        return CharacterInstanceProperty;
      }(BaseInstanceProperty));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Manager.ts', './Config.ts'], function (exports) {
  var _inheritsLoose, _createClass, cclegacy, Manager, BaseEventManagerData, Config;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Manager = module.Manager;
      BaseEventManagerData = module.BaseEventManagerData;
    }, function (module) {
      Config = module.Config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "776823XBqVJZLxvjyUtn0Tr", "CharacterManager", undefined);
      var CharacterManagerDTO = function CharacterManagerDTO(data) {
        this.lv = 1;
        this.exp = 0;
        this.characters = ["Brave"];
        this.currentCharacter = "Brave";
        if (data) {
          this.characters = data.characters;
          this.currentCharacter = data.currentCharacter;
          this.lv = data.lv;
          this.exp = data.exp;
        }
      };
      var CharacterData = exports('CharacterData', /*#__PURE__*/function (_BaseEventManagerData) {
        _inheritsLoose(CharacterData, _BaseEventManagerData);
        function CharacterData(data) {
          var _this;
          _this = _BaseEventManagerData.call(this) || this;
          _this.lv = 1;
          _this.exp = 0;
          _this.characters = ["Brave"];
          _this.currentCharacter = "Brave";
          if (data) {
            _this.lv = data.lv;
            _this.exp = data.exp;
            _this.characters = data.characters;
            if (data.currentCharacter) _this.currentCharacter = data.currentCharacter;
          }
          return _this;
        }

        // 最大经验
        var _proto = CharacterData.prototype;
        // 获取需要的经验
        _proto.needExp = function needExp(lv) {
          if (lv < 10) return 100 + (lv - 1) * 50;
          if (lv < 20) return 300 + (lv - 1) * 100;
          if (lv < 30) return 500 + (lv - 1) * 250;
          if (lv < 40) return 1000 + (lv - 1) * 500;
          if (lv < 50) return 2000 + (lv - 1) * 700;
          if (lv < 60) return 4000 + (lv - 1) * 1500;
          if (lv < 70) return 6000 + (lv - 1) * 2000;
          if (lv < 80) return 8000 + (lv - 1) * 3500;
          if (lv < 90) return 10000 + (lv - 1) * 5000;
          if (lv < 100) return 15000 + (lv - 1) * 7000;
          return 1;
        }

        // 添加经验
        ;

        _proto.addExp = function addExp(exp) {
          if (this.lv >= 100) {
            this.lv = 100;
            this.exp = 0;
            return;
          }
          this.exp += exp;
          this.emit("addExp", exp);
          while (this.exp >= this.maxExp) {
            this.exp -= this.maxExp;
            this.lv++;
          }
          if (this.lv > 100) {
            this.lv = 100;
            this.exp = 0;
          }
        }

        // 添加角色
        ;

        _proto.addCharacter = function addCharacter(prototype) {
          this.characters.push(prototype);
          this.emit("addCharacter", prototype);
        }

        // 切换角色
        ;

        _proto.switchCharacter = function switchCharacter(prototype) {
          for (var i = 0; i < this.characters.length; i++) {
            var character = this.characters[i];
            if (character === prototype) {
              var old = this.currentCharacter;
              this.currentCharacter = character;
              this.emit("changeCharacter", this.currentCharacter, old);
              return true;
            }
          }
          return false;
        };
        _createClass(CharacterData, [{
          key: "maxExp",
          get: function get() {
            return this.needExp(this.lv);
          }
        }]);
        return CharacterData;
      }(BaseEventManagerData));
      var characterManager = exports('characterManager', new Manager({
        storageKey: "slaughter:game:character",
        descrypt: Config.descrypt,
        Constructor: CharacterData,
        DtoCostructor: CharacterManagerDTO
      }));
      try {
        // @ts-ignore
        window.characterManager = characterManager;
      } catch (e) {}
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterManager2.ts", ['cc', './CharacterPrototype.ts'], function (exports) {
  var cclegacy, CharacterPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }],
    execute: function () {
      exports({
        getAllCharacterKeys: getAllCharacterKeys,
        getCharacterKey: getCharacterKey,
        getCharacterPrototype: getCharacterPrototype
      });
      cclegacy._RF.push({}, "8b136QpqLhFqrpdG9lLwGDr", "CharacterManager", undefined);

      // 该文件用于管理游戏中的角色系统
      var registry = new Map();
      var registryReverse = new Map();

      // 装备用品注册装饰器
      var RegisterCharacter = exports('RegisterCharacter', function RegisterCharacter(key) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
        };
      });

      // 获取所有注册的装备原型key
      function getAllCharacterKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取装备原型
      function getCharacterPrototype(key) {
        return registry.get(key);
      }

      // 根据装备原型或者实例获取key
      function getCharacterKey(proto) {
        if (proto instanceof CharacterPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BasePrototypeProperty.ts'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, BasePrototypeProperty;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }],
    execute: function () {
      cclegacy._RF.push({}, "bf2e1BRVvNF55SiIcHf2dYW", "CharacterPrototype", undefined);
      var DamageType = exports('DamageType', /*#__PURE__*/function (DamageType) {
        DamageType["physic"] = "physic";
        DamageType["magic"] = "magic";
        DamageType["light"] = "light";
        DamageType["dark"] = "dark";
        DamageType["real"] = "real";
        return DamageType;
      }({}));
      var FromType = exports('FromType', /*#__PURE__*/function (FromType) {
        FromType["attack"] = "attack";
        FromType["skill"] = "skill";
        FromType["buff"] = "buff";
        FromType["skillCost"] = "skillCost";
        FromType["medicine"] = "medicine";
        return FromType;
      }({}));
      var CharacterPrototype = exports('CharacterPrototype', /*#__PURE__*/function () {
        // 保存对应的实例
        function CharacterPrototype(instance) {
          // 成长属性
          this.growProperty = new BasePrototypeProperty();
          // 基础属性
          this.baseProperty = new BasePrototypeProperty();
          this.instance = instance;
        }
        // 头像信息 Sprite
        var _proto = CharacterPrototype.prototype;
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }() // spine动画信息
        ;

        _proto.skeletonData = /*#__PURE__*/
        function () {
          var _skeletonData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  return _context2.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function skeletonData() {
            return _skeletonData.apply(this, arguments);
          }
          return skeletonData;
        }() // 播放动画
        ;

        _proto.playAttackAnimation = function playAttackAnimation(progress, endCallback, next) {
          endCallback();
          next();
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, endCallback, next) {
          endCallback();
          next();
        };
        _proto.playDieAnimation = function playDieAnimation(progress, endCallback, next) {
          endCallback();
          next();
        };
        _createClass(CharacterPrototype, [{
          key: "name",
          get:
          // 名称信息
          function get() {
            return "Character Name";
          }
          // 描述信息
        }, {
          key: "description",
          get: function get() {
            return "Character Description";
          }
        }, {
          key: "animation",
          get:
          // 动画配置
          function get() {
            return {
              animations: {
                move: "Run",
                idle: "Idle"
              }
            };
          }
        }]);
        return CharacterPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/CharacterToPrefabMap.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports({
        bindCharacterToComponent: bindCharacterToComponent,
        getComponentByCharacter: getComponentByCharacter,
        unbindCharacterComponent: unbindCharacterComponent
      });
      cclegacy._RF.push({}, "22f28+rvQdIj5camJyUh3n5", "CharacterToPrefabMap", undefined);
      var PlayerToPrefabMap = new WeakMap();
      function getComponentByCharacter(player) {
        return PlayerToPrefabMap.get(player);
      }
      function bindCharacterToComponent(player, component) {
        PlayerToPrefabMap.set(player, component);
      }
      function unbindCharacterComponent(player) {
        PlayerToPrefabMap["delete"](player);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/codeframe.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('generateCodeFrame', generateCodeFrame);
      cclegacy._RF.push({}, "eb6b98o6ehAxKkZ3IQu6BPs", "codeframe", undefined);
      var range = 2;
      function generateCodeFrame(source, start, end) {
        if (start === void 0) {
          start = 0;
        }
        if (end === void 0) {
          end = source.length;
        }
        // Ensure start and end are within the source length
        start = Math.max(0, Math.min(start, source.length));
        end = Math.max(0, Math.min(end, source.length));
        if (start > end) return '';

        // Split the content into individual lines but capture the newline sequence
        // that separated each line. This is important because the actual sequence is
        // needed to properly take into account the full line length for offset
        // comparison
        var lines = source.split(/(\r?\n)/);

        // Separate the lines and newline sequences into separate arrays for easier referencing
        var newlineSequences = lines.filter(function (_, idx) {
          return idx % 2 === 1;
        });
        lines = lines.filter(function (_, idx) {
          return idx % 2 === 0;
        });
        var count = 0;
        var res = [];
        for (var i = 0; i < lines.length; i++) {
          count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);
          if (count >= start) {
            for (var j = i - range; j <= i + range || end > count; j++) {
              if (j < 0 || j >= lines.length) continue;
              var line = j + 1;
              res.push("" + line + ' '.repeat(Math.max(3 - String(line).length, 0)) + "|  " + lines[j]);
              var lineLength = lines[j].length;
              var newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;
              if (j === i) {
                // push underline
                var pad = start - (count - (lineLength + newLineSeqLength));
                var length = Math.max(1, end > count ? lineLength - pad : end - start);
                res.push("   |  " + ' '.repeat(pad) + '^'.repeat(length));
              } else if (j > i) {
                if (end > count) {
                  var _length = Math.max(Math.min(end - count, lineLength), 1);
                  res.push("   |  " + '^'.repeat(_length));
                }
                count += lineLength + newLineSeqLength;
              }
            }
            break;
          }
        }
        return res.join('\n');
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/collectionHandlers.ts", ['cc', './index8.ts', './constants.ts', './dep.ts', './reactive.ts', './general.ts'], function (exports) {
  var cclegacy, warn, ReactiveFlags, TrackOpTypes, TriggerOpTypes, track, ITERATE_KEY, trigger, MAP_KEY_ITERATE_KEY, toRaw, isShallow, isReadonly, toReadonly, toReactive, hasOwn, hasChanged, extend, capitalize, isMap, toRawType;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      ReactiveFlags = module.ReactiveFlags;
      TrackOpTypes = module.TrackOpTypes;
      TriggerOpTypes = module.TriggerOpTypes;
    }, function (module) {
      track = module.track;
      ITERATE_KEY = module.ITERATE_KEY;
      trigger = module.trigger;
      MAP_KEY_ITERATE_KEY = module.MAP_KEY_ITERATE_KEY;
    }, function (module) {
      toRaw = module.toRaw;
      isShallow = module.isShallow;
      isReadonly = module.isReadonly;
      toReadonly = module.toReadonly;
      toReactive = module.toReactive;
    }, function (module) {
      hasOwn = module.hasOwn;
      hasChanged = module.hasChanged;
      extend = module.extend;
      capitalize = module.capitalize;
      isMap = module.isMap;
      toRawType = module.toRawType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "cc809YLZqhJ7rigISjWIdTv", "collectionHandlers", undefined);
      var toShallow = function toShallow(value) {
        return value;
      };
      var getProto = function getProto(v) {
        return Reflect.getPrototypeOf(v);
      };
      function createIterableMethod(method, isReadonly, isShallow) {
        return function () {
          var _ref;
          var target = this[ReactiveFlags.RAW];
          var rawTarget = toRaw(target);
          var targetIsMap = isMap(rawTarget);
          var isPair = method === 'entries' || method === Symbol.iterator && targetIsMap;
          var isKeyOnly = method === 'keys' && targetIsMap;
          var innerIterator = target[method].apply(target, arguments);
          var wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;
          !isReadonly && track(rawTarget, TrackOpTypes.ITERATE, isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
          // return a wrapped iterator which returns observed versions of the
          // values emitted from the real iterator
          return _ref = {
            // iterator protocol
            next: function next() {
              var _innerIterator$next = innerIterator.next(),
                value = _innerIterator$next.value,
                done = _innerIterator$next.done;
              return done ? {
                value: value,
                done: done
              } : {
                value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
                done: done
              };
            }
          }, _ref[Symbol.iterator] = function () {
            return this;
          }, _ref;
        };
      }
      function createReadonlyMethod(type) {
        return function () {
          {
            var key = (arguments.length <= 0 ? undefined : arguments[0]) ? "on key \"" + (arguments.length <= 0 ? undefined : arguments[0]) + "\" " : "";
            warn(capitalize(type) + " operation " + key + "failed: target is readonly.", toRaw(this));
          }
          return type === TriggerOpTypes.DELETE ? false : type === TriggerOpTypes.CLEAR ? undefined : this;
        };
      }
      function createInstrumentations(readonly, shallow) {
        var instrumentations = {
          get: function get(key) {
            // #1772: readonly(reactive(Map)) should return readonly + reactive version
            // of the value
            var target = this[ReactiveFlags.RAW];
            var rawTarget = toRaw(target);
            var rawKey = toRaw(key);
            if (!readonly) {
              if (hasChanged(key, rawKey)) {
                track(rawTarget, TrackOpTypes.GET, key);
              }
              track(rawTarget, TrackOpTypes.GET, rawKey);
            }
            var _getProto = getProto(rawTarget),
              has = _getProto.has;
            var wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;
            if (has.call(rawTarget, key)) {
              return wrap(target.get(key));
            } else if (has.call(rawTarget, rawKey)) {
              return wrap(target.get(rawKey));
            } else if (target !== rawTarget) {
              // #3602 readonly(reactive(Map))
              // ensure that the nested reactive `Map` can do tracking for itself
              target.get(key);
            }
          },
          get size() {
            var target = this[ReactiveFlags.RAW];
            !readonly && track(toRaw(target), TrackOpTypes.ITERATE, ITERATE_KEY);
            return Reflect.get(target, 'size', target);
          },
          has: function has(key) {
            var target = this[ReactiveFlags.RAW];
            var rawTarget = toRaw(target);
            var rawKey = toRaw(key);
            if (!readonly) {
              if (hasChanged(key, rawKey)) {
                track(rawTarget, TrackOpTypes.HAS, key);
              }
              track(rawTarget, TrackOpTypes.HAS, rawKey);
            }
            return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
          },
          forEach: function forEach(callback, thisArg) {
            var observed = this;
            var target = observed[ReactiveFlags.RAW];
            var rawTarget = toRaw(target);
            var wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;
            !readonly && track(rawTarget, TrackOpTypes.ITERATE, ITERATE_KEY);
            return target.forEach(function (value, key) {
              // important: make sure the callback is
              // 1. invoked with the reactive map as `this` and 3rd arg
              // 2. the value received should be a corresponding reactive/readonly.
              return callback.call(thisArg, wrap(value), wrap(key), observed);
            });
          }
        };
        extend(instrumentations, readonly ? {
          add: createReadonlyMethod(TriggerOpTypes.ADD),
          set: createReadonlyMethod(TriggerOpTypes.SET),
          "delete": createReadonlyMethod(TriggerOpTypes.DELETE),
          clear: createReadonlyMethod(TriggerOpTypes.CLEAR)
        } : {
          add: function add(value) {
            if (!shallow && !isShallow(value) && !isReadonly(value)) {
              value = toRaw(value);
            }
            var target = toRaw(this);
            var proto = getProto(target);
            var hadKey = proto.has.call(target, value);
            if (!hadKey) {
              target.add(value);
              trigger(target, TriggerOpTypes.ADD, value, value);
            }
            return this;
          },
          set: function set(key, value) {
            if (!shallow && !isShallow(value) && !isReadonly(value)) {
              value = toRaw(value);
            }
            var target = toRaw(this);
            var _getProto2 = getProto(target),
              has = _getProto2.has,
              get = _getProto2.get;
            var hadKey = has.call(target, key);
            if (!hadKey) {
              key = toRaw(key);
              hadKey = has.call(target, key);
            } else {
              checkIdentityKeys(target, has, key);
            }
            var oldValue = get.call(target, key);
            target.set(key, value);
            if (!hadKey) {
              trigger(target, TriggerOpTypes.ADD, key, value);
            } else if (hasChanged(value, oldValue)) {
              trigger(target, TriggerOpTypes.SET, key, value, oldValue);
            }
            return this;
          },
          "delete": function _delete(key) {
            var target = toRaw(this);
            var _getProto3 = getProto(target),
              has = _getProto3.has,
              get = _getProto3.get;
            var hadKey = has.call(target, key);
            if (!hadKey) {
              key = toRaw(key);
              hadKey = has.call(target, key);
            } else {
              checkIdentityKeys(target, has, key);
            }
            var oldValue = get ? get.call(target, key) : undefined;
            // forward the operation before queueing reactions
            var result = target["delete"](key);
            if (hadKey) {
              trigger(target, TriggerOpTypes.DELETE, key, undefined, oldValue);
            }
            return result;
          },
          clear: function clear() {
            var target = toRaw(this);
            var hadItems = target.size !== 0;
            var oldTarget = isMap(target) ? new Map(target) : new Set(target);
            // forward the operation before queueing reactions
            var result = target.clear();
            if (hadItems) {
              trigger(target, TriggerOpTypes.CLEAR, undefined, undefined, oldTarget);
            }
            return result;
          }
        });
        var iteratorMethods = ['keys', 'values', 'entries', Symbol.iterator];
        iteratorMethods.forEach(function (method) {
          instrumentations[method] = createIterableMethod(method, readonly, shallow);
        });
        return instrumentations;
      }
      function createInstrumentationGetter(isReadonly, shallow) {
        var instrumentations = createInstrumentations(isReadonly, shallow);
        return function (target, key, receiver) {
          if (key === ReactiveFlags.IS_REACTIVE) {
            return !isReadonly;
          } else if (key === ReactiveFlags.IS_READONLY) {
            return isReadonly;
          } else if (key === ReactiveFlags.RAW) {
            return target;
          }
          return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
        };
      }
      var mutableCollectionHandlers = exports('mutableCollectionHandlers', {
        get: /*@__PURE__*/createInstrumentationGetter(false, false)
      });
      var shallowCollectionHandlers = exports('shallowCollectionHandlers', {
        get: /*@__PURE__*/createInstrumentationGetter(false, true)
      });
      var readonlyCollectionHandlers = exports('readonlyCollectionHandlers', {
        get: /*@__PURE__*/createInstrumentationGetter(true, false)
      });
      var shallowReadonlyCollectionHandlers = exports('shallowReadonlyCollectionHandlers', {
        get: /*@__PURE__*/createInstrumentationGetter(true, true)
      });
      function checkIdentityKeys(target, has, key) {
        var rawKey = toRaw(key);
        if (rawKey !== key && has.call(target, rawKey)) {
          var type = toRawType(target);
          warn("Reactive " + type + " contains both the raw and reactive " + ("versions of the same object" + (type === "Map" ? " as keys" : "") + ", ") + "which can lead to inconsistencies. " + "Avoid differentiating between the raw and reactive versions " + "of an object and only use the reactive version if possible.");
        }
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/computed.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts', './constants.ts', './dep.ts', './effect.ts', './general.ts'], function (exports) {
  var _createClass, cclegacy, warn, ReactiveFlags, TrackOpTypes, Dep, globalVersion, EffectFlags, activeSub, batch, refreshComputed, isFunction;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      ReactiveFlags = module.ReactiveFlags;
      TrackOpTypes = module.TrackOpTypes;
    }, function (module) {
      Dep = module.Dep;
      globalVersion = module.globalVersion;
    }, function (module) {
      EffectFlags = module.EffectFlags;
      activeSub = module.activeSub;
      batch = module.batch;
      refreshComputed = module.refreshComputed;
    }, function (module) {
      isFunction = module.isFunction;
    }],
    execute: function () {
      exports('computed', computed);
      cclegacy._RF.push({}, "ebbc8u8+idKIr4POGiAXu0p", "computed", undefined);
      /**
       * @private exported by @vue/reactivity for Vue core use, but not exported from
       * the main vue package
       */
      var ComputedRefImpl = exports('ComputedRefImpl', /*#__PURE__*/function () {
        function ComputedRefImpl(fn, setter, isSSR) {
          /**
           * @internal
           */
          this._value = undefined;
          /**
           * @internal
           */
          this.dep = new Dep(this);
          /**
           * @internal
           */
          this.__v_isRef = true;
          // TODO isolatedDeclarations ReactiveFlags.IS_REF
          /**
           * @internal
           */
          this.__v_isReadonly = void 0;
          // TODO isolatedDeclarations ReactiveFlags.IS_READONLY
          // A computed is also a subscriber that tracks other deps
          /**
           * @internal
           */
          this.deps = undefined;
          /**
           * @internal
           */
          this.depsTail = undefined;
          /**
           * @internal
           */
          this.flags = EffectFlags.DIRTY;
          /**
           * @internal
           */
          this.globalVersion = globalVersion - 1;
          /**
           * @internal
           */
          this.isSSR = void 0;
          /**
           * @internal
           */
          this.next = undefined;
          // for backwards compat
          this.effect = this;
          // dev only
          this.onTrack = void 0;
          // dev only
          this.onTrigger = void 0;
          /**
           * Dev only
           * @internal
           */
          this._warnRecursive = void 0;
          this.fn = fn;
          this.setter = setter;
          this[ReactiveFlags.IS_READONLY] = !setter;
          this.isSSR = isSSR;
        }

        /**
         * @internal
         */
        var _proto = ComputedRefImpl.prototype;
        _proto.notify = function notify() {
          this.flags |= EffectFlags.DIRTY;
          if (!(this.flags & EffectFlags.NOTIFIED) &&
          // avoid infinite self recursion
          activeSub !== this) {
            batch(this, true);
            return true;
          }
        };
        _createClass(ComputedRefImpl, [{
          key: "value",
          get: function get() {
            var link = this.dep.track({
              target: this,
              type: TrackOpTypes.GET,
              key: 'value'
            });
            refreshComputed(this);
            // sync version after evaluation
            if (link) {
              link.version = this.dep.version;
            }
            return this._value;
          },
          set: function set(newValue) {
            if (this.setter) {
              this.setter(newValue);
            } else {
              warn('Write operation failed: computed value is readonly');
            }
          }
        }]);
        return ComputedRefImpl;
      }());

      /**
       * Takes a getter function and returns a readonly reactive ref object for the
       * returned value from the getter. It can also take an object with get and set
       * functions to create a writable ref object.
       *
       * @example
       * ```js
       * // Creating a readonly computed ref:
       * const count = ref(1)
       * const plusOne = computed(() => count.value + 1)
       *
       * console.log(plusOne.value) // 2
       * plusOne.value++ // error
       * ```
       *
       * ```js
       * // Creating a writable computed ref:
       * const count = ref(1)
       * const plusOne = computed({
       *   get: () => count.value + 1,
       *   set: (val) => {
       *     count.value = val - 1
       *   }
       * })
       *
       * plusOne.value = 1
       * console.log(count.value) // 0
       * ```
       *
       * @param getter - Function that produces the next value.
       * @param debugOptions - For debugging. See {@link https://vuejs.org/guide/extras/reactivity-in-depth.html#computed-debugging}.
       * @see {@link https://vuejs.org/api/reactivity-core.html#computed}
       */

      function computed(getterOrOptions, debugOptions, isSSR) {
        if (isSSR === void 0) {
          isSSR = false;
        }
        var getter;
        var setter;
        if (isFunction(getterOrOptions)) {
          getter = getterOrOptions;
        } else {
          getter = getterOrOptions.get;
          setter = getterOrOptions.set;
        }
        var cRef = new ComputedRefImpl(getter, setter, isSSR);
        if (debugOptions && !isSSR) {
          cRef.onTrack = debugOptions.onTrack;
          cRef.onTrigger = debugOptions.onTrigger;
        }
        return cRef;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Config.ts", ['cc', './LangaugeType.ts'], function (exports) {
  var cclegacy, AllLanguageTypeTranslation;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      AllLanguageTypeTranslation = module.AllLanguageTypeTranslation;
    }],
    execute: function () {
      cclegacy._RF.push({}, "fe6daN2IyBHzap46TwcCloV", "Config", undefined);
      var Config = exports('Config', {
        // 游戏数据加密设置
        descrypt: false,
        // 游戏支持的语言设置
        languages: [{
          key: AllLanguageTypeTranslation["chs"],
          value: "chs"
        },
        // 中文
        {
          key: AllLanguageTypeTranslation["eng"],
          value: "eng"
        },
        // 英文
        {
          key: AllLanguageTypeTranslation["jpn"],
          value: "jpn"
        } // 日文
        ]
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/constants.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5a6daJVtzhLD7OyNxf3X45/", "constants", undefined);
      // using literal strings instead of numbers so that it's easier to inspect
      // debugger events

      var TrackOpTypes = exports('TrackOpTypes', /*#__PURE__*/function (TrackOpTypes) {
        TrackOpTypes["GET"] = "get";
        TrackOpTypes["HAS"] = "has";
        TrackOpTypes["ITERATE"] = "iterate";
        return TrackOpTypes;
      }({}));
      var TriggerOpTypes = exports('TriggerOpTypes', /*#__PURE__*/function (TriggerOpTypes) {
        TriggerOpTypes["SET"] = "set";
        TriggerOpTypes["ADD"] = "add";
        TriggerOpTypes["DELETE"] = "delete";
        TriggerOpTypes["CLEAR"] = "clear";
        return TriggerOpTypes;
      }({}));
      var ReactiveFlags = exports('ReactiveFlags', /*#__PURE__*/function (ReactiveFlags) {
        ReactiveFlags["SKIP"] = "__v_skip";
        ReactiveFlags["IS_REACTIVE"] = "__v_isReactive";
        ReactiveFlags["IS_READONLY"] = "__v_isReadonly";
        ReactiveFlags["IS_SHALLOW"] = "__v_isShallow";
        ReactiveFlags["RAW"] = "__v_raw";
        ReactiveFlags["IS_REF"] = "__v_isRef";
        return ReactiveFlags;
      }({}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Crocodile.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts', './AssetManager.ts', './LoadingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster, getBaseModManager, LoadingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "a5b46jXrYJFYK11xvBZtF0T", "Crocodile", undefined);
      var Crocodile_Entry = (_dec = RegisterLanguageEntry("Crocodile"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Crocodile_Entry, _LanguageEntry);
        function Crocodile_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Crocodile_Entry, [{
          key: "chs",
          get: function get() {
            return "鳄鱼";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Crocodile";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "クロコダイル";
          }
        }]);
        return Crocodile_Entry;
      }(LanguageEntry)) || _class);
      var Crocodile_Description_Entry = (_dec2 = RegisterLanguageEntry("Crocodile Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Crocodile_Description_Entry, _LanguageEntry2);
        function Crocodile_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Crocodile_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "沼泽中的凶猛鳄鱼，拥有强大的攻击力。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A fierce crocodile in the swamp, possessing great attack power.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "沼地にいる凶暴なクロコダイルで、強力な攻撃力を持っています。";
          }
        }]);
        return Crocodile_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Crocodile = exports('Crocodile', (_dec3 = RegisterCharacter("Crocodile"), _dec4 = registerMonster("Crocodile"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(Crocodile, _CharacterPrototype);
        function Crocodile() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 180,
            maxMp: 30,
            physicalAttack: 60,
            magicAttack: 15,
            physicalDefense: 12,
            magicDefense: 12,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 10,
            magicPenetration: 10,
            attackSpeed: 0.85
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 40,
            maxMp: 5,
            physicalAttack: 15,
            magicAttack: 2,
            physicalDefense: 3,
            magicDefense: 3
          });
          return _this;
        }
        var _proto = Crocodile.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = res;
                  _context2.next = 3;
                  return getBaseModManager().load("Spine/Monster/Crocodile/hero00034", sp.SkeletonData, true);
                case 3:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(Crocodile, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Crocodile").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Crocodile Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return Crocodile;
      }(CharacterPrototype)) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Spine/Monster/Crocodile/hero00034", sp.SkeletonData, true);
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DamageCalculation.ts", ['cc', './InjuryReduction.ts'], function (exports) {
  var cclegacy, physicalInjuryReduction, magicInjuryReduction, lightInjuryReduction, darkInjuryReduction;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      physicalInjuryReduction = module.physicalInjuryReduction;
      magicInjuryReduction = module.magicInjuryReduction;
      lightInjuryReduction = module.lightInjuryReduction;
      darkInjuryReduction = module.darkInjuryReduction;
    }],
    execute: function () {
      exports({
        darkDamage: darkDamage,
        lightDamage: lightDamage,
        magicDamage: magicDamage,
        physicalDamage: physicalDamage
      });
      cclegacy._RF.push({}, "f60b7/rE49B05FsMtFveMsF", "DamageCalculation", undefined);
      function physicalDamage(damage, penetration, defense) {
        var reduction = physicalInjuryReduction(penetration, defense);
        return Math.max(1, damage * (1 - reduction) - Math.max(0, defense - penetration) * 0.25);
      }
      function magicDamage(damage, penetration, defense) {
        var reduction = magicInjuryReduction(penetration, defense);
        return Math.max(0, damage * (1 - reduction) - Math.max(0, defense - penetration) * 0.25);
      }
      function lightDamage(damage, resistance, darkResistance) {
        var reduction = lightInjuryReduction(resistance);
        // 暗防御越高，光伤害越高
        var reDamageRate = 1 + darkResistance / Math.max(1, darkResistance + 1000);
        return Math.max(0, (damage * (1 - reduction) - resistance * 0.1) * reDamageRate);
      }
      function darkDamage(damage, resistance, lightResistance) {
        var reduction = darkInjuryReduction(resistance);
        // 光防御越高，暗伤害越高
        var reDamageRate = 1 + lightResistance / Math.max(1, lightResistance + 1000);
        return Math.max(0, (damage * (1 - reduction) - resistance * 0.1) * reDamageRate);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DefectorSoldier.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts', './LoadingManager.ts', './AssetManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster, LoadingManager, getBaseModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "c526clkiZ9Jc6lIWuPYrB6U", "DefectorSoldier", undefined);
      var DefectorSoldier_Entry = (_dec = RegisterLanguageEntry("DefectorSoldier"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(DefectorSoldier_Entry, _LanguageEntry);
        function DefectorSoldier_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(DefectorSoldier_Entry, [{
          key: "chs",
          get: function get() {
            return "叛变的士兵";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Defector Soldier";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "脱走兵";
          }
        }]);
        return DefectorSoldier_Entry;
      }(LanguageEntry)) || _class);
      var DefectorSoldier_Description_Entry = (_dec2 = RegisterLanguageEntry("DefectorSoldier Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(DefectorSoldier_Description_Entry, _LanguageEntry2);
        function DefectorSoldier_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(DefectorSoldier_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "叛变的士兵";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A soldier who has defected from his army, they are cunning and vicious, and enjoy ambushing their enemies.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "軍隊から脱走した兵士で、狡猾で凶悪であり、敵を待ち伏せするのが好きです。";
          }
        }]);
        return DefectorSoldier_Description_Entry;
      }(LanguageEntry)) || _class2);
      var DefectorSoldier = exports('DefectorSoldier', (_dec3 = RegisterCharacter("DefectorSoldier"), _dec4 = registerMonster("DefectorSoldier"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(DefectorSoldier, _CharacterPrototype);
        function DefectorSoldier() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 250,
            maxMp: 30,
            physicalAttack: 20,
            magicAttack: 15,
            physicalDefense: 18,
            magicDefense: 18,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 10,
            magicPenetration: 10,
            lightResistance: 25,
            darkResistance: -25,
            attackSpeed: 0.75
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 70,
            maxMp: 10,
            physicalAttack: 4,
            magicAttack: 3,
            physicalDefense: 8,
            magicDefense: 8
          });
          return _this;
        }
        var _proto = DefectorSoldier.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  _context2.t0 = res;
                  _context2.next = 3;
                  return getBaseModManager().load("Spine/Monster/DefectorSoldier/hero0007", sp.SkeletonData, true);
                case 3:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(DefectorSoldier, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("DefectorSoldier").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("DefectorSoldier Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return DefectorSoldier;
      }(CharacterPrototype)) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Spine/Monster/DefectorSoldier/hero0007", sp.SkeletonData, true);
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/dep.ts", ['cc', './index8.ts', './constants.ts', './effect.ts', './general.ts', './__DEV__.ts'], function (exports) {
  var cclegacy, TriggerOpTypes, activeSub, shouldTrack, startBatch, EffectFlags, endBatch, extend, isIntegerKey, isSymbol, isMap, isArray, __DEV__;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      TriggerOpTypes = module.TriggerOpTypes;
    }, function (module) {
      activeSub = module.activeSub;
      shouldTrack = module.shouldTrack;
      startBatch = module.startBatch;
      EffectFlags = module.EffectFlags;
      endBatch = module.endBatch;
    }, function (module) {
      extend = module.extend;
      isIntegerKey = module.isIntegerKey;
      isSymbol = module.isSymbol;
      isMap = module.isMap;
      isArray = module.isArray;
    }, function (module) {
      __DEV__ = module.__DEV__;
    }],
    execute: function () {
      exports({
        getDepFromReactive: getDepFromReactive,
        track: track,
        trigger: trigger
      });
      cclegacy._RF.push({}, "126f2E1hNtNrbTHr4HGidTC", "dep", undefined);

      /**
       * Incremented every time a reactive change happens
       * This is used to give computed a fast path to avoid re-compute when nothing
       * has changed.
       */
      var globalVersion = exports('globalVersion', 0);

      /**
       * Represents a link between a source (Dep) and a subscriber (Effect or Computed).
       * Deps and subs have a many-to-many relationship - each link between a
       * dep and a sub is represented by a Link instance.
       *
       * A Link is also a node in two doubly-linked lists - one for the associated
       * sub to track all its deps, and one for the associated dep to track all its
       * subs.
       *
       * @internal
       */
      var Link = exports('Link', function Link(sub, dep) {
        /**
         * - Before each effect run, all previous dep links' version are reset to -1
         * - During the run, a link's version is synced with the source dep on access
         * - After the run, links with version -1 (that were never used) are cleaned
         *   up
         */
        this.version = void 0;
        /**
         * Pointers for doubly-linked lists
         */
        this.nextDep = void 0;
        this.prevDep = void 0;
        this.nextSub = void 0;
        this.prevSub = void 0;
        this.prevActiveLink = void 0;
        this.sub = sub;
        this.dep = dep;
        this.version = dep.version;
        this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = undefined;
      });

      /**
       * @internal
       */
      var Dep = exports('Dep', /*#__PURE__*/function () {
        function Dep(computed) {
          this.version = 0;
          /**
           * Link between this dep and the current active effect
           */
          this.activeLink = undefined;
          /**
           * Doubly linked list representing the subscribing effects (tail)
           */
          this.subs = undefined;
          /**
           * Doubly linked list representing the subscribing effects (head)
           * DEV only, for invoking onTrigger hooks in correct order
           */
          this.subsHead = void 0;
          /**
           * For object property deps cleanup
           */
          this.map = undefined;
          this.key = undefined;
          /**
           * Subscriber counter
           */
          this.sc = 0;
          this.computed = computed;
          {
            this.subsHead = undefined;
          }
        }
        var _proto = Dep.prototype;
        _proto.track = function track(debugInfo) {
          if (!activeSub || !shouldTrack || activeSub === this.computed) {
            return;
          }
          var link = this.activeLink;
          if (link === undefined || link.sub !== activeSub) {
            link = this.activeLink = new Link(activeSub, this);

            // add the link to the activeEffect as a dep (as tail)
            if (!activeSub.deps) {
              activeSub.deps = activeSub.depsTail = link;
            } else {
              link.prevDep = activeSub.depsTail;
              activeSub.depsTail.nextDep = link;
              activeSub.depsTail = link;
            }
            addSub(link);
          } else if (link.version === -1) {
            // reused from last run - already a sub, just sync version
            link.version = this.version;

            // If this dep has a next, it means it's not at the tail - move it to the
            // tail. This ensures the effect's dep list is in the order they are
            // accessed during evaluation.
            if (link.nextDep) {
              var next = link.nextDep;
              next.prevDep = link.prevDep;
              if (link.prevDep) {
                link.prevDep.nextDep = next;
              }
              link.prevDep = activeSub.depsTail;
              link.nextDep = undefined;
              activeSub.depsTail.nextDep = link;
              activeSub.depsTail = link;

              // this was the head - point to the new head
              if (activeSub.deps === link) {
                activeSub.deps = next;
              }
            }
          }
          if (activeSub.onTrack) {
            activeSub.onTrack(extend({
              effect: activeSub
            }, debugInfo));
          }
          return link;
        };
        _proto.trigger = function trigger(debugInfo) {
          this.version++;
          exports('globalVersion', globalVersion + 1), globalVersion++;
          this.notify(debugInfo);
        };
        _proto.notify = function notify(debugInfo) {
          startBatch();
          try {
            if (__DEV__) {
              // subs are notified and batched in reverse-order and then invoked in
              // original order at the end of the batch, but onTrigger hooks should
              // be invoked in original order here.
              for (var head = this.subsHead; head; head = head.nextSub) {
                if (head.sub.onTrigger && !(head.sub.flags & EffectFlags.NOTIFIED)) {
                  head.sub.onTrigger(extend({
                    effect: head.sub
                  }, debugInfo));
                }
              }
            }
            for (var link = this.subs; link; link = link.prevSub) {
              if (link.sub.notify()) {
                // if notify() returns `true`, this is a computed. Also call notify
                // on its dep - it's called here instead of inside computed's notify
                // in order to reduce call stack depth.
                ;
                link.sub.dep.notify();
              }
            }
          } finally {
            endBatch();
          }
        };
        return Dep;
      }());
      function addSub(link) {
        link.dep.sc++;
        if (link.sub.flags & EffectFlags.TRACKING) {
          var _computed = link.dep.computed;
          // computed getting its first subscriber
          // enable tracking + lazily subscribe to all its deps
          if (_computed && !link.dep.subs) {
            _computed.flags |= EffectFlags.TRACKING | EffectFlags.DIRTY;
            for (var l = _computed.deps; l; l = l.nextDep) {
              addSub(l);
            }
          }
          var currentTail = link.dep.subs;
          if (currentTail !== link) {
            link.prevSub = currentTail;
            if (currentTail) currentTail.nextSub = link;
          }
          if (link.dep.subsHead === undefined) {
            link.dep.subsHead = link;
          }
          link.dep.subs = link;
        }
      }

      // The main WeakMap that stores {target -> key -> dep} connections.
      // Conceptually, it's easier to think of a dependency as a Dep class
      // which maintains a Set of subscribers, but we simply store them as
      // raw Maps to reduce memory overhead.
      var targetMap = exports('targetMap', new WeakMap());
      var ITERATE_KEY = exports('ITERATE_KEY', Symbol('Object iterate'));
      var MAP_KEY_ITERATE_KEY = exports('MAP_KEY_ITERATE_KEY', Symbol('Map keys iterate'));
      var ARRAY_ITERATE_KEY = exports('ARRAY_ITERATE_KEY', Symbol('Array iterate'));

      /**
       * Tracks access to a reactive property.
       *
       * This will check which effect is running at the moment and record it as dep
       * which records all effects that depend on the reactive property.
       *
       * @param target - Object holding the reactive property.
       * @param type - Defines the type of access to the reactive property.
       * @param key - Identifier of the reactive property to track.
       */
      function track(target, type, key) {
        if (shouldTrack && activeSub) {
          var depsMap = targetMap.get(target);
          if (!depsMap) {
            targetMap.set(target, depsMap = new Map());
          }
          var _dep = depsMap.get(key);
          if (!_dep) {
            depsMap.set(key, _dep = new Dep());
            _dep.map = depsMap;
            _dep.key = key;
          }
          {
            _dep.track({
              target: target,
              type: type,
              key: key
            });
          }
        }
      }

      /**
       * Finds all deps associated with the target (or a specific property) and
       * triggers the effects stored within.
       *
       * @param target - The reactive object.
       * @param type - Defines the type of the operation that needs to trigger effects.
       * @param key - Can be used to target a specific reactive property in the target object.
       */
      function trigger(target, type, key, newValue, oldValue, oldTarget) {
        var depsMap = targetMap.get(target);
        if (!depsMap) {
          // never been tracked
          exports('globalVersion', globalVersion + 1), globalVersion++;
          return;
        }
        var run = function run(dep) {
          if (dep) {
            {
              dep.trigger({
                target: target,
                type: type,
                key: key,
                newValue: newValue,
                oldValue: oldValue,
                oldTarget: oldTarget
              });
            }
          }
        };
        startBatch();
        if (type === TriggerOpTypes.CLEAR) {
          // collection being cleared
          // trigger all effects for target
          depsMap.forEach(run);
        } else {
          var targetIsArray = isArray(target);
          var isArrayIndex = targetIsArray && isIntegerKey(key);
          if (targetIsArray && key === 'length') {
            var newLength = Number(newValue);
            depsMap.forEach(function (dep, key) {
              if (key === 'length' || key === ARRAY_ITERATE_KEY || !isSymbol(key) && key >= newLength) {
                run(dep);
              }
            });
          } else {
            // schedule runs for SET | ADD | DELETE
            if (key !== void 0 || depsMap.has(void 0)) {
              run(depsMap.get(key));
            }

            // schedule ARRAY_ITERATE for any numeric key change (length is handled above)
            if (isArrayIndex) {
              run(depsMap.get(ARRAY_ITERATE_KEY));
            }

            // also run for iteration key on ADD | DELETE | Map.SET
            switch (type) {
              case TriggerOpTypes.ADD:
                if (!targetIsArray) {
                  run(depsMap.get(ITERATE_KEY));
                  if (isMap(target)) {
                    run(depsMap.get(MAP_KEY_ITERATE_KEY));
                  }
                } else if (isArrayIndex) {
                  // new index added to array -> length changes
                  run(depsMap.get('length'));
                }
                break;
              case TriggerOpTypes.DELETE:
                if (!targetIsArray) {
                  run(depsMap.get(ITERATE_KEY));
                  if (isMap(target)) {
                    run(depsMap.get(MAP_KEY_ITERATE_KEY));
                  }
                }
                break;
              case TriggerOpTypes.SET:
                if (isMap(target)) {
                  run(depsMap.get(ITERATE_KEY));
                }
                break;
            }
          }
        }
        endBatch();
      }
      function getDepFromReactive(object, key) {
        var depMap = targetMap.get(object);
        return depMap && depMap.get(key);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DetailInfoPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Label, ScrollView, RichText, instantiate, Button, Sprite, ExtensionComponent;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
      ScrollView = module.ScrollView;
      RichText = module.RichText;
      instantiate = module.instantiate;
      Button = module.Button;
      Sprite = module.Sprite;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "6f569jC8mlMJbizpv/YKF5Z", "DetailInfoPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var DetailInfoPrefab = exports('DetailInfoPrefab', (_dec = ccclass('DetailInfoPrefab'), _dec(_class = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(DetailInfoPrefab, _ExtensionComponent);
        function DetailInfoPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _this.closeCallback = null;
          _this.tempNode = null;
          // 关闭详情
          _this.closeDetail = function () {
            _this.node.active = false;
            if (_this.closeCallback) _this.closeCallback();
          };
          return _this;
        }
        var _proto = DetailInfoPrefab.prototype;
        // 设置详情
        _proto.setDetail = function setDetail(option) {
          this.node.active = true;
          this.closeCallback = option.closeCallback;
          var only = this.node.getChildByName("Only");
          var comparison = this.node.getChildByName("Comparison");
          option.content = option.content.filter(function (item) {
            return item;
          });
          if (option.content.length < 1) this.closeDetail();else if (option.content.length < 2) {
            only.active = true;
            comparison.active = false;
            this.setDetailData(option.content[0], only.children[0]);
          } else {
            only.active = false;
            comparison.active = true;
            this.setDetailData(option.content[0], comparison.children[0]);
            this.setDetailData(option.content[1], comparison.children[1]);
          }
        }

        // 设置详情数据
        ;

        _proto.setDetailData = function setDetailData(container, settingNode) {
          var _this2 = this;
          // 标题
          settingNode.getChildByName("Title").getComponent(Label).string = container.title;
          // 右侧信息
          settingNode.getChildByName("RightMessage").getComponent(ScrollView).content.getChildByName("item").getComponent(RichText).string = container.rightMessage || "";
          // 下侧信息
          settingNode.getChildByName("BottomMessage").getComponent(ScrollView).content.getChildByName("item").getComponent(RichText).string = container.bottomMessage || "";
          // 生成按钮
          var buttonsNode = settingNode.getChildByName("Buttons");
          if (!this.tempNode) {
            this.tempNode = buttonsNode.children[0];
            this.tempNode.parent = null;
          }
          buttonsNode.removeAllChildren();
          if (container.buttons) {
            container.buttons.forEach(function (item, index) {
              if (!item) return;
              var button = instantiate(_this2.tempNode);
              button.on(Button.EventType.CLICK, function () {
                item.callback(_this2.closeDetail);
              });
              button.getChildByName("Label").getComponent(Label).string = item.label;
              buttonsNode.addChild(button);
            });
          }
          // 图标信息
          if (container.boxIcon) {
            settingNode.getChildByName("Icon").getComponent(Sprite).spriteFrame = container.boxIcon;
          }
          settingNode.getChildByName("Icon").getChildByName("Icon").getComponent(Sprite).spriteFrame = container.icon;
        };
        return DetailInfoPrefab;
      }(ExtensionComponent)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Diamond.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, RegisterItem;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      RegisterItem = module.RegisterItem;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "ae4adfVSZpEvKHm7ciRzjek", "Diamond", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Brave_Entry = (_dec = RegisterLanguageEntry("Diamond"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "钻石";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Diamond";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "ダイヤモンド";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("Diamond Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "用于购买的高级货币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Used to purchase advanced currency";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "上級貨幣を購入するために使用されます";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Diamond = exports('Diamond', (_dec3 = RegisterItem("Diamond"), _dec3(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(Diamond, _ItemPrototype);
        function Diamond() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = Diamond.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/Diamond/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(Diamond, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Diamond").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Diamond Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return Diamond;
      }(ItemPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DiamondResourcePrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ResourceManager.ts', './Normal.ts', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Label, resourceManager, Normal, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      resourceManager = module.resourceManager;
    }, function (module) {
      Normal = module.Normal;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "1cdf3br3cdEeLdGaPruecTh", "DiamondResourcePrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var DiamondResourcePrefab = exports('DiamondResourcePrefab', (_dec = ccclass('DiamondResourcePrefab'), _dec2 = property(Label), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(DiamondResourcePrefab, _ExtensionComponent);
        function DiamondResourcePrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "DiamondNumberLabel", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = DiamondResourcePrefab.prototype;
        _proto.start = function start() {
          var _this2 = this;
          this.effect(function () {
            return _this2.DiamondNumberLabel.string = Normal.number(resourceManager.data.diamond);
          });
        };
        return DiamondResourcePrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "DiamondNumberLabel", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: null
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DivineGrace.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './CharacterPrototype.ts', './FightMapManager.ts', './CharacterToPrefabMap.ts', './SpineAnimation.ts', './AssetManager.ts', './LoadingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, Node, UITransform, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillPrototype, RegisterSkill, LanguageEntry, FromType, getFightMapInstance, getComponentByCharacter, SpineAnimation, getBaseModManager, LoadingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      Node = module.Node;
      UITransform = module.UITransform;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      FromType = module.FromType;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "3c97aZjwpBElbxUM8VKChy8", "DivineGrace", undefined);
      var Name = (_dec = RegisterLanguageEntry("DivineGrace"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "神圣祝福";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Divine Grace";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "聖なる祝福";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("DivineGrace Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u5728\u7B2C\u4E00\u6B21\u6B7B\u4EA1\u65F6\uFF0C\u56DE\u590D " + (10 + 10 * lv) + "% \u751F\u547D\u503C";
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "Upon the first death, restore " + (10 + 10 * lv) + "% of health";
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "1\u56DE\u76EE\u306E\u6B7B\u4EA1\u6642\u3001\u30E9\u30A4\u30D5\u3092\u56DE\u5FA9\u3057\u307E\u3059 " + (10 + 10 * lv) + "%";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var DivineGrace = exports('DivineGrace', (_dec3 = RegisterSkill("DivineGrace"), _dec4 = RegisterPlayerSkill("DivineGrace", "Apollo", true, "SunShining"), _dec5 = RegisterSkillUpLevel("DivineGrace", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(DivineGrace, _SkillPrototype);
        function DivineGrace() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = DivineGrace.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = getBaseModManager();
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Skill/DivineGrace/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.beforeDeath = /*#__PURE__*/function () {
          var _beforeDeath = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(progress, next) {
            var fightInstance, targetPrefab, node, spineAnimation, skeletonDataPack, lv;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  fightInstance = getFightMapInstance();
                  if (!(!fightInstance || fightInstance.customData["DivineGrace effect count"])) {
                    _context2.next = 3;
                    break;
                  }
                  return _context2.abrupt("return", next());
                case 3:
                  // 获取目标节点
                  targetPrefab = getComponentByCharacter(this.instance.characterInstance);
                  if (targetPrefab) {
                    _context2.next = 6;
                    break;
                  }
                  return _context2.abrupt("return");
                case 6:
                  // 播放特效动画
                  node = new Node();
                  node.addComponent(UITransform);
                  spineAnimation = node.addComponent(SpineAnimation);
                  _context2.next = 11;
                  return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
                case 11:
                  skeletonDataPack = _context2.sent;
                  targetPrefab.node.addChild(node);
                  _context2.next = 15;
                  return new Promise(function (res) {
                    node.setScale(1.2, 1.2);
                    node.setPosition(0, -120);
                    spineAnimation.skeletonData = skeletonDataPack.value;
                    spineAnimation.playAnimation("skill_2", {
                      count: 1
                    });
                    spineAnimation.listenFrameEvent("Skill", function () {
                      return res(null);
                    });
                  });
                case 15:
                  // 治疗角色
                  lv = Math.max(0, this.instance.lv - 1);
                  this.instance.characterInstance.increaseHp({
                    increase: (10 + 10 * lv) / 100 * this.instance.characterInstance.maxHp,
                    from: this.instance.characterInstance,
                    fromType: FromType.skill
                  });
                  fightInstance.customData["DivineGrace effect count"] = 1;
                  next();
                case 19:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function beforeDeath(_x2, _x3) {
            return _beforeDeath.apply(this, arguments);
          }
          return beforeDeath;
        }();
        _createClass(DivineGrace, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("DivineGrace").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("DivineGrace Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }]);
        return DivineGrace;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Texture/Skill/DivineGrace/spriteFrame", SpriteFrame, true);
            case 2:
              _context3.next = 4;
              return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/DivineLight.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './FightMapManager.ts', './CharacterPrototype.ts', './SpineAnimation.ts', './CharacterToPrefabMap.ts', './LoadingManager.ts', './Message.ts', './AssetManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, Node, UITransform, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillFailReason, SkillPrototype, RegisterSkill, LanguageEntry, getFightMapInstance, DamageType, FromType, SpineAnimation, getComponentByCharacter, LoadingManager, message, getBaseModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      Node = module.Node;
      UITransform = module.UITransform;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "d13ff2fS/pN7bvfn4E0NeyR", "DivineLight", undefined);
      var Name = (_dec = RegisterLanguageEntry("DivineLight"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "圣光术";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Divine Light";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "聖光術";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("DivineLight Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8017: " + (Math.max(1, lv) * 20 + 40) + " \u9B54\u6CD5\u503C</color>\n\u51B7\u5374\u65F6\u95F4: " + (20 - lv * 1.5) + "s\n" + ("\u9020\u6210 " + (Math.max(1, lv) * 10 + 60) + "% \u9B54\u529B\u503C\u7684\u9B54\u6CD5\u4F24\u5BB3\u548C " + (Math.max(1, lv) * 10 + 25) + "% \u9B54\u529B\u503C\u7684\u5149\u4F24\u5BB3");
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>Cost: " + (Math.max(1, lv) * 20 + 40) + " MP</color>\nCooldown: " + (20 - lv * 1.5) + "s\n" + ("Deal magic damage equal to " + (Math.max(1, lv) * 10 + 60) + "% of MP and " + (Math.max(1, lv) * 10 + 25) + "% magic light damage");
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8CBB: " + (Math.max(1, lv) * 20 + 40) + " \u30DE\u30CA</color>\n\u30AF\u30FC\u30EB\u30C0\u30A6\u30F3: " + (20 - lv * 1.5) + "s\n" + ("\u9B54\u529B\u306E " + (Math.max(1, lv) * 10 + 60) + "% \u3068\u5149\u306E " + (Math.max(1, lv) * 10 + 25) + "% \u306E\u30C0\u30E1\u30FC\u30B8\u3092\u4E0E\u3048\u308B");
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var DivineLight = exports('DivineLight', (_dec3 = RegisterSkill("DivineLight"), _dec4 = RegisterPlayerSkill("DivineLight", "Brave"), _dec5 = RegisterSkillUpLevel("DivineLight", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(DivineLight, _SkillPrototype);
        function DivineLight() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = DivineLight.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/DivineLight/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = /*#__PURE__*/function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            var fightInstance, target, targetPrefab, node, spineAnimation, skeletonDataPack, magicReduce, lightReduce;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // 战斗实例
                  fightInstance = getFightMapInstance(); // 战斗实例不存在
                  if (fightInstance) {
                    _context2.next = 3;
                    break;
                  }
                  return _context2.abrupt("return");
                case 3:
                  // 获取目标
                  target = this.instance.characterInstance === fightInstance.player ? fightInstance.currentMonster : fightInstance.player; // 获取目标节点
                  targetPrefab = getComponentByCharacter(target);
                  if (targetPrefab) {
                    _context2.next = 7;
                    break;
                  }
                  return _context2.abrupt("return");
                case 7:
                  // 播放特效动画
                  node = new Node();
                  node.addComponent(UITransform);
                  spineAnimation = node.addComponent(SpineAnimation);
                  _context2.next = 12;
                  return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
                case 12:
                  skeletonDataPack = _context2.sent;
                  targetPrefab.node.addChild(node);
                  _context2.next = 16;
                  return new Promise(function (res) {
                    node.setScale(1.2, 1.2);
                    node.setPosition(0, -120);
                    spineAnimation.skeletonData = skeletonDataPack.value;
                    spineAnimation.playAnimation("skill_2", {
                      count: 1
                    });
                    spineAnimation.listenFrameEvent("Skill", function () {
                      return res(null);
                    });
                  });
                case 16:
                  magicReduce = Math.max(useOption.use.magicAttack * ((Math.max(1, this.instance.lv - 1) * 10 + 60) / 100), 1);
                  lightReduce = Math.max(useOption.use.magicAttack * ((Math.max(1, this.instance.lv - 1) * 10 + 25) / 100), 1);
                  target.beDamage({
                    atk: magicReduce,
                    type: DamageType.magic,
                    from: fightInstance.player,
                    fromType: FromType.skill
                  });
                  target.beDamage({
                    atk: lightReduce,
                    type: DamageType.light,
                    from: fightInstance.player,
                    fromType: FromType.skill
                  });
                case 20:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function use(_x2) {
            return _use.apply(this, arguments);
          }
          return use;
        }();
        _proto.useFail = function useFail(reason, progress) {
          if (reason === SkillFailReason.NotEnoughCoast) message.toast(new ( /*#__PURE__*/function (_LanguageEntry3) {
            _inheritsLoose(_class4, _LanguageEntry3);
            function _class4() {
              return _LanguageEntry3.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "当前法力值不足以使用该技能";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Not enough MP to use this skill";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "MPが足りません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language));
        };
        _createClass(DivineLight, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("DivineLight").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("DivineLight Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "cost",
          get: function get() {
            return {
              mp: Math.max(1, this.instance.lv - 1) * 20 + 40,
              hp: 0
            };
          }
        }, {
          key: "coolTime",
          get: function get() {
            if (!this.instance.characterInstance) return 20 - this.instance.lv * 1.5;
            return (20 - this.instance.lv * 1.5) * (1 - this.instance.characterInstance.coolDown / (this.instance.characterInstance.coolDown + 150));
          }
        }]);
        return DivineLight;
      }(SkillPrototype)) || _class3) || _class3) || _class3));

      // 预加载动画 
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Texture/Skill/DivineLight/spriteFrame", SpriteFrame, true);
            case 2:
              _context3.next = 4;
              return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/effect.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts', './dep.ts', './effectScope.ts', './general.ts'], function (exports) {
  var _createClass, cclegacy, warn, globalVersion, activeEffectScope, hasChanged, extend;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      globalVersion = module.globalVersion;
    }, function (module) {
      activeEffectScope = module.activeEffectScope;
    }, function (module) {
      hasChanged = module.hasChanged;
      extend = module.extend;
    }],
    execute: function () {
      exports({
        activeSub: void 0,
        batch: batch,
        effect: effect,
        enableTracking: enableTracking,
        endBatch: endBatch,
        onEffectCleanup: onEffectCleanup,
        pauseTracking: pauseTracking,
        refreshComputed: refreshComputed,
        resetTracking: resetTracking,
        startBatch: startBatch,
        stop: stop
      });
      cclegacy._RF.push({}, "72ffbiUP9dKuo0Juk8VvOSW", "effect", undefined);
      var activeSub;
      var EffectFlags = exports('EffectFlags', /*#__PURE__*/function (EffectFlags) {
        EffectFlags[EffectFlags["ACTIVE"] = 1] = "ACTIVE";
        EffectFlags[EffectFlags["RUNNING"] = 2] = "RUNNING";
        EffectFlags[EffectFlags["TRACKING"] = 4] = "TRACKING";
        EffectFlags[EffectFlags["NOTIFIED"] = 8] = "NOTIFIED";
        EffectFlags[EffectFlags["DIRTY"] = 16] = "DIRTY";
        EffectFlags[EffectFlags["ALLOW_RECURSE"] = 32] = "ALLOW_RECURSE";
        EffectFlags[EffectFlags["PAUSED"] = 64] = "PAUSED";
        return EffectFlags;
      }({}));

      /**
       * Subscriber is a type that tracks (or subscribes to) a list of deps.
       */

      var pausedQueueEffects = new WeakSet();
      var ReactiveEffect = exports('ReactiveEffect', /*#__PURE__*/function () {
        function ReactiveEffect(fn) {
          /**
           * @internal
           */
          this.deps = undefined;
          /**
           * @internal
           */
          this.depsTail = undefined;
          /**
           * @internal
           */
          this.flags = EffectFlags.ACTIVE | EffectFlags.TRACKING;
          /**
           * @internal
           */
          this.next = undefined;
          /**
           * @internal
           */
          this.cleanup = undefined;
          this.scheduler = undefined;
          this.onStop = void 0;
          this.onTrack = void 0;
          this.onTrigger = void 0;
          this.fn = fn;
          if (activeEffectScope && activeEffectScope.active) {
            activeEffectScope.effects.push(this);
          }
        }
        var _proto = ReactiveEffect.prototype;
        _proto.pause = function pause() {
          this.flags |= EffectFlags.PAUSED;
        };
        _proto.resume = function resume() {
          if (this.flags & EffectFlags.PAUSED) {
            this.flags &= ~EffectFlags.PAUSED;
            if (pausedQueueEffects.has(this)) {
              pausedQueueEffects["delete"](this);
              this.trigger();
            }
          }
        }

        /**
         * @internal
         */;
        _proto.notify = function notify() {
          if (this.flags & EffectFlags.RUNNING && !(this.flags & EffectFlags.ALLOW_RECURSE)) {
            return;
          }
          if (!(this.flags & EffectFlags.NOTIFIED)) {
            batch(this);
          }
        };
        _proto.run = function run() {
          // TODO cleanupEffect

          if (!(this.flags & EffectFlags.ACTIVE)) {
            // stopped during cleanup
            return this.fn();
          }
          this.flags |= EffectFlags.RUNNING;
          cleanupEffect(this);
          prepareDeps(this);
          var prevEffect = activeSub;
          var prevShouldTrack = shouldTrack;
          activeSub = exports('activeSub', this);
          shouldTrack = exports('shouldTrack', true);
          try {
            return this.fn();
          } finally {
            if (activeSub !== this) {
              warn('Active effect was not restored correctly - ' + 'this is likely a Vue internal bug.');
            }
            cleanupDeps(this);
            activeSub = exports('activeSub', prevEffect);
            shouldTrack = exports('shouldTrack', prevShouldTrack);
            this.flags &= ~EffectFlags.RUNNING;
          }
        };
        _proto.stop = function stop() {
          if (this.flags & EffectFlags.ACTIVE) {
            for (var link = this.deps; link; link = link.nextDep) {
              removeSub(link);
            }
            this.deps = this.depsTail = undefined;
            cleanupEffect(this);
            this.onStop && this.onStop();
            this.flags &= ~EffectFlags.ACTIVE;
          }
        };
        _proto.trigger = function trigger() {
          if (this.flags & EffectFlags.PAUSED) {
            pausedQueueEffects.add(this);
          } else if (this.scheduler) {
            this.scheduler();
          } else {
            this.runIfDirty();
          }
        }

        /**
         * @internal
         */;
        _proto.runIfDirty = function runIfDirty() {
          if (isDirty(this)) {
            this.run();
          }
        };
        _createClass(ReactiveEffect, [{
          key: "dirty",
          get: function get() {
            return isDirty(this);
          }
        }]);
        return ReactiveEffect;
      }());

      /**
       * For debugging
       */
      // function printDeps(sub: Subscriber) {
      //   let d = sub.deps
      //   let ds = []
      //   while (d) {
      //     ds.push(d)
      //     d = d.nextDep
      //   }
      //   return ds.map(d => ({
      //     id: d.id,
      //     prev: d.prevDep?.id,
      //     next: d.nextDep?.id,
      //   }))
      // }

      var batchDepth = 0;
      var batchedSub;
      var batchedComputed;
      function batch(sub, isComputed) {
        if (isComputed === void 0) {
          isComputed = false;
        }
        sub.flags |= EffectFlags.NOTIFIED;
        if (isComputed) {
          sub.next = batchedComputed;
          batchedComputed = sub;
          return;
        }
        sub.next = batchedSub;
        batchedSub = sub;
      }

      /**
       * @internal
       */
      function startBatch() {
        batchDepth++;
      }

      /**
       * Run batched effects when all batches have ended
       * @internal
       */
      function endBatch() {
        if (--batchDepth > 0) {
          return;
        }
        if (batchedComputed) {
          var e = batchedComputed;
          batchedComputed = undefined;
          while (e) {
            var next = e.next;
            e.next = undefined;
            e.flags &= ~EffectFlags.NOTIFIED;
            e = next;
          }
        }
        var error;
        while (batchedSub) {
          var _e = batchedSub;
          batchedSub = undefined;
          while (_e) {
            var _next = _e.next;
            _e.next = undefined;
            _e.flags &= ~EffectFlags.NOTIFIED;
            if (_e.flags & EffectFlags.ACTIVE) {
              try {
                // ACTIVE flag is effect-only
                ;
                _e.trigger();
              } catch (err) {
                if (!error) error = err;
              }
            }
            _e = _next;
          }
        }
        if (error) throw error;
      }
      function prepareDeps(sub) {
        // Prepare deps for tracking, starting from the head
        for (var link = sub.deps; link; link = link.nextDep) {
          // set all previous deps' (if any) version to -1 so that we can track
          // which ones are unused after the run
          link.version = -1;
          // store previous active sub if link was being used in another context
          link.prevActiveLink = link.dep.activeLink;
          link.dep.activeLink = link;
        }
      }
      function cleanupDeps(sub) {
        // Cleanup unsued deps
        var head;
        var tail = sub.depsTail;
        var link = tail;
        while (link) {
          var prev = link.prevDep;
          if (link.version === -1) {
            if (link === tail) tail = prev;
            // unused - remove it from the dep's subscribing effect list
            removeSub(link);
            // also remove it from this effect's dep list
            removeDep(link);
          } else {
            // The new head is the last node seen which wasn't removed
            // from the doubly-linked list
            head = link;
          }

          // restore previous active link if any
          link.dep.activeLink = link.prevActiveLink;
          link.prevActiveLink = undefined;
          link = prev;
        }
        // set the new head & tail
        sub.deps = head;
        sub.depsTail = tail;
      }
      function isDirty(sub) {
        for (var link = sub.deps; link; link = link.nextDep) {
          if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {
            return true;
          }
        }
        // @ts-expect-error only for backwards compatibility where libs manually set
        // this flag - e.g. Pinia's testing module
        if (sub._dirty) {
          return true;
        }
        return false;
      }

      /**
       * Returning false indicates the refresh failed
       * @internal
       */
      function refreshComputed(computed) {
        if (computed.flags & EffectFlags.TRACKING && !(computed.flags & EffectFlags.DIRTY)) {
          return;
        }
        computed.flags &= ~EffectFlags.DIRTY;

        // Global version fast path when no reactive changes has happened since
        // last refresh.
        if (computed.globalVersion === globalVersion) {
          return;
        }
        computed.globalVersion = globalVersion;
        var dep = computed.dep;
        computed.flags |= EffectFlags.RUNNING;
        // In SSR there will be no render effect, so the computed has no subscriber
        // and therefore tracks no deps, thus we cannot rely on the dirty check.
        // Instead, computed always re-evaluate and relies on the globalVersion
        // fast path above for caching.
        if (dep.version > 0 && !computed.isSSR && computed.deps && !isDirty(computed)) {
          computed.flags &= ~EffectFlags.RUNNING;
          return;
        }
        var prevSub = activeSub;
        var prevShouldTrack = shouldTrack;
        activeSub = exports('activeSub', computed);
        shouldTrack = exports('shouldTrack', true);
        try {
          prepareDeps(computed);
          var value = computed.fn(computed._value);
          if (dep.version === 0 || hasChanged(value, computed._value)) {
            computed._value = value;
            dep.version++;
          }
        } catch (err) {
          dep.version++;
          throw err;
        } finally {
          activeSub = exports('activeSub', prevSub);
          shouldTrack = exports('shouldTrack', prevShouldTrack);
          cleanupDeps(computed);
          computed.flags &= ~EffectFlags.RUNNING;
        }
      }
      function removeSub(link, soft) {
        if (soft === void 0) {
          soft = false;
        }
        var dep = link.dep,
          prevSub = link.prevSub,
          nextSub = link.nextSub;
        if (prevSub) {
          prevSub.nextSub = nextSub;
          link.prevSub = undefined;
        }
        if (nextSub) {
          nextSub.prevSub = prevSub;
          link.nextSub = undefined;
        }
        if (dep.subsHead === link) {
          // was previous head, point new head to next
          dep.subsHead = nextSub;
        }
        if (dep.subs === link) {
          // was previous tail, point new tail to prev
          dep.subs = prevSub;
          if (!prevSub && dep.computed) {
            // if computed, unsubscribe it from all its deps so this computed and its
            // value can be GCed
            dep.computed.flags &= ~EffectFlags.TRACKING;
            for (var l = dep.computed.deps; l; l = l.nextDep) {
              // here we are only "soft" unsubscribing because the computed still keeps
              // referencing the deps and the dep should not decrease its sub count
              removeSub(l, true);
            }
          }
        }
        if (!soft && ! --dep.sc && dep.map) {
          // #11979
          // property dep no longer has effect subscribers, delete it
          // this mostly is for the case where an object is kept in memory but only a
          // subset of its properties is tracked at one time
          dep.map["delete"](dep.key);
        }
      }
      function removeDep(link) {
        var prevDep = link.prevDep,
          nextDep = link.nextDep;
        if (prevDep) {
          prevDep.nextDep = nextDep;
          link.prevDep = undefined;
        }
        if (nextDep) {
          nextDep.prevDep = prevDep;
          link.nextDep = undefined;
        }
      }
      function effect(fn, options) {
        if (fn.effect instanceof ReactiveEffect) {
          fn = fn.effect.fn;
        }
        var e = new ReactiveEffect(fn);
        if (options) {
          extend(e, options);
        }
        try {
          e.run();
        } catch (err) {
          e.stop();
          throw err;
        }
        var runner = e.run.bind(e);
        runner.effect = e;
        return runner;
      }

      /**
       * Stops the effect associated with the given runner.
       *
       * @param runner - Association with the effect to stop tracking.
       */
      function stop(runner) {
        runner.effect.stop();
      }

      /**
       * @internal
       */
      var shouldTrack = exports('shouldTrack', true);
      var trackStack = [];

      /**
       * Temporarily pauses tracking.
       */
      function pauseTracking() {
        trackStack.push(shouldTrack);
        shouldTrack = exports('shouldTrack', false);
      }

      /**
       * Re-enables effect tracking (if it was paused).
       */
      function enableTracking() {
        trackStack.push(shouldTrack);
        shouldTrack = exports('shouldTrack', true);
      }

      /**
       * Resets the previous global effect tracking state.
       */
      function resetTracking() {
        var last = trackStack.pop();
        shouldTrack = exports('shouldTrack', last === undefined ? true : last);
      }

      /**
       * Registers a cleanup function for the current active effect.
       * The cleanup function is called right before the next effect run, or when the
       * effect is stopped.
       *
       * Throws a warning if there is no current active effect. The warning can be
       * suppressed by passing `true` to the second argument.
       *
       * @param fn - the cleanup function to be registered
       * @param failSilently - if `true`, will not throw warning when called without
       * an active effect.
       */
      function onEffectCleanup(fn, failSilently) {
        if (failSilently === void 0) {
          failSilently = false;
        }
        if (activeSub instanceof ReactiveEffect) {
          activeSub.cleanup = fn;
        } else if (!failSilently) {
          warn("onEffectCleanup() was called when there was no active effect" + " to associate with.");
        }
      }
      function cleanupEffect(e) {
        var cleanup = e.cleanup;
        e.cleanup = undefined;
        if (cleanup) {
          // run cleanup without active effect
          var prevSub = activeSub;
          activeSub = exports('activeSub', undefined);
          try {
            cleanup();
          } finally {
            activeSub = exports('activeSub', prevSub);
          }
        }
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/effectScope.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts'], function (exports) {
  var _createClass, cclegacy, warn;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null],
    execute: function () {
      exports({
        activeEffectScope: void 0,
        effectScope: effectScope,
        getCurrentScope: getCurrentScope,
        onScopeDispose: onScopeDispose
      });
      cclegacy._RF.push({}, "ae0a3Tis1tAg73NEBB7gmSo", "effectScope", undefined);
      var activeEffectScope;
      var EffectScope = exports('EffectScope', /*#__PURE__*/function () {
        function EffectScope(detached) {
          if (detached === void 0) {
            detached = false;
          }
          /**
           * @internal
           */
          this._active = true;
          /**
           * @internal
           */
          this.effects = [];
          /**
           * @internal
           */
          this.cleanups = [];
          this._isPaused = false;
          /**
           * only assigned by undetached scope
           * @internal
           */
          this.parent = void 0;
          /**
           * record undetached scopes
           * @internal
           */
          this.scopes = void 0;
          /**
           * track a child scope's index in its parent's scopes array for optimized
           * removal
           * @internal
           */
          this.index = void 0;
          this.detached = detached;
          this.parent = activeEffectScope;
          if (!detached && activeEffectScope) {
            this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;
          }
        }
        var _proto = EffectScope.prototype;
        _proto.pause = function pause() {
          if (this._active) {
            this._isPaused = true;
            var i, l;
            if (this.scopes) {
              for (i = 0, l = this.scopes.length; i < l; i++) {
                this.scopes[i].pause();
              }
            }
            for (i = 0, l = this.effects.length; i < l; i++) {
              this.effects[i].pause();
            }
          }
        }

        /**
         * Resumes the effect scope, including all child scopes and effects.
         */;
        _proto.resume = function resume() {
          if (this._active) {
            if (this._isPaused) {
              this._isPaused = false;
              var i, l;
              if (this.scopes) {
                for (i = 0, l = this.scopes.length; i < l; i++) {
                  this.scopes[i].resume();
                }
              }
              for (i = 0, l = this.effects.length; i < l; i++) {
                this.effects[i].resume();
              }
            }
          }
        };
        _proto.run = function run(fn) {
          if (this._active) {
            var currentEffectScope = activeEffectScope;
            try {
              activeEffectScope = exports('activeEffectScope', this);
              return fn();
            } finally {
              activeEffectScope = exports('activeEffectScope', currentEffectScope);
            }
          } else {
            warn("cannot run an inactive effect scope.");
          }
        }

        /**
         * This should only be called on non-detached scopes
         * @internal
         */;
        _proto.on = function on() {
          activeEffectScope = exports('activeEffectScope', this);
        }

        /**
         * This should only be called on non-detached scopes
         * @internal
         */;
        _proto.off = function off() {
          activeEffectScope = exports('activeEffectScope', this.parent);
        };
        _proto.stop = function stop(fromParent) {
          if (this._active) {
            this._active = false;
            var i, l;
            for (i = 0, l = this.effects.length; i < l; i++) {
              this.effects[i].stop();
            }
            this.effects.length = 0;
            for (i = 0, l = this.cleanups.length; i < l; i++) {
              this.cleanups[i]();
            }
            this.cleanups.length = 0;
            if (this.scopes) {
              for (i = 0, l = this.scopes.length; i < l; i++) {
                this.scopes[i].stop(true);
              }
              this.scopes.length = 0;
            }

            // nested scope, dereference from parent to avoid memory leaks
            if (!this.detached && this.parent && !fromParent) {
              // optimized O(1) removal
              var last = this.parent.scopes.pop();
              if (last && last !== this) {
                this.parent.scopes[this.index] = last;
                last.index = this.index;
              }
            }
            this.parent = undefined;
          }
        };
        _createClass(EffectScope, [{
          key: "active",
          get: function get() {
            return this._active;
          }
        }]);
        return EffectScope;
      }());

      /**
       * Creates an effect scope object which can capture the reactive effects (i.e.
       * computed and watchers) created within it so that these effects can be
       * disposed together. For detailed use cases of this API, please consult its
       * corresponding {@link https://github.com/vuejs/rfcs/blob/master/active-rfcs/0041-reactivity-effect-scope.md | RFC}.
       *
       * @param detached - Can be used to create a "detached" effect scope.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#effectscope}
       */
      function effectScope(detached) {
        return new EffectScope(detached);
      }

      /**
       * Returns the current active effect scope if there is one.
       *
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#getcurrentscope}
       */
      function getCurrentScope() {
        return activeEffectScope;
      }

      /**
       * Registers a dispose callback on the current active effect scope. The
       * callback will be invoked when the associated effect scope is stopped.
       *
       * @param fn - The callback function to attach to the scope's cleanup.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#onscopedispose}
       */
      function onScopeDispose(fn, failSilently) {
        if (failSilently === void 0) {
          failSilently = false;
        }
        if (activeEffectScope) {
          activeEffectScope.cleanups.push(fn);
        } else if (!failSilently) {
          warn("onScopeDispose() is called when there is no active effect scope" + " to be associated with.");
        }
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Enchanter.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './LoadingManager.ts', './AssetManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillPrototype, RegisterSkill, LanguageEntry, LoadingManager, getBaseModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "82b13oHILJNDbFpKwAAdvSQ", "Enchanter", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Name = (_dec = RegisterLanguageEntry("Enchanter"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "巫师";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Enchanter";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "エンチャンター";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("Enchanter Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u63D0\u5347 " + (lv * 20 + 30) + " \u9B54\u529B\u503C\u548C " + (lv * 30 + 50) + " \u9B54\u6CD5\u503C";
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "Boost " + (lv * 20 + 30) + " mana and " + (lv * 30 + 50) + " magic";
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u9B54\u529B " + (lv * 20 + 30) + " \u3068\u9B54\u6CD5 " + (lv * 30 + 50) + " \u3092\u4E0A\u6607";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var Enchanter = exports('Enchanter', (_dec3 = RegisterSkill("Enchanter"), _dec4 = RegisterPlayerSkill("Enchanter", "Brave", true, "DivineLight"), _dec5 = RegisterSkillUpLevel("Enchanter", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(Enchanter, _SkillPrototype);
        function Enchanter() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = Enchanter.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/Enchanter/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(Enchanter, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Enchanter").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("Enchanter Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "extraProperty",
          get: function get() {
            return {
              magicAttack: this.instance.lv * 20 + 30,
              maxMp: this.instance.lv * 30 + 50
            };
          }
        }]);
        return Enchanter;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return getBaseModManager().load("Texture/Skill/Enchanter/spriteFrame", SpriteFrame, true);
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentInstance.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './EquipmentPrototype.ts', './EquipmentInstanceProperty.ts'], function (exports) {
  var _inheritsLoose, _assertThisInitialized, cclegacy, EquipmentQuality, EquipmentInstanceProperty;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      EquipmentQuality = module.EquipmentQuality;
    }, function (module) {
      EquipmentInstanceProperty = module.EquipmentInstanceProperty;
    }],
    execute: function () {
      cclegacy._RF.push({}, "324dcULWH5K0rZ1HwZ3a3pG", "EquipmentInstance", undefined);
      var EquipmentInstance = exports('EquipmentInstance', /*#__PURE__*/function (_EquipmentInstancePro) {
        _inheritsLoose(EquipmentInstance, _EquipmentInstancePro);
        function EquipmentInstance(option) {
          var _this;
          _this = _EquipmentInstancePro.call(this) || this;
          // 对应的角色
          _this.character = null;
          _this.id = void 0;
          _this.id = option.id;
          _this.lv = option.lv || 1;
          _this.proto = new option.Proto(_assertThisInitialized(_this));
          _this.character = option.character || null;
          _this.quality = option.quality || EquipmentQuality.Ordinary;
          if (option.extraProperty) _this.extraProperty = option.extraProperty;
          return _this;
        }
        return EquipmentInstance;
      }(EquipmentInstanceProperty));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentInstanceProperty.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BaseInstanceProperty.ts'], function (exports) {
  var _inheritsLoose, _createClass, cclegacy, BaseInstanceProperty;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      BaseInstanceProperty = module.BaseInstanceProperty;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3578bCB1JZPBYwYKD6G3kar", "EquipmentInstanceProperty", undefined);
      var EquipmentInstanceProperty = exports('EquipmentInstanceProperty', /*#__PURE__*/function (_BaseInstanceProperty) {
        _inheritsLoose(EquipmentInstanceProperty, _BaseInstanceProperty);
        function EquipmentInstanceProperty() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _BaseInstanceProperty.call.apply(_BaseInstanceProperty, [this].concat(args)) || this;
          // 品质
          _this.quality = 0;
          // 品质范围 1 - 5
          // 对应的原型
          _this.proto = null;
          // 额外属性
          _this.extraProperty = {};
          return _this;
        }
        _createClass(EquipmentInstanceProperty, [{
          key: "maxHp",
          get:
          // 最大生命值
          function get() {
            var base = this.proto.baseProperty.maxHp * (1 + this.quality / 10);
            var grow = this.proto.growProperty.maxHp * (this.lv - 1);
            var extra = this.extraProperty.maxHp || 0;
            return base + grow + extra;
          }
          // 最大魔法值
        }, {
          key: "maxMp",
          get: function get() {
            var base = this.proto.baseProperty.maxMp * (1 + this.quality / 10);
            var grow = this.proto.growProperty.maxMp * (this.lv - 1);
            var extra = this.extraProperty.maxMp || 0;
            return base + grow + extra;
          }
          // 物理攻击力
        }, {
          key: "physicalAttack",
          get: function get() {
            var base = this.proto.baseProperty.physicalAttack * (1 + this.quality / 10);
            var grow = this.proto.growProperty.physicalAttack * (this.lv - 1);
            var extra = this.extraProperty.physicalAttack || 0;
            return base + grow + extra;
          }
          // 魔法攻击力
        }, {
          key: "magicAttack",
          get: function get() {
            var base = this.proto.baseProperty.magicAttack * (1 + this.quality / 10);
            var grow = this.proto.growProperty.magicAttack * (this.lv - 1);
            var extra = this.extraProperty.magicAttack || 0;
            return base + grow + extra;
          }
          // 光属性攻击力
        }, {
          key: "lightAttack",
          get: function get() {
            var base = this.proto.baseProperty.lightAttack * (1 + this.quality / 10);
            var grow = this.proto.growProperty.lightAttack * (this.lv - 1);
            var extra = this.extraProperty.lightAttack || 0;
            return base + grow + extra;
          }
          // 暗属性攻击力
        }, {
          key: "darkAttack",
          get: function get() {
            var base = this.proto.baseProperty.darkAttack * (1 + this.quality / 10);
            var grow = this.proto.growProperty.darkAttack * (this.lv - 1);
            var extra = this.extraProperty.darkAttack || 0;
            return base + grow + extra;
          }
          // 物理防御力
        }, {
          key: "physicalDefense",
          get: function get() {
            var base = this.proto.baseProperty.physicalDefense * (1 + this.quality / 10);
            var grow = this.proto.growProperty.physicalDefense * (this.lv - 1);
            var extra = this.extraProperty.physicalDefense || 0;
            return base + grow + extra;
          }
          // 魔法防御力
        }, {
          key: "magicDefense",
          get: function get() {
            var base = this.proto.baseProperty.magicDefense * (1 + this.quality / 10);
            var grow = this.proto.growProperty.magicDefense * (this.lv - 1);
            var extra = this.extraProperty.magicDefense || 0;
            return base + grow + extra;
          }
          // 光属性抗性
        }, {
          key: "lightResistance",
          get: function get() {
            var base = this.proto.baseProperty.lightResistance * (1 + this.quality / 10);
            var grow = this.proto.growProperty.lightResistance * (this.lv - 1);
            var extra = this.extraProperty.lightResistance || 0;
            return base + grow + extra;
          }
          // 暗属性抗性
        }, {
          key: "darkResistance",
          get: function get() {
            var base = this.proto.baseProperty.darkResistance * (1 + this.quality / 10);
            var grow = this.proto.growProperty.darkResistance * (this.lv - 1);
            var extra = this.extraProperty.darkResistance || 0;
            return base + grow + extra;
          }
          // 物理穿透
        }, {
          key: "physicalPenetration",
          get: function get() {
            var base = this.proto.baseProperty.physicalPenetration * (1 + this.quality / 10);
            var grow = this.proto.growProperty.physicalPenetration * (this.lv - 1);
            var extra = this.extraProperty.physicalPenetration || 0;
            return base + grow + extra;
          }
          // 魔法穿透
        }, {
          key: "magicPenetration",
          get: function get() {
            var base = this.proto.baseProperty.magicPenetration * (1 + this.quality / 10);
            var grow = this.proto.growProperty.magicPenetration * (this.lv - 1);
            var extra = this.extraProperty.magicPenetration || 0;
            return base + grow + extra;
          }
          // 暴击率 0 - 1
        }, {
          key: "criticalRate",
          get: function get() {
            var base = this.proto.baseProperty.criticalRate;
            var extra = this.extraProperty.criticalRate || 0;
            return base + extra;
          }
          // 暴击伤害
        }, {
          key: "criticalDamage",
          get: function get() {
            var base = this.proto.baseProperty.criticalDamage * (1 + this.quality / 10);
            var extra = this.extraProperty.criticalDamage || 0;
            return base + extra;
          }
          // 冷却指数
        }, {
          key: "coolDown",
          get: function get() {
            var base = this.proto.baseProperty.coolDown;
            var extra = this.extraProperty.coolDown || 0;
            return base + extra;
          }
          // 攻击速度
        }, {
          key: "attackSpeed",
          get: function get() {
            var base = this.proto.baseProperty.attackSpeed;
            var extra = this.extraProperty.attackSpeed || 0;
            return base + extra;
          }
        }]);
        return EquipmentInstanceProperty;
      }(BaseInstanceProperty));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentItemPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './EquipmentInstance.ts', './EquipmentPrototype.ts', './ItemInstance.ts', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, Sprite, Enum, Label, EquipmentInstance, EquipmentQuality, ItemInstance, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
      Sprite = module.Sprite;
      Enum = module.Enum;
      Label = module.Label;
    }, function (module) {
      EquipmentInstance = module.EquipmentInstance;
    }, function (module) {
      EquipmentQuality = module.EquipmentQuality;
    }, function (module) {
      ItemInstance = module.ItemInstance;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8;
      cclegacy._RF.push({}, "6f2e6I1jl5HIoq8A22rQh1q", "EquipmentItemPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var EquipmentItemPrefab = exports('EquipmentItemPrefab', (_dec = ccclass('EquipmentItemPrefab'), _dec2 = property(SpriteFrame), _dec3 = property(SpriteFrame), _dec4 = property(SpriteFrame), _dec5 = property(SpriteFrame), _dec6 = property(SpriteFrame), _dec7 = property(SpriteFrame), _dec8 = property(Sprite), _dec9 = property({
        type: Enum({
          Weapon: "Weapon",
          Shose: "Shose",
          Armor: "Armor",
          Accessory: "Accessory",
          None: "None"
        })
      }), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(EquipmentItemPrefab, _ExtensionComponent);
        function EquipmentItemPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "OrdinaryQuality", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "FineQuality", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "RareQuality", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "EpicQuality", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "LegendaryQuality", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "MythicQuality", _descriptor6, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ItemIconSprite", _descriptor7, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ShadowType", _descriptor8, _assertThisInitialized(_this));
          // 装备信息实例
          _this.instance = null;
          _this.showDetailCallback = null;
          return _this;
        }
        var _proto = EquipmentItemPrefab.prototype;
        // 开启虚影
        _proto.openShadow = function openShadow() {
          if (this.ShadowType === "None") return this.closeShadow();
          if (this.ShadowType === "Weapon") this.node.getChildByName("Weapon").active = true;
          if (this.ShadowType === "Shose") this.node.getChildByName("Shose").active = true;
          if (this.ShadowType === "Armor") this.node.getChildByName("Armor").active = true;
          if (this.ShadowType === "Accessory") this.node.getChildByName("Accessory").active = true;
        }

        // 关闭虚影
        ;

        _proto.closeShadow = function closeShadow() {
          if (this.ShadowType === "Weapon") this.node.getChildByName("Weapon").active = false;
          if (this.ShadowType === "Shose") this.node.getChildByName("Shose").active = false;
          if (this.ShadowType === "Armor") this.node.getChildByName("Armor").active = false;
          if (this.ShadowType === "Accessory") this.node.getChildByName("Accessory").active = false;
        }

        // 根据品质获取spriteframe
        ;

        _proto.getQualitySpriteFrame = function getQualitySpriteFrame(quality) {
          if (quality === EquipmentQuality.Ordinary) return this.OrdinaryQuality;
          if (quality === EquipmentQuality.Fine) return this.FineQuality;
          if (quality === EquipmentQuality.Rare) return this.RareQuality;
          if (quality === EquipmentQuality.Epic) return this.EpicQuality;
          if (quality === EquipmentQuality.Legendary) return this.LegendaryQuality;
          if (quality === EquipmentQuality.Mythic) return this.MythicQuality;
          return this.OrdinaryQuality;
        }

        // 设置装备或者物品信息
        ;

        _proto.setInfo = function setInfo(instance, showDetailCallback) {
          var _this2 = this;
          this.instance = instance;
          this.showDetailCallback = showDetailCallback;
          var sprite = this.node.getComponent(Sprite);
          if (!instance) {
            sprite.spriteFrame = this.OrdinaryQuality;
            this.ItemIconSprite.spriteFrame = null;
            this.node.getChildByName("Data").getComponent(Label).string = "";
            this.openShadow();
          }
          if (instance instanceof EquipmentInstance) {
            sprite.spriteFrame = this.getQualitySpriteFrame(instance.quality);
            this.closeShadow();
            instance.proto.icon().then(function (spriteFrame) {
              if (_this2.instance === instance) _this2.ItemIconSprite.spriteFrame = spriteFrame;
            });
            this.node.getChildByName("Data").active = true;
            this.node.getChildByName("Data").getComponent(Label).string = "Lv: " + instance.lv;
          }
          if (instance instanceof ItemInstance) {
            instance.proto.icon().then(function (spriteFrame) {
              if (_this2.instance === instance) _this2.ItemIconSprite.spriteFrame = spriteFrame;
            });
            this.node.getChildByName("Data").active = true;
            this.node.getChildByName("Data").getComponent(Label).string = instance.count.toString();
          }
        }

        // 点击装备图标回调
        ;

        _proto.showDetail = /*#__PURE__*/
        function () {
          var _showDetail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (!(this.instance === null)) {
                    _context.next = 2;
                    break;
                  }
                  return _context.abrupt("return");
                case 2:
                  if (this.showDetailCallback) this.showDetailCallback();
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function showDetail() {
            return _showDetail.apply(this, arguments);
          }
          return showDetail;
        }();
        return EquipmentItemPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "OrdinaryQuality", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "FineQuality", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "RareQuality", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "EpicQuality", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "LegendaryQuality", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "MythicQuality", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "ItemIconSprite", [_dec8], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "ShadowType", [_dec9], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return "None";
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './EquipmentPrototype.ts', './Manager.ts', './Config.ts', './Share.ts', './EquipmentManager2.ts', './Message.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _inheritsLoose, cclegacy, EquipmentQuality, Manager, BaseEventManagerData, Config, createId, getEquipmentPrototype, getStrongMaterial, getDecomposeMaterial, message, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      EquipmentQuality = module.EquipmentQuality;
    }, function (module) {
      Manager = module.Manager;
      BaseEventManagerData = module.BaseEventManagerData;
    }, function (module) {
      Config = module.Config;
    }, function (module) {
      createId = module.createId;
    }, function (module) {
      getEquipmentPrototype = module.getEquipmentPrototype;
      getStrongMaterial = module.getStrongMaterial;
      getDecomposeMaterial = module.getDecomposeMaterial;
    }, function (module) {
      message = module.message;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      cclegacy._RF.push({}, "2046dtOU1ZJNL6fCXwfQtwz", "EquipmentManager", undefined);
      var EquipmentManagerDTO = function EquipmentManagerDTO(data) {
        var _this = this;
        this.equipment = {
          weapon: null,
          armor: null,
          shoes: null,
          accessory: null
        };
        this.equipments = [];
        if (data) {
          Object.keys(data.equipment).forEach(function (k) {
            return _this.equipment[k] = data.equipment[k];
          });
          this.equipments = data.equipments;
        }
      };
      var EquipmentData = exports('EquipmentData', /*#__PURE__*/function (_BaseEventManagerData) {
        _inheritsLoose(EquipmentData, _BaseEventManagerData);
        function EquipmentData(data) {
          var _this2;
          _this2 = _BaseEventManagerData.call(this) || this;
          _this2.equipment = {
            weapon: null,
            armor: null,
            shoes: null,
            accessory: null
          };
          _this2.equipments = [];
          if (data) {
            Object.keys(data.equipment).forEach(function (k) {
              // 剔除不存在的装备
              if (data.equipment[k] && getEquipmentPrototype(data.equipment[k].prototype)) _this2.equipment[k] = data.equipment[k];else _this2.equipment[k] = null;
            });
            // 剔除不存在的装备
            _this2.equipments = data.equipments.filter(function (e) {
              return e && getEquipmentPrototype(e.prototype);
            });
          }
          return _this2;
        }

        // 卸下装备
        var _proto = EquipmentData.prototype;
        _proto.unequip = function unequip(type) {
          var equip = this.equipment[type];
          this.equipment[type] = null;
          if (equip) this.equipments.push(equip);
        }

        // 穿上装备
        ;

        _proto.equip = function equip(instance) {
          var equipmentDTO = null,
            index = -1;
          for (var i = 0; i < this.equipments.length; i++) {
            if (instance.id !== this.equipments[i].id) continue;
            equipmentDTO = this.equipments[i];
            index = i;
            break;
          }
          this.equipments.splice(index, 1);
          this.unequip(instance.proto.type);
          this.equipment[instance.proto.type] = equipmentDTO;
        }

        // 添加装备
        ;

        _proto.addEquipment = function addEquipment(prototype, quality) {
          if (!prototype || !getEquipmentPrototype(prototype)) return;
          var id = createId();
          this.emit("addEquipment", {
            id: id,
            prototype: prototype,
            quality: quality || EquipmentQuality.Ordinary
          });
          var dto = {
            id: id,
            prototype: prototype,
            lv: 1,
            extraProperty: {},
            quality: quality || EquipmentQuality.Ordinary
          };
          this.equipments.push(dto);
          return dto;
        }

        // 强化装备
        ;

        _proto.strengthenEquipment = function strengthenEquipment(id, resourceManager, backpackManager) {
          var equipment = this.equipments.find(function (e) {
            return e.id === id;
          });
          if (!equipment) equipment = Object.values(this.equipment).find(function (e) {
            return (e == null ? void 0 : e.id) === id;
          });
          if (!equipment) return;
          if (equipment.lv >= 10) {
            message.toast(LanguageManager.getEntry("EquipmentMaxLevel").getValue(settingManager.data.language));
            return false;
          }
          var strongMaterial = getStrongMaterial(equipment.prototype, equipment.lv);
          if (!strongMaterial) return equipment.lv += 1;
          if (resourceManager.data.gold < strongMaterial.gold) {
            message.toast(LanguageManager.getEntry("NotEnoughGold").getValue(settingManager.data.language));
            return false;
          }
          if (resourceManager.data.diamond < strongMaterial.diamond) {
            message.toast(LanguageManager.getEntry("NotEnoughDiamond").getValue(settingManager.data.language));
            return false;
          }
          for (var i = 0; i < strongMaterial.items.length; i++) {
            var itemProto = strongMaterial.items[i];
            if (!backpackManager.data.hasItem(itemProto.prototype, itemProto.count || 0)) {
              message.toast(LanguageManager.getEntry("NotEnoughItems").getValue(settingManager.data.language));
              return false;
            }
          }
          resourceManager.data.reduceGold(strongMaterial.gold);
          resourceManager.data.reduceDiamond(strongMaterial.diamond);
          strongMaterial.items.forEach(function (item) {
            backpackManager.data.reduceCount(item.prototype, item.count || 0);
          });
          equipment.lv += 1;
          this.emit("strengthenEquipment", equipment);
          return true;
        }

        // 分解装备
        ;

        _proto.decompose = function decompose(idList, resourceManager, backpackManager) {
          var _this3 = this;
          var materials = {
            gold: 0,
            diamond: 0,
            items: []
          };
          idList.forEach(function (id) {
            var equipment = _this3.equipments.find(function (e) {
              return e.id === id;
            });
            if (!equipment) return;
            var material = getDecomposeMaterial(equipment.prototype, equipment.lv);
            if (!material) return;
            resourceManager.data.addGold(material.gold || 0);
            resourceManager.data.addDiamond(material.diamond || 0);
            if (material.gold) materials.gold = (materials.gold || 0) + material.gold;
            if (material.diamond) materials.diamond = (materials.diamond || 0) + material.diamond;
            if (material.items) {
              material.items.forEach(function (item) {
                var hasItem = false;
                materials.items.forEach(function (i) {
                  if (i.prototype === item.prototype) {
                    i.count += item.count;
                    hasItem = true;
                  }
                });
                if (!hasItem) materials.items.push(item);
                backpackManager.data.addItem(item.prototype, item.count || 0);
              });
              _this3.emit("decomposeEquipment", equipment);
            }
          });
          this.equipments = Array.from(this.equipments).map(function (e) {
            if (idList.includes(e.id)) return null;
            return e;
          }).filter(function (e) {
            return e !== null;
          });
          message.congratulations(materials.gold, materials.diamond, materials.items, []);
          return;
        };
        return EquipmentData;
      }(BaseEventManagerData));
      var equipmentManager = exports('equipmentManager', new Manager({
        storageKey: "slaughter:game:equipment",
        descrypt: Config.descrypt,
        Constructor: EquipmentData,
        DtoCostructor: EquipmentManagerDTO,
        save: function save(data) {}
      }));
      try {
        // @ts-ignore
        window.equipmentManager = equipmentManager;
      } catch (e) {}
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentManager2.ts", ['cc', './EquipmentPrototype.ts'], function (exports) {
  var cclegacy, EquipmentPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      EquipmentPrototype = module.EquipmentPrototype;
    }],
    execute: function () {
      exports({
        getAllEquipmentKeys: getAllEquipmentKeys,
        getDecomposeMaterial: getDecomposeMaterial,
        getEquipmentKey: getEquipmentKey,
        getEquipmentPrototype: getEquipmentPrototype,
        getStrongMaterial: getStrongMaterial
      });
      cclegacy._RF.push({}, "39dbdgQAPJIxbQAOGju+Jv8", "EquipmentManager", undefined);

      // 材料

      // 该文件用于管理游戏中的装备系统
      var registry = new Map();
      var registryReverse = new Map();

      // 保存装备强化材料
      var StrongMaterialRegistry = new Map();
      var DecomposeMaterialRegistry = new Map();

      // 装备用品注册装饰器
      var RegisterEquipment = exports('RegisterEquipment', function RegisterEquipment(key, strongMaterial, decomposeMaterial) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
          if (strongMaterial) {
            StrongMaterialRegistry.set(key, strongMaterial);
          }
          if (decomposeMaterial) {
            DecomposeMaterialRegistry.set(key, decomposeMaterial);
          }
        };
      });

      // 获取所有注册的装备原型key
      function getAllEquipmentKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取装备原型
      function getEquipmentPrototype(key) {
        return registry.get(key);
      }

      // 根据装备原型或者实例获取key
      function getEquipmentKey(proto) {
        if (proto instanceof EquipmentPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }

      // 获取装备强化材料
      function getStrongMaterial(prototype, lv) {
        var fn = StrongMaterialRegistry.get(prototype);
        if (!fn) return null;
        return fn(lv);
      }

      // 获取装备分解材料
      function getDecomposeMaterial(prototype, lv) {
        var fn = DecomposeMaterialRegistry.get(prototype);
        if (!fn) return null;
        return fn(lv);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/EquipmentPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BasePrototypeProperty.ts'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, BasePrototypeProperty;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }],
    execute: function () {
      exports({
        getQualityColor: getQualityColor,
        getQualityName: getQualityName
      });
      cclegacy._RF.push({}, "272bdoM1ohEp7VEm/XmCKSo", "EquipmentPrototype", undefined);
      // 装备品质
      var EquipmentQuality = exports('EquipmentQuality', /*#__PURE__*/function (EquipmentQuality) {
        EquipmentQuality[EquipmentQuality["Ordinary"] = 0] = "Ordinary";
        EquipmentQuality[EquipmentQuality["Fine"] = 1] = "Fine";
        EquipmentQuality[EquipmentQuality["Rare"] = 2] = "Rare";
        EquipmentQuality[EquipmentQuality["Epic"] = 3] = "Epic";
        EquipmentQuality[EquipmentQuality["Legendary"] = 4] = "Legendary";
        EquipmentQuality[EquipmentQuality["Mythic"] = 5] = "Mythic";
        return EquipmentQuality;
      }({})); // 神话

      // 装备类型
      var EquipmentType = exports('EquipmentType', /*#__PURE__*/function (EquipmentType) {
        EquipmentType["Weapon"] = "weapon";
        EquipmentType["Armor"] = "armor";
        EquipmentType["Shoes"] = "shoes";
        EquipmentType["Accessory"] = "accessory";
        EquipmentType["Null"] = "null";
        return EquipmentType;
      }({}));

      // 装备品质
      function getQualityName(quality) {
        switch (quality) {
          case EquipmentQuality.Ordinary:
            return "Ordinary";
          case EquipmentQuality.Fine:
            return "Fine";
          case EquipmentQuality.Rare:
            return "Rare";
          case EquipmentQuality.Epic:
            return "Epic";
          case EquipmentQuality.Legendary:
            return "Legendary";
          case EquipmentQuality.Mythic:
            return "Mythic";
        }
      }

      // 装备颜色
      function getQualityColor(quality) {
        switch (quality) {
          case EquipmentQuality.Ordinary:
            return "#ffffff";
          case EquipmentQuality.Fine:
            return "#7af87aff";
          case EquipmentQuality.Rare:
            return "#6191f9ff";
          case EquipmentQuality.Epic:
            return "#cc6afdff";
          case EquipmentQuality.Legendary:
            return "#f5cc6dff";
          case EquipmentQuality.Mythic:
            return "#f5695fff";
        }
      }
      var EquipmentPrototype = exports('EquipmentPrototype', /*#__PURE__*/function () {
        // 保存对应的实例
        function EquipmentPrototype(instance) {
          // 成长属性
          this.growProperty = new BasePrototypeProperty();
          // 基础属性
          this.baseProperty = new BasePrototypeProperty();
          this.instance = instance;
        }
        // 图标信息 Sprite
        var _proto = EquipmentPrototype.prototype;
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }() // 获取同套装备数量
        ;

        _createClass(EquipmentPrototype, [{
          key: "name",
          get:
          // 名称信息
          function get() {
            return "Equipment Name";
          }
          // 描述信息
        }, {
          key: "description",
          get: function get() {
            return "Equipment Description";
          }
          // 装备类型
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Null;
          }
          // 装备属性展示
        }, {
          key: "propertyDescription",
          get: function get() {
            return "";
          }
          // 套装名称
        }, {
          key: "suit",
          get: function get() {
            return "";
          }
        }, {
          key: "suitCount",
          get: function get() {
            var _this = this;
            var suit = 0;
            if (this.instance.character && this.suit) {
              Object.keys(this.instance.character.equipments).forEach(function (key) {
                if (_this.instance.character.equipments[key]) {
                  if (_this.instance.character.equipments[key].proto.suit === _this.suit) suit += 1;
                }
              });
            }
            return suit;
          }
        }]);
        return EquipmentPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ExtensionComponent.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index6.ts'], function (exports) {
  var _inheritsLoose, _extends, cclegacy, Component, Rx;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _extends = module.extends;
    }, function (module) {
      cclegacy = module.cclegacy;
      Component = module.Component;
    }, function (module) {
      Rx = module.Rx;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ffb49fWPNJJTKkXMMNTOsKM", "ExtensionComponent", undefined);
      var AutoInterval = exports('AutoInterval', function AutoInterval() {
        this.timer = void 0;
        // ms
        this.count = void 0;
        this.complete = void 0;
      });
      var ExtensionComponent = exports('default', /*#__PURE__*/function (_Component) {
        _inheritsLoose(ExtensionComponent, _Component);
        function ExtensionComponent() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          // 已经销毁
          _this.hasDestroy = false;
          // 所有响应式监听对象
          _this.effects = [];
          // 所有的定时器
          _this.autoIntervalSet = new Set();
          return _this;
        }
        var _proto = ExtensionComponent.prototype;
        // 响应式监听函数
        _proto.effect = function effect(callback, option) {
          var _this2 = this;
          if (this.hasDestroy) return;
          // 节流
          var isEffecting = false;
          option = _extends({
            scheduler: function scheduler() {
              if (isEffecting) return;
              isEffecting = true;
              _this2.setAutoInterval(function () {
                runner();
                isEffecting = false;
              }, {
                count: 1
              });
            }
          }, option);
          var runner = Rx.effect(callback, option);
          this.effects.push(runner);
          return runner;
        }

        // 设置定时器
        ;

        _proto.setAutoInterval = function setAutoInterval(call, option) {
          var _this3 = this,
            _option;
          if (option === void 0) {
            option = {};
          }
          if (this.hasDestroy) return;
          var count = option.count || -1;
          var close = function close() {
            var _this3$autoIntervalSe;
            clearInterval(inter);
            (_this3$autoIntervalSe = _this3.autoIntervalSet) == null || _this3$autoIntervalSe["delete"](inter);
          };
          var inter = setInterval(function () {
            if (count === 0) {
              close();
              option.complete && option.complete();
              return;
            }
            if (count > -1) count--;
            call();
          }, (_option = option) == null ? void 0 : _option.timer);
          this.autoIntervalSet.add(inter);
          return close;
        }

        // 当销毁时
        ;

        _proto.onDestroy = function onDestroy() {
          this.hasDestroy = true;
          // 清空所有的定时器
          this.autoIntervalSet.forEach(function (inter) {
            return clearInterval(inter);
          });
          // 清空所有的响应式监听
          this.effects.forEach(function (effect) {
            if (effect) effect.effect.stop();
          });
          this.effects = [];
        };
        return ExtensionComponent;
      }(Component));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightBuffItemPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './DetailInfoPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Prefab, Sprite, Button, find, Component, CcNative, DetailInfoPrefab;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Sprite = module.Sprite;
      Button = module.Button;
      find = module.find;
      Component = module.Component;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      DetailInfoPrefab = module.DetailInfoPrefab;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "2299aapdRBMfrqovLJeBAfg", "FightBuffItemPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var FightBuffItemPrefab = exports('FightBuffItemPrefab', (_dec = ccclass('FightBuffItemPrefab'), _dec2 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(FightBuffItemPrefab, _Component);
        function FightBuffItemPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "DetailPrefab", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = FightBuffItemPrefab.prototype;
        _proto.setBuffData = function setBuffData(buff) {
          var _this2 = this;
          var iconSprite = this.node.getChildByName('Icon').getComponent(Sprite);
          buff.proto.icon().then(function (icon) {
            return iconSprite.spriteFrame = icon;
          });
          this.node.on(Button.EventType.CLICK, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var detailNode;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  detailNode = CcNative.instantiate(_this2.DetailPrefab);
                  _context.t0 = detailNode.getComponent(DetailInfoPrefab);
                  _context.t1 = buff.proto.name;
                  _context.t2 = buff.proto.description;
                  _context.next = 6;
                  return buff.proto.icon();
                case 6:
                  _context.t3 = _context.sent;
                  _context.t4 = [];
                  _context.t5 = {
                    title: _context.t1,
                    rightMessage: _context.t2,
                    icon: _context.t3,
                    buttons: _context.t4
                  };
                  _context.t6 = [_context.t5];
                  _context.t7 = function closeCallback() {
                    return find("Canvas").removeChild(detailNode);
                  };
                  _context.t8 = {
                    content: _context.t6,
                    closeCallback: _context.t7
                  };
                  _context.t0.setDetail.call(_context.t0, _context.t8);
                  find("Canvas").addChild(detailNode);
                case 14:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
          return;
        };
        return FightBuffItemPrefab;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "DetailPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightCharacterPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './ExtensionComponent.ts', './SpineAnimation.ts', './ModuleProgressPrefab.ts', './index6.ts', './Normal.ts', './FightBuffItemPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Prefab, Label, instantiate, Color, AudioSource, CcNative, ExtensionComponent, SpineAnimation, ModuleProgressPrefab, Rx, Normal, FightBuffItemPrefab;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Label = module.Label;
      instantiate = module.instantiate;
      Color = module.Color;
      AudioSource = module.AudioSource;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      ModuleProgressPrefab = module.ModuleProgressPrefab;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      Normal = module.Normal;
    }, function (module) {
      FightBuffItemPrefab = module.FightBuffItemPrefab;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "913dfkbAFFBjZvQGjyi0IHi", "FightCharacterPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var FightCharacterPrefab = exports('FightCharacterPrefab', (_dec = ccclass('FightCharacterPrefab'), _dec2 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(FightCharacterPrefab, _ExtensionComponent);
        function FightCharacterPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 详情界面
          _initializerDefineProperty(_this, "FightBuffItemPrefab", _descriptor, _assertThisInitialized(_this));
          // 位置
          _this.pos = void 0;
          // 展示状态
          _this.isPlayer = false;
          // 是否准备
          _this.isReady = false;
          // 角色数据
          _this.character = null;
          // 帧事件监听
          _this.frameEvent = [];
          _this.fightPrefab = null;
          // 队伍列表
          _this.showMessageQueue = [];
          _this.messageTempNode = void 0;
          _this.isClearingMessage = false;
          // 释放的技能队列
          _this.skillQueue = [];
          // 行动中
          _this.isAction = false;
          // 当前播放的动画
          _this.currentAnimation = "";
          return _this;
        }
        var _proto = FightCharacterPrefab.prototype;
        // 绑定角色数据和状态
        _proto.bindCharacter = /*#__PURE__*/
        function () {
          var _bindCharacter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(character, pos, isPlayer) {
            var _this2 = this;
            var spine, mpNode, mpProgress, mpLabel, hpProgress, hpLabel, buffContainer;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (isPlayer === void 0) {
                    isPlayer = true;
                  }
                  // 设置角色数据
                  this.character = Rx.reactive(character);
                  // 展示状态
                  this.isPlayer = isPlayer;
                  // 设置位置
                  this.pos = pos;
                  // spine节点
                  spine = this.node.getChildByName("Spine"); // 设置位置
                  if (pos === "left") spine.setScale(1, 1);else if (pos === "right") {
                    spine.setScale(-1, 1);
                    this.node.getChildByName("State").getChildByName("Mp").getChildByName("Progress").setScale(-1, 1);
                    this.node.getChildByName("State").getChildByName("Hp").getChildByName("Progress").setScale(-1, 1);
                  }
                  // 设置等级
                  this.node.getChildByName("State").getChildByName("Level").getComponent(Label).string = "Lv : " + character.lv;
                  // 设置spine数据
                  this.character.proto.skeletonData().then(function (sk) {
                    spine.getComponent(SpineAnimation).skeletonData = sk;
                  });
                  // 绑定模板消息节点
                  this.messageTempNode = this.node.getChildByName("Message").getChildByName("Temp");
                  this.node.getChildByName("Message").removeAllChildren();
                  // 右侧mp位置为 25px
                  mpNode = this.node.getChildByName("State").getChildByName("Mp");
                  mpNode.setPosition(pos === "right" ? 25 : -25, mpNode.position.y);
                  // 绑定数据展示 
                  mpProgress = this.node.getChildByName("State").getChildByName("Mp").getChildByName("Progress").getComponent(ModuleProgressPrefab);
                  mpLabel = this.node.getChildByName("State").getChildByName("Mp").getChildByName("Label").getComponent(Label);
                  hpProgress = this.node.getChildByName("State").getChildByName("Hp").getChildByName("Progress").getComponent(ModuleProgressPrefab);
                  hpLabel = this.node.getChildByName("State").getChildByName("Hp").getChildByName("Label").getComponent(Label); // 绑定生命值和魔法值
                  this.effect(function () {
                    mpProgress.setProgress(_this2.character.mp);
                    hpProgress.setProgress(_this2.character.hp);
                    hpLabel.string = Normal.number(_this2.character.hp * _this2.character.maxHp) + " / " + Normal.number(_this2.character.maxHp);
                    mpLabel.string = Normal.number(_this2.character.mp * _this2.character.maxMp) + " / " + Normal.number(_this2.character.maxMp);
                  });
                  // 绑定buff展示
                  buffContainer = this.node.getChildByName("State").getChildByName("Buff");
                  this.effect(function () {
                    buffContainer.removeAllChildren();
                    _this2.character.buffs.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(buff) {
                      var itemNode;
                      return _regeneratorRuntime().wrap(function _callee$(_context) {
                        while (1) switch (_context.prev = _context.next) {
                          case 0:
                            itemNode = CcNative.instantiate(_this2.FightBuffItemPrefab);
                            itemNode.getComponent(FightBuffItemPrefab).setBuffData(buff);
                            buffContainer.addChild(itemNode);
                          case 3:
                          case "end":
                            return _context.stop();
                        }
                      }, _callee);
                    })));
                    return;
                  });
                case 19:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function bindCharacter(_x, _x2, _x3) {
            return _bindCharacter.apply(this, arguments);
          }
          return bindCharacter;
        }();
        // 添加到伤害数据到队列
        _proto.showMessage = function showMessage(s, color) {
          var _this3 = this;
          this.showMessageQueue.push({
            s: s,
            color: color
          });
          if (this.isClearingMessage) return;
          this.isClearingMessage = true;
          var messageContainer = this.node.getChildByName('Message');
          var createNumberNode = function createNumberNode(s, color) {
            var node = instantiate(_this3.messageTempNode);
            var label = node.getComponent(Label);
            label.string = s;
            label.color = color;
            // 节点位置向上
            _this3.setAutoInterval(function () {
              var label = node.getComponent(Label);
              var color = label.color;
              node.setPosition(node.position.x, node.position.y + 5);
              label.color = new Color(color.r, color.g, color.b, color.a - 3);
            }, {
              count: 20,
              complete: function complete() {
                node.parent = null;
                node.destroy();
              },
              timer: 25
            });
            return node;
          };
          var clearQueue = /*#__PURE__*/function () {
            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
              var dto, node;
              return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                while (1) switch (_context3.prev = _context3.next) {
                  case 0:
                    if (!(_this3.showMessageQueue.length > 0)) {
                      _context3.next = 8;
                      break;
                    }
                    dto = _this3.showMessageQueue.shift();
                    node = createNumberNode(dto.s, dto.color);
                    messageContainer.addChild(node);
                    _context3.next = 6;
                    return new Promise(function (resolve) {
                      return setTimeout(resolve, 200);
                    });
                  case 6:
                    _context3.next = 0;
                    break;
                  case 8:
                    _this3.isClearingMessage = false;
                    return _context3.abrupt("return");
                  case 10:
                  case "end":
                    return _context3.stop();
                }
              }, _callee3);
            }));
            return function clearQueue() {
              return _ref2.apply(this, arguments);
            };
          }();
          clearQueue();
        }

        // 播放角色入场动画
        ;

        _proto.characterEnter = /*#__PURE__*/
        function () {
          var _characterEnter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
            var _this4 = this;
            var startPosx, xMove, spine, promise;
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  // 初始位置和移动距离
                  startPosx = 0, xMove = 0;
                  if (this.pos === "left") {
                    startPosx = -250;
                    xMove = +2;
                  } else if (this.pos === "right") {
                    startPosx = +250;
                    xMove = -2;
                  }
                  // 隐藏状态
                  this.node.getChildByName("State").active = false;
                  // 播放动画
                  this.playAnimation(this.character.proto.animation.animations.move, {
                    count: -1
                  });
                  spine = this.node.getChildByName("Spine"); // 移动到指定位置
                  promise = new Promise(function (res) {
                    var close = _this4.setAutoInterval(function () {
                      startPosx += xMove;
                      spine.setPosition(startPosx, spine.y);
                      if (startPosx === 0) {
                        close();
                        res(null);
                      }
                    });
                  });
                  return _context4.abrupt("return", promise);
                case 7:
                case "end":
                  return _context4.stop();
              }
            }, _callee4, this);
          }));
          function characterEnter() {
            return _characterEnter.apply(this, arguments);
          }
          return characterEnter;
        }() // 角色准备
        ;

        _proto.characterReady = function characterReady() {
          if (this.character._preDeath || this.character.hasDeath) return;
          // 播放idle动画
          this.playAnimation(this.character.proto.animation.animations.idle, {
            count: -1
          });
          // 准备
          this.isReady = true;
          // 展示状态信息
          if (this.isPlayer) this.node.getChildByName("State").active = true;
        };
        // 角色释放技能
        _proto.characterUseSkill = function characterUseSkill(skill) {
          if (this.character._preDeath || this.character.hasDeath) return;
          // 该技能已经在队列中
          if (this.skillQueue.indexOf(skill) !== -1) return;
          this.skillQueue.push(skill);
        };
        // 角色行动
        _proto.characterAction = /*#__PURE__*/
        function () {
          var _characterAction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(target) {
            var _this5 = this;
            var skill;
            return _regeneratorRuntime().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  if (!(this.character._preDeath || this.character.hasDeath)) {
                    _context5.next = 2;
                    break;
                  }
                  return _context5.abrupt("return");
                case 2:
                  if (!this.isAction) {
                    _context5.next = 4;
                    break;
                  }
                  return _context5.abrupt("return");
                case 4:
                  this.isAction = true;
                  if (!(this.skillQueue.length > 0)) {
                    _context5.next = 8;
                    break;
                  }
                  skill = this.skillQueue[this.skillQueue.length - 1];
                  return _context5.abrupt("return", new Promise(function (res) {
                    _this5.character.useSkill({
                      skill: skill,
                      animationComplete: function animationComplete() {
                        res(null);
                        _this5.skillQueue.splice(_this5.skillQueue.indexOf(skill), 1);
                        _this5.isAction = false;
                      }
                    });
                  }));
                case 8:
                  return _context5.abrupt("return", new Promise(function (res) {
                    _this5.character.attackCharacter({
                      target: target,
                      animationComplete: function animationComplete() {
                        res(null);
                        _this5.isAction = false;
                      }
                    });
                  }));
                case 9:
                case "end":
                  return _context5.stop();
              }
            }, _callee5, this);
          }));
          function characterAction(_x5) {
            return _characterAction.apply(this, arguments);
          }
          return characterAction;
        }();
        // 播放动画
        _proto.playAnimation = /*#__PURE__*/
        function () {
          var _playAnimation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(animationName, option) {
            var spine, frameCall;
            return _regeneratorRuntime().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  if (!(this.currentAnimation === animationName)) {
                    _context6.next = 2;
                    break;
                  }
                  return _context6.abrupt("return");
                case 2:
                  this.currentAnimation = animationName;
                  spine = this.node.getChildByName("Spine").getComponent(SpineAnimation);
                  if (option.frameEvent && !option.frameEventList) {
                    frameCall = function frameCall() {
                      option.frameEvent.callback();
                      spine.removeFrameEvent(option.frameEvent.name, frameCall);
                    };
                    spine.listenFrameEvent(option.frameEvent.name, frameCall);
                  } else if (option.frameEventList) {
                    option.frameEventList.forEach(function (op) {
                      var frameCall = function frameCall() {
                        op.callback();
                        spine.removeFrameEvent(op.name, frameCall);
                      };
                      spine.listenFrameEvent(op.name, frameCall);
                    });
                  }
                  _context6.next = 7;
                  return spine.playAnimation(animationName, option);
                case 7:
                  this.currentAnimation = "";
                  if (option.complete) {
                    option.complete();
                  }
                case 9:
                case "end":
                  return _context6.stop();
              }
            }, _callee6, this);
          }));
          function playAnimation(_x6, _x7) {
            return _playAnimation.apply(this, arguments);
          }
          return playAnimation;
        }() // 播放音效
        ;

        _proto.playSound = /*#__PURE__*/
        function () {
          var _playSound = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(audioClip) {
            var audioSource;
            return _regeneratorRuntime().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  audioSource = this.node.getChildByName("EffectSound").getComponent(AudioSource);
                  audioSource.clip = audioClip;
                  audioSource.play();
                case 3:
                case "end":
                  return _context7.stop();
              }
            }, _callee7, this);
          }));
          function playSound(_x8) {
            return _playSound.apply(this, arguments);
          }
          return playSound;
        }() // 帧间事件
        ;

        _proto.update = function update(dt) {
          if (this.isReady) {
            // 处理buff
            this.character.buffs.forEach(function (buff) {
              return buff.proto.tick(dt);
            });
          }
        };
        return FightCharacterPrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "FightBuffItemPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightMapInstance.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './CharacterInstance.ts', './Share.ts', './CharacterManager2.ts', './MapGenerator.ts', './RoomPrototype.ts', './FindWay.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, v2, CharacterInstance, createPlayerInstance, getCharacterPrototype, MapGenerator, BossRoomPrototype, FindWay;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      v2 = module.v2;
    }, function (module) {
      CharacterInstance = module.CharacterInstance;
    }, function (module) {
      createPlayerInstance = module.createPlayerInstance;
    }, function (module) {
      getCharacterPrototype = module.getCharacterPrototype;
    }, function (module) {
      MapGenerator = module.MapGenerator;
    }, function (module) {
      BossRoomPrototype = module.BossRoomPrototype;
    }, function (module) {
      FindWay = module.FindWay;
    }],
    execute: function () {
      cclegacy._RF.push({}, "36019oI1GFGI6JTrwFh0NQy", "FightMapInstance", undefined);
      var MapData = exports('MapData', /*#__PURE__*/function (MapData) {
        MapData[MapData["NONE"] = 0] = "NONE";
        MapData[MapData["FLOOR"] = 1] = "FLOOR";
        MapData[MapData["WALL"] = 2] = "WALL";
        return MapData;
      }({}));
      var MapDistribution = exports('MapDistribution', /*#__PURE__*/function (MapDistribution) {
        MapDistribution[MapDistribution["FLOOR"] = 0] = "FLOOR";
        MapDistribution[MapDistribution["WALL"] = 1] = "WALL";
        MapDistribution[MapDistribution["MONSTER"] = 2] = "MONSTER";
        MapDistribution[MapDistribution["BOSS"] = 3] = "BOSS";
        MapDistribution[MapDistribution["TREASURE"] = 4] = "TREASURE";
        MapDistribution[MapDistribution["OBSTACLE"] = 5] = "OBSTACLE";
        MapDistribution[MapDistribution["REINFORCEMENT"] = 6] = "REINFORCEMENT";
        MapDistribution[MapDistribution["START_POSITION"] = 7] = "START_POSITION";
        MapDistribution[MapDistribution["END_POSITION"] = 8] = "END_POSITION";
        return MapDistribution;
      }({}));
      var FightMapInstance = exports('FightMapInstance', /*#__PURE__*/function () {
        // 构造器
        function FightMapInstance(Proto, option) {
          if (option === void 0) {
            option = {};
          }
          // 自定义数据
          this.customData = {};
          // 原型
          this.proto = void 0;
          // 玩家数据
          this.player = null;
          // 当前对战的怪物
          this.currentMonster = null;
          // 地图数据
          this.mapData = [];
          // 地图图集
          this.mapAtlas = [];
          // 玩家位置
          this.playerPosition = v2(0, 0);
          // 终点位置
          this.endPosition = v2(0, 0);
          // 未使用的空地位置 可以放置怪物和宝箱和障碍物
          this.emptyPosition = [];
          // 房间数据
          this.roomData = [];
          // 怪物数据
          this.monsterData = [];
          // 宝箱数据
          this.treasureData = [];
          // 障碍物数据
          this.obstacleData = [];
          // 强化符文数据
          this.reinforcementData = [];
          // 整体地图分布情况
          this.mapDistribution = [];
          // 配置详情
          this.fightOptions = {};
          // 地图尺寸
          this.mapSize = v2(0, 0);
          this.fightOptions = option || {};
          this.customData = option.customData || {};
          this.proto = new Proto(this);
          if (!this.proto.isBoss) {
            var mapSize = this.proto.mapSize;
            this.mapSize = v2(mapSize.width, mapSize.height);
          } else {
            this.mapSize = v2(21, 21);
          }
          this.init();
        }

        // 创建玩家实例
        var _proto = FightMapInstance.prototype;
        _proto.createPlayerInstance = function createPlayerInstance$1() {
          var _this = this;
          var lastPlayerInstance = this.player;
          var extraProperty = {},
            instance = createPlayerInstance();
          if (this.fightOptions.playerExtraProperty) {
            extraProperty = this.fightOptions.playerExtraProperty;
          }
          if (this.fightOptions.playerExtraPercentProperty) {
            Object.keys(this.fightOptions.playerExtraPercentProperty).forEach(function (property) {
              if (typeof instance[property] === 'number') {
                // @ts-ignore
                extraProperty[property] = (_this.fightOptions.playerExtraPercentProperty[property] + 1) * instance[property];
              }
            });
          }
          // 继承之前的加成
          if (lastPlayerInstance) {
            Object.keys(lastPlayerInstance.extraProperty).forEach(function (property) {
              if (typeof lastPlayerInstance.extraProperty[property] === 'number')
                // @ts-ignore
                extraProperty[property] = extraProperty[property] || 0 + lastPlayerInstance.extraProperty[property];
            });
          }
          instance.extraProperty = extraProperty;
          return instance;
        }

        // 创建怪物实例
        ;

        _proto.createMonsterInstance = function createMonsterInstance(dto) {
          var _this2 = this;
          var extraProperty = {},
            instance = new CharacterInstance({
              lv: dto.lv,
              buffs: dto.buffs,
              Proto: getCharacterPrototype(dto.prototype),
              // 装备信息
              equipments: dto.equipments,
              // 携带技能信息
              skills: dto.skills,
              // 额外数据
              extraProperty: dto.extraProperty
            });
          if (this.fightOptions.monsterExtraProperty) {
            Object.keys(this.fightOptions.monsterExtraProperty).forEach(function (property) {
              if (typeof instance[property] === 'number') {
                // @ts-ignore
                extraProperty[property] = (extraProperty[property] || 0) + _this2.fightOptions.monsterExtraProperty[property];
              }
            });
          }
          if (this.fightOptions.monsterExtraPercentProperty) {
            Object.keys(this.fightOptions.monsterExtraPercentProperty).forEach(function (property) {
              if (typeof instance[property] === 'number') {
                // @ts-ignore
                extraProperty[property] = instance[property] * (1 + _this2.fightOptions.monsterExtraPercentProperty[property]);
              }
            });
          }
          instance.extraProperty = extraProperty;
          return instance;
        }

        // 初始化
        ;

        _proto.init = /*#__PURE__*/
        function () {
          var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  this.player = this.createPlayerInstance();
                  if (this.fightOptions.playerState) {
                    this.player.hp = this.fightOptions.playerState.hp;
                    this.player.mp = this.fightOptions.playerState.mp;
                  }
                  if (this.proto.isBoss) this.createBossMapData();else this.createMapData();
                  // 记录
                  this.initMapDistribution();
                case 4:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function init() {
            return _init.apply(this, arguments);
          }
          return init;
        }();
        _proto.createBossMapData = function createBossMapData() {
          var mapData = this.mapData = [];
          for (var y = 0; y < this.mapSize.y; y++) {
            for (var x = 0; x < this.mapSize.x; x++) {
              mapData[y] = mapData[y] || [];
              mapData[y][x] = MapData.NONE;
            }
          }
          // 已经添加过的空坐标                  黑名单坐标
          var hasAddPos = new Set(),
            darkPoss = new Set();
          // 添加空坐标
          var addDark = function addDark(pos) {
            return darkPoss.add(pos.x + "-" + pos.y);
          };
          var removeEmpty = function removeEmpty(pos) {
            return hasAddPos["delete"](pos.x + "-" + pos.y);
          };
          var addEmpty = function addEmpty(pos) {
            if (hasAddPos.has(pos.x + "-" + pos.y) || darkPoss.has(pos.x + "-" + pos.y)) return;
            hasAddPos.add(pos.x + "-" + pos.y);
          };
          // 房间信息
          var bossRoom = new BossRoomPrototype(this);
          this.roomData = [bossRoom];
          // 填充地图数据
          for (var i = 0; i < this.roomData.length; i++) {
            var room = this.roomData[i];
            room.pos = room.pos.add(v2(1, 1));
            for (var _y = room.pos.y; _y < room.size.y + room.pos.y; _y++) {
              mapData[_y] = mapData[_y] || [];
              for (var _x = room.pos.x; _x < room.size.x + room.pos.x; _x++) {
                if (!room.isSpecialRoom) addEmpty(v2(_x, _y));else addDark(v2(_x, _y));
                mapData[_y][_x] = 1;
              }
            }
          }
          // 实例化房间数据
          this.instantiateMap(addEmpty, addDark, removeEmpty, hasAddPos, darkPoss);
          // 初始结束位置
          this.playerPosition = v2(2, 2).add(bossRoom.pos);
          this.endPosition = v2(7, 2).add(bossRoom.pos);
          this.removeEmptyPosition(this.playerPosition);
          this.removeEmptyPosition(this.endPosition);
          return;
        };
        _proto.createMapData = function createMapData() {
          // 地图数据
          var mapData = this.mapData = [];
          for (var y = 0; y < this.mapSize.y; y++) {
            for (var x = 0; x < this.mapSize.x; x++) {
              mapData[y] = mapData[y] || [];
              mapData[y][x] = MapData.NONE;
            }
          }
          // 已经添加过的空坐标                  黑名单坐标
          var hasAddPos = new Set(),
            darkPoss = new Set();
          // 添加空坐标
          var addDark = function addDark(pos) {
            return darkPoss.add(pos.x + "-" + pos.y);
          };
          var removeEmpty = function removeEmpty(pos) {
            return hasAddPos["delete"](pos.x + "-" + pos.y);
          };
          var addEmpty = function addEmpty(pos) {
            if (hasAddPos.has(pos.x + "-" + pos.y) || darkPoss.has(pos.x + "-" + pos.y)) return;
            hasAddPos.add(pos.x + "-" + pos.y);
          };
          // 地图生成器
          var mapGenerator = new MapGenerator();
          // 生成房间数据
          this.roomData = mapGenerator.generateRandomRoom(v2(this.mapSize.x - 1, this.mapSize.y - 1), this);
          // 填充地图数据
          for (var i = 0; i < this.roomData.length; i++) {
            var room = this.roomData[i];
            room.pos = room.pos.add(v2(1, 1));
            for (var _y2 = room.pos.y; _y2 < room.size.y + room.pos.y; _y2++) {
              mapData[_y2] = mapData[_y2] || [];
              for (var _x2 = room.pos.x; _x2 < room.size.x + room.pos.x; _x2++) {
                if (!room.isSpecialRoom) addEmpty(v2(_x2, _y2));else addDark(v2(_x2, _y2));
                mapData[_y2][_x2] = 1;
              }
            }
          }
          // 生成迷宫数据并合并房间和迷宫数据
          mapGenerator.generateRandomMaze({
            width: this.mapSize.x - 1,
            height: this.mapSize.y - 1
          }).forEach(function (col, y) {
            col.forEach(function (cell, x) {
              var posY = y + 1,
                posX = x + 1;
              if (!mapData[posY]) mapData[posY] = [];
              if (!mapData[posY][posX] && cell) addEmpty(v2(posX, posY));
              mapData[posY][posX] = cell || mapData[posY][posX];
            });
          });
          // 消除死胡同
          mapData = mapGenerator.removeDeadEnd(mapData);
          // 实例化房间数据
          this.instantiateMap(addEmpty, addDark, removeEmpty, hasAddPos, darkPoss);
          // 随机初始结束位置
          this.playerPosition = this.emptyPosition[Math.floor(Math.random() * this.emptyPosition.length)];
          this.removeEmptyPosition(this.playerPosition);
          this.endPosition = this.emptyPosition[Math.floor(Math.random() * this.emptyPosition.length)];
          this.removeEmptyPosition(this.endPosition);
          return;
        };
        _proto.instantiateMap = function instantiateMap(addEmpty, addDark, removeEmpty, hasAddPos, darkPoss) {
          var _this3 = this;
          var mapData = this.mapData;
          // 根据房间数据生成图集和数据
          this.roomData.forEach(function (room) {
            // 填充图集
            room.createMapAtlas().forEach(function (col, y) {
              col.forEach(function (cell, x) {
                var _this3$mapAtlas;
                if (mapData[y + room.pos.y][x + room.pos.x] === 0) return;
                if (!_this3.mapAtlas[y + room.pos.y]) _this3.mapAtlas[y + room.pos.y] = [];
                if (!_this3.mapAtlas[y + room.pos.y][x + room.pos.x]) _this3.mapAtlas[y + room.pos.y][x + room.pos.x] = [];
                (_this3$mapAtlas = _this3.mapAtlas[y + room.pos.y][x + room.pos.x]).concat.apply(_this3$mapAtlas, cell);
              });
            });
            // 添加宝箱
            room.createTreasureData().forEach(function (treasureData) {
              var pos = v2(treasureData.position.x + room.pos.x, treasureData.position.y + room.pos.y);
              treasureData.position = pos;
              _this3.treasureData.push(treasureData);
              removeEmpty(pos);
            });
            // 添加怪物
            room.createMonsterData().forEach(function (monsterData) {
              var pos = v2(monsterData.position.x + room.pos.x, monsterData.position.y + room.pos.y);
              monsterData.position = pos;
              _this3.monsterData.push(monsterData);
              removeEmpty(pos);
            });
            // 添加障碍物
            room.createObstacleData().forEach(function (obstacleData) {
              var pos = v2(obstacleData.position.x + room.pos.x, obstacleData.position.y + room.pos.y);
              obstacleData.position = pos;
              _this3.obstacleData.push(obstacleData);
              removeEmpty(pos);
            });
            // 添加强化符文
            room.createReinforcementData().forEach(function (reinforcementData) {
              var pos = v2(reinforcementData.position.x + room.pos.x, reinforcementData.position.y + room.pos.y);
              reinforcementData.position = pos;
              _this3.reinforcementData.push(reinforcementData);
              removeEmpty(pos);
            });
          });
          // 道路图集填充
          mapData.forEach(function (col, y) {
            col.forEach(function (cell, x) {
              if (cell === MapData.NONE) {
                // 移除不存在的空位置
                removeEmpty(v2(x, y));
                return;
              }
              if (!_this3.mapAtlas[y]) _this3.mapAtlas[y] = [];
              if (!_this3.mapAtlas[y][x]) _this3.mapAtlas[y][x] = [];
              if (!_this3.mapAtlas[y][x] || _this3.mapAtlas[y][x].length <= 0) {
                var floor = _this3.proto.floorIcon.floor[Math.floor(Math.random() * _this3.proto.floorIcon.floor.length)];
                _this3.mapAtlas[y][x] = [floor];
              }
            });
          });
          // 创建墙体
          this.mapData.forEach(function (col, y) {
            col.forEach(function (cell, x) {
              // 该位置不为空
              if (cell !== MapData.NONE) return;
              // 判断四个方向 上
              if (y > 0 && _this3.mapData[y - 1][x] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 左
              else if (x > 0 && _this3.mapData[y][x - 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 右
              else if (x < _this3.mapData[0].length - 1 && _this3.mapData[y][x + 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 下
              else if (y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 右上
              else if (x < _this3.mapData[0].length - 1 && y > 0 && _this3.mapData[y - 1][x + 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 右下
              else if (x < _this3.mapData[0].length - 1 && y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x + 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 左上
              else if (x > 0 && y > 0 && _this3.mapData[y - 1][x - 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
              // 左下
              else if (x > 0 && y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x - 1] === MapData.FLOOR) _this3.mapData[y][x] = MapData.WALL;
            });
          });
          // 添加墙体图集
          this.mapData.forEach(function (col, y) {
            col.forEach(function (cell, x) {
              if (cell !== MapData.WALL) return;
              if (!_this3.mapAtlas[y]) _this3.mapAtlas[y] = [];
              if (!_this3.mapAtlas[y][x]) _this3.mapAtlas[y][x] = [];
              // 左边有地面
              if (x > 0 && _this3.mapData[y][x - 1] === MapData.FLOOR) {
                var wall = _this3.proto.wallIcon.left[Math.floor(Math.random() * _this3.proto.wallIcon.left.length)];
                _this3.mapAtlas[y][x].push(wall);
              }
              // 右边有地面
              if (x < _this3.mapData[0].length - 1 && _this3.mapData[y][x + 1] === MapData.FLOOR) {
                var _wall = _this3.proto.wallIcon.right[Math.floor(Math.random() * _this3.proto.wallIcon.right.length)];
                _this3.mapAtlas[y][x].push(_wall);
              }
              // 下边有地面
              if (y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x] === MapData.FLOOR) {
                var _wall2 = _this3.proto.wallIcon.bottom[Math.floor(Math.random() * _this3.proto.wallIcon.bottom.length)];
                _this3.mapAtlas[y][x].push(_wall2);
              }
              // 上面有地面
              if (y > 0 && _this3.mapData[y - 1][x] === MapData.FLOOR) {
                var _wall3 = _this3.proto.wallIcon.top[Math.floor(Math.random() * _this3.proto.wallIcon.top.length)];
                _this3.mapAtlas[y][x].push(_wall3);
              }
              // 左侧有墙上下有一方无任何物品并且右侧无墙
              if (x > 0 && _this3.mapData[y][x - 1] === MapData.WALL) {
                if ((y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x] === MapData.NONE || y > 0 && _this3.mapData[y - 1][x] === MapData.NONE) && x < _this3.mapData[0].length - 1 && _this3.mapData[y][x + 1] !== MapData.WALL) {
                  var _wall4 = _this3.proto.wallIcon.left[Math.floor(Math.random() * _this3.proto.wallIcon.left.length)];
                  _this3.mapAtlas[y][x].push(_wall4);
                }
              }
              // 右侧有墙上下有一方无任何物品并且左侧无墙
              if (x < _this3.mapData[0].length - 1 && _this3.mapData[y][x + 1] === MapData.WALL) {
                if ((y < _this3.mapData.length - 1 && _this3.mapData[y + 1][x] === MapData.NONE || y > 0 && _this3.mapData[y - 1][x] === MapData.NONE) && x > 0 && _this3.mapData[y][x - 1] !== MapData.WALL) {
                  var _wall5 = _this3.proto.wallIcon.right[Math.floor(Math.random() * _this3.proto.wallIcon.right.length)];
                  _this3.mapAtlas[y][x].push(_wall5);
                }
              }
            });
          });
          // 空位置
          hasAddPos.forEach(function (posStr) {
            var pos = posStr.split("-").map(function (v) {
              return Number(v);
            });
            _this3.emptyPosition.push(v2(pos[0], pos[1]));
          });
        }

        // 初始化分布记录
        ;

        _proto.initMapDistribution = function initMapDistribution() {
          var _this4 = this;
          // 初始和终点的位置
          this.addDistributionRecord(this.playerPosition, MapDistribution.START_POSITION);
          this.addDistributionRecord(this.endPosition, MapDistribution.END_POSITION);
          // 记录可以行走的地板地板
          this.mapData.forEach(function (row, y) {
            row.forEach(function (v, x) {
              if (v === MapData.FLOOR) _this4.addDistributionRecord(v2(x, y), MapDistribution.FLOOR);
              if (v === MapData.WALL) _this4.addDistributionRecord(v2(x, y), MapDistribution.WALL);
            });
          });
          // 怪物数据
          this.monsterData.forEach(function (monsterData) {
            if (monsterData.isBoss) _this4.addDistributionRecord(monsterData.position, MapDistribution.BOSS);
            _this4.addDistributionRecord(monsterData.position, MapDistribution.MONSTER);
          });
          // 强化符文数据
          this.reinforcementData.forEach(function (reinforcementData) {
            _this4.addDistributionRecord(reinforcementData.position, MapDistribution.REINFORCEMENT);
          });
          // 宝箱数据
          this.treasureData.forEach(function (treasureData) {
            _this4.addDistributionRecord(treasureData.position, MapDistribution.TREASURE);
          });
          // 障碍物数据
          this.obstacleData.forEach(function (obstacleData) {
            _this4.addDistributionRecord(obstacleData.position, MapDistribution.OBSTACLE);
          });
        }

        // 移除怪物
        ;

        _proto.removeMonster = function removeMonster(pos) {
          for (var i = 0; i < this.monsterData.length; i++) {
            var monsterData = this.monsterData[i];
            if (monsterData.position.x === pos.x && monsterData.position.y === pos.y) {
              this.monsterData.splice(i, 1);
              // 添加到空位置
              this.emptyPosition.push(monsterData.position);
              // 移除分布记录
              this.removeDistributionRecord(monsterData.position, MapDistribution.MONSTER);
              break;
            }
          }
        }

        // 移除强化符文
        ;

        _proto.removeReinforcement = function removeReinforcement(pos) {
          for (var i = 0; i < this.reinforcementData.length; i++) {
            var reinforcementData = this.reinforcementData[i];
            if (reinforcementData.position.x === pos.x && reinforcementData.position.y === pos.y) {
              this.reinforcementData.splice(i, 1);
              // 添加到空位置
              this.emptyPosition.push(reinforcementData.position);
              // 移除分布记录
              this.removeDistributionRecord(reinforcementData.position, MapDistribution.REINFORCEMENT);
              break;
            }
          }
        }

        // 寻路算法
        ;

        _proto.findPath = function findPath(from, to) {
          var floorData = [];
          this.mapData.forEach(function (row, y) {
            return row.forEach(function (cell, x) {
              if (!floorData[y]) floorData[y] = [];
              floorData[y][x] = cell === MapData.FLOOR ? 1 : 0;
            });
          });
          this.monsterData.forEach(function (monster) {
            if (monster.position.x === to.x && monster.position.y === to.y) return;
            if (to.x === monster.position.x && to.y === monster.position.y) return;
            floorData[monster.position.y][monster.position.x] = 0;
          });
          this.treasureData.forEach(function (treasure) {
            if (treasure.position.x === to.x && treasure.position.y === to.y) return;
            floorData[treasure.position.y][treasure.position.x] = 0;
          });
          this.obstacleData.forEach(function (obstacle) {
            if (obstacle.position.x === to.x && obstacle.position.y === to.y) return;
            floorData[obstacle.position.y][obstacle.position.x] = 0;
          });
          // A*寻路
          var route = FindWay.instance.aStar(floorData, v2(from.x, from.y), v2(to.x, to.y));
          // 坐标转换为上下左右
          var current = v2(from.x, from.y);
          return route.map(function (pos) {
            var tempCurrent = current;
            current = pos;
            if (pos.x - tempCurrent.x === 1 && pos.y === tempCurrent.y) return "right";
            if (pos.x - tempCurrent.x === -1 && pos.y === tempCurrent.y) return "left";
            if (pos.x === tempCurrent.x && pos.y - tempCurrent.y === 1) return "down";
            if (pos.x === tempCurrent.x && pos.y - tempCurrent.y === -1) return "up";
            return "";
          }).filter(function (v) {
            return v !== "";
          });
        }

        // 添加空位置
        ;

        _proto.addEmptyPosition = function addEmptyPosition(pos) {
          this.emptyPosition.push(v2(pos.x, pos.y));
        }

        // 移除空位置
        ;

        _proto.removeEmptyPosition = function removeEmptyPosition(pos) {
          for (var i = 0; i < this.emptyPosition.length; i++) {
            var emptyPos = this.emptyPosition[i];
            if (emptyPos.x === pos.x && emptyPos.y === pos.y) {
              this.emptyPosition.splice(i, 1);
              break;
            }
          }
        }

        // 添加分布记录
        ;

        _proto.addDistributionRecord = function addDistributionRecord(pos, distribution) {
          if (!this.mapDistribution[pos.y]) this.mapDistribution[pos.y] = [];
          if (!this.mapDistribution[pos.y][pos.x]) this.mapDistribution[pos.y][pos.x] = [distribution];else {
            if (!this.mapDistribution[pos.y][pos.x].includes(distribution)) this.mapDistribution[pos.y][pos.x].push(distribution);
          }
        }

        // 移除分布记录
        ;

        _proto.removeDistributionRecord = function removeDistributionRecord(pos, distribution) {
          if (this.mapDistribution[pos.y] && this.mapDistribution[pos.y][pos.x]) {
            var index = this.mapDistribution[pos.y][pos.x].indexOf(distribution);
            if (index !== -1) this.mapDistribution[pos.y][pos.x].splice(index, 1);
          }
        };
        return FightMapInstance;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightMapManager.ts", ['cc', './FightMapInstance.ts', './FightMapPrototype.ts', './index6.ts', './Message.ts'], function (exports) {
  var cclegacy, director, FightMapInstance, FightMapPrototype, Rx, message;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      director = module.director;
    }, function (module) {
      FightMapInstance = module.FightMapInstance;
    }, function (module) {
      FightMapPrototype = module.FightMapPrototype;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      message = module.message;
    }],
    execute: function () {
      exports({
        enterFightMap: enterFightMap,
        exitFightMap: exitFightMap,
        getAllFightMapKeys: getAllFightMapKeys,
        getFightMapInstance: getFightMapInstance,
        getFightMapKey: getFightMapKey,
        getFightMapPrototype: getFightMapPrototype
      });
      cclegacy._RF.push({}, "0a77fDvM25OK5MmU5dV0iqj", "FightMapManager", undefined);

      // 该文件用于管理游戏中的角色系统
      var registry = new Map();
      var registryReverse = new Map();

      // 装备用品注册装饰器
      var RegisterFightMap = exports('RegisterFightMap', function RegisterFightMap(key) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
        };
      });

      // 获取所有注册的战斗原型key
      function getAllFightMapKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取战斗原型
      function getFightMapPrototype(key) {
        return registry.get(key);
      }

      // 根据战斗原型或者实例获取key
      function getFightMapKey(proto) {
        if (proto instanceof FightMapPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      var instance;

      // 获取全局实例
      function getFightMapInstance() {
        return instance;
      }

      // 进入战斗地图
      function enterFightMap(id, options) {
        if (options === void 0) {
          options = {};
        }
        message.loading().then(function (close) {
          instance = Rx.reactive(new FightMapInstance(getFightMapPrototype(id), options));
          director.loadScene("Map");
        });
      }

      // 退出战斗地图
      function exitFightMap() {
        instance = null;
        message.loading().then(function (close) {
          return director.loadScene("Main");
        });
      }

      // @ts-ignore
      window.enterFightMap = enterFightMap;
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightMapPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './RoomPrototype.ts'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, RoomPrototype, TreasureRoom;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      RoomPrototype = module.RoomPrototype;
      TreasureRoom = module.TreasureRoom;
    }],
    execute: function () {
      cclegacy._RF.push({}, "65ebc9P9XhPY54SyH131NGD", "FightMapPrototype", undefined);
      var FightMapPrototype = exports('FightMapPrototype', /*#__PURE__*/function () {
        // 构造器
        function FightMapPrototype(instance) {
          this.instance = instance;
        }

        // 离开回调
        var _proto = FightMapPrototype.prototype;
        _proto.onLeave = function onLeave() {}

        // 宝箱奖励
        ;

        _proto.getTreasureGoldReward = function getTreasureGoldReward(level) {
          return {
            gold: 0,
            diamond: 0,
            items: [],
            equipments: []
          };
        };
        _createClass(FightMapPrototype, [{
          key: "name",
          get: function get() {
            return "未知关卡";
          }
        }, {
          key: "isBoss",
          get: function get() {
            return false;
          }

          // 可能出现的装备列表
        }, {
          key: "equipList",
          get: function get() {
            return [];
          }

          // 怪物数据
        }, {
          key: "monsterData",
          get: function get() {
            return {
              monsterCount: function monsterCount() {
                return 10;
              },
              boss: function boss() {
                return null;
              },
              monsters: function monsters() {
                return null;
              }
            };
          }
        }, {
          key: "floorIcon",
          get: function get() {
            return {
              floor: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
                return _regeneratorRuntime().wrap(function _callee$(_context) {
                  while (1) switch (_context.prev = _context.next) {
                    case 0:
                      _context.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/MainLevel_1_20_Floor/spriteFrame", SpriteFrame);
                    case 2:
                      return _context.abrupt("return", _context.sent.value);
                    case 3:
                    case "end":
                      return _context.stop();
                  }
                }, _callee);
              }))]
            };
          }
        }, {
          key: "wallIcon",
          get: function get() {
            return {
              // 顶部墙壁
              top: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
                return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                  while (1) switch (_context2.prev = _context2.next) {
                    case 0:
                      _context2.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/MainLevel_1_20_topWall/spriteFrame", SpriteFrame);
                    case 2:
                      return _context2.abrupt("return", _context2.sent.value);
                    case 3:
                    case "end":
                      return _context2.stop();
                  }
                }, _callee2);
              }))],
              // 左侧墙壁
              left: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
                return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                  while (1) switch (_context3.prev = _context3.next) {
                    case 0:
                      _context3.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/MainLevel_1_20_leftWall/spriteFrame", SpriteFrame);
                    case 2:
                      return _context3.abrupt("return", _context3.sent.value);
                    case 3:
                    case "end":
                      return _context3.stop();
                  }
                }, _callee3);
              }))],
              // 右侧墙壁
              right: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
                return _regeneratorRuntime().wrap(function _callee4$(_context4) {
                  while (1) switch (_context4.prev = _context4.next) {
                    case 0:
                      _context4.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/MainLevel_1_20_rightWall/spriteFrame", SpriteFrame);
                    case 2:
                      return _context4.abrupt("return", _context4.sent.value);
                    case 3:
                    case "end":
                      return _context4.stop();
                  }
                }, _callee4);
              }))],
              // 底部墙壁
              bottom: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
                return _regeneratorRuntime().wrap(function _callee5$(_context5) {
                  while (1) switch (_context5.prev = _context5.next) {
                    case 0:
                      _context5.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/MainLevel_1_20_bottomWall/spriteFrame", SpriteFrame);
                    case 2:
                      return _context5.abrupt("return", _context5.sent.value);
                    case 3:
                    case "end":
                      return _context5.stop();
                  }
                }, _callee5);
              }))]
            };
          }
        }, {
          key: "treasureIcon",
          get: function get() {
            return {
              open: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
                return _regeneratorRuntime().wrap(function _callee6$(_context6) {
                  while (1) switch (_context6.prev = _context6.next) {
                    case 0:
                      _context6.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/open-treasure-01/spriteFrame", SpriteFrame);
                    case 2:
                      return _context6.abrupt("return", _context6.sent.value);
                    case 3:
                    case "end":
                      return _context6.stop();
                  }
                }, _callee6);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
                return _regeneratorRuntime().wrap(function _callee7$(_context7) {
                  while (1) switch (_context7.prev = _context7.next) {
                    case 0:
                      _context7.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/open-treasure-02/spriteFrame", SpriteFrame);
                    case 2:
                      return _context7.abrupt("return", _context7.sent.value);
                    case 3:
                    case "end":
                      return _context7.stop();
                  }
                }, _callee7);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {
                return _regeneratorRuntime().wrap(function _callee8$(_context8) {
                  while (1) switch (_context8.prev = _context8.next) {
                    case 0:
                      _context8.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/open-treasure-03/spriteFrame", SpriteFrame);
                    case 2:
                      return _context8.abrupt("return", _context8.sent.value);
                    case 3:
                    case "end":
                      return _context8.stop();
                  }
                }, _callee8);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
                return _regeneratorRuntime().wrap(function _callee9$(_context9) {
                  while (1) switch (_context9.prev = _context9.next) {
                    case 0:
                      _context9.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/open-treasure-04/spriteFrame", SpriteFrame);
                    case 2:
                      return _context9.abrupt("return", _context9.sent.value);
                    case 3:
                    case "end":
                      return _context9.stop();
                  }
                }, _callee9);
              }))],
              close: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {
                return _regeneratorRuntime().wrap(function _callee10$(_context10) {
                  while (1) switch (_context10.prev = _context10.next) {
                    case 0:
                      _context10.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/close-treasure-01/spriteFrame", SpriteFrame);
                    case 2:
                      return _context10.abrupt("return", _context10.sent.value);
                    case 3:
                    case "end":
                      return _context10.stop();
                  }
                }, _callee10);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {
                return _regeneratorRuntime().wrap(function _callee11$(_context11) {
                  while (1) switch (_context11.prev = _context11.next) {
                    case 0:
                      _context11.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/close-treasure-02/spriteFrame", SpriteFrame);
                    case 2:
                      return _context11.abrupt("return", _context11.sent.value);
                    case 3:
                    case "end":
                      return _context11.stop();
                  }
                }, _callee11);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
                return _regeneratorRuntime().wrap(function _callee12$(_context12) {
                  while (1) switch (_context12.prev = _context12.next) {
                    case 0:
                      _context12.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/close-treasure-03/spriteFrame", SpriteFrame);
                    case 2:
                      return _context12.abrupt("return", _context12.sent.value);
                    case 3:
                    case "end":
                      return _context12.stop();
                  }
                }, _callee12);
              })), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {
                return _regeneratorRuntime().wrap(function _callee13$(_context13) {
                  while (1) switch (_context13.prev = _context13.next) {
                    case 0:
                      _context13.next = 2;
                      return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/Treasure/close-treasure-04/spriteFrame", SpriteFrame);
                    case 2:
                      return _context13.abrupt("return", _context13.sent.value);
                    case 3:
                    case "end":
                      return _context13.stop();
                  }
                }, _callee13);
              }))]
            };
          }
        }, {
          key: "obstacleIcon",
          get: function get() {
            return [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
              return _regeneratorRuntime().wrap(function _callee14$(_context14) {
                while (1) switch (_context14.prev = _context14.next) {
                  case 0:
                    _context14.next = 2;
                    return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Stone/spriteFrame", SpriteFrame);
                  case 2:
                    return _context14.abrupt("return", _context14.sent.value);
                  case 3:
                  case "end":
                    return _context14.stop();
                }
              }, _callee14);
            }))];
          }

          // 地图数据
        }, {
          key: "mapSize",
          get: function get() {
            return {
              width: 31,
              height: 31
            };
          }

          // 强化符文数据
        }, {
          key: "reinforcementData",
          get: function get() {
            return {
              posibility: 0.01,
              // 仅对非boss关卡生效
              max: 4,
              // 仅对非boss关卡生效
              min: 1,
              // 仅对非boss关卡生效
              data: []
            };
          }

          // 可能出现的房间的数据
        }, {
          key: "roomData",
          get: function get() {
            var result = [];
            for (var i = 0; i < 50; i++) result.push(RoomPrototype);
            for (var _i = 0; _i < 5; _i++) result.push(TreasureRoom);
            return result;
          }
        }]);
        return FightMapPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './ExtensionComponent.ts', './CharacterInstance.ts', './FightCharacterPrefab.ts', './index6.ts', './CharacterPrototype.ts', './Normal.ts', './SkillConfig.ts', './CharacterManager2.ts', './SkillManager.ts', './Message.ts', './LanguageManager.ts', './SettingManager.ts', './LanguageEntry.ts', './CharacterToPrefabMap.ts', './LoadingManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _asyncToGenerator, _regeneratorRuntime, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createClass, cclegacy, _decorator, Prefab, instantiate, Sprite, Label, Button, Color, CcNative, ExtensionComponent, CharacterEvent, FightCharacterPrefab, Rx, DamageType, Normal, isSkillPassive, getCharacterKey, getSkillKey, message, LanguageManager, settingManager, LanguageEntry, bindCharacterToComponent, unbindCharacterComponent, LoadingManager;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      instantiate = module.instantiate;
      Sprite = module.Sprite;
      Label = module.Label;
      Button = module.Button;
      Color = module.Color;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      CharacterEvent = module.CharacterEvent;
    }, function (module) {
      FightCharacterPrefab = module.FightCharacterPrefab;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      DamageType = module.DamageType;
    }, function (module) {
      Normal = module.Normal;
    }, function (module) {
      isSkillPassive = module.isSkillPassive;
    }, function (module) {
      getCharacterKey = module.getCharacterKey;
    }, function (module) {
      getSkillKey = module.getSkillKey;
    }, function (module) {
      message = module.message;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      bindCharacterToComponent = module.bindCharacterToComponent;
      unbindCharacterComponent = module.unbindCharacterComponent;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "ef6e2IKTpFDC7c7i5udbe3R", "FightPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var FightPrefab = exports('FightPrefab', (_dec = ccclass('FightPrefab'), _dec2 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(FightPrefab, _ExtensionComponent);
        function FightPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 战斗角色预制体
          _initializerDefineProperty(_this, "CharacterPrefab", _descriptor, _assertThisInitialized(_this));
          // 玩家位置
          _this.playerPosition = "none";
          // 自动使用技能的位置
          _this.autoUseSkill = [];
          // 左右侧角色 
          _this.leftCharacter = void 0;
          _this.rightCharacter = void 0;
          // 是否已经开始了战斗
          _this._hasStart = false;
          // 两边角色组件
          _this.leftCharacterPrefab = void 0;
          _this.rightCharacterPrefab = void 0;
          // 逃跑回调
          _this.escapeCallback = null;
          return _this;
        }
        var _proto = FightPrefab.prototype;
        // 设置战斗数据并且开始战斗
        _proto.setFightAndStart = /*#__PURE__*/
        function () {
          var _setFightAndStart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(option) {
            var result;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (!this.hasStart) {
                    _context.next = 2;
                    break;
                  }
                  return _context.abrupt("return");
                case 2:
                  this._hasStart = true;
                  this.autoUseSkill = option.autoUseSkill || [];
                  // 设置数据
                  this.leftCharacter = Rx.reactive(option.leftCharacter);
                  this.rightCharacter = Rx.reactive(option.rightCharacter);
                  // 创建角色
                  _context.next = 8;
                  return this.createCharacter(option.player);
                case 8:
                  // 技能面版展示
                  this.createSkillPanel();
                  // 两边角色播放入场动画
                  _context.next = 11;
                  return Promise.all([this.leftCharacterPrefab.characterEnter(), this.rightCharacterPrefab.characterEnter()]);
                case 11:
                  // 开始战斗
                  option.onStart && option.onStart();
                  // 开始战斗
                  _context.next = 14;
                  return this.startFight();
                case 14:
                  result = _context.sent;
                  return _context.abrupt("return", result);
                case 16:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function setFightAndStart(_x) {
            return _setFightAndStart.apply(this, arguments);
          }
          return setFightAndStart;
        }() // 创建技能面版展示
        ;

        _proto.createSkillPanel = /*#__PURE__*/
        function () {
          var _createSkillPanel = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
            var _this2 = this;
            var skillPanel, threeNodePos, skillItemTemp, playerData;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  // 技能面版
                  skillPanel = this.node.getChildByName("SkillPanel"); // 技能面版位置
                  threeNodePos = [{
                    x: -250,
                    y: 80
                  }, {
                    x: 0,
                    y: 215
                  }, {
                    x: 250,
                    y: 80
                  }]; // 模板节点
                  skillItemTemp = skillPanel.getChildByName("SkillContainer").getChildByName("SkillItem");
                  skillItemTemp.parent = null;
                  // 获取玩家数据
                  playerData = this.getPlayerData(); // 这一局不存在玩家 隐藏技能面版
                  if (playerData) {
                    _context3.next = 9;
                    break;
                  }
                  return _context3.abrupt("return", skillPanel.active = false);
                case 9:
                  skillPanel.active = true;
                case 10:
                  // 遍历技能数据
                  playerData.character.skills.map(function (skill, index) {
                    // 如果是被动技能则跳过
                    var isPassive = isSkillPassive(getCharacterKey(playerData.character.proto), getSkillKey(skill.proto));
                    if (isPassive) return null;
                    // 创建技能节点
                    var skillNode = instantiate(skillItemTemp);
                    // 技能节点坐标
                    skillNode.setPosition(threeNodePos[index].x, threeNodePos[index].y);
                    // 图标
                    skill.proto.icon().then(function (spriteFrame) {
                      return skillNode.getChildByName("Icon").getComponent(Sprite).spriteFrame = spriteFrame;
                    });
                    // 时间展示绑定
                    var coollingNode = skillNode.getChildByName("Coolling");
                    var collingMaskSprite = coollingNode.getComponent(Sprite);
                    var collingTimeLabel = coollingNode.getChildByName("CoollingTime").getComponent(Label);
                    _this2.effect(function () {
                      if (skill.coolTime !== 0) coollingNode.active = true;else coollingNode.active = false;
                      collingMaskSprite.fillRange = skill.coolTime / 1000 / skill.proto.coolTime;
                      collingTimeLabel.string = (skill.coolTime / 1000).toFixed(1) + "s";
                    });
                    // 绑定点击按钮
                    skillNode.getChildByName("Icon").on(Button.EventType.CLICK, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
                      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                        while (1) switch (_context2.prev = _context2.next) {
                          case 0:
                            _context2.next = 2;
                            return playerData.character.isSkillAble(skill);
                          case 2:
                            if (!_context2.sent) {
                              _context2.next = 4;
                              break;
                            }
                            playerData.characterPrefab.characterUseSkill(skill);
                          case 4:
                          case "end":
                            return _context2.stop();
                        }
                      }, _callee2);
                    })));
                    skillPanel.getChildByName("SkillContainer").addChild(skillNode);
                  });
                  return _context3.abrupt("return");
                case 12:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function createSkillPanel() {
            return _createSkillPanel.apply(this, arguments);
          }
          return createSkillPanel;
        }() // 创建两个角色
        ;

        _proto.createCharacter = /*#__PURE__*/
        function () {
          var _createCharacter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(playerPos) {
            var leftNode, leftCharacterPrefab, rightNode, rightCharacterPrefab;
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  if (playerPos === void 0) {
                    playerPos = "none";
                  }
                  this.playerPosition = playerPos;
                  // 左侧 
                  leftNode = CcNative.instantiate(this.CharacterPrefab);
                  leftCharacterPrefab = leftNode.getComponent(FightCharacterPrefab);
                  _context4.next = 6;
                  return leftCharacterPrefab.bindCharacter(this.leftCharacter, "left", playerPos !== "left");
                case 6:
                  this.node.getChildByName("LeftCharacterContainer").addChild(leftNode);
                  this.leftCharacterPrefab = leftCharacterPrefab;
                  leftCharacterPrefab.fightPrefab = this;
                  // 右侧
                  rightNode = CcNative.instantiate(this.CharacterPrefab);
                  rightCharacterPrefab = rightNode.getComponent(FightCharacterPrefab);
                  _context4.next = 13;
                  return rightCharacterPrefab.bindCharacter(this.rightCharacter, "right", playerPos !== "right");
                case 13:
                  this.node.getChildByName("RightCharacterContainer").addChild(rightNode);
                  this.rightCharacterPrefab = rightCharacterPrefab;
                  rightCharacterPrefab.fightPrefab = this;
                  // 绑定
                  bindCharacterToComponent(this.leftCharacter, this.leftCharacterPrefab);
                  bindCharacterToComponent(this.rightCharacter, this.rightCharacterPrefab);
                case 18:
                case "end":
                  return _context4.stop();
              }
            }, _callee4, this);
          }));
          function createCharacter(_x2) {
            return _createCharacter.apply(this, arguments);
          }
          return createCharacter;
        }();
        // 开始战斗逻辑
        _proto.startFight = /*#__PURE__*/
        function () {
          var _startFight = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
            var _this3 = this;
            var stopGame, startAttack;
            return _regeneratorRuntime().wrap(function _callee9$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  stopGame = false; // 两边角色进入准备状态
                  this.leftCharacterPrefab.characterReady();
                  this.rightCharacterPrefab.characterReady();
                  // 绑定回血扣血回调
                  [{
                    character: this.leftCharacter,
                    prefab: this.leftCharacterPrefab
                  }, {
                    character: this.rightCharacter,
                    prefab: this.rightCharacterPrefab
                  }].forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_ref2) {
                    var character, prefab;
                    return _regeneratorRuntime().wrap(function _callee5$(_context5) {
                      while (1) switch (_context5.prev = _context5.next) {
                        case 0:
                          character = _ref2.character, prefab = _ref2.prefab;
                          character.on(CharacterEvent.ReduceHp, function (progress) {
                            if (progress.reduce <= 0) return;
                            var color = new Color(255, 255, 255);
                            if (progress.type === DamageType.real) color = new Color(255, 255, 255);
                            if (progress.type === DamageType.physic) color = new Color(250, 15, 15);
                            if (progress.type === DamageType.magic) color = new Color(10, 50, 200);
                            if (progress.type === DamageType.light) color = new Color(230, 150, 15);
                            if (progress.type === DamageType.dark) color = new Color(125, 10, 230);
                            prefab.showMessage((progress.critical ? "暴击" : "") + ("-" + Normal.number(progress.reduce)), color);
                          });
                          character.on(CharacterEvent.IncreaseHp, function (progress) {
                            prefab.showMessage("+" + Normal.number(progress.increase), new Color(85, 225, 0));
                          });
                        case 3:
                        case "end":
                          return _context5.stop();
                      }
                    }, _callee5);
                  })));
                  // 两边角色开始攻击
                  startAttack = /*#__PURE__*/function () {
                    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(character, target, characterPrefab, targetPrefab, pos) {
                      return _regeneratorRuntime().wrap(function _callee7$(_context7) {
                        while (1) switch (_context7.prev = _context7.next) {
                          case 0:
                            return _context7.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(res) {
                              var stop, skills, autoSkill;
                              return _regeneratorRuntime().wrap(function _callee6$(_context6) {
                                while (1) switch (_context6.prev = _context6.next) {
                                  case 0:
                                    stop = false;
                                    character.on(CharacterEvent.Death, function () {
                                      stop = true;
                                      res(null);
                                    });
                                    target.on(CharacterEvent.Death, function () {
                                      stop = true;
                                      res(null);
                                    });
                                  case 3:
                                    if (!(!stop && !stopGame)) {
                                      _context6.next = 23;
                                      break;
                                    }
                                    if (!_this3.autoUseSkill.includes(pos)) {
                                      _context6.next = 14;
                                      break;
                                    }
                                    skills = character.skills;
                                    autoSkill = skills[Math.floor(Math.random() * skills.length)];
                                    _context6.t0 = autoSkill;
                                    if (!_context6.t0) {
                                      _context6.next = 12;
                                      break;
                                    }
                                    _context6.next = 11;
                                    return character.isSkillAble(autoSkill);
                                  case 11:
                                    _context6.t0 = _context6.sent;
                                  case 12:
                                    if (!_context6.t0) {
                                      _context6.next = 14;
                                      break;
                                    }
                                    characterPrefab.characterUseSkill(autoSkill);
                                  case 14:
                                    _context6.next = 16;
                                    return characterPrefab.characterAction(target);
                                  case 16:
                                    if (!(character._preDeath || character.hasDeath)) {
                                      _context6.next = 18;
                                      break;
                                    }
                                    return _context6.abrupt("break", 23);
                                  case 18:
                                    characterPrefab.characterReady();
                                    // 攻击间隔
                                    _context6.next = 21;
                                    return new Promise(function (resolve) {
                                      return _this3.setAutoInterval(function () {
                                        return resolve(null);
                                      }, {
                                        count: 1,
                                        timer: 800 / character.attackSpeed
                                      });
                                    });
                                  case 21:
                                    _context6.next = 3;
                                    break;
                                  case 23:
                                    return _context6.abrupt("return");
                                  case 24:
                                  case "end":
                                    return _context6.stop();
                                }
                              }, _callee6);
                            }))));
                          case 1:
                          case "end":
                            return _context7.stop();
                        }
                      }, _callee7);
                    }));
                    return function startAttack(_x4, _x5, _x6, _x7, _x8) {
                      return _ref4.apply(this, arguments);
                    };
                  }(); // 战斗结算
                  return _context9.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(res) {
                    return _regeneratorRuntime().wrap(function _callee8$(_context8) {
                      while (1) switch (_context8.prev = _context8.next) {
                        case 0:
                          // 逃跑回调
                          _this3.escapeCallback = function () {
                            stopGame = true;
                            res("none");
                          };
                          // 两边角色开始攻击
                          _context8.next = 3;
                          return Promise.all([startAttack(_this3.leftCharacter, _this3.rightCharacter, _this3.leftCharacterPrefab, _this3.rightCharacterPrefab, "left"), startAttack(_this3.rightCharacter, _this3.leftCharacter, _this3.rightCharacterPrefab, _this3.leftCharacterPrefab, "right")]);
                        case 3:
                          if (!_this3.leftCharacter.hasDeath) _this3.leftCharacterPrefab.characterReady();
                          if (!_this3.rightCharacter.hasDeath) _this3.rightCharacterPrefab.characterReady();
                          // 结算
                          if (_this3.leftCharacter.hasDeath && _this3.rightCharacter.hasDeath) res("none");
                          if (_this3.leftCharacter.hasDeath) res("right");else if (_this3.rightCharacter.hasDeath) res("left");
                        case 7:
                        case "end":
                          return _context8.stop();
                      }
                    }, _callee8);
                  })))["finally"](function () {
                    unbindCharacterComponent(_this3.leftCharacter);
                    unbindCharacterComponent(_this3.rightCharacter);
                  }));
                case 6:
                case "end":
                  return _context9.stop();
              }
            }, _callee9, this);
          }));
          function startFight() {
            return _startFight.apply(this, arguments);
          }
          return startFight;
        }() // 逃跑函数
        ;

        _proto.escape = function escape() {
          var _this4 = this;
          message.confirm(LanguageManager.getEntry("Warning").getValue(settingManager.data.language), new ( /*#__PURE__*/function (_LanguageEntry) {
            _inheritsLoose(_class4, _LanguageEntry);
            function _class4() {
              return _LanguageEntry.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "你确定要逃跑吗？逃跑将视为失败，无法获得任何奖励";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Are you sure you want to escape? Escaping will be considered a failure and you will not receive any rewards";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "本当に逃げますか？逃げると失敗と見なされ、報酬を受け取ることができません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language), LanguageManager.getEntry("Confirm").getValue(settingManager.data.language), LanguageManager.getEntry("Cancel").getValue(settingManager.data.language), this.node).then(function (res) {
            if (res) _this4.escapeCallback && _this4.escapeCallback();
          });
          return;
        }

        // 获取玩家角色
        ;

        _proto.getPlayerData = function getPlayerData() {
          if (this.playerPosition === "none") return null;
          if (this.playerPosition === "left") return {
            character: this.leftCharacter,
            characterPrefab: this.leftCharacterPrefab
          };
          if (this.playerPosition === "right") return {
            character: this.rightCharacter,
            characterPrefab: this.rightCharacterPrefab
          };
        };
        _createClass(FightPrefab, [{
          key: "hasStart",
          get: function get() {
            return this._hasStart;
          }
        }]);
        return FightPrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "CharacterPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: null
      }), _class2)) || _class));

      // 预加载战斗场景
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {
        return _regeneratorRuntime().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              _context10.next = 2;
              return new CcNative.Asset.AssetManager("PrefabResource").load("FightPrefab/FightPrefab", Prefab, true);
            case 2:
            case "end":
              return _context10.stop();
          }
        }, _callee10);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FightProgress.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './CharacterPrototype.ts'], function (exports) {
  var _inheritsLoose, cclegacy, FromType, DamageType;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      FromType = module.FromType;
      DamageType = module.DamageType;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b037fJDCINOMI3Hz9ZzFBZT", "FightProgress", undefined);
      var Progress = exports('Progress', function Progress() {
        // 数据
        this.data = new Map();
        // 跳过当前阶段
        this.next = void 0;
      });
      var AttackProgress = exports('AttackProgress', /*#__PURE__*/function (_Progress) {
        _inheritsLoose(AttackProgress, _Progress);
        function AttackProgress() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Progress.call.apply(_Progress, [this].concat(args)) || this;
          _this.from = null;
          _this.target = null;
          _this.critical = false;
          _this.damageRateType = {
            physic: 1.0,
            magic: 0.4,
            light: 0.8,
            dark: 0.8,
            real: 0
          };
          return _this;
        }
        return AttackProgress;
      }(Progress));
      var DamageProgress = exports('DamageProgress', /*#__PURE__*/function (_Progress2) {
        _inheritsLoose(DamageProgress, _Progress2);
        function DamageProgress() {
          var _this2;
          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            args[_key2] = arguments[_key2];
          }
          _this2 = _Progress2.call.apply(_Progress2, [this].concat(args)) || this;
          _this2.from = null;
          _this2.target = null;
          _this2.fromType = FromType.attack;
          _this2.damageType = DamageType.physic;
          _this2.damage = 0;
          _this2.damageRate = 1.0;
          _this2.critical = false;
          return _this2;
        }
        return DamageProgress;
      }(Progress));
      var BuffProgress = exports('BuffProgress', /*#__PURE__*/function (_Progress3) {
        _inheritsLoose(BuffProgress, _Progress3);
        function BuffProgress() {
          var _this3;
          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
            args[_key3] = arguments[_key3];
          }
          _this3 = _Progress3.call.apply(_Progress3, [this].concat(args)) || this;
          _this3.from = null;
          _this3.target = null;
          _this3.buff = [];
          return _this3;
        }
        return BuffProgress;
      }(Progress));
      var DeathProgress = exports('DeathProgress', /*#__PURE__*/function (_Progress4) {
        _inheritsLoose(DeathProgress, _Progress4);
        function DeathProgress() {
          var _this4;
          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
            args[_key4] = arguments[_key4];
          }
          _this4 = _Progress4.call.apply(_Progress4, [this].concat(args)) || this;
          _this4.from = null;
          _this4.damage = 0;
          return _this4;
        } // 最终伤害
        return DeathProgress;
      }(Progress));
      var HealProgress = exports('HealProgress', /*#__PURE__*/function (_Progress5) {
        _inheritsLoose(HealProgress, _Progress5);
        function HealProgress() {
          var _this5;
          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
            args[_key5] = arguments[_key5];
          }
          _this5 = _Progress5.call.apply(_Progress5, [this].concat(args)) || this;
          _this5.from = null;
          _this5.target = null;
          _this5.heal = 0;
          _this5.healRate = 1.0;
          _this5.fromType = FromType.skill;
          return _this5;
        }
        return HealProgress;
      }(Progress));
      var SkillProgress = exports('SkillProgress', /*#__PURE__*/function (_Progress6) {
        _inheritsLoose(SkillProgress, _Progress6);
        function SkillProgress() {
          var _this6;
          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
            args[_key6] = arguments[_key6];
          }
          _this6 = _Progress6.call.apply(_Progress6, [this].concat(args)) || this;
          _this6.from = null;
          _this6.skill = null;
          _this6.cost = {
            hp: 0,
            mp: 0
          };
          _this6.coolTime = 0;
          _this6.type = "use";
          return _this6;
        } // 使用技能还是测试技能是否能用
        return SkillProgress;
      }(Progress));
      var ReduceHpProgress = exports('ReduceHpProgress', /*#__PURE__*/function (_Progress7) {
        _inheritsLoose(ReduceHpProgress, _Progress7);
        function ReduceHpProgress() {
          var _this7;
          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
            args[_key7] = arguments[_key7];
          }
          _this7 = _Progress7.call.apply(_Progress7, [this].concat(args)) || this;
          _this7.reduce = void 0;
          _this7.type = void 0;
          _this7.from = void 0;
          _this7.fromType = void 0;
          _this7.critical = void 0;
          return _this7;
        }
        return ReduceHpProgress;
      }(Progress));
      var ReduceMpProgress = exports('ReduceMpProgress', /*#__PURE__*/function (_Progress8) {
        _inheritsLoose(ReduceMpProgress, _Progress8);
        function ReduceMpProgress() {
          var _this8;
          for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
            args[_key8] = arguments[_key8];
          }
          _this8 = _Progress8.call.apply(_Progress8, [this].concat(args)) || this;
          _this8.reduce = void 0;
          _this8.from = void 0;
          return _this8;
        }
        return ReduceMpProgress;
      }(Progress));
      var IncreaseHpProgress = exports('IncreaseHpProgress', /*#__PURE__*/function (_Progress9) {
        _inheritsLoose(IncreaseHpProgress, _Progress9);
        function IncreaseHpProgress() {
          var _this9;
          for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
            args[_key9] = arguments[_key9];
          }
          _this9 = _Progress9.call.apply(_Progress9, [this].concat(args)) || this;
          _this9.increase = void 0;
          _this9.from = void 0;
          _this9.fromType = void 0;
          return _this9;
        }
        return IncreaseHpProgress;
      }(Progress));
      var IncreaseMpProgress = exports('IncreaseMpProgress', /*#__PURE__*/function (_Progress10) {
        _inheritsLoose(IncreaseMpProgress, _Progress10);
        function IncreaseMpProgress() {
          var _this10;
          for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
            args[_key10] = arguments[_key10];
          }
          _this10 = _Progress10.call.apply(_Progress10, [this].concat(args)) || this;
          _this10.increase = void 0;
          _this10.from = void 0;
          _this10.fromType = void 0;
          return _this10;
        }
        return IncreaseMpProgress;
      }(Progress));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FindWay.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy, v2, error;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      v2 = module.v2;
      error = module.error;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1b273v2T2hLZLZ+PwcdptEg", "FindWay", undefined);
      var FindWay = exports('FindWay', /*#__PURE__*/function () {
        function FindWay() {}
        var _proto = FindWay.prototype;
        // 判断是否超出边界
        _proto.isOutBorder = function isOutBorder(mapData, pos) {
          if (pos.x < 0 || pos.x >= mapData.length || pos.y < 0 || !Array.isArray(mapData[0]) || pos.y >= mapData[0].length) {
            return true;
          }
          return false;
        }

        // A*算法
        ;

        _proto.aStar = function aStar(mapData, start, end) {
          var _this = this;
          if (this.isOutBorder(mapData, start) || this.isOutBorder(mapData, end)) return [];
          if (mapData[start.y][start.x] == 0 || mapData[end.y][end.x] == 0) return [];
          if (start.equals(end)) return [];
          // 位置和位置到终点的代价合集
          var awaitEnterList = new Map();
          // 已经经过的位置
          var hasEnterList = new Set();
          // 每一个坐标的上一个坐标 用于回溯路径
          var preList = new Map();
          // 坐标转换
          function posToStr(pos) {
            return pos.x + "-" + pos.y;
          }
          function strToPos(str) {
            var _str$split = str.split('-'),
              x = _str$split[0],
              y = _str$split[1];
            var xPos = Number(x);
            var yPos = Number(y);
            if (!xPos || !yPos) {
              error("error position: " + str);
            }
            return v2(xPos, yPos);
          }
          // 处理节点
          var dealPos = function dealPos(pos, lastPos) {
            if (!_this.isOutBorder(mapData, pos) &&
            // 没有越界
            mapData[pos.y][pos.x] !== 0 &&
            // 不是障碍物或空
            !hasEnterList.has(posToStr(pos)) &&
            // 没有走过
            !awaitEnterList.has(posToStr(pos)) // 没有待入
            ) {
              // 计算代价并且添加到待入列表
              awaitEnterList.set(posToStr(pos), Math.abs(pos.x - end.x) + Math.abs(pos.y - end.y));
              // 添加上一个位置
              preList.set(posToStr(pos), posToStr(lastPos));
            }
          };
          // 从起点开始
          var currentPos = start;
          // 如果当前位置存在
          var _loop = function _loop() {
              hasEnterList.add(posToStr(currentPos));
              awaitEnterList["delete"](posToStr(currentPos));
              // 四个方向
              var top = v2(currentPos.x, currentPos.y - 1);
              var bottom = v2(currentPos.x, currentPos.y + 1);
              var left = v2(currentPos.x - 1, currentPos.y);
              var right = v2(currentPos.x + 1, currentPos.y);
              // 处理四个方向
              dealPos(top, currentPos);
              dealPos(bottom, currentPos);
              dealPos(left, currentPos);
              dealPos(right, currentPos);
              // 从待入列表中取出代价最小的
              var minPos = null,
                minCost = -1;
              awaitEnterList.forEach(function (v, k) {
                if (minCost === -1) {
                  minCost = v;
                  minPos = k;
                  return;
                }
                if (v < minCost) {
                  minCost = v;
                  minPos = k;
                }
              });
              if (minPos === null) return 0; // break
              currentPos = strToPos(minPos);
              // 说明是死路
              if (awaitEnterList.size === 0) return 0; // break
            },
            _ret;
          while (currentPos && !currentPos.equals(end)) {
            _ret = _loop();
            if (_ret === 0) break;
          }
          // 找一下路径
          if (!preList.has(posToStr(end))) return [];
          var result = [];
          var curr = end;
          while (curr) {
            result.unshift(curr);
            var parent = preList.get(posToStr(curr));
            if (parent) curr = strToPos(parent);else curr = null;
          }
          return result;
        };
        _createClass(FindWay, null, [{
          key: "instance",
          get: function get() {
            if (!this._instance) {
              this._instance = new FindWay();
            }
            return this._instance;
          }
        }]);
        return FindWay;
      }());
      FindWay._instance = void 0;
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FiniteStateMachine.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy, warn;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }],
    execute: function () {
      cclegacy._RF.push({}, "e3949fd8+1Ku7NU3pcw3Ywr", "FiniteStateMachine", undefined);
      function copyObject(obj) {
        if (typeof obj !== "object") return obj;
        if (Array.isArray(obj)) {
          var r = [];
          for (var i = 0; i < obj.length; i++) r.push(copyObject(obj[i]));
          return r;
        }
        var result = {};
        Object.keys(obj).forEach(function (k) {
          result[k] = copyObject(obj[k]);
        });
        return result;
      }
      var FiniteStateMachine = exports('FiniteStateMachine', /*#__PURE__*/function () {
        function FiniteStateMachine(option) {
          this.option = void 0;
          this.option = copyObject(option);
          this.initState(this.option);
        }
        var _proto = FiniteStateMachine.prototype;
        _proto.send = function send(event) {
          var op = this.option;
          // 找到对应的option
          while (!op.on[event]) {
            var nop = op.states[op.current];
            // 没有找到对应的事件
            if (typeof nop === "string") {
              return warn("event " + event + " not find in this state");
            } else op = nop;
          }
          // from to
          var ft = null;
          var relations = op.on[event];
          relations.forEach(function (v) {
            if (v.from === op.current || v.from === op.inital) ft = v;
          });
          // 是否可以转换
          if (!this.pass(event, ft, op)) return false;
          // 上一个状态
          var last = op.current;
          // 新状态
          op.current = ft.to;
          // 初始化之前的状态
          if (typeof op.states[last] !== "string") this.initState(op.states[last]);
          return true;
        };
        _proto.pass = function pass(event, ft, op) {
          // 没有找到对应的关系
          if (ft === null) {
            warn("event " + event + " not find in this state");
            return false;
          }
          // 对应关系所指向的状态未被定义
          if (!op.states[ft.to]) {
            warn("target state " + ft.to + " not find in this state option");
            return false;
          }
          // 检查下层状态上锁情况，以及是否允许转换
          var childOp = op.states[op.current];
          while (typeof childOp !== "string") {
            var lockData = childOp.lock[childOp.current];
            if (lockData && lockData.lockIds && lockData.lockIds.length > 0) {
              for (var i = 0; i < lockData.lockIds.length; i++) {
                if (lockData.lockIds[i] === op.id || lockData.lockIds[i] === "*") {
                  warn("event " + event + " emit fail : " + childOp.current + " is locked");
                  return false;
                }
              }
            }
            childOp = childOp.states[childOp.current];
          }
          return true;
        };
        _proto.initState = function initState(option) {
          var _this = this;
          var op = option;
          op.current = op.inital;
          op.id = op.id || "";
          Object.keys(op.states).forEach(function (k) {
            var s = op.states[k];
            if (typeof s !== "string") _this.initState(s);
          });
        };
        _createClass(FiniteStateMachine, [{
          key: "state",
          get: function get() {
            var state = this.option.states[this.option.current];
            while (typeof state !== "string") {
              state = state.states[state.current];
            }
            return state;
          }
        }, {
          key: "statePath",
          get: function get() {
            var state = this.option.states[this.option.current];
            var arr = [this.option.current];
            while (typeof state !== "string") {
              var c = state.current;
              state = state.states[c];
              arr.push(c);
            }
            return arr;
          }
        }]);
        return FiniteStateMachine;
      }());

      // // @ts-ignore
      // window.fsm = new FiniteStateMachine({
      //     inital: "right",
      //     id: "direct",
      //     states: {
      //         right: {
      //             inital: "idle",
      //             states: {
      //                 idle: "idle",
      //                 atk: "atk",
      //                 run: "run"
      //             },
      //             on: {
      //                 attack: [
      //                     {from: "idle" , to: "atk"},
      //                     {from: "run" , to: "atk"},
      //                 ],
      //                 move: [
      //                     {from: "idle" , to: "run"},
      //                 ],
      //                 attackEnd: [
      //                     {from: "atk" , to: "idle"},
      //                 ],
      //                 stop: [
      //                     {from: "run" , to: "idle"}
      //                 ]
      //             },
      //             lock: {
      //                 atk: {
      //                     lockIds: ["direct"],
      //                 },
      //             }
      //         },
      //         left: {
      //             inital: "idle",
      //             states: {
      //                 idle: "idle",
      //                 atk: "atk",
      //                 run: "run"
      //             },
      //             on: {
      //                 attack: [
      //                     {from: "idle" , to: "atk"},
      //                     {from: "run" , to: "atk"},
      //                 ],
      //                 move: [
      //                     {from: "idle" , to: "run"},
      //                 ],
      //                 attackEnd: [
      //                     {from: "atk" , to: "idle"},
      //                 ],
      //                 stop: [
      //                     {from: "run" , to: "idle"}
      //                 ]
      //             },
      //             lock: {
      //                 atk: {
      //                     lockIds: ["direct"],
      //                 },
      //             }
      //         },
      //     },
      //     on: {
      //         turn: [
      //             {from: "right" , to: "left"},
      //             {from: "left" , to: "right"},
      //         ]
      //     }
      // })
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Fireball.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './FightMapManager.ts', './CharacterPrototype.ts', './SpineAnimation.ts', './CharacterToPrefabMap.ts', './LoadingManager.ts', './Message.ts', './AssetManager.ts', './Burn.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, Node, UITransform, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillFailReason, SkillPrototype, RegisterSkill, LanguageEntry, getFightMapInstance, DamageType, FromType, SpineAnimation, getComponentByCharacter, LoadingManager, message, getBaseModManager, Burn;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      Node = module.Node;
      UITransform = module.UITransform;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      Burn = module.Burn;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "80005aMgd1DgJ859c4Acs/n", "Fireball", undefined);
      var Name = (_dec = RegisterLanguageEntry("Fireball"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "火球术";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Fireball";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "ファイアボール";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("Fireball Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8017: " + (Math.max(1, lv) * 20 + 40) + " \u9B54\u6CD5\u503C</color>\n\u51B7\u5374\u65F6\u95F4: " + (20 - lv * 1.5) + "s\n" + ("\u9020\u6210 " + (Math.max(1, lv) * 10 + 60) + "% \u9B54\u529B\u503C\u7684\u9B54\u6CD5\u4F24\u5E76\u6DFB\u52A0\u70E7\u4F24: \u6BCF\u79D2\u9020\u6210 " + (Math.max(1, lv) * 10 + 60) * 0.35 + " \u7684\u771F\u5B9E\u4F24\u5BB3");
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>Cost: " + (Math.max(1, lv) * 20 + 40) + " Mana</color>\nCooldown: " + (20 - lv * 1.5) + "s\n" + ("Deals " + (Math.max(1, lv) * 10 + 60) + "% of magic damage and applies Burn: " + (Math.max(1, lv) * 10 + 60) * 0.35 + " damage per second");
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8CBB: " + (Math.max(1, lv) * 20 + 40) + " \u30DE\u30CA</color>\n\u30AF\u30FC\u30EB\u30BF\u30A4\u30E0: " + (20 - lv * 1.5) + "s\n" + ("\u9B54\u529B\u306E " + (Math.max(1, lv) * 10 + 60) + "% \u306E\u9B54\u6CD5\u30C0\u30E1\u30FC\u30B8\u3092\u4E0E\u3048\u3001\u304B\u3064\u70E7\u4F24\u3092\u4ED8\u4E0E: \u6BCE\u79D2 " + (Math.max(1, lv) * 10 + 60) * 0.35 + " \u306E\u30C0\u30E1\u30FC\u30B8");
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var Fireball = exports('Fireball', (_dec3 = RegisterSkill("Fireball"), _dec4 = RegisterPlayerSkill("Fireball", "Brave"), _dec5 = RegisterSkillUpLevel("Fireball", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(Fireball, _SkillPrototype);
        function Fireball() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = Fireball.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/Fireball/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = /*#__PURE__*/function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            var fightInstance, target, targetPrefab, node, spineAnimation, skeletonDataPack, magicReduce;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // 战斗实例
                  fightInstance = getFightMapInstance();
                  if (fightInstance) {
                    _context2.next = 3;
                    break;
                  }
                  return _context2.abrupt("return");
                case 3:
                  target = this.instance.characterInstance === fightInstance.player ? fightInstance.currentMonster : fightInstance.player; // 获取目标节点
                  targetPrefab = getComponentByCharacter(target);
                  if (targetPrefab) {
                    _context2.next = 7;
                    break;
                  }
                  return _context2.abrupt("return");
                case 7:
                  // 播放特效动画
                  node = new Node();
                  node.addComponent(UITransform);
                  spineAnimation = node.addComponent(SpineAnimation);
                  _context2.next = 12;
                  return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
                case 12:
                  skeletonDataPack = _context2.sent;
                  targetPrefab.node.addChild(node);
                  _context2.next = 16;
                  return new Promise(function (res) {
                    node.setScale(1.2, 1.2);
                    node.setPosition(0, -120);
                    spineAnimation.skeletonData = skeletonDataPack.value;
                    spineAnimation.playAnimation("skill_2", {
                      count: 1
                    });
                    spineAnimation.listenFrameEvent("Skill", function () {
                      return res(null);
                    });
                  });
                case 16:
                  magicReduce = Math.max(useOption.use.magicAttack * ((Math.max(1, this.instance.lv - 1) * 10 + 60) / 100), 1);
                  target.beDamage({
                    atk: magicReduce,
                    type: DamageType.magic,
                    from: fightInstance.player,
                    fromType: FromType.skill
                  });
                  target.addBuff({
                    Proto: Burn,
                    from: fightInstance.player,
                    data: {
                      damage: magicReduce * 0.35
                    }
                  });
                case 19:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function use(_x2) {
            return _use.apply(this, arguments);
          }
          return use;
        }();
        _proto.useFail = function useFail(reason, progress) {
          if (reason === SkillFailReason.NotEnoughCoast) message.toast(new ( /*#__PURE__*/function (_LanguageEntry3) {
            _inheritsLoose(_class4, _LanguageEntry3);
            function _class4() {
              return _LanguageEntry3.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "当前法力值不足以使用该技能";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Not enough MP to use this skill";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "MPが足りません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language));
        };
        _createClass(Fireball, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Fireball").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("Fireball Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "cost",
          get: function get() {
            return {
              mp: Math.max(1, this.instance.lv - 1) * 20 + 40,
              hp: 0
            };
          }
        }, {
          key: "coolTime",
          get: function get() {
            if (!this.instance.characterInstance) return 20 - this.instance.lv * 1.5;
            return (20 - this.instance.lv * 1.5) * (1 - this.instance.characterInstance.coolDown / (this.instance.characterInstance.coolDown + 150));
          }
        }]);
        return Fireball;
      }(SkillPrototype)) || _class3) || _class3) || _class3));

      // 预加载特效动画 
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Texture/Skill/Fireball/spriteFrame", SpriteFrame, true);
            case 2:
              _context3.next = 4;
              return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/FoxDemon.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts', './LoadingManager.ts', './AssetManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster, LoadingManager, getBaseModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "80890hydo1F7pU38xvDSO/m", "FoxDemon", undefined);
      var Entry = (_dec = RegisterLanguageEntry("FoxDemon"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "狐妖";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Fox Demon";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "狐妖";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("FoxDemon Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "据说狐妖刚诞生的时候只有一条尾巴，但随着年月和法力的增长，那一条尾巴便会慢慢分裂，最终成为拥有着九条尾巴的「九尾狐」";
          }
        }, {
          key: "eng",
          get: function get() {
            return "It is said that when the fox demon was born, it only had one tail. But with the passage of time and the growth of magic, that one tail will gradually split, eventually becoming a ";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "狐妖が誕生した時にはまだ一本の尾を持っていたという。しかし年月と魔力の成長によって、その一本の尾は徐々に分裂し、最終的には九本の尾を持つ「九尾狐」になるという";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2);
      var FoxDemon = exports('FoxDemon', (_dec3 = RegisterCharacter("FoxDemon"), _dec4 = registerMonster("FoxDemon"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(FoxDemon, _CharacterPrototype);
        function FoxDemon() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 200,
            maxMp: 30,
            physicalAttack: 20,
            magicAttack: 45,
            physicalDefense: 18,
            magicDefense: 18,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 10,
            magicPenetration: 10,
            lightResistance: 5,
            darkResistance: 5,
            attackSpeed: 1.2
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 50,
            maxMp: 10,
            physicalAttack: 4,
            magicAttack: 15,
            physicalDefense: 8,
            magicDefense: 8
          });
          return _this;
        }
        var _proto = FoxDemon.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/FoxDemon/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Monster/FoxDemon/hero00036", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(FoxDemon, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("FoxDemon").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("FoxDemon Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return FoxDemon;
      }(CharacterPrototype)) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Spine/Monster/FoxDemon/hero00036", sp.SkeletonData, true);
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/general.ts", ['cc', './__DEV__.ts', './makeMap.ts'], function (exports) {
  var cclegacy, makeMap;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      makeMap = module.makeMap;
    }],
    execute: function () {
      exports({
        genCacheKey: genCacheKey,
        genPropsAccessExp: genPropsAccessExp
      });
      cclegacy._RF.push({}, "7f29eeT8olD1qJmx37T2oR1", "general", undefined);
      var EMPTY_OBJ = exports('EMPTY_OBJ', Object.freeze({}));
      // @ts-ignore
      var EMPTY_ARR = exports('EMPTY_ARR', Object.freeze([]));
      var NOOP = exports('NOOP', function NOOP() {});

      /**
       * Always return false.
       */
      var NO = exports('NO', function NO() {
        return false;
      });
      var isOn = exports('isOn', function isOn(key) {
        return key.charCodeAt(0) === 111 /* o */ && key.charCodeAt(1) === 110 /* n */ && (
        // uppercase letter
        key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);
      });
      var isModelListener = exports('isModelListener', function isModelListener(key) {
        return key.startsWith('onUpdate:');
      });
      var extend = exports('extend', Object.assign);
      var remove = exports('remove', function remove(arr, el) {
        var i = arr.indexOf(el);
        if (i > -1) {
          arr.splice(i, 1);
        }
      });
      var hasOwnProperty = Object.prototype.hasOwnProperty;
      var hasOwn = exports('hasOwn', function hasOwn(val, key) {
        return hasOwnProperty.call(val, key);
      });
      var isArray = exports('isArray', Array.isArray);
      var isMap = exports('isMap', function isMap(val) {
        return toTypeString(val) === '[object Map]';
      });
      var isSet = exports('isSet', function isSet(val) {
        return toTypeString(val) === '[object Set]';
      });
      var isDate = exports('isDate', function isDate(val) {
        return toTypeString(val) === '[object Date]';
      });
      var isRegExp = exports('isRegExp', function isRegExp(val) {
        return toTypeString(val) === '[object RegExp]';
      });
      var isFunction = exports('isFunction', function isFunction(val) {
        return typeof val === 'function';
      });
      var isString = exports('isString', function isString(val) {
        return typeof val === 'string';
      });
      var isSymbol = exports('isSymbol', function isSymbol(val) {
        return typeof val === 'symbol';
      });
      var isObject = exports('isObject', function isObject(val) {
        return val !== null && typeof val === 'object';
      });
      var isPromise = exports('isPromise', function isPromise(val) {
        return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val["catch"]);
      });
      var objectToString = exports('objectToString', Object.prototype.toString);
      var toTypeString = exports('toTypeString', function toTypeString(value) {
        return objectToString.call(value);
      });
      var toRawType = exports('toRawType', function toRawType(value) {
        // extract "RawType" from strings like "[object RawType]"
        return toTypeString(value).slice(8, -1);
      });
      var isPlainObject = exports('isPlainObject', function isPlainObject(val) {
        return toTypeString(val) === '[object Object]';
      });
      var isIntegerKey = exports('isIntegerKey', function isIntegerKey(key) {
        return isString(key) && key !== 'NaN' && key[0] !== '-' && '' + parseInt(key, 10) === key;
      });
      var isReservedProp = exports('isReservedProp', /*@__PURE__*/makeMap(
      // the leading comma is intentional so empty string "" is also included
      ',key,ref,ref_for,ref_key,' + 'onVnodeBeforeMount,onVnodeMounted,' + 'onVnodeBeforeUpdate,onVnodeUpdated,' + 'onVnodeBeforeUnmount,onVnodeUnmounted'));
      var isBuiltInDirective = exports('isBuiltInDirective', /*@__PURE__*/makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo'));
      var cacheStringFunction = function cacheStringFunction(fn) {
        var cache = Object.create(null);
        return function (str) {
          var hit = cache[str];
          return hit || (cache[str] = fn(str));
        };
      };
      var camelizeRE = /-(\w)/g;
      /**
       * @private
       */
      var camelize = exports('camelize', cacheStringFunction(function (str) {
        return str.replace(camelizeRE, function (_, c) {
          return c ? c.toUpperCase() : '';
        });
      }));
      var hyphenateRE = /\B([A-Z])/g;
      /**
       * @private
       */
      var hyphenate = exports('hyphenate', cacheStringFunction(function (str) {
        return str.replace(hyphenateRE, '-$1').toLowerCase();
      }));

      /**
       * @private
       */
      var capitalize = exports('capitalize', cacheStringFunction(function (str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }));

      /**
       * @private
       */
      var toHandlerKey = exports('toHandlerKey', cacheStringFunction(function (str) {
        var s = str ? "on" + capitalize(str) : "";
        return s;
      }));

      // compare whether a value has changed, accounting for NaN.
      var hasChanged = exports('hasChanged', function hasChanged(value, oldValue) {
        return !Object.is(value, oldValue);
      });
      var invokeArrayFns = exports('invokeArrayFns', function invokeArrayFns(fns) {
        for (var _len = arguments.length, arg = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          arg[_key - 1] = arguments[_key];
        }
        for (var i = 0; i < fns.length; i++) {
          fns[i].apply(fns, arg);
        }
      });
      var def = exports('def', function def(obj, key, value, writable) {
        if (writable === void 0) {
          writable = false;
        }
        Object.defineProperty(obj, key, {
          configurable: true,
          enumerable: false,
          writable: writable,
          value: value
        });
      });

      /**
       * "123-foo" will be parsed to 123
       * This is used for the .number modifier in v-model
       */
      var looseToNumber = exports('looseToNumber', function looseToNumber(val) {
        var n = parseFloat(val);
        return isNaN(n) ? val : n;
      });

      /**
       * Only concerns number-like strings
       * "123-foo" will be returned as-is
       */
      var toNumber = exports('toNumber', function toNumber(val) {
        var n = isString(val) ? Number(val) : NaN;
        return isNaN(n) ? val : n;
      });

      // for typeof global checks without @types/node

      var _globalThis;
      var getGlobalThis = exports('getGlobalThis', function getGlobalThis() {
        return _globalThis || (_globalThis = typeof globalThis !== 'undefined' ? globalThis : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : {});
      });
      var identRE = /^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;
      function genPropsAccessExp(name) {
        return identRE.test(name) ? "__props." + name : "__props[" + JSON.stringify(name) + "]";
      }
      function genCacheKey(source, options) {
        return source + JSON.stringify(options, function (_, val) {
          return typeof val === 'function' ? val.toString() : val;
        });
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/generateId.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('generateId', generateId);
      cclegacy._RF.push({}, "3143ehESRlB2a/icL3tdEHY", "generateId", undefined);
      var id = 100000;
      function generateId(code) {
        if (code === void 0) {
          code = Math.ceil(Date.now() / 100000000) + '';
        }
        var now = Date.now() % 100000;
        return code + "-" + now + "-" + id++ + Math.floor(Math.random() * 100000);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Goblin.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "1092bN5GIpEIIHIyAStkblQ", "Goblin", undefined);
      var Goblin_Entry = (_dec = RegisterLanguageEntry("Goblin"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Goblin_Entry, _LanguageEntry);
        function Goblin_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Goblin_Entry, [{
          key: "chs",
          get: function get() {
            return "哥布林";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Goblin";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "ゴブリン";
          }
        }]);
        return Goblin_Entry;
      }(LanguageEntry)) || _class);
      var Goblin_Description_Entry = (_dec2 = RegisterLanguageEntry("Goblin Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Goblin_Description_Entry, _LanguageEntry2);
        function Goblin_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Goblin_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "一种在地穴中生活的矮小生物，他们阴险毒辣，喜欢偷袭敌人。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A small creature that lives in caves, they are cunning and vicious, and enjoy ambushing their enemies.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "洞窟に住む小さな生き物で、狡猾で凶悪であり、敵を待ち伏せするのが好きです。";
          }
        }]);
        return Goblin_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Goblin = exports('Goblin', (_dec3 = RegisterCharacter("Goblin"), _dec4 = registerMonster("Goblin"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(Goblin, _CharacterPrototype);
        function Goblin() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 120,
            maxMp: 30,
            physicalAttack: 20,
            magicAttack: 20,
            physicalDefense: 10,
            magicDefense: 10,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 10,
            magicPenetration: 10,
            attackSpeed: 2.0
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 25,
            maxMp: 5,
            physicalAttack: 5,
            magicAttack: 3,
            physicalDefense: 3,
            magicDefense: 3
          });
          return _this;
        }
        var _proto = Goblin.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Monster/Goblin/hero00064", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(Goblin, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Goblin").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Goblin Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return Goblin;
      }(CharacterPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Gold.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, RegisterItem;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      RegisterItem = module.RegisterItem;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "b969fQTMwRImoe9fcSzVKl5", "Gold", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Brave_Entry = (_dec = RegisterLanguageEntry("Gold"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "金币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Gold";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "金です";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("Gold Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "用于购买的基础货币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Used to buy basic currency";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "基本的な貨幣を購入するために使用されます";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Gold = exports('Gold', (_dec3 = RegisterItem("Gold"), _dec3(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(Gold, _ItemPrototype);
        function Gold() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = Gold.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/Gold/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(Gold, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Gold").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Gold Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return Gold;
      }(ItemPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/GoldResourcePrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ResourceManager.ts', './Normal.ts', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Label, resourceManager, Normal, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      resourceManager = module.resourceManager;
    }, function (module) {
      Normal = module.Normal;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "e06fcVrkAtPsKondR/yZGUf", "GoldResourcePrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var GoldResourcePrefab = exports('GoldResourcePrefab', (_dec = ccclass('GoldResourcePrefab'), _dec2 = property(Label), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(GoldResourcePrefab, _ExtensionComponent);
        function GoldResourcePrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "GoldNumberLabel", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = GoldResourcePrefab.prototype;
        _proto.start = function start() {
          var _this2 = this;
          this.effect(function () {
            _this2.GoldNumberLabel.string = Normal.number(resourceManager.data.gold);
          });
        };
        return GoldResourcePrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "GoldNumberLabel", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: null
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/HpMedicine.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BackpackManager.ts', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts', './FightMapManager.ts', './CharacterPrototype.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, backpackManager, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, RegisterMedicine, MedicineType, getItemKey, RegisterItem, getFightMapInstance, FromType;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      RegisterMedicine = module.RegisterMedicine;
      MedicineType = module.MedicineType;
      getItemKey = module.getItemKey;
      RegisterItem = module.RegisterItem;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      FromType = module.FromType;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "be5e9LggQVKdJIx/SBpTyBt", "HpMedicine", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Entry = (_dec = RegisterLanguageEntry("HpMedicine"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "治疗药水";
          }
        }, {
          key: "eng",
          get: function get() {
            return "HpMedicine";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "HpMedicine";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("HpMedicine Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "回复300生命值";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Recover 300 HP";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "Recover 300 HP";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2);
      var HpMedicine = exports('HpMedicine', (_dec3 = RegisterItem("HpMedicine"), _dec4 = RegisterMedicine("HpMedicine", MedicineType.HpMedicine), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(HpMedicine, _ItemPrototype);
        function HpMedicine() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = HpMedicine.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/HpMedicine/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = function use(number) {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return;
          fightInstance.player.increaseHp({
            increase: 300,
            fromType: FromType.medicine
          });
          backpackManager.data.reduceCount(getItemKey(HpMedicine), number);
          backpackManager.save();
        };
        _createClass(HpMedicine, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("HpMedicine").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("HpMedicine Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return HpMedicine;
      }(ItemPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Iatrotechnics.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './SkillConfig.ts', './LanguageEntry.ts', './LanguageManager.ts', './CharacterPrototype.ts', './SkillPrototype.ts', './SkillManager.ts', './Message.ts', './AssetManager.ts', './LoadingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, LanguageEntry, RegisterLanguageEntry, LanguageManager, FromType, SkillFailReason, SkillPrototype, RegisterSkill, message, getBaseModManager, LoadingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      FromType = module.FromType;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      message = module.message;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "cd74eb6w2pJxqL9w0alnsy6", "Iatrotechnics", undefined);
      var Iatrotechnics_Name = (_dec = RegisterLanguageEntry("Iatrotechnics_Name"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Iatrotechnics_Name, _LanguageEntry);
        function Iatrotechnics_Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Iatrotechnics_Name, [{
          key: "chs",
          get: function get() {
            return "治疗术";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Iatrotechnics";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "治療術";
          }
        }]);
        return Iatrotechnics_Name;
      }(LanguageEntry)) || _class);
      var Iatrotechnics_Description = (_dec2 = RegisterLanguageEntry("Iatrotechnics_Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Iatrotechnics_Description, _LanguageEntry2);
        function Iatrotechnics_Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Iatrotechnics_Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8017: " + (Math.max(1, lv) * 20 + 40) + " \u9B54\u6CD5\u503C</color>\n\u51B7\u5374\u65F6\u95F4: " + (20 - lv * 1.5) + "s\n" + ("\u6062\u590D " + (Math.max(1, lv) * 20 + 80) + "% \u9B54\u529B\u503C\u7684\u751F\u547D\u503C \uFF0C\u6700\u4F4E\u56DE\u590D " + (Math.max(0, lv) * 50 + 50) + " \u751F\u547D\u503C");
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>Cost: " + (Math.max(1, lv) * 20 + 40) + " MP</color>\nCooldown: " + (20 - lv * 1.5) + "s\n" + ("Restore HP equal to " + (Math.max(1, lv) * 20 + 80) + "% of your MP, minimum " + (Math.max(0, lv) * 50 + 50) + " HP");
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8CBB: " + (Math.max(1, lv) * 20 + 40) + " MP</color>\n\u30AF\u30FC\u30EB\u30BF\u30A4\u30E0: " + (20 - lv * 1.5) + "\u79D2\n" + ("MP\u306E" + (Math.max(1, lv) * 20 + 80) + "%\u306B\u76F8\u5F53\u3059\u308BHP\u3092\u56DE\u5FA9\u3001\u6700\u4F4E\u56DE\u5FA9\u91CF\u306F" + (Math.max(0, lv) * 50 + 50) + "HP");
          }
        }]);
        return Iatrotechnics_Description;
      }(LanguageEntry)) || _class2);
      var Iatrotechnics = exports('Iatrotechnics', (_dec3 = RegisterPlayerSkill("Iatrotechnics", "Brave"), _dec4 = RegisterSkillUpLevel("Iatrotechnics", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec5 = RegisterSkill("Iatrotechnics"), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(Iatrotechnics, _SkillPrototype);
        function Iatrotechnics() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = Iatrotechnics.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/Iatrotechnics/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = /*#__PURE__*/function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            var increase;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  increase = Math.max(useOption.use.magicAttack * ((Math.max(1, this.instance.lv - 1) * 20 + 80) / 100), Math.max(0, this.instance.lv - 1) * 50 + 50);
                  useOption.use.increaseHp({
                    increase: increase,
                    fromType: FromType.skill,
                    from: useOption.use
                  });
                case 2:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function use(_x2) {
            return _use.apply(this, arguments);
          }
          return use;
        }();
        _proto.useFail = function useFail(reason, progress) {
          if (reason === SkillFailReason.NotEnoughCoast) message.toast(new ( /*#__PURE__*/function (_LanguageEntry3) {
            _inheritsLoose(_class4, _LanguageEntry3);
            function _class4() {
              return _LanguageEntry3.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "当前法力值不足以使用该技能";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Not enough MP to use this skill";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "MPが足りません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language));
        };
        _createClass(Iatrotechnics, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Iatrotechnics_Name").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Iatrotechnics_Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "cost",
          get: function get() {
            return {
              hp: 0,
              mp: Math.max(1, this.instance.lv - 1) * 20 + 40
            };
          }
        }, {
          key: "coolTime",
          get: function get() {
            if (!this.instance.characterInstance) return 20 - this.instance.lv * 1.5;
            return (20 - this.instance.lv * 1.5) * (1 - this.instance.characterInstance.coolDown / (this.instance.characterInstance.coolDown + 150));
          }
        }]);
        return Iatrotechnics;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Texture/Skill/Iatrotechnics/spriteFrame", SpriteFrame, true);
            case 2:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index.ts", ['cc', './generateId.ts'], function (exports) {
  var cclegacy, generateId;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      generateId = module.generateId;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1eb2by7T8tKpJKP12F0KYYa", "index", undefined);
      var Util = exports('Util', {
        generateId: generateId
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index2.ts", ['cc', './ExtensionComponent.ts', './SpineAnimation.ts'], function (exports) {
  var cclegacy, AutoInterval, ExtensionComponent, SpineAnimation;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      AutoInterval = module.AutoInterval;
      ExtensionComponent = module.default;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }],
    execute: function () {
      cclegacy._RF.push({}, "2113bgTmGFLZ55TiZUjMaL9", "index", undefined);
      var Extension = exports('Extension', {
        // 类型
        AutoInterval: AutoInterval,
        // spine动画扩展组件
        SpineAnimation: SpineAnimation,
        // 扩展后的组件
        ExtensionComponent: ExtensionComponent
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index3.ts", ['cc', './index4.ts', './instantiate.ts', './index7.ts'], function (exports) {
  var cclegacy, Asset, instantiate, Storage;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Asset = module.Asset;
    }, function (module) {
      instantiate = module.instantiate;
    }, function (module) {
      Storage = module.Storage;
    }],
    execute: function () {
      cclegacy._RF.push({}, "43f4fGFWmlEpY6WWgqCjDKe", "index", undefined);
      var CcNative = exports('CcNative', {
        // 负责本地存储相关
        Storage: Storage,
        // 资源管理
        Asset: Asset,
        // 实例化prefab
        instantiate: instantiate
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index4.ts", ['cc', './AssetManager2.ts', './RemoteAsset.ts'], function (exports) {
  var cclegacy, CcAssetManager, loadRemote;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CcAssetManager = module.CcAssetManager;
    }, function (module) {
      loadRemote = module.loadRemote;
    }],
    execute: function () {
      cclegacy._RF.push({}, "7ccb1Zfwm1ARLoUg/8Wm8kw", "index", undefined);
      var Asset = exports('Asset', {
        // 远程资源
        loadRemote: loadRemote,
        // 资源管理
        AssetManager: CcAssetManager
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index5.ts", ['cc', './ref.ts', './reactive.ts', './computed.ts', './effect.ts', './dep.ts', './effectScope.ts', './arrayInstrumentations.ts', './constants.ts', './watch.ts'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      var _setter = {};
      _setter.customRef = module.customRef;
      _setter.isRef = module.isRef;
      _setter.proxyRefs = module.proxyRefs;
      _setter.ref = module.ref;
      _setter.shallowRef = module.shallowRef;
      _setter.toRef = module.toRef;
      _setter.toRefs = module.toRefs;
      _setter.toValue = module.toValue;
      _setter.triggerRef = module.triggerRef;
      _setter.unref = module.unref;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.isProxy = module.isProxy;
      _setter.isReactive = module.isReactive;
      _setter.isReadonly = module.isReadonly;
      _setter.isShallow = module.isShallow;
      _setter.markRaw = module.markRaw;
      _setter.reactive = module.reactive;
      _setter.readonly = module.readonly;
      _setter.shallowReactive = module.shallowReactive;
      _setter.shallowReadonly = module.shallowReadonly;
      _setter.toRaw = module.toRaw;
      _setter.toReactive = module.toReactive;
      _setter.toReadonly = module.toReadonly;
      exports(_setter);
    }, function (module) {
      exports('computed', module.computed);
    }, function (module) {
      var _setter = {};
      _setter.EffectFlags = module.EffectFlags;
      _setter.ReactiveEffect = module.ReactiveEffect;
      _setter.effect = module.effect;
      _setter.enableTracking = module.enableTracking;
      _setter.onEffectCleanup = module.onEffectCleanup;
      _setter.pauseTracking = module.pauseTracking;
      _setter.resetTracking = module.resetTracking;
      _setter.stop = module.stop;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.ARRAY_ITERATE_KEY = module.ARRAY_ITERATE_KEY;
      _setter.ITERATE_KEY = module.ITERATE_KEY;
      _setter.MAP_KEY_ITERATE_KEY = module.MAP_KEY_ITERATE_KEY;
      _setter.track = module.track;
      _setter.trigger = module.trigger;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.EffectScope = module.EffectScope;
      _setter.effectScope = module.effectScope;
      _setter.getCurrentScope = module.getCurrentScope;
      _setter.onScopeDispose = module.onScopeDispose;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.reactiveReadArray = module.reactiveReadArray;
      _setter.shallowReadArray = module.shallowReadArray;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.ReactiveFlags = module.ReactiveFlags;
      _setter.TrackOpTypes = module.TrackOpTypes;
      _setter.TriggerOpTypes = module.TriggerOpTypes;
      exports(_setter);
    }, function (module) {
      var _setter = {};
      _setter.WatchErrorCodes = module.WatchErrorCodes;
      _setter.getCurrentWatcher = module.getCurrentWatcher;
      _setter.onWatcherCleanup = module.onWatcherCleanup;
      _setter.traverse = module.traverse;
      _setter.watch = module.watch;
      exports(_setter);
    }],
    execute: function () {
      cclegacy._RF.push({}, "98463ArPXdL2IZAlyfbLPmN", "index", undefined);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index6.ts", ['cc', './index5.ts', './reactive.ts', './watch.ts', './computed.ts', './effect.ts', './ref.ts'], function (exports) {
  var cclegacy, reactive, readonly, shallowReactive, toRaw, watch, computed, effect, ref;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      reactive = module.reactive;
      readonly = module.readonly;
      shallowReactive = module.shallowReactive;
      toRaw = module.toRaw;
    }, function (module) {
      watch = module.watch;
    }, function (module) {
      computed = module.computed;
    }, function (module) {
      effect = module.effect;
    }, function (module) {
      ref = module.ref;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b8b46riPehOqomTn9hyD/b1", "index", undefined);
      var Rx = exports('Rx', {
        reactive: reactive,
        readonly: readonly,
        watch: watch,
        computed: computed,
        effect: effect,
        shallowReactive: shallowReactive,
        toRaw: toRaw,
        ref: ref
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index7.ts", ['cc', './StorageDTO.ts'], function (exports) {
  var cclegacy, StorageDTO;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      StorageDTO = module.StorageDTO;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d773597+NtAHrbbiBUAdSKN", "index", undefined);
      var Storage = exports('Storage', {
        StorageDTO: StorageDTO,
        get: function get(key, decrypt) {
          var _StorageDTO$read;
          if (decrypt === void 0) {
            decrypt = false;
          }
          return (StorageDTO == null || (_StorageDTO$read = StorageDTO.read(key, decrypt)) == null ? void 0 : _StorageDTO$read.data) || null;
        },
        set: function set(key, data, decrypt, timer) {
          if (decrypt === void 0) {
            decrypt = false;
          }
          if (timer === void 0) {
            timer = -1;
          }
          StorageDTO.save(new StorageDTO(key, data, timer), decrypt);
        },
        del: function del(key) {
          StorageDTO.delet(key);
        }
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/index8.ts", ['cc', './makeMap.ts', './general.ts', './shapeFlags.ts', './codeframe.ts', './looseEqual.ts', './toDisplayString.ts', './__DEV__.ts'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      exports('makeMap', module.makeMap);
    }, function (module) {
      var _setter = {};
      _setter.EMPTY_ARR = module.EMPTY_ARR;
      _setter.EMPTY_OBJ = module.EMPTY_OBJ;
      _setter.NO = module.NO;
      _setter.NOOP = module.NOOP;
      _setter.camelize = module.camelize;
      _setter.capitalize = module.capitalize;
      _setter.def = module.def;
      _setter.extend = module.extend;
      _setter.genCacheKey = module.genCacheKey;
      _setter.genPropsAccessExp = module.genPropsAccessExp;
      _setter.getGlobalThis = module.getGlobalThis;
      _setter.hasChanged = module.hasChanged;
      _setter.hasOwn = module.hasOwn;
      _setter.hyphenate = module.hyphenate;
      _setter.invokeArrayFns = module.invokeArrayFns;
      _setter.isArray = module.isArray;
      _setter.isBuiltInDirective = module.isBuiltInDirective;
      _setter.isDate = module.isDate;
      _setter.isFunction = module.isFunction;
      _setter.isIntegerKey = module.isIntegerKey;
      _setter.isMap = module.isMap;
      _setter.isModelListener = module.isModelListener;
      _setter.isObject = module.isObject;
      _setter.isOn = module.isOn;
      _setter.isPlainObject = module.isPlainObject;
      _setter.isPromise = module.isPromise;
      _setter.isRegExp = module.isRegExp;
      _setter.isReservedProp = module.isReservedProp;
      _setter.isSet = module.isSet;
      _setter.isString = module.isString;
      _setter.isSymbol = module.isSymbol;
      _setter.looseToNumber = module.looseToNumber;
      _setter.objectToString = module.objectToString;
      _setter.remove = module.remove;
      _setter.toHandlerKey = module.toHandlerKey;
      _setter.toNumber = module.toNumber;
      _setter.toRawType = module.toRawType;
      _setter.toTypeString = module.toTypeString;
      exports(_setter);
    }, function (module) {
      exports('ShapeFlags', module.ShapeFlags);
    }, function (module) {
      exports('generateCodeFrame', module.generateCodeFrame);
    }, function (module) {
      var _setter = {};
      _setter.looseEqual = module.looseEqual;
      _setter.looseIndexOf = module.looseIndexOf;
      exports(_setter);
    }, function (module) {
      exports('toDisplayString', module.toDisplayString);
    }, function (module) {
      exports('__DEV__', module.__DEV__);
    }],
    execute: function () {
      cclegacy._RF.push({}, "da798feEBhA5ppNY2EL4u1y", "index", undefined);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/InjuryReduction.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports({
        darkInjuryReduction: darkInjuryReduction,
        lightInjuryReduction: lightInjuryReduction,
        magicInjuryReduction: magicInjuryReduction,
        physicalInjuryReduction: physicalInjuryReduction
      });
      cclegacy._RF.push({}, "3ecc966wodDRL2xzVFi/i3b", "InjuryReduction", undefined);
      // 物理减伤计算
      function physicalInjuryReduction(physicalPenetration, physicalDefense) {
        return (physicalDefense - physicalPenetration) / Math.max(1, physicalDefense - physicalPenetration + 800);
      }

      // 魔法减伤计算
      function magicInjuryReduction(magicPenetration, magicDefense) {
        return (magicDefense - magicPenetration) / Math.max(1, magicDefense - magicPenetration + 800);
      }

      // 光抗性减伤计算
      function lightInjuryReduction(lightResistance) {
        return lightResistance / Math.max(1, lightResistance + 500);
      }

      // 暗抗性减伤计算
      function darkInjuryReduction(darkResistance) {
        return darkResistance / Math.max(1, darkResistance + 500);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/instantiate.ts", ['cc'], function (exports) {
  var cclegacy, instantiate$1;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      instantiate$1 = module.instantiate;
    }],
    execute: function () {
      exports('instantiate', instantiate);
      cclegacy._RF.push({}, "c6624kl/8hJLISD0gQ8iVBU", "instantiate", undefined);
      var nodeCache = new WeakMap();

      // 实例化预制体
      function instantiate(prefab) {
        var result = null,
          nodes = nodeCache.get(prefab);
        if (!nodes) {
          nodes = [];
          nodeCache.set(prefab, nodes);
        }
        if (!(result = nodes.pop())) {
          // 扩容
          result = instantiate$1(prefab);
          setTimeout(function () {
            return nodes.push(instantiate$1(prefab));
          });
        }
        return result;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ItemInstance.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "c871dp9U3ZIAoHT7ApQB/qT", "ItemInstance", undefined);
      var ItemInstance = exports('ItemInstance', function ItemInstance(option) {
        this.count = 0;
        this.proto = null;
        this.count = option.count;
        this.proto = new option.Proto(this);
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ItemManager.ts", ['cc', './ItemPrototype.ts'], function (exports) {
  var cclegacy, ItemPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }],
    execute: function () {
      exports({
        getAllItemKeys: getAllItemKeys,
        getAllMedicineItemKeys: getAllMedicineItemKeys,
        getItemKey: getItemKey,
        getItemPrototype: getItemPrototype,
        getMedicineItemKey: getMedicineItemKey,
        getMedicineItemPrototype: getMedicineItemPrototype
      });
      cclegacy._RF.push({}, "441aaOPEsNAQZ6u3nOwUX9f", "ItemManager", undefined);
      var MedicineType = exports('MedicineType', /*#__PURE__*/function (MedicineType) {
        MedicineType[MedicineType["HpMedicine"] = 0] = "HpMedicine";
        MedicineType[MedicineType["MpMedicine"] = 1] = "MpMedicine";
        return MedicineType;
      }({}));

      // 该文件用于管理游戏中的物品系统
      var registry = new Map();
      var registryReverse = new Map();

      // 注册为物品
      var RegisterItem = exports('RegisterItem', function RegisterItem(key) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
        };
      });

      // 获取所有注册的物品原型key
      function getAllItemKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取物品原型
      function getItemPrototype(key) {
        return registry.get(key);
      }

      // 根据Item原型或者实例获取key
      function getItemKey(proto) {
        if (proto instanceof ItemPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }

      // 该文件用于管理游戏中的药品系统
      var medicineRegistry = new Map();
      var medicineRegistryReverse = new Map();

      // 获取所有注册的药品原型key
      function getAllMedicineItemKeys() {
        return Array.from(medicineRegistry.keys());
      }

      // 根据key获取药品原型
      function getMedicineItemPrototype(key) {
        return medicineRegistry.get(key);
      }

      // 根据药品原型或者实例获取key
      function getMedicineItemKey(proto) {
        if (proto instanceof ItemPrototype) {
          // @ts-ignore
          return medicineRegistryReverse.get(proto.constructor);
        }
        return medicineRegistryReverse.get(proto);
      }

      // 注册药品
      var RegisterMedicine = exports('RegisterMedicine', function RegisterMedicine(key, type) {
        return function (T) {
          medicineRegistry.set(key, T);
          medicineRegistryReverse.set(T, key);
        };
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ItemPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d1a12KhnfhP/azBzSFyqOun", "ItemPrototype", undefined);
      var ItemPrototype = exports('ItemPrototype', /*#__PURE__*/function () {
        function ItemPrototype(instance) {
          this.instance = instance;
        }

        // 图标信息 Sprite
        var _proto = ItemPrototype.prototype;
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }();
        _proto.use = function use(number) {};
        _createClass(ItemPrototype, [{
          key: "name",
          get: function get() {
            return "";
          }
        }, {
          key: "description",
          get: function get() {
            return "";
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return ItemPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Killer.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './AchivementManager.ts', './SettingManager.ts', './AchivementManager2.ts', './AchivementPrototype.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, achivementManager, settingManager, RegisterAchivement, AchivementPrototype;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterAchivement = module.RegisterAchivement;
    }, function (module) {
      AchivementPrototype = module.AchivementPrototype;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3, _dec4, _class4;
      cclegacy._RF.push({}, "a9ceaDBMBtOKZ6MY4jTw2fx", "Killer", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var level = ["Ⅰ", "Ⅱ", "Ⅲ", "Ⅳ", "Ⅴ", "Ⅵ", "Ⅶ", "Ⅷ", "Ⅸ", "Ⅹ"];
      var KillerLanguageEntry = exports('KillerLanguageEntry', (_dec = RegisterLanguageEntry("Killer"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(KillerLanguageEntry, _LanguageEntry);
        function KillerLanguageEntry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(KillerLanguageEntry, [{
          key: "chs",
          get: function get() {
            return "杀手" + level[this.data.level - 1];
          }
        }, {
          key: "eng",
          get: function get() {
            return "Killer" + level[this.data.level - 1];
          }
        }, {
          key: "jpn",
          get: function get() {
            return "Killer" + level[this.data.level - 1];
          }
        }]);
        return KillerLanguageEntry;
      }(LanguageEntry)) || _class));
      var KillerDescriptionLanguageEntry = exports('KillerDescriptionLanguageEntry', (_dec2 = RegisterLanguageEntry("Killer Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(KillerDescriptionLanguageEntry, _LanguageEntry2);
        function KillerDescriptionLanguageEntry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(KillerDescriptionLanguageEntry, [{
          key: "chs",
          get: function get() {
            return "\u51FB\u6740 " + this.data.killCount + " \u4E2A\u654C\u4EBA";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Kill " + this.data.killCount + " enemies";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "Kill " + this.data.killCount + " enemies";
          }
        }]);
        return KillerDescriptionLanguageEntry;
      }(LanguageEntry)) || _class2));
      var Killer1 = exports('Killer1', (_dec3 = RegisterAchivement("Killer1", true), _dec3(_class3 = /*#__PURE__*/function (_AchivementPrototype) {
        _inheritsLoose(Killer1, _AchivementPrototype);
        function Killer1() {
          return _AchivementPrototype.apply(this, arguments) || this;
        }
        var _proto = Killer1.prototype;
        // 图标
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  return _context2.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context.t0 = res;
                          _context.next = 4;
                          return assets.load("Texture/Achivement/Killer/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context.t1 = _context.sent.value;
                          (0, _context.t0)(_context.t1);
                        case 6:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  }))));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(Killer1, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Killer").getValue(settingManager.data.language, {
              level: 1
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Killer Description").getValue(settingManager.data.language, {
              level: 1,
              killCount: 10
            });
          }
        }, {
          key: "open",
          get: function get() {
            return true;
          }
        }, {
          key: "progress",
          get: function get() {
            var killCount = 0;
            Object.values(achivementManager.data.dayTaskData.kill).forEach(function (v) {
              return killCount += v || 0;
            });
            return {
              progress: killCount,
              maxProgress: 10
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 4000,
              diamond: 50,
              equipment: []
            };
          }
        }]);
        return Killer1;
      }(AchivementPrototype)) || _class3));
      var Killer2 = exports('Killer2', (_dec4 = RegisterAchivement("Killer2", true), _dec4(_class4 = /*#__PURE__*/function (_AchivementPrototype2) {
        _inheritsLoose(Killer2, _AchivementPrototype2);
        function Killer2() {
          return _AchivementPrototype2.apply(this, arguments) || this;
        }
        var _proto2 = Killer2.prototype;
        // 图标
        _proto2.icon = /*#__PURE__*/
        function () {
          var _icon2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  return _context4.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                      while (1) switch (_context3.prev = _context3.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context3.t0 = res;
                          _context3.next = 4;
                          return assets.load("Texture/Achivement/Killer/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context3.t1 = _context3.sent.value;
                          (0, _context3.t0)(_context3.t1);
                        case 6:
                        case "end":
                          return _context3.stop();
                      }
                    }, _callee3);
                  }))));
                case 1:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          function icon() {
            return _icon2.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(Killer2, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Killer").getValue(settingManager.data.language, {
              level: 2
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Killer Description").getValue(settingManager.data.language, {
              level: 2,
              killCount: 30
            });
          }
        }, {
          key: "open",
          get: function get() {
            return achivementManager.data.hasGetReward("Killer1");
          }
        }, {
          key: "progress",
          get: function get() {
            var killCount = 0;
            Object.values(achivementManager.data.dayTaskData.kill).forEach(function (v) {
              return killCount += v;
            });
            return {
              progress: killCount,
              maxProgress: 30
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 8000,
              diamond: 70,
              equipment: []
            };
          }
        }]);
        return Killer2;
      }(AchivementPrototype)) || _class4));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/KillerKing.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './AchivementManager.ts', './AchivementManager2.ts', './AchivementPrototype.ts', './EquipmentPrototype.ts', './Spear.ts', './EquipmentManager2.ts', './Share.ts', './LeatherArmor.ts', './LeatherShoes.ts', './LeatherShoulder.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, achivementManager, RegisterAchivement, AchivementPrototype, EquipmentQuality, Spear, getEquipmentKey, createId, LeatherArmor, LeatherShoes, LeatherShoulder, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      RegisterAchivement = module.RegisterAchivement;
    }, function (module) {
      AchivementPrototype = module.AchivementPrototype;
    }, function (module) {
      EquipmentQuality = module.EquipmentQuality;
    }, function (module) {
      Spear = module.Spear;
    }, function (module) {
      getEquipmentKey = module.getEquipmentKey;
    }, function (module) {
      createId = module.createId;
    }, function (module) {
      LeatherArmor = module.LeatherArmor;
    }, function (module) {
      LeatherShoes = module.LeatherShoes;
    }, function (module) {
      LeatherShoulder = module.LeatherShoulder;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3, _dec4, _class4;
      cclegacy._RF.push({}, "175dfHhIQtDh7fOG4ybEL92", "KillerKing", undefined);
      var Name = (_dec = RegisterLanguageEntry("KillerKing"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "\u6740\u624B\u4E4B\u738B " + (this.data.level || 1);
          }
        }, {
          key: "eng",
          get: function get() {
            return "Killer King " + (this.data.level || 1);
          }
        }, {
          key: "jpn",
          get: function get() {
            return "\u6BBA\u3057\u306E\u738B " + (this.data.level || 1);
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("KillerKing Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            return "\u51FB\u6740" + 500 * (this.data.level || 1) + "\u4E2A\u654C\u4EBA";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Kill " + 500 * (this.data.level || 1) + " enemies";
          }
        }, {
          key: "jpn",
          get: function get() {
            return 500 * (this.data.level || 1) + " \u6575\u3092\u5012\u3059";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var KillerKing_1 = exports('KillerKing_1', (_dec3 = RegisterAchivement("KillerKing 1"), _dec3(_class3 = /*#__PURE__*/function (_AchivementPrototype) {
        _inheritsLoose(KillerKing_1, _AchivementPrototype);
        function KillerKing_1() {
          return _AchivementPrototype.apply(this, arguments) || this;
        }
        var _proto = KillerKing_1.prototype;
        // 图标
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  return _context2.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context.t0 = res;
                          _context.next = 4;
                          return assets.load("Texture/Achivement/KillerKing/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context.t1 = _context.sent.value;
                          (0, _context.t0)(_context.t1);
                        case 6:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  }))));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(KillerKing_1, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("KillerKing").getValue(settingManager.data.language, {
              level: 1
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("KillerKing Description").getValue(settingManager.data.language, {
              level: 1
            });
          }
        }, {
          key: "progress",
          get: function get() {
            var killSet = Object.keys(achivementManager.data.achivementData.kill);
            var count = 0;
            killSet.forEach(function (key) {
              return count += achivementManager.data.achivementData.kill[key] || 0;
            });
            return {
              progress: count,
              maxProgress: 500
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 10000,
              diamond: 1000,
              equipment: [{
                prototype: getEquipmentKey(Spear),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherArmor),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherShoes),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherArmor),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherShoulder),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }]
            };
          }
        }]);
        return KillerKing_1;
      }(AchivementPrototype)) || _class3));
      var KillerKing_2 = exports('KillerKing_2', (_dec4 = RegisterAchivement("KillerKing 2"), _dec4(_class4 = /*#__PURE__*/function (_AchivementPrototype2) {
        _inheritsLoose(KillerKing_2, _AchivementPrototype2);
        function KillerKing_2() {
          return _AchivementPrototype2.apply(this, arguments) || this;
        }
        var _proto2 = KillerKing_2.prototype;
        // 图标
        _proto2.icon = /*#__PURE__*/
        function () {
          var _icon2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  return _context4.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                      while (1) switch (_context3.prev = _context3.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context3.t0 = res;
                          _context3.next = 4;
                          return assets.load("Texture/Achivement/KillerKing/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context3.t1 = _context3.sent.value;
                          (0, _context3.t0)(_context3.t1);
                        case 6:
                        case "end":
                          return _context3.stop();
                      }
                    }, _callee3);
                  }))));
                case 1:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          }));
          function icon() {
            return _icon2.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(KillerKing_2, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("KillerKing").getValue(settingManager.data.language, {
              level: 2
            });
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("KillerKing Description").getValue(settingManager.data.language, {
              level: 2
            });
          }
        }, {
          key: "progress",
          get: function get() {
            var killSet = Object.keys(achivementManager.data.achivementData.kill);
            var count = 0;
            killSet.forEach(function (key) {
              return count += achivementManager.data.achivementData.kill[key] || 0;
            });
            return {
              progress: count,
              maxProgress: 500 * 2
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 10000,
              diamond: 1000,
              equipment: [{
                prototype: getEquipmentKey(Spear),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherArmor),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherShoes),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherArmor),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }, {
                prototype: getEquipmentKey(LeatherShoulder),
                lv: 1,
                id: createId(),
                quality: EquipmentQuality.Legendary,
                extraProperty: {}
              }]
            };
          }
        }]);
        return KillerKing_2;
      }(AchivementPrototype)) || _class4));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LangaugeType.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "4a41cHLJfVOUb4iqOGKvCBm", "LangaugeType", undefined);
      var AllLanguageType = exports('AllLanguageType', {
        "chs": "chs",
        "cht": "cht",
        "jpn": "jpn",
        "kor": "kor",
        "dan": "dan",
        "deu": "deu",
        "eng": "eng",
        "enu": "enu",
        "esp": "esp",
        "fin": "fin",
        "fra": "fra",
        "frc": "frc",
        "ita": "ita",
        "nld": "nld",
        "plk": "plk",
        "ptb": "ptb",
        "rus": "rus",
        "sve": "sve",
        "tha": "tha"
      });
      var AllLanguageTypeTranslation = exports('AllLanguageTypeTranslation', {
        "chs": "简体中文",
        "cht": "繁体中文",
        "jpn": "日本語",
        "kor": "한글",
        "dan": "Dansk",
        "deu": "Deutsch",
        "eng": "English",
        "enu": "English",
        "esp": "español",
        "fin": "Suomen kieli",
        "fra": "Français (standard)",
        "frc": "Français",
        "ita": "italiano",
        "nld": "nederlands",
        "plk": "Język polski",
        "ptb": "Em português",
        "rus": "Русский",
        "sve": "Svenska",
        "tha": "ภาษาไทย"
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LanguageEntry.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy, error;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      error = module.error;
    }],
    execute: function () {
      cclegacy._RF.push({}, "00c82ONzaxG66rHnQoXF4+O", "LanguageEntry", undefined);
      var LanguageEntry = exports('LanguageEntry', /*#__PURE__*/function () {
        var _proto = LanguageEntry.prototype;
        _proto.getValue = function getValue(lan, data) {
          if (lan === void 0) {
            lan = "chs";
          }
          this.data = data;
          var result = this[lan];
          if (!this[lan] && this[lan] !== "") {
            error("This language is not supported or there is no corresponding translation for this language : " + lan);
            return this.key;
          }
          return result;
        };
        function LanguageEntry(key) {
          if (key === void 0) {
            key = "";
          }
          this.data = {};
          this.key = key;
        }
        _createClass(LanguageEntry, [{
          key: "chs",
          get: function get() {
            return this.key;
          }
        }, {
          key: "cht",
          get: function get() {
            return this.key;
          }
        }, {
          key: "jpn",
          get: function get() {
            return this.key;
          }
        }, {
          key: "kor",
          get: function get() {
            return this.key;
          }
        }, {
          key: "dan",
          get: function get() {
            return this.key;
          }
        }, {
          key: "deu",
          get: function get() {
            return this.key;
          }
        }, {
          key: "eng",
          get: function get() {
            return this.key;
          }
        }, {
          key: "enu",
          get: function get() {
            return this.key;
          }
        }, {
          key: "fin",
          get: function get() {
            return this.key;
          }
        }, {
          key: "fra",
          get: function get() {
            return this.key;
          }
        }, {
          key: "frc",
          get: function get() {
            return this.key;
          }
        }, {
          key: "esp",
          get: function get() {
            return this.key;
          }
        }, {
          key: "ita",
          get: function get() {
            return this.key;
          }
        }, {
          key: "nld",
          get: function get() {
            return this.key;
          }
        }, {
          key: "plk",
          get: function get() {
            return this.key;
          }
        }, {
          key: "ptb",
          get: function get() {
            return this.key;
          }
        }, {
          key: "rus",
          get: function get() {
            return this.key;
          }
        }, {
          key: "sve",
          get: function get() {
            return this.key;
          }
        }, {
          key: "tha",
          get: function get() {
            return this.key;
          }
        }]);
        return LanguageEntry;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LanguageManager.ts", ['cc', './LanguageEntry.ts'], function (exports) {
  var cclegacy, error, LanguageEntry;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      error = module.error;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b9cecdnVURA+777bA6O1nBf", "LanguageManager", undefined);
      var LanguageManager = exports('LanguageManager', /*#__PURE__*/function () {
        function LanguageManager() {}
        // 获取翻译对象
        LanguageManager.getEntry = function getEntry(key, group) {
          if (group === void 0) {
            group = "default";
          }
          var g = LanguageManager.languageData.get(group);
          if (!g) {
            error("Can not found Entry by key: " + key);
            return new LanguageEntry(key);
          }
          var enrty = g.get(key);
          if (!enrty) {
            error("Can not found Entry by key: " + key);
            return new LanguageEntry(key);
          }
          return enrty;
        }

        // 获取翻译结果
        ;

        LanguageManager.getTranslation = function getTranslation(key, language, group) {
          if (group === void 0) {
            group = "default";
          }
          var entry = this.getEntry(key, group);
          return entry.getValue(language);
        };
        return LanguageManager;
      }());

      // 注册语言翻译实例
      // 所有语言数据
      LanguageManager.languageData = new Map();
      var RegisterLanguageEntry = exports('RegisterLanguageEntry', function RegisterLanguageEntry(key, group) {
        if (group === void 0) {
          group = "default";
        }
        return function (TF) {
          var g = LanguageManager.languageData.get(group);
          if (!g) LanguageManager.languageData.set(group, g = new Map());
          g.set(key, new TF(key));
        };
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LeatherArmor.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "4d711cp86JMFpvOMWG9lLlS", "LeatherArmor", undefined);
      var LeatherArmor_Entry = (_dec = RegisterLanguageEntry("LeatherArmor"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(LeatherArmor_Entry, _LanguageEntry);
        function LeatherArmor_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(LeatherArmor_Entry, [{
          key: "chs",
          get: function get() {
            return "皮甲";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Leather Armor";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "レザーアーマー";
          }
        }]);
        return LeatherArmor_Entry;
      }(LanguageEntry)) || _class);
      var LeatherArmor_Description_Entry = (_dec2 = RegisterLanguageEntry("LeatherArmor Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(LeatherArmor_Description_Entry, _LanguageEntry2);
        function LeatherArmor_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(LeatherArmor_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "精皮制的皮甲";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A pair of ordinary leather shoes";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "精皮製のレザーシューズ";
          }
        }]);
        return LeatherArmor_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var LeatherArmor = exports('LeatherArmor', (_dec3 = RegisterEquipment("LeatherArmor"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(LeatherArmor, _EquipmentPrototype);
        function LeatherArmor() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            physicalDefense: 5,
            magicDefense: 5,
            maxHp: 50
          }).setProperty("maxHp", function (hp) {
            return hp + (_this.suitCount >= oneSuit ? 50 : 0);
          }).setProperty("physicalDefense", function (defense) {
            return defense + (_this.suitCount >= twoSuit ? 5 : 0);
          }).setProperty("magicDefense", function (defense) {
            return defense + (_this.suitCount >= twoSuit ? 5 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalDefense: 1.5,
            magicDefense: 1.5,
            maxHp: 15
          });
          return _this;
        }
        var _proto = LeatherArmor.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/BeginnerKit/LeatherArmor/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(LeatherArmor, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("LeatherArmor").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("LeatherArmor Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Armor;
          }
        }, {
          key: "suit",
          get: function get() {
            return "BeginnerKit";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("maxHp").getValue(settingManager.data.language) + ": " + this.instance.maxHp.toFixed(1) + "\n";
            res += LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": " + this.instance.physicalDefense.toFixed(1) + "\n";
            res += LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": " + this.instance.magicDefense.toFixed(1) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("maxHp").getValue(settingManager.data.language) + ": +50" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": +5\n" + LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": +5" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return LeatherArmor;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LeatherShoes.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "0684eaQ6xlCZoe447Ztl/gk", "LeatherShoes", undefined);
      var LeatherShoes_Entry = (_dec = RegisterLanguageEntry("LeatherShoes"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(LeatherShoes_Entry, _LanguageEntry);
        function LeatherShoes_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(LeatherShoes_Entry, [{
          key: "chs",
          get: function get() {
            return "皮鞋";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Leather Shoes";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "レザーシューズ";
          }
        }]);
        return LeatherShoes_Entry;
      }(LanguageEntry)) || _class);
      var LeatherShoes_Description_Entry = (_dec2 = RegisterLanguageEntry("LeatherShoes Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(LeatherShoes_Description_Entry, _LanguageEntry2);
        function LeatherShoes_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(LeatherShoes_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "一双普通的皮鞋";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A pair of ordinary leather shoes";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "普通のレザーシューズ";
          }
        }]);
        return LeatherShoes_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var LeatherShoes = exports('LeatherShoes', (_dec3 = RegisterEquipment("LeatherShoes"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(LeatherShoes, _EquipmentPrototype);
        function LeatherShoes() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            physicalDefense: 4,
            darkResistance: 2
          }).setProperty("maxHp", function (hp) {
            return hp + (_this.suitCount >= oneSuit ? 40 : 0);
          }).setProperty("physicalDefense", function (pd) {
            return pd + (_this.suitCount >= twoSuit ? 5 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalDefense: 2,
            darkResistance: 0.5
          });
          return _this;
        }
        var _proto = LeatherShoes.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/BeginnerKit/LeatherShoes/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(LeatherShoes, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("LeatherShoes").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("LeatherShoes Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Shoes;
          }
        }, {
          key: "suit",
          get: function get() {
            return "BeginnerKit";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += this.instance.maxHp > 0 ? LanguageManager.getEntry("maxHp").getValue(settingManager.data.language) + ": " + this.instance.maxHp.toFixed(1) + "\n" : "";
            res += LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": " + this.instance.physicalDefense.toFixed(1) + "\n";
            res += LanguageManager.getEntry("darkResistance").getValue(settingManager.data.language) + ": " + this.instance.darkResistance.toFixed(1) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("maxHp").getValue(settingManager.data.language) + ": +40" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": +5" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return LeatherShoes;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LeatherShoulder.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "ef0693p3vNA4KWwxiFbTTqt", "LeatherShoulder", undefined);
      var LeatherShoes_Entry = (_dec = RegisterLanguageEntry("LeatherShoulder"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(LeatherShoes_Entry, _LanguageEntry);
        function LeatherShoes_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(LeatherShoes_Entry, [{
          key: "chs",
          get: function get() {
            return "皮肩";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Leather Shoulder";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "レザーショルダー";
          }
        }]);
        return LeatherShoes_Entry;
      }(LanguageEntry)) || _class);
      var LeatherShoes_Description_Entry = (_dec2 = RegisterLanguageEntry("LeatherShoulder Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(LeatherShoes_Description_Entry, _LanguageEntry2);
        function LeatherShoes_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(LeatherShoes_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "普通皮肩";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Ordinary Leather Shoulder";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "普通のレザーショルダー";
          }
        }]);
        return LeatherShoes_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var LeatherShoulder = exports('LeatherShoulder', (_dec3 = RegisterEquipment("LeatherShoulder"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(LeatherShoulder, _EquipmentPrototype);
        function LeatherShoulder() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            maxMp: 30,
            criticalRate: 0.05,
            physicalPenetration: 5
          }).setProperty("criticalRate", function (critical) {
            return critical + Math.floor(_this.instance.lv / 3) / 100 + (_this.suitCount >= twoSuit ? 0.05 : 0);
          }).setProperty("physicalPenetration", function (physicalPenetration) {
            return physicalPenetration + (_this.suitCount >= oneSuit ? 5 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalPenetration: 2,
            maxMp: 5
          });
          return _this;
        }
        var _proto = LeatherShoulder.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/BeginnerKit/LeatherShoulder/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(LeatherShoulder, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("LeatherShoulder").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("LeatherShoulder Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Accessory;
          }
        }, {
          key: "suit",
          get: function get() {
            return "BeginnerKit";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("maxMp").getValue(settingManager.data.language) + ": " + this.instance.maxMp.toFixed(0) + "\n";
            res += LanguageManager.getEntry("physicalPenetration").getValue(settingManager.data.language) + ": " + this.instance.physicalPenetration.toFixed(2) + "\n";
            res += LanguageManager.getEntry("criticalRate").getValue(settingManager.data.language) + ": " + (this.instance.criticalRate * 100).toFixed(2) + "%\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("physicalPenetration").getValue(settingManager.data.language) + ": +5" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("criticalRate").getValue(settingManager.data.language) + ": +5%" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return LeatherShoulder;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LevelDataManager.ts", ['cc', './Manager.ts', './Config.ts'], function (exports) {
  var cclegacy, Manager, Config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Manager = module.Manager;
    }, function (module) {
      Config = module.Config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "819a4nTVmBPyY+ziLwfPbxP", "LevelDataManager", undefined);
      var LevelDataDTO = function LevelDataDTO(data) {
        // 主要关卡层数
        this.mainLevelFloor = 0;
        // 携带的药品
        this.medicineList = [];
        if (data) {
          this.mainLevelFloor = data.mainLevelFloor || 0;
          this.medicineList = data.medicineList || [];
        }
      };
      var LevelData = exports('LevelData', /*#__PURE__*/function () {
        function LevelData(data) {
          // 主要关卡层数
          this.mainLevelFloor = 0;
          // 携带的药品
          this.medicineList = [];
          if (data) {
            this.mainLevelFloor = data.mainLevelFloor || 0;
            this.medicineList = data.medicineList || [];
          }
        }

        // 添加药品
        var _proto = LevelData.prototype;
        _proto.addMedicine = function addMedicine(medicine, backpackManager) {
          var _backpackManager$data;
          if (((_backpackManager$data = backpackManager.data.items.find(function (item) {
            return item.prototype === medicine;
          })) == null ? void 0 : _backpackManager$data.count) <= 0) return false;
          this.medicineList.push(medicine);
          return true;
        }

        // 移除药品
        ;

        _proto.removeMedicine = function removeMedicine(medicine) {
          var index = this.medicineList.indexOf(medicine);
          if (index === -1) return false;
          this.medicineList.splice(index, 1);
          return true;
        };
        return LevelData;
      }());
      var levelDataManager = exports('levelDataManager', new Manager({
        storageKey: "slaughter:game:level_data",
        descrypt: Config.descrypt,
        Constructor: LevelData,
        DtoCostructor: LevelDataDTO
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/LoadingManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "8417dQfk+pIs5H9+AgZ7WjR", "LoadingManager", undefined);
      var LoadingManager = exports('LoadingManager', /*#__PURE__*/function () {
        function LoadingManager() {}
        // 添加加载回调
        LoadingManager.addLoadingQueue = /*#__PURE__*/
        function () {
          var _addLoadingQueue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(callback) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  this.loadingQueue.push(callback);
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function addLoadingQueue(_x) {
            return _addLoadingQueue.apply(this, arguments);
          }
          return addLoadingQueue;
        }() // 执行加载回调
        ;

        LoadingManager.excuteLoadingQueue = /*#__PURE__*/
        function () {
          var _excuteLoadingQueue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(loadingOption) {
            var i, callback;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  if (loadingOption === void 0) {
                    loadingOption = {};
                  }
                  if (!this.hasExcute) {
                    _context3.next = 3;
                    break;
                  }
                  return _context3.abrupt("return");
                case 3:
                  this.hasExcute = true;
                  i = 0;
                case 5:
                  if (!(i < this.loadingQueue.length)) {
                    _context3.next = 16;
                    break;
                  }
                  callback = this.loadingQueue[i];
                  _context3.next = 9;
                  return callback();
                case 9:
                  _context3.t0 = loadingOption.stage;
                  if (!_context3.t0) {
                    _context3.next = 13;
                    break;
                  }
                  _context3.next = 13;
                  return loadingOption.stage(i + 1, this.loadingQueue.length);
                case 13:
                  i++;
                  _context3.next = 5;
                  break;
                case 16:
                  return _context3.abrupt("return", new Promise(function (res) {
                    setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
                      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                        while (1) switch (_context2.prev = _context2.next) {
                          case 0:
                            _context2.t0 = loadingOption.loaded;
                            if (!_context2.t0) {
                              _context2.next = 4;
                              break;
                            }
                            _context2.next = 4;
                            return loadingOption.loaded();
                          case 4:
                            res(void 0);
                          case 5:
                          case "end":
                            return _context2.stop();
                        }
                      }, _callee2);
                    })));
                    return;
                  }));
                case 17:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function excuteLoadingQueue(_x2) {
            return _excuteLoadingQueue.apply(this, arguments);
          }
          return excuteLoadingQueue;
        }();
        _createClass(LoadingManager, null, [{
          key: "maxQueue",
          get: function get() {
            return this.loadingQueue.length;
          }
        }]);
        return LoadingManager;
      }());
      LoadingManager.hasExcute = false;
      LoadingManager.loadingQueue = [];
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/looseEqual.ts", ['cc', './general.ts'], function (exports) {
  var cclegacy, isDate, isSymbol, isArray, isObject;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      isDate = module.isDate;
      isSymbol = module.isSymbol;
      isArray = module.isArray;
      isObject = module.isObject;
    }],
    execute: function () {
      exports({
        looseEqual: looseEqual,
        looseIndexOf: looseIndexOf
      });
      cclegacy._RF.push({}, "80da3wzgbxJ1aHzCNGpjg3w", "looseEqual", undefined);
      function looseCompareArrays(a, b) {
        if (a.length !== b.length) return false;
        var equal = true;
        for (var i = 0; equal && i < a.length; i++) {
          equal = looseEqual(a[i], b[i]);
        }
        return equal;
      }
      function looseEqual(a, b) {
        if (a === b) return true;
        var aValidType = isDate(a);
        var bValidType = isDate(b);
        if (aValidType || bValidType) {
          return aValidType && bValidType ? a.getTime() === b.getTime() : false;
        }
        aValidType = isSymbol(a);
        bValidType = isSymbol(b);
        if (aValidType || bValidType) {
          return a === b;
        }
        aValidType = isArray(a);
        bValidType = isArray(b);
        if (aValidType || bValidType) {
          return aValidType && bValidType ? looseCompareArrays(a, b) : false;
        }
        aValidType = isObject(a);
        bValidType = isObject(b);
        if (aValidType || bValidType) {
          if (!aValidType || !bValidType) {
            return false;
          }
          var aKeysCount = Object.keys(a).length;
          var bKeysCount = Object.keys(b).length;
          if (aKeysCount !== bKeysCount) {
            return false;
          }
          for (var key in a) {
            var aHasKey = a.hasOwnProperty(key);
            var bHasKey = b.hasOwnProperty(key);
            if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {
              return false;
            }
          }
        }
        return String(a) === String(b);
      }
      function looseIndexOf(arr, val) {
        return arr.findIndex(function (item) {
          return looseEqual(item, val);
        });
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MagicDefenseReinforcement.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './FightMapManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, getFightMapInstance;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b0dbdQC1hlDDbrCQ6c+RDKu", "MagicDefenseReinforcement", undefined);
      var MagicDefenseReinforcement = exports('MagicDefenseReinforcement', {
        icon: function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Reinforcement/MagicDefenseReinforcement/spriteFrame", SpriteFrame);
                case 2:
                  return _context.abrupt("return", _context.sent.value);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }(),
        property: function property() {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return {};
          return {
            magicDefense: fightInstance.player.magicDefense * 0.01 // 1% max physicalDefense
          };
        }
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/main", ['./AssetManager.ts', './Killer.ts', './KillerKing.ts', './Monopoly.ts', './UseGold.ts', './Burn.ts', './LeatherArmor.ts', './LeatherShoes.ts', './LeatherShoulder.ts', './Spear.ts', './SealingBelt.ts', './SealingRobe.ts', './SealingShose.ts', './SealingWeapon.ts', './MainLevelData.ts', './MagicDefenseReinforcement.ts', './MaxHpReinforcement.ts', './MaxMpReinforcement.ts', './PhysicalAttackReinforcement.ts', './PhysicalDefenseReinforcement.ts', './Diamond.ts', './Gold.ts', './HpMedicine.ts', './MpMedicine.ts', './Stone.ts', './Set.ts', './Crocodile.ts', './DefectorSoldier.ts', './FoxDemon.ts', './Goblin.ts', './SkeletonSoldier.ts', './SnowKing.ts', './Apollo.ts', './Brave.ts', './DivineGrace.ts', './SunShining.ts', './DivineLight.ts', './Enchanter.ts', './Onmyoji.ts', './Fireball.ts', './Iatrotechnics.ts', './AssetManager3.ts', './PlayerCharacter.ts', './MeltArmour.ts', './MeltSword.ts', './MeltStone.ts', './RoseKnight.ts', './RoseSpikes.ts', './RoseThorn.ts', './AssetManager2.ts', './RemoteAsset.ts', './index4.ts', './StorageDTO.ts', './index7.ts', './index3.ts', './instantiate.ts', './ExtensionComponent.ts', './SpineAnimation.ts', './index2.ts', './FiniteStateMachine.ts', './LangaugeType.ts', './LanguageEntry.ts', './LanguageManager.ts', './LoadingManager.ts', './ModuleDropListPrefab.ts', './ModuleProgressPrefab.ts', './ModuleToastPrefab.ts', './ModuleVirtualListPrefab.ts', './index6.ts', './arrayInstrumentations.ts', './baseHandlers.ts', './collectionHandlers.ts', './computed.ts', './constants.ts', './dep.ts', './effect.ts', './effectScope.ts', './index5.ts', './reactive.ts', './ref.ts', './warning.ts', './watch.ts', './__DEV__.ts', './codeframe.ts', './general.ts', './index8.ts', './looseEqual.ts', './makeMap.ts', './shapeFlags.ts', './toDisplayString.ts', './generateId.ts', './index.ts', './BackpackPrefab.ts', './ChangeCharacterPrefab.ts', './DetailInfoPrefab.ts', './DiamondResourcePrefab.ts', './EquipmentItemPrefab.ts', './FightBuffItemPrefab.ts', './FightCharacterPrefab.ts', './FightPrefab.ts', './GoldResourcePrefab.ts', './MessageConfirmPrefab.ts', './MessageCongratulationsPrefab.ts', './MessageLoadingPrefab.ts', './MessageTaskNotifyPrefab.ts', './MessageToastPrefab.ts', './SettingPrefab.ts', './TaskPrefab.ts', './UserBaseDataPrefab.ts', './ScenesLoadingCanvasLogo.ts', './ScenesLoadingCanvas.ts', './ScenesMainCanvasBlacksmith.ts', './ScenesMainCanvasData.ts', './ScenesMainCanvasLevelSelect.ts', './ScenesMainCanvasSkillList.ts', './ScenesMainCanvasSound.ts', './ScenesMainCanvasUi.ts', './ScenesMainCanvas.ts', './ScenesMapCanvasFial.ts', './ScenesMapCanvasMap.ts', './ScenesMapCanvasMedicine.ts', './ScenesMapCanvasPlayer.ts', './ScenesMapCanvasSound.ts', './ScenesMapCanvasUi.ts', './ScenesMapCanvasUserState.ts', './ScenesMapCanvas.ts', './AutoAudioVolume.ts', './AutoTransformLabel.ts', './Config.ts', './Property.ts', './Ui.ts', './AchivementManager.ts', './BackpackManager.ts', './CharacterManager.ts', './EquipmentManager.ts', './LevelDataManager.ts', './ResourceManager.ts', './SettingManager.ts', './SkillManager2.ts', './MapGenerator.ts', './Message.ts', './Share.ts', './FindWay.ts', './CharacterToPrefabMap.ts', './FightMapInstance.ts', './AchivementManager2.ts', './FightMapManager.ts', './MonsterManager.ts', './PlayerCharacterManager.ts', './PlayerToPrefabMap.ts', './AchivementPrototype.ts', './FightMapPrototype.ts', './RoomPrototype.ts', './SkillConfig.ts', './DamageCalculation.ts', './InjuryReduction.ts', './BuffInstance.ts', './CharacterInstance.ts', './EquipmentInstance.ts', './ItemInstance.ts', './SkillInstance.ts', './FightProgress.ts', './BaseInstanceProperty.ts', './BasePrototypeProperty.ts', './CharacterInstanceProperty.ts', './EquipmentInstanceProperty.ts', './BuffPrototype.ts', './CharacterPrototype.ts', './EquipmentPrototype.ts', './ItemPrototype.ts', './SkillPrototype.ts', './Manager.ts', './BuffManager.ts', './CharacterManager2.ts', './EquipmentManager2.ts', './ItemManager.ts', './SkillManager.ts', './Normal.ts'], function () {
  return {
    setters: [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
    execute: function () {}
  };
});

System.register("chunks:///_virtual/MainLevelData.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './FightMapPrototype.ts', './EquipmentPrototype.ts', './LeatherArmor.ts', './LeatherShoes.ts', './LeatherShoulder.ts', './Spear.ts', './EquipmentManager2.ts', './ItemManager.ts', './CharacterManager2.ts', './Goblin.ts', './MagicDefenseReinforcement.ts', './MaxHpReinforcement.ts', './MaxMpReinforcement.ts', './PhysicalAttackReinforcement.ts', './PhysicalDefenseReinforcement.ts', './FightMapManager.ts', './DefectorSoldier.ts', './SkeletonSoldier.ts', './Crocodile.ts', './Stone.ts', './SealingBelt.ts', './SealingRobe.ts', './SealingWeapon.ts', './SealingShose.ts', './LevelDataManager.ts', './HpMedicine.ts', './MpMedicine.ts', './FoxDemon.ts', './SnowKing.ts'], function (exports) {
  var _inheritsLoose, _createClass, cclegacy, FightMapPrototype, EquipmentQuality, LeatherArmor, LeatherShoes, LeatherShoulder, Spear, getEquipmentKey, getItemKey, getMedicineItemKey, getCharacterKey, Goblin, MagicDefenseReinforcement, MaxHpReinforcement, MaxMpReinforcement, PhysicalAttackReinforcement, PhysicalDefenseReinforcement, exitFightMap, enterFightMap, RegisterFightMap, DefectorSoldier, SkeletonSoldier, Crocodile, Stone, SealingBelt, SealingRobe, SealingWeapon, SealingShose, levelDataManager, HpMedicine, MpMedicine, FoxDemon, SnowKing;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      FightMapPrototype = module.FightMapPrototype;
    }, function (module) {
      EquipmentQuality = module.EquipmentQuality;
    }, function (module) {
      LeatherArmor = module.LeatherArmor;
    }, function (module) {
      LeatherShoes = module.LeatherShoes;
    }, function (module) {
      LeatherShoulder = module.LeatherShoulder;
    }, function (module) {
      Spear = module.Spear;
    }, function (module) {
      getEquipmentKey = module.getEquipmentKey;
    }, function (module) {
      getItemKey = module.getItemKey;
      getMedicineItemKey = module.getMedicineItemKey;
    }, function (module) {
      getCharacterKey = module.getCharacterKey;
    }, function (module) {
      Goblin = module.Goblin;
    }, function (module) {
      MagicDefenseReinforcement = module.MagicDefenseReinforcement;
    }, function (module) {
      MaxHpReinforcement = module.MaxHpReinforcement;
    }, function (module) {
      MaxMpReinforcement = module.MaxMpReinforcement;
    }, function (module) {
      PhysicalAttackReinforcement = module.PhysicalAttackReinforcement;
    }, function (module) {
      PhysicalDefenseReinforcement = module.PhysicalDefenseReinforcement;
    }, function (module) {
      exitFightMap = module.exitFightMap;
      enterFightMap = module.enterFightMap;
      RegisterFightMap = module.RegisterFightMap;
    }, function (module) {
      DefectorSoldier = module.DefectorSoldier;
    }, function (module) {
      SkeletonSoldier = module.SkeletonSoldier;
    }, function (module) {
      Crocodile = module.Crocodile;
    }, function (module) {
      Stone = module.Stone;
    }, function (module) {
      SealingBelt = module.SealingBelt;
    }, function (module) {
      SealingRobe = module.SealingRobe;
    }, function (module) {
      SealingWeapon = module.SealingWeapon;
    }, function (module) {
      SealingShose = module.SealingShose;
    }, function (module) {
      levelDataManager = module.levelDataManager;
    }, function (module) {
      HpMedicine = module.HpMedicine;
    }, function (module) {
      MpMedicine = module.MpMedicine;
    }, function (module) {
      FoxDemon = module.FoxDemon;
    }, function (module) {
      SnowKing = module.SnowKing;
    }],
    execute: function () {
      exports({
        hijackFloorData: hijackFloorData,
        hijackTreasureReward: hijackTreasureReward
      });
      var _dec, _class;
      cclegacy._RF.push({}, "f5b36orGJtPQYO0UUwGiE5x", "MainLevelData", undefined);
      // 根据宝箱等级获取装备质量 最大为4
      function getQualityByTreasureLevel(level) {
        switch (level) {
          case 1:
            {
              var random = Math.random() * 100 + 1;
              if (random <= 40) return EquipmentQuality.Ordinary;
              if (random <= 65) return EquipmentQuality.Rare;
              if (random <= 80) return EquipmentQuality.Fine;
              if (random <= 93) return EquipmentQuality.Epic;
              if (random <= 98) return EquipmentQuality.Legendary;
              return EquipmentQuality.Mythic;
            }
          case 2:
            {
              var _random = Math.random() * 100 + 1;
              if (_random <= 35) return EquipmentQuality.Ordinary;
              if (_random <= 60) return EquipmentQuality.Rare;
              if (_random <= 85) return EquipmentQuality.Fine;
              if (_random <= 90) return EquipmentQuality.Epic;
              if (_random <= 95) return EquipmentQuality.Legendary;
              return EquipmentQuality.Mythic;
            }
          case 3:
            {
              var _random2 = Math.random() * 100 + 1;
              if (_random2 <= 30) return EquipmentQuality.Ordinary;
              if (_random2 <= 40) return EquipmentQuality.Rare;
              if (_random2 <= 70) return EquipmentQuality.Fine;
              if (_random2 <= 85) return EquipmentQuality.Epic;
              if (_random2 <= 95) return EquipmentQuality.Legendary;
              return EquipmentQuality.Mythic;
            }
          default:
            {
              var _random3 = Math.random() * 100 + 1;
              if (_random3 <= 20) return EquipmentQuality.Ordinary;
              if (_random3 <= 30) return EquipmentQuality.Rare;
              if (_random3 <= 60) return EquipmentQuality.Fine;
              if (_random3 <= 80) return EquipmentQuality.Epic;
              if (_random3 <= 90) return EquipmentQuality.Legendary;
              return EquipmentQuality.Mythic;
            }
        }
      }
      // 拦截TreasureReward
      var treasureRewardHijackSet = new Set();
      function hijackTreasureReward(callback) {
        treasureRewardHijackSet.add(callback);
      }

      // 根据层数获取宝箱里面的物品列表
      function getTreasureReward(floor, level) {
        var result = {
          equipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt],
          items: [Stone, HpMedicine, MpMedicine]
        };
        treasureRewardHijackSet.forEach(function (callback) {
          result = callback(floor, level, result);
        });
        return result;
      }
      // 拦截FloorData
      var floorDataHijackSet = new Set();
      function hijackFloorData(callback) {
        floorDataHijackSet.add(callback);
      }

      // 获取怪物列表
      function getMonsterData(floor, instance) {
        var monsterCount = function monsterCount() {
          return 0;
        };
        var isBoss = function isBoss() {
          return floor % 20 === 0;
        };
        var floorData = [
        // 0 - 20 层
        {
          boss: [SnowKing],
          dropItems: [{
            posibility: function posibility() {
              return 0.08;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(HpMedicine)
          }, {
            posibility: function posibility() {
              return 0.08;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(MpMedicine)
          }],
          dropEquipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt].map(function (Prototype) {
            return {
              posibility: function posibility() {
                return 0.03;
              },
              equipment: getEquipmentKey(Prototype),
              quality: function quality() {
                return getQualityByTreasureLevel(2);
              }
            };
          }),
          monsters: [Goblin, DefectorSoldier, SkeletonSoldier, Crocodile, FoxDemon]
        },
        // 20 - 40 层
        {
          boss: [SnowKing],
          dropItems: [{
            posibility: function posibility() {
              return 0.1;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(HpMedicine)
          }, {
            posibility: function posibility() {
              return 0.1;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(MpMedicine)
          }],
          dropEquipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt].map(function (Prototype) {
            return {
              posibility: function posibility() {
                return 0.03;
              },
              equipment: getEquipmentKey(Prototype),
              quality: function quality() {
                return getQualityByTreasureLevel(2);
              }
            };
          }),
          monsters: [Goblin, DefectorSoldier, SkeletonSoldier, Crocodile, FoxDemon]
        },
        // 40 - 60 层
        {
          boss: [SnowKing],
          dropItems: [{
            posibility: function posibility() {
              return 0.13;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(HpMedicine)
          }, {
            posibility: function posibility() {
              return 0.13;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(MpMedicine)
          }],
          dropEquipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt].map(function (Prototype) {
            return {
              posibility: function posibility() {
                return 0.03;
              },
              equipment: getEquipmentKey(Prototype),
              quality: function quality() {
                return getQualityByTreasureLevel(2);
              }
            };
          }),
          monsters: [Goblin, DefectorSoldier, SkeletonSoldier, Crocodile, FoxDemon]
        },
        // 60 - 80 层
        {
          boss: [SnowKing],
          dropItems: [{
            posibility: function posibility() {
              return 0.15;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(HpMedicine)
          }, {
            posibility: function posibility() {
              return 0.15;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(MpMedicine)
          }],
          dropEquipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt].map(function (Prototype) {
            return {
              posibility: function posibility() {
                return 0.03;
              },
              equipment: getEquipmentKey(Prototype),
              quality: function quality() {
                return getQualityByTreasureLevel(2);
              }
            };
          }),
          monsters: [Goblin, DefectorSoldier, SkeletonSoldier, Crocodile, FoxDemon]
        },
        // 80 - 100 层
        {
          boss: [SnowKing],
          dropItems: [{
            posibility: function posibility() {
              return 0.18;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(HpMedicine)
          }, {
            posibility: function posibility() {
              return 0.18;
            },
            count: function count() {
              return 1;
            },
            item: getMedicineItemKey(MpMedicine)
          }],
          dropEquipments: [Spear, LeatherArmor, LeatherShoes, LeatherShoulder, SealingWeapon, SealingRobe, SealingShose, SealingBelt].map(function (Prototype) {
            return {
              posibility: function posibility() {
                return 0.03;
              },
              equipment: getEquipmentKey(Prototype),
              quality: function quality() {
                return getQualityByTreasureLevel(2);
              }
            };
          }),
          monsters: [Goblin, DefectorSoldier, SkeletonSoldier, Crocodile, FoxDemon]
        }];
        var floorDataItem = floorData[Math.floor(floor / 21)];
        floorDataHijackSet.forEach(function (hijack) {
          return floorDataItem = hijack(floor, floorDataItem);
        });
        var dropItems = floorDataItem.dropItems;
        var dropEquipments = floorDataItem.dropEquipments;
        var _monsters = floorDataItem.monsters;
        var _boss = floorDataItem.boss;
        var dropExp = function dropExp() {
          return Math.floor((Math.random() * 15 + 5) * (1 + floor * 0.2) * (isBoss() ? 2.5 : 1));
        };
        var dropGold = function dropGold() {
          return Math.floor((Math.random() * 10 + 5) * (1 + floor * 0.2) * (isBoss() ? 2.5 : 1));
        };
        var dropDiamond = function dropDiamond() {
          if (isBoss()) {
            if (Math.random() < 0.75) return Math.floor((Math.random() * 2 + 1) * (1 + floor * 0.2) * (isBoss() ? 2.5 : 1));
          } else {
            if (Math.random() < 0.05) return Math.floor((Math.random() * 2 + 1) * (1 + floor * 0.2) * (isBoss() ? 2.5 : 1));
          }
          return 0;
        };
        return {
          monsterCount: monsterCount,
          boss: function boss() {
            return {
              dropItems: dropItems,
              dropEquipments: dropEquipments,
              dropExp: dropExp,
              dropGold: dropGold,
              dropDiamond: dropDiamond,
              dto: {
                lv: Math.min(20 * (Math.floor(floor / 21) + 1) + 5, 100),
                buffs: [],
                skills: [],
                equipments: {},
                extraProperty: {},
                prototype: getCharacterKey(_boss[Math.floor(Math.random() * _boss.length)])
              }
            };
          },
          monsters: function monsters() {
            return {
              dropItems: dropItems,
              dropEquipments: dropEquipments,
              dropExp: dropExp,
              dropGold: dropGold,
              dropDiamond: dropDiamond,
              dto: {
                lv: floor,
                buffs: [],
                skills: [],
                equipments: {},
                extraProperty: {},
                prototype: getCharacterKey(_monsters[Math.floor(Math.random() * _monsters.length)])
              }
            };
          }
        };
      }
      var MainLevelData = exports('MainLevelData', (_dec = RegisterFightMap("MainLevelData"), _dec(_class = /*#__PURE__*/function (_FightMapPrototype) {
        _inheritsLoose(MainLevelData, _FightMapPrototype);
        function MainLevelData() {
          return _FightMapPrototype.apply(this, arguments) || this;
        }
        var _proto = MainLevelData.prototype;
        _proto.getTreasureGoldReward = function getTreasureGoldReward(level) {
          var items = [],
            equipments = [];
          var reward = getTreasureReward(this.instance.customData.floor || 1, level);
          var count = level < 4 ? 1 : 2;
          for (var i = 0; i < count; i++) {
            // 随机装备 75%概率 或者 没有物品时
            if (Math.random() < 0.75 || items.length === 0) {
              var EquipmentPrototype = reward.equipments[Math.floor(Math.random() * reward.equipments.length)];
              if (!EquipmentPrototype) continue;
              equipments.push({
                quality: getQualityByTreasureLevel(level),
                prototype: getEquipmentKey(EquipmentPrototype)
              });
            }
            // 随机物品
            else {
              var ItemPrototype = reward.items[Math.floor(Math.random() * reward.items.length)];
              if (!ItemPrototype) continue;
              items.push({
                prototype: getItemKey(ItemPrototype),
                count: Math.floor(Math.random() * 5) + 1
              });
            }
          }
          var result = {
            gold: 0,
            diamond: Math.max(0, Math.floor(Math.random() * 10 - 7 + level)),
            items: items,
            equipments: equipments
          };
          return result;
        };
        _proto.onLeave = function onLeave() {
          if (this.instance.customData.floor === 100) {
            exitFightMap();
            levelDataManager.data.mainLevelFloor = 100;
            levelDataManager.save();
            return;
          } else {
            enterFightMap("MainLevelData", {
              playerState: {
                hp: this.instance.player.hp,
                mp: this.instance.player.mp
              },
              playerExtraProperty: this.instance.player.extraProperty,
              customData: {
                floor: (this.instance.customData.floor || 1) + 1
              }
            });
            levelDataManager.data.mainLevelFloor = (this.instance.customData.floor || 1) + 1;
            levelDataManager.save();
          }
        };
        _createClass(MainLevelData, [{
          key: "name",
          get: function get() {
            return "Level " + (this.instance.customData.floor || 1);
          }
        }, {
          key: "isBoss",
          get: function get() {
            if ((this.instance.customData.floor || 1) % 20 === 0) return true;
            return false;
          }
        }, {
          key: "mapSize",
          get: function get() {
            var size = Math.random() * 20 + 20;
            if (size % 2 === 0) return {
              width: size,
              height: size
            };
            return {
              width: size + 1,
              height: size + 1
            };
          }
        }, {
          key: "monsterData",
          get: function get() {
            var result = getMonsterData(this.instance.customData.floor || 1, this.instance);
            return result;
          }
        }, {
          key: "reinforcementData",
          get: function get() {
            var result = {
              posibility: 0.05,
              max: 5,
              min: 1,
              data: [PhysicalDefenseReinforcement, MaxHpReinforcement, MaxMpReinforcement, MagicDefenseReinforcement, PhysicalAttackReinforcement]
            };
            return result;
          }
        }]);
        return MainLevelData;
      }(FightMapPrototype)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/makeMap.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createForOfIteratorHelperLoose, cclegacy;
  return {
    setters: [function (module) {
      _createForOfIteratorHelperLoose = module.createForOfIteratorHelperLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('makeMap', makeMap);
      cclegacy._RF.push({}, "08dcfxzZnND46ZabgjgtNCQ", "makeMap", undefined);
      function makeMap(str) {
        var map = Object.create(null);
        for (var _iterator = _createForOfIteratorHelperLoose(str.split(',')), _step; !(_step = _iterator()).done;) {
          var _key = _step.value;
          map[_key] = 1;
        }
        return function (val) {
          return val in map;
        };
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Manager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './index6.ts'], function (exports) {
  var _createClass, cclegacy, CcNative, Rx;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      Rx = module.Rx;
    }],
    execute: function () {
      cclegacy._RF.push({}, "8887cDrWcBBuKMsN/fudi9v", "Manager", undefined);
      var Manager = exports('Manager', /*#__PURE__*/function () {
        function Manager(option) {
          this._data = void 0;
          this.option = option;
          this.option = option;
        }
        var _proto = Manager.prototype;
        _proto.save = function save() {
          var dto = new this.option.DtoCostructor(this.data);
          CcNative.Storage.set(this.option.storageKey || "", dto, this.option.descrypt);
          if (this.option.save) this.option.save(this._data);
        };
        _proto.update = function update() {
          var dto = CcNative.Storage.get(this.option.storageKey);
          this._data = Rx.reactive(new this.option.Constructor(dto));
          if (this.option.update) this.option.update(this._data);
        };
        _createClass(Manager, [{
          key: "data",
          get: function get() {
            if (this._data) return this._data;
            this.update();
            return this._data;
          }
        }]);
        return Manager;
      }());
      var BaseEventManagerData = exports('BaseEventManagerData', /*#__PURE__*/function () {
        function BaseEventManagerData() {
          this.eventMap = new Map();
        }
        var _proto2 = BaseEventManagerData.prototype;
        _proto2.on = function on(e, callback) {
          if (!this.eventMap.has(e)) {
            this.eventMap.set(e, []);
          }
          this.eventMap.get(e).push(callback);
        };
        _proto2.off = function off(e, callback) {
          if (!this.eventMap.has(e)) return;
          if (callback) this.eventMap.set(e, this.eventMap.get(e).filter(function (cb) {
            return cb !== callback;
          }));else this.eventMap.set(e, []);
        };
        _proto2.emit = function emit(e) {
          for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            rest[_key - 1] = arguments[_key];
          }
          if (!this.eventMap.has(e)) return;
          this.eventMap.get(e).forEach(function (cb) {
            return cb.apply(void 0, rest);
          });
        };
        return BaseEventManagerData;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MapGenerator.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b6beccVs6hIc6Zk5Vt1K++g", "MapGenerator", undefined);
      var RoomType = exports('RoomType', /*#__PURE__*/function (RoomType) {
        RoomType["OrdinaryRoom"] = "ordinaryRoom";
        RoomType["TreasureRoom"] = "treasureRoom";
        RoomType["MonsterTreasureRoom"] = "monsterTreasureRoom";
        return RoomType;
      }({})); // 怪物宝箱房
      var MapGenerator = exports('MapGenerator', /*#__PURE__*/function () {
        function MapGenerator() {}
        var _proto = MapGenerator.prototype;
        // 转换为奇数
        _proto.convertToOdd = function convertToOdd(num) {
          return num % 2 === 0 ? num + 1 : num;
        }

        // 生成随机房间
        ;

        _proto.generateRandomRoom = function generateRandomRoom(mapSize, instance, roomLoopCount) {
          if (roomLoopCount === void 0) {
            roomLoopCount = 35;
          }
          var result = [],
            mapData = [];
          // 判断是否重叠或者超出
          var isOverlap = function isOverlap(posX, posY, width, height) {
            for (var y = -1; y < height + 1; y++) {
              for (var x = -1; x < width + 1; x++) {
                if (posX + x < 0 || posY + y < 0 || posY + y >= mapSize.y || posX + x >= mapSize.x || mapData[posY + y][posX + x] !== 0) {
                  return true;
                }
              }
            }
            return false;
          };
          // 初始化地图
          for (var y = 0; y < mapSize.y; y++) {
            mapData[y] = [];
            for (var x = 0; x < mapSize.x; x++) mapData[y][x] = 0;
          }
          // 随机添加房间
          while (roomLoopCount-- && roomLoopCount > 0) {
            var roomData = instance.proto.roomData;
            // 随机房间类型
            var RandomRoomProto = roomData[Math.floor(Math.random() * roomData.length)];
            if (!RandomRoomProto) throw new Error('没有房间数据');
            var randomRoom = new RandomRoomProto(instance);
            // 随机位置
            var posX = randomRoom.pos.x = Math.floor(Math.random() * mapSize.x - 1) + 1;
            var posY = randomRoom.pos.y = Math.floor(Math.random() * mapSize.y - 1) + 1;
            if (!isOverlap(posX, posY, randomRoom.size.x, randomRoom.size.y)) {
              // 添加房间
              result.push(randomRoom);
              // 添加房间数据
              for (var _y = posY; _y < posY + randomRoom.size.y; _y++) {
                for (var _x = posX; _x < posX + randomRoom.size.x; _x++) mapData[_y][_x] = 1;
              }
            }
          }
          return result;
        }

        // 生成随机迷宫 0 空 1 地 2 墙
        ;

        _proto.generateRandomMaze = function generateRandomMaze(size) {
          var mapData = [];
          // 所有未开通的房间
          var notEnterRoomMap = new Set();
          // 已经进入过但是还有未开通相邻房间的房间
          var hasGoButHasNotEnterRoomMap = new Set();
          // 初始化为基础地图
          var sizeHeight = size.height % 2 === 0 ? size.height + 1 : size.height;
          var sizeWidth = size.width % 2 === 0 ? size.width + 1 : size.width;
          // 初始化全是墙
          for (var i = 0; i < sizeHeight; i++) {
            var list = [];
            for (var j = 0; j < sizeWidth; j++) {
              if ((i - 1) % 2 === 0 && (j - 1) % 2 === 0 && i !== size.width - 1 && j !== size.height - 1) {
                list.push(1);
                notEnterRoomMap.add(j + " " + i);
              } else list.push(0);
            }
            mapData.push(list);
          }
          // 随机生成地图 最小生成树砸墙算法
          var posx = 1,
            posy = 1;
          while (notEnterRoomMap.size > 0) {
            // 房间已经进入
            notEnterRoomMap["delete"](posx + " " + posy);
            // 可以走的方向
            var direct = [];
            if (posx - 2 > 0 && notEnterRoomMap.has(posx - 2 + " " + posy)) direct.push({
              x: posx - 2,
              y: posy,
              wallX: posx - 1,
              wallY: posy
            });
            if (posx + 2 < size.width - 1 && notEnterRoomMap.has(posx + 2 + " " + posy)) direct.push({
              x: posx + 2,
              y: posy,
              wallX: posx + 1,
              wallY: posy
            });
            if (posy - 2 > 0 && notEnterRoomMap.has(posx + " " + (posy - 2))) direct.push({
              x: posx,
              y: posy - 2,
              wallX: posx,
              wallY: posy - 1
            });
            if (posy + 2 < size.height - 1 && notEnterRoomMap.has(posx + " " + (posy + 2))) direct.push({
              x: posx,
              y: posy + 2,
              wallX: posx,
              wallY: posy + 1
            });
            // 如果没有则随机找一个进入过但是还有没有打通房间的房间
            if (direct.length === 0) {
              hasGoButHasNotEnterRoomMap["delete"](posx + " " + posy);
              if (hasGoButHasNotEnterRoomMap.size === 0) {
                break;
              }
              var keys = Array.from(hasGoButHasNotEnterRoomMap.keys());
              var key = keys[Math.floor(Math.random() * keys.length)];
              var _key$split = key.split(" "),
                x = _key$split[0],
                y = _key$split[1];
              posx = Number(x);
              posy = Number(y);
              continue;
            }
            // 随机选择一个方向
            var directIndex = Math.floor(Math.random() * direct.length);
            var nextPos = direct[directIndex];
            direct.splice(directIndex, 1);
            if (direct.length > 0) hasGoButHasNotEnterRoomMap.add(posx + " " + posy);else hasGoButHasNotEnterRoomMap["delete"](posx + " " + posy);
            posx = nextPos.x;
            posy = nextPos.y;
            mapData[nextPos.wallY][nextPos.wallX] = 1;
          }
          return mapData;
        }

        // 消除迷宫死胡同
        ;

        _proto.removeDeadEnd = function removeDeadEnd(mapData) {
          var nearFloorCount = function nearFloorCount(x, y) {
            if (mapData[y][x] === 0) return [];
            var directions = [];
            [[x - 1, y, "left"], [x + 1, y, "right"], [x, y - 1, "top"], [x, y + 1, "bottom"]].forEach(function (_ref) {
              var nx = _ref[0],
                ny = _ref[1],
                direct = _ref[2];
              // @ts-ignore
              if (nx < 0 || nx >= mapData[0].length || ny < 0 || ny >= mapData.length) {
                return;
              }
              if (mapData[ny][nx] !== 0) {
                directions.push(direct);
              }
            });
            return directions;
          };
          var hasDeadEnd = function hasDeadEnd() {
            for (var y = 0; y < mapData.length; y++) {
              var cl = mapData[y];
              for (var x = 0; x < cl.length; x++) {
                // 周围草地数少于2说明是死胡同
                if (mapData[y][x] !== 0 && nearFloorCount(x, y).length < 2) return true;
              }
            }
            return false;
          };
          var maxCount = 100;
          while (hasDeadEnd() && maxCount > 0) {
            for (var y = 0; y < mapData.length; y++) {
              var cl = mapData[y];
              for (var x = 0; x < cl.length; x++) {
                // 周围草地数少于2说明是死胡同
                if (mapData[y][x] !== 0 && nearFloorCount(x, y).length < 2) mapData[y][x] = 0;
              }
            }
            maxCount--;
          }
          return mapData;
        };
        return MapGenerator;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MaxHpReinforcement.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './FightMapManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, getFightMapInstance;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      cclegacy._RF.push({}, "db60d1FKclAY6wuvyg3bEx8", "MaxHpReinforcement", undefined);
      var MaxHpReinforcement = exports('MaxHpReinforcement', {
        icon: function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Reinforcement/MaxHpReinforcement/spriteFrame", SpriteFrame);
                case 2:
                  return _context.abrupt("return", _context.sent.value);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }(),
        property: function property() {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return {};
          return {
            maxHp: fightInstance.player.maxHp * 0.01 // 1% max hp
          };
        }
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MaxMpReinforcement.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './FightMapManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, getFightMapInstance;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      cclegacy._RF.push({}, "f86daNVl9lNg7331UzsdDJ5", "MaxMpReinforcement", undefined);
      var MaxMpReinforcement = exports('MaxMpReinforcement', {
        icon: function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Reinforcement/MaxMpReinforcement/spriteFrame", SpriteFrame);
                case 2:
                  return _context.abrupt("return", _context.sent.value);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }(),
        property: function property() {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return {};
          return {
            maxMp: fightInstance.player.maxMp * 0.01 // 1% max hp
          };
        }
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MeltArmour.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts', './AssetManager3.ts', './Burn.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment, getCustomModManager, Burn;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }, function (module) {
      Burn = module.Burn;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "6eb8eMv7QNE2qDmItD+tLnJ", "MeltArmour", undefined);
      var SealingRobe_Entry = (_dec = RegisterLanguageEntry("MeltArmour"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(SealingRobe_Entry, _LanguageEntry);
        function SealingRobe_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Entry, [{
          key: "chs",
          get: function get() {
            return "熔岩护甲";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Melt Armour";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "溶岩鎧甲";
          }
        }]);
        return SealingRobe_Entry;
      }(LanguageEntry)) || _class);
      var SealingRobe_Description_Entry = (_dec2 = RegisterLanguageEntry("MeltArmour Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(SealingRobe_Description_Entry, _LanguageEntry2);
        function SealingRobe_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "甲身裹着火热的岩浆，燃烧着火焰。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "The armour is wrapped in hot lava, burning flames.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "鎧甲は熱い岩浆で包まれており、炎が燃えています。";
          }
        }]);
        return SealingRobe_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 一件套所需装备数量 两件套所需装备数量
      var oneSuit = 2;

      // 注册到武器列表中
      var MeltArmour = exports('MeltArmour', (_dec3 = RegisterEquipment(
      // 注册id
      "MeltArmour",
      // 强化所需材料
      function (lv) {
        return {
          gold: lv * 1500,
          // 金币
          diamond: lv * 5,
          // 钻石
          items: [{
            prototype: "MeltStone",
            count: lv * 2
          }] // 物品
        };
      },
      // 分解返回材料
      function (lv) {
        return {
          gold: lv * 1000,
          // 金币
          diamond: lv * 3,
          // 钻石
          items: [{
            prototype: "MeltStone",
            count: lv
          }] // 物品
        };
      }), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(MeltArmour, _EquipmentPrototype);
        function MeltArmour() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            // 最大生命值
            maxHp: 150,
            // 物理防御
            physicalDefense: 15,
            // 魔法防御
            magicDefense: 15
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 30,
            physicalDefense: 5,
            magicDefense: 5
          });
          return _this;
        }
        var _proto = MeltArmour.prototype;
        // icon图标
        _proto.icon = function icon() {
          var assets = getCustomModManager();
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return assets.load("Texture/Equipment/Melt/MeltArmour/spriteFrame", SpriteFrame);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        // 攻击之后执行的回调
        _proto.afterAttack = function afterAttack(progress, next) {
          // 套装数量小于 2 或者随机数小于 0.5 则不添加buff
          if (this.suitCount < oneSuit || Math.random() < 0.5) return next();
          // 添加烧伤buff
          progress.target.addBuff({
            // 烧伤伤害为最大生命值的5%
            data: {
              damage: progress.target.maxHp * 0.05
            },
            // 烧伤buff在基础mod中定义
            Proto: Burn
          });
          next();
        };
        _createClass(MeltArmour, [{
          key: "name",
          get:
          // 名称
          function get() {
            return LanguageManager.getEntry("MeltArmour").getValue(settingManager.data.language);
          }

          // 描述
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("MeltArmour Description").getValue(settingManager.data.language);
          }

          // 装备类型
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Armor;
          }

          // 套装词条，空字符串为无套装效果
        }, {
          key: "suit",
          get: function get() {
            return "Melt";
          }
        }, {
          key: "propertyDescription",
          get:
          // 获取属性描述
          // 支持 RichText 语法
          function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            // 生命值
            res += LanguageManager.getEntry("maxHp").getValue(settingManager.data.language) + ": " + this.instance.maxHp.toFixed(0) + "\n";
            // 物理防御
            res += LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": " + this.instance.physicalDefense.toFixed(0) + "\n";
            // 魔法防御
            res += LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": " + this.instance.magicDefense.toFixed() + "\n";
            // 套装属性
            // 这里比较特殊
            // 我们临时创建一个语言条目来表示套装效果
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + new ( /*#__PURE__*/function (_LanguageEntry3) {
              _inheritsLoose(_class5, _LanguageEntry3);
              function _class5() {
                return _LanguageEntry3.apply(this, arguments) || this;
              }
              _createClass(_class5, [{
                key: "chs",
                get: function get() {
                  return "攻击有50%概率给敌人添加一个烧伤效果";
                }
              }, {
                key: "eng",
                get: function get() {
                  return "50% chance to add a burn effect to the enemy";
                }
              }, {
                key: "jpn",
                get: function get() {
                  return "敵に火傷効果を追加する50%の確率";
                }
              }]);
              return _class5;
            }(LanguageEntry))().getValue(settingManager.data.language) + " " + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return MeltArmour;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MeltStone.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts', './AssetManager3.ts', './MainLevelData.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, settingManager, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, RegisterItem, getCustomModManager, hijackFloorData;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      RegisterItem = module.RegisterItem;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }, function (module) {
      hijackFloorData = module.hijackFloorData;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "4f024b9Z1lBfbYniYdkjb73", "MeltStone", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      hijackFloorData(function (floor, floorData) {
        floorData.dropItems.push({
          posibility: function posibility() {
            return 0.2;
          },
          count: function count() {
            return 1;
          },
          item: "MeltStone"
        });
        return floorData;
      });
      var Brave_Entry = (_dec = RegisterLanguageEntry("MeltStone"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "熔岩石";
          }
        }, {
          key: "eng",
          get: function get() {
            return "MeltStone";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "溶岩石";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("MeltStone Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "表面滚烫的岩石，可以熔化一切";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Surface hot rocks, can melt everything";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "表面滚烫の岩、すべてを溶かすことができます";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var MeltStone = exports('MeltStone', (_dec3 = RegisterItem("MeltStone"), _dec3(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(MeltStone, _ItemPrototype);
        function MeltStone() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = MeltStone.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = getCustomModManager();
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/MeltStone/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(MeltStone, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("MeltStone").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("MeltStone Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return MeltStone;
      }(ItemPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MeltSword.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts', './AssetManager3.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment, getCustomModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "c71a2IOk0RDXau0MGhHsoKP", "MeltSword", undefined);
      var SealingRobe_Entry = (_dec = RegisterLanguageEntry("MeltSword"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(SealingRobe_Entry, _LanguageEntry);
        function SealingRobe_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Entry, [{
          key: "chs",
          get: function get() {
            return "熔岩剑";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Melt Sword";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "溶岩剣";
          }
        }]);
        return SealingRobe_Entry;
      }(LanguageEntry)) || _class);
      var SealingRobe_Description_Entry = (_dec2 = RegisterLanguageEntry("MeltSword Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(SealingRobe_Description_Entry, _LanguageEntry2);
        function SealingRobe_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "剑身裹着火热的岩浆，剑刃上燃烧着火焰。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "The blade of the sword is wrapped in molten lava, and the edge of the blade is burning with flames.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "剣身は溶岩で包まれており、刃先は炎で燃えています。";
          }
        }]);
        return SealingRobe_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 一件套所需装备数量 两件套所需装备数量
      var oneSuit = 2;

      // 注册到武器列表中
      var MeltSword = exports('MeltSword', (_dec3 = RegisterEquipment("MeltSword"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(MeltSword, _EquipmentPrototype);
        function MeltSword() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            // 物理攻击
            physicalAttack: 35,
            // 魔法攻击
            magicAttack: 15,
            // 攻击速度 攻击动画倍率 1.3
            attackSpeed: 1.3
          })
          // 设置属性拦截器
          // 获取 physicalAttack 属性时，返回第二个参数的返回值
          // ordinary 为原始值
          .setProperty("physicalAttack", function (ordinary) {
            // 根据套装数量计算属性
            // suitCount 为当前套装数量
            return ordinary + (_this.suitCount >= oneSuit ? 15 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalAttack: 10,
            magicAttack: 5
          });
          return _this;
        }
        var _proto = MeltSword.prototype;
        // icon图标
        _proto.icon = function icon() {
          var assets = getCustomModManager();
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return assets.load("Texture/Equipment/Melt/MeltSword/spriteFrame", SpriteFrame);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(MeltSword, [{
          key: "name",
          get:
          // 名称
          function get() {
            return LanguageManager.getEntry("MeltSword").getValue(settingManager.data.language);
          }

          // 描述
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("MeltSword Description").getValue(settingManager.data.language);
          }

          // 装备类型
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Weapon;
          }

          // 套装词条，空字符串为无套装效果
        }, {
          key: "suit",
          get: function get() {
            return "Melt";
          }
        }, {
          key: "propertyDescription",
          get:
          // 获取属性描述
          // 支持 RichText 语法
          function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            // 物理攻击
            res += LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": " + this.instance.physicalAttack.toFixed(0) + "\n";
            // 魔法攻击
            res += LanguageManager.getEntry("magicAttack").getValue(settingManager.data.language) + ": " + this.instance.magicAttack.toFixed(0) + "\n";
            // 攻击速度
            res += LanguageManager.getEntry("attackSpeed").getValue(settingManager.data.language) + ": " + this.instance.attackSpeed.toFixed(2) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": +15 " + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return MeltSword;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Message.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './MessageToastPrefab.ts', './MessageCongratulationsPrefab.ts', './MessageTaskNotifyPrefab.ts', './MessageConfirmPrefab.ts', './LoadingManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, Prefab, find, CcNative, MessageToastPrefab, MessageCongratulationsPrefab, MessageTaskNotifyPrefab, MessageConfirmPrefab, LoadingManager;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      Prefab = module.Prefab;
      find = module.find;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      MessageToastPrefab = module.MessageToastPrefab;
    }, function (module) {
      MessageCongratulationsPrefab = module.MessageCongratulationsPrefab;
    }, function (module) {
      MessageTaskNotifyPrefab = module.MessageTaskNotifyPrefab;
    }, function (module) {
      MessageConfirmPrefab = module.MessageConfirmPrefab;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }],
    execute: function () {
      cclegacy._RF.push({}, "122fclcbiNHsIgiKqMG0KsA", "Message", undefined);
      var Message = /*#__PURE__*/function () {
        function Message() {
          // 弹框消息
          this.ToastPrefab = null;
          // 恭喜预制体
          this.CongratulationsPrefab = null;
          // 任务完成提示
          this.TaskNotifyPrefab = null;
          // 确认弹窗
          this.ConfirmPrefab = null;
          // 加载界面
          this.LoadingPrefab = null;
        }
        var _proto = Message.prototype;
        // 预加载
        _proto.preloadToast = /*#__PURE__*/
        function () {
          var _preloadToast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var assetManager, prefab;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (this.ToastPrefab) {
                    _context.next = 6;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context.next = 4;
                  return assetManager.load("Message/MessageToastPrefab", Prefab);
                case 4:
                  prefab = _context.sent;
                  this.ToastPrefab = prefab.value;
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function preloadToast() {
            return _preloadToast.apply(this, arguments);
          }
          return preloadToast;
        }() // 弹框消息
        ;

        _proto.toast = /*#__PURE__*/
        function () {
          var _toast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(msg, parent) {
            var assetManager, prefab, node;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (parent === void 0) {
                    parent = find("Canvas");
                  }
                  if (this.ToastPrefab) {
                    _context2.next = 7;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context2.next = 5;
                  return assetManager.load("Message/MessageToastPrefab", Prefab);
                case 5:
                  prefab = _context2.sent;
                  this.ToastPrefab = prefab.value;
                case 7:
                  node = CcNative.instantiate(this.ToastPrefab);
                  parent.addChild(node);
                  node.getComponent(MessageToastPrefab).setToast(msg).then(function (_) {
                    parent.removeChild(node);
                    if (node.isValid) node.destroy();
                  });
                case 10:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function toast(_x, _x2) {
            return _toast.apply(this, arguments);
          }
          return toast;
        }();
        // 预加载
        _proto.preloadCongratulations = /*#__PURE__*/
        function () {
          var _preloadCongratulations = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
            var assetManager, prefab;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  if (this.CongratulationsPrefab) {
                    _context3.next = 6;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context3.next = 4;
                  return assetManager.load("Message/MessageCongratulationsPrefab", Prefab);
                case 4:
                  prefab = _context3.sent;
                  this.CongratulationsPrefab = prefab.value;
                case 6:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function preloadCongratulations() {
            return _preloadCongratulations.apply(this, arguments);
          }
          return preloadCongratulations;
        }() // 恭喜
        ;

        _proto.congratulations = /*#__PURE__*/
        function () {
          var _congratulations = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(gold, diamond, items, equipments, parent) {
            var assetManager, prefab, node;
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  if (parent === void 0) {
                    parent = find("Canvas");
                  }
                  if (this.CongratulationsPrefab) {
                    _context4.next = 7;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context4.next = 5;
                  return assetManager.load("Message/MessageCongratulationsPrefab", Prefab);
                case 5:
                  prefab = _context4.sent;
                  this.CongratulationsPrefab = prefab.value;
                case 7:
                  node = CcNative.instantiate(this.CongratulationsPrefab);
                  parent.addChild(node);
                  node.getComponent(MessageCongratulationsPrefab).setCongratulation(gold, diamond, items, equipments, function () {
                    parent.removeChild(node);
                    if (node.isValid) node.destroy();
                  });
                case 10:
                case "end":
                  return _context4.stop();
              }
            }, _callee4, this);
          }));
          function congratulations(_x3, _x4, _x5, _x6, _x7) {
            return _congratulations.apply(this, arguments);
          }
          return congratulations;
        }();
        // 预加载
        _proto.preloadTaskNotify = /*#__PURE__*/
        function () {
          var _preloadTaskNotify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
            var assetManager, prefab;
            return _regeneratorRuntime().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  if (this.TaskNotifyPrefab) {
                    _context5.next = 6;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context5.next = 4;
                  return assetManager.load("Message/MessageTaskNotifyPrefab", Prefab);
                case 4:
                  prefab = _context5.sent;
                  this.TaskNotifyPrefab = prefab.value;
                case 6:
                case "end":
                  return _context5.stop();
              }
            }, _callee5, this);
          }));
          function preloadTaskNotify() {
            return _preloadTaskNotify.apply(this, arguments);
          }
          return preloadTaskNotify;
        }();
        _proto.taskNotify = /*#__PURE__*/function () {
          var _taskNotify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(achivement, parent) {
            var assetManager, prefab, node;
            return _regeneratorRuntime().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  if (parent === void 0) {
                    parent = find("Canvas");
                  }
                  if (this.TaskNotifyPrefab) {
                    _context6.next = 7;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context6.next = 5;
                  return assetManager.load("Message/MessageTaskNotifyPrefab", Prefab);
                case 5:
                  prefab = _context6.sent;
                  this.TaskNotifyPrefab = prefab.value;
                case 7:
                  node = CcNative.instantiate(this.TaskNotifyPrefab);
                  parent.addChild(node);
                  node.getComponent(MessageTaskNotifyPrefab).setNotifyInfo(achivement).then(function () {
                    parent.removeChild(node);
                  });
                case 10:
                case "end":
                  return _context6.stop();
              }
            }, _callee6, this);
          }));
          function taskNotify(_x8, _x9) {
            return _taskNotify.apply(this, arguments);
          }
          return taskNotify;
        }();
        // 预加载
        _proto.preloadConfirm = /*#__PURE__*/
        function () {
          var _preloadConfirm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
            var assetManager, prefab;
            return _regeneratorRuntime().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  if (this.ConfirmPrefab) {
                    _context7.next = 6;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context7.next = 4;
                  return assetManager.load("Message/MessageConfirmPrefab", Prefab);
                case 4:
                  prefab = _context7.sent;
                  this.ConfirmPrefab = prefab.value;
                case 6:
                case "end":
                  return _context7.stop();
              }
            }, _callee7, this);
          }));
          function preloadConfirm() {
            return _preloadConfirm.apply(this, arguments);
          }
          return preloadConfirm;
        }();
        _proto.confirm = /*#__PURE__*/function () {
          var _confirm2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(title, message, _confirm, cancel, parent) {
            var assetManager, prefab, node;
            return _regeneratorRuntime().wrap(function _callee8$(_context8) {
              while (1) switch (_context8.prev = _context8.next) {
                case 0:
                  if (parent === void 0) {
                    parent = find("Canvas");
                  }
                  if (this.ConfirmPrefab) {
                    _context8.next = 7;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context8.next = 5;
                  return assetManager.load("Message/MessageConfirmPrefab", Prefab);
                case 5:
                  prefab = _context8.sent;
                  this.ConfirmPrefab = prefab.value;
                case 7:
                  node = CcNative.instantiate(this.ConfirmPrefab);
                  parent.addChild(node);
                  return _context8.abrupt("return", new Promise(function (res) {
                    node.getComponent(MessageConfirmPrefab).setConfirm(title, message, _confirm, cancel, function () {
                      res(true);
                      parent.removeChild(node);
                      node.destroy();
                    }, function () {
                      res(false);
                      parent.removeChild(node);
                      node.destroy();
                    });
                  }));
                case 10:
                case "end":
                  return _context8.stop();
              }
            }, _callee8, this);
          }));
          function confirm(_x10, _x11, _x12, _x13, _x14) {
            return _confirm2.apply(this, arguments);
          }
          return confirm;
        }();
        _proto.preloadLoading = /*#__PURE__*/function () {
          var _preloadLoading = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
            var assetManager, prefab;
            return _regeneratorRuntime().wrap(function _callee9$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  if (this.LoadingPrefab) {
                    _context9.next = 6;
                    break;
                  }
                  assetManager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context9.next = 4;
                  return assetManager.load("Message/MessageLoadingPrefab", Prefab);
                case 4:
                  prefab = _context9.sent;
                  this.LoadingPrefab = prefab.value;
                case 6:
                case "end":
                  return _context9.stop();
              }
            }, _callee9, this);
          }));
          function preloadLoading() {
            return _preloadLoading.apply(this, arguments);
          }
          return preloadLoading;
        }();
        _proto.loading = /*#__PURE__*/function () {
          var _loading = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(parent) {
            var node;
            return _regeneratorRuntime().wrap(function _callee10$(_context10) {
              while (1) switch (_context10.prev = _context10.next) {
                case 0:
                  if (parent === void 0) {
                    parent = find("Canvas");
                  }
                  _context10.next = 3;
                  return this.preloadLoading();
                case 3:
                  node = CcNative.instantiate(this.LoadingPrefab);
                  parent.addChild(node);
                  return _context10.abrupt("return", function () {
                    parent.removeChild(node);
                    node.destroy();
                  });
                case 6:
                case "end":
                  return _context10.stop();
              }
            }, _callee10, this);
          }));
          function loading(_x15) {
            return _loading.apply(this, arguments);
          }
          return loading;
        }();
        return Message;
      }();
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {
        return _regeneratorRuntime().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              _context11.next = 2;
              return message.preloadToast();
            case 2:
              return _context11.abrupt("return", _context11.sent);
            case 3:
            case "end":
              return _context11.stop();
          }
        }, _callee11);
      })));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
        return _regeneratorRuntime().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              _context12.next = 2;
              return message.preloadLoading();
            case 2:
              return _context12.abrupt("return", _context12.sent);
            case 3:
            case "end":
              return _context12.stop();
          }
        }, _callee12);
      })));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {
        return _regeneratorRuntime().wrap(function _callee13$(_context13) {
          while (1) switch (_context13.prev = _context13.next) {
            case 0:
              _context13.next = 2;
              return message.preloadConfirm();
            case 2:
              return _context13.abrupt("return", _context13.sent);
            case 3:
            case "end":
              return _context13.stop();
          }
        }, _callee13);
      })));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
        return _regeneratorRuntime().wrap(function _callee14$(_context14) {
          while (1) switch (_context14.prev = _context14.next) {
            case 0:
              _context14.next = 2;
              return message.preloadTaskNotify();
            case 2:
              return _context14.abrupt("return", _context14.sent);
            case 3:
            case "end":
              return _context14.stop();
          }
        }, _callee14);
      })));
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {
        return _regeneratorRuntime().wrap(function _callee15$(_context15) {
          while (1) switch (_context15.prev = _context15.next) {
            case 0:
              _context15.next = 2;
              return message.preloadCongratulations();
            case 2:
              return _context15.abrupt("return", _context15.sent);
            case 3:
            case "end":
              return _context15.stop();
          }
        }, _callee15);
      })));
      var message = exports('message', new Message());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MessageConfirmPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Label, ExtensionComponent;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "7b379354PJBvKtUkJAJTCSu", "MessageConfirmPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var MessageConfirmPrefab = exports('MessageConfirmPrefab', (_dec = ccclass('MessageConfirmPrefab'), _dec(_class = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(MessageConfirmPrefab, _ExtensionComponent);
        function MessageConfirmPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _this.onConfirm = null;
          _this.onCancel = null;
          return _this;
        }
        var _proto = MessageConfirmPrefab.prototype;
        _proto.setConfirm = function setConfirm(title, msg, confirm, cancel, onConfirm, onCancel) {
          var box = this.node.getChildByName("SettingBack");
          box.getChildByName("Title").getComponent(Label).string = title;
          box.getChildByName("Message").getComponent(Label).string = msg;
          box.getChildByName("Confirm").getChildByName("Label").getComponent(Label).string = confirm;
          box.getChildByName("Cancel").getChildByName("Label").getComponent(Label).string = cancel;
          this.onConfirm = onConfirm;
          this.onCancel = onCancel;
        };
        _proto.clickConfirm = function clickConfirm() {
          if (this.onConfirm) {
            this.onConfirm();
          }
        };
        _proto.clickCancel = function clickCancel() {
          if (this.onCancel) {
            this.onCancel();
          }
        };
        return MessageConfirmPrefab;
      }(ExtensionComponent)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MessageCongratulationsPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './ExtensionComponent.ts', './EquipmentItemPrefab.ts', './ItemInstance.ts', './ItemManager.ts', './DetailInfoPrefab.ts', './EquipmentInstance.ts', './EquipmentManager2.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Prefab, find, ScrollView, CcNative, ExtensionComponent, EquipmentItemPrefab, ItemInstance, getItemPrototype, DetailInfoPrefab, EquipmentInstance, getEquipmentPrototype;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      find = module.find;
      ScrollView = module.ScrollView;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      EquipmentItemPrefab = module.EquipmentItemPrefab;
    }, function (module) {
      ItemInstance = module.ItemInstance;
    }, function (module) {
      getItemPrototype = module.getItemPrototype;
    }, function (module) {
      DetailInfoPrefab = module.DetailInfoPrefab;
    }, function (module) {
      EquipmentInstance = module.EquipmentInstance;
    }, function (module) {
      getEquipmentPrototype = module.getEquipmentPrototype;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "81630ubO5xJ6IJSJezZZdpV", "MessageCongratulationsPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var MessageCongratulationsPrefab = exports('MessageCongratulationsPrefab', (_dec = ccclass('MessageCongratulationsPrefab'), _dec2 = property(Prefab), _dec3 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(MessageCongratulationsPrefab, _ExtensionComponent);
        function MessageCongratulationsPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "EquipmentItemPrefab", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "DetailInfoPrefab", _descriptor2, _assertThisInitialized(_this));
          _this.closeCallback = null;
          return _this;
        }
        var _proto = MessageCongratulationsPrefab.prototype;
        _proto.closeCongratulation = function closeCongratulation() {
          this.node.active = false;
          if (this.closeCallback) this.closeCallback();
        };
        _proto.setCongratulation = function setCongratulation(gold, diamond, items, equipments, closeCallback) {
          var _this2 = this;
          this.closeCallback = closeCallback;
          var canvasNode = find("Canvas");
          var containerNode = this.node.getChildByName("ScrollView").getComponent(ScrollView).content;
          containerNode.removeAllChildren();
          // 添加item展示
          var addItem = function addItem(instance) {
            var node = CcNative.instantiate(_this2.EquipmentItemPrefab);
            node.getComponent(EquipmentItemPrefab).setInfo(instance, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
              var detailNode;
              return _regeneratorRuntime().wrap(function _callee$(_context) {
                while (1) switch (_context.prev = _context.next) {
                  case 0:
                    detailNode = CcNative.instantiate(_this2.DetailInfoPrefab);
                    _context.t0 = detailNode.getComponent(DetailInfoPrefab);
                    _context.t1 = instance.proto.name;
                    _context.next = 5;
                    return instance.proto.icon();
                  case 5:
                    _context.t2 = _context.sent;
                    _context.t3 = instance.proto.description;
                    _context.t4 = {
                      title: _context.t1,
                      icon: _context.t2,
                      bottomMessage: _context.t3
                    };
                    _context.t5 = [_context.t4];
                    _context.t6 = {
                      content: _context.t5
                    };
                    _context.t0.setDetail.call(_context.t0, _context.t6);
                    canvasNode.addChild(detailNode);
                  case 12:
                  case "end":
                    return _context.stop();
                }
              }, _callee);
            })));
            containerNode.addChild(node);
          };
          // 添加equipment展示
          var addEquipment = function addEquipment(instance) {
            var node = CcNative.instantiate(_this2.EquipmentItemPrefab);
            var equipmentItem = node.getComponent(EquipmentItemPrefab);
            equipmentItem.setInfo(instance, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
              var detailNode;
              return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    detailNode = CcNative.instantiate(_this2.DetailInfoPrefab);
                    _context2.t0 = detailNode.getComponent(DetailInfoPrefab);
                    _context2.t1 = instance.proto.name;
                    _context2.t2 = equipmentItem.getQualitySpriteFrame(instance.quality);
                    _context2.t3 = instance.proto.propertyDescription;
                    _context2.t4 = instance.proto.description;
                    _context2.next = 8;
                    return instance.proto.icon();
                  case 8:
                    _context2.t5 = _context2.sent;
                    _context2.t6 = {
                      title: _context2.t1,
                      boxIcon: _context2.t2,
                      rightMessage: _context2.t3,
                      bottomMessage: _context2.t4,
                      icon: _context2.t5
                    };
                    _context2.t7 = [_context2.t6];
                    _context2.t8 = {
                      content: _context2.t7
                    };
                    _context2.t0.setDetail.call(_context2.t0, _context2.t8);
                    canvasNode.addChild(detailNode);
                  case 14:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            })));
            containerNode.addChild(node);
          };
          if (gold) {
            var instance = new ItemInstance({
              Proto: getItemPrototype("Gold"),
              count: gold
            });
            addItem(instance);
          }
          if (diamond) {
            var _instance = new ItemInstance({
              Proto: getItemPrototype("Diamond"),
              count: diamond
            });
            addItem(_instance);
          }
          if (items) {
            items.forEach(function (item) {
              if (!item || !item.prototype || !getItemPrototype(item.prototype)) return;
              var instance = new ItemInstance({
                Proto: getItemPrototype(item.prototype),
                count: item.count
              });
              addItem(instance);
            });
          }
          if (equipments) {
            equipments.forEach(function (equip) {
              if (!equip || !equip.prototype || !getEquipmentPrototype(equip.prototype)) return;
              var instance = new EquipmentInstance({
                lv: equip.lv,
                id: equip.id,
                quality: equip.quality,
                extraProperty: equip.extraProperty,
                Proto: getEquipmentPrototype(equip.prototype)
              });
              addEquipment(instance);
            });
          }
          return;
        };
        return MessageCongratulationsPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "EquipmentItemPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "DetailInfoPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MessageLoadingPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Node, Component;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "0c40c8IIRZLS7+seqSv3DPN", "MessageLoadingPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var MessageLoadingPrefab = exports('MessageLoadingPrefab', (_dec = ccclass('MessageLoadingPrefab'), _dec2 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(MessageLoadingPrefab, _Component);
        function MessageLoadingPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "loadingIcon", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = MessageLoadingPrefab.prototype;
        _proto.update = function update(dt) {
          this.loadingIcon.angle += 100 * dt; // 旋转速度可以根据需要调整
        };

        return MessageLoadingPrefab;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "loadingIcon", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MessageTaskNotifyPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _inheritsLoose, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Sprite, Label, ExtensionComponent;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Sprite = module.Sprite;
      Label = module.Label;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "ba015qBNEpDaKn4lO8YRhEE", "MessageTaskNotifyPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var MessageTaskNotifyPrefab = exports('MessageTaskNotifyPrefab', (_dec = ccclass('MessageTaskNotifyPrefab'), _dec(_class = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(MessageTaskNotifyPrefab, _ExtensionComponent);
        function MessageTaskNotifyPrefab() {
          return _ExtensionComponent.apply(this, arguments) || this;
        }
        var _proto = MessageTaskNotifyPrefab.prototype;
        _proto.setNotifyInfo = /*#__PURE__*/function () {
          var _setNotifyInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(achivement) {
            var _this = this;
            var iconSprite, titleLabel, descriptionLabel;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  iconSprite = this.node.getChildByName("Icon").getComponent(Sprite);
                  titleLabel = this.node.getChildByName("Title").getComponent(Label);
                  descriptionLabel = this.node.getChildByName("Description").getComponent(Label); // 设置内容
                  titleLabel.string = achivement.name;
                  descriptionLabel.string = achivement.description;
                  achivement.icon().then(function (spriteFrame) {
                    iconSprite.spriteFrame = spriteFrame;
                  });
                  // 播放动画
                  _context.next = 8;
                  return new Promise(function (res) {
                    _this.setAutoInterval(function () {
                      _this.node.setPosition(_this.node.position.x + 12, _this.node.position.y);
                    }, {
                      count: 30,
                      timer: 13,
                      complete: function complete() {
                        return res(null);
                      }
                    });
                  });
                case 8:
                  _context.next = 10;
                  return new Promise(function (res) {
                    return _this.setAutoInterval(function (_) {
                      return res(null);
                    }, {
                      count: 1,
                      timer: 2000
                    });
                  });
                case 10:
                  _context.next = 12;
                  return new Promise(function (res) {
                    _this.setAutoInterval(function () {
                      _this.node.setPosition(_this.node.position.x - 12, _this.node.position.y);
                    }, {
                      count: 30,
                      timer: 13,
                      complete: function complete() {
                        return res(null);
                      }
                    });
                  });
                case 12:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function setNotifyInfo(_x) {
            return _setNotifyInfo.apply(this, arguments);
          }
          return setNotifyInfo;
        }();
        return MessageTaskNotifyPrefab;
      }(ExtensionComponent)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MessageToastPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ModuleToastPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Component, ModuleToastPrefab;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Component = module.Component;
    }, function (module) {
      ModuleToastPrefab = module.ModuleToastPrefab;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "65c0bFrRZBKXbdi1YY5suCv", "MessageToastPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var MessageToastPrefab = exports('MessageToastPrefab', (_dec = ccclass('MessageToastPrefab'), _dec2 = property(ModuleToastPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(MessageToastPrefab, _Component);
        function MessageToastPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "toastPrefab", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = MessageToastPrefab.prototype;
        _proto.setToast = /*#__PURE__*/function () {
          var _setToast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(message, duration) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (duration === void 0) {
                    duration = 1500;
                  }
                  _context.next = 3;
                  return this.toastPrefab.setToast(message, duration);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function setToast(_x, _x2) {
            return _setToast.apply(this, arguments);
          }
          return setToast;
        }();
        return MessageToastPrefab;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "toastPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ModuleDropListPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Label, Node, SpriteFrame, error, Sprite, Button, instantiate, Color, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
      Node = module.Node;
      SpriteFrame = module.SpriteFrame;
      error = module.error;
      Sprite = module.Sprite;
      Button = module.Button;
      instantiate = module.instantiate;
      Color = module.Color;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7;
      cclegacy._RF.push({}, "15fd6r7D21L2oBv0YRQgDFR", "ModuleDropListPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ModuleDropListPrefab = exports('ModuleDropListPrefab', (_dec = ccclass('ModuleDropListPrefab'), _dec2 = property(Label), _dec3 = property(Node), _dec4 = property(Node), _dec5 = property(Node), _dec6 = property(Node), _dec7 = property(SpriteFrame), _dec8 = property(SpriteFrame), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ModuleDropListPrefab, _ExtensionComponent);
        function ModuleDropListPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "TitleLabel", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "TriangleNode", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ListNode", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ListContainer", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "TempItemNode", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "DefaultSpriteFrame", _descriptor6, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "SelectedSpriteFrame", _descriptor7, _assertThisInitialized(_this));
          _this.value = [];
          _this.multiple = false;
          _this.currentState = "none";
          _this.isAnimationing = false;
          return _this;
        }
        var _proto = ModuleDropListPrefab.prototype;
        _proto.onLoad = function onLoad() {
          this.ListNode.active = false;
          this.TempItemNode.parent = null;
        };
        _proto.changeSelectType = /*#__PURE__*/function () {
          var _changeSelectType = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var _this2 = this;
            var addRow, p1, p2, _p;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (!this.isAnimationing) {
                    _context.next = 2;
                    break;
                  }
                  return _context.abrupt("return");
                case 2:
                  addRow = 1;
                  if (this.currentState === "drop") {
                    this.currentState = 'none';
                    addRow = -1;
                  } else if (this.currentState === "none") {
                    this.currentState = 'drop';
                    addRow = 1;
                  }
                  this.isAnimationing = true;
                  p1 = new Promise(function (res) {
                    _this2.setAutoInterval(function () {
                      _this2.TriangleNode.angle = _this2.TriangleNode.angle + addRow * 6;
                    }, {
                      timer: 15,
                      count: 15,
                      complete: function complete() {
                        return res(0);
                      }
                    });
                  });
                  if (!(this.currentState === "drop")) {
                    _context.next = 13;
                    break;
                  }
                  this.ListNode.active = true;
                  p2 = new Promise(function (res) {
                    var sprite = _this2.ListNode.getComponent(Sprite);
                    var posY = 20,
                      a = 0;
                    sprite.color = new Color(255, 255, 255, a);
                    _this2.ListNode.setPosition(_this2.ListNode.position.x, posY, _this2.ListNode.position.z);
                    _this2.setAutoInterval(function () {
                      posY -= 1;
                      sprite.color = new Color(255, 255, 255, a += 12.75);
                      _this2.ListNode.setPosition(_this2.ListNode.position.x, posY, _this2.ListNode.position.z);
                    }, {
                      timer: 15,
                      count: 20,
                      complete: function complete() {
                        return res(0);
                      }
                    });
                  });
                  _context.next = 11;
                  return Promise.all([p1, p2]);
                case 11:
                  _context.next = 18;
                  break;
                case 13:
                  if (!(this.currentState === "none")) {
                    _context.next = 18;
                    break;
                  }
                  _p = new Promise(function (res) {
                    var sprite = _this2.ListNode.getComponent(Sprite);
                    var posY = 0,
                      a = 225;
                    sprite.color = new Color(255, 255, 255, a);
                    _this2.ListNode.setPosition(_this2.ListNode.position.x, posY, _this2.ListNode.position.z);
                    _this2.setAutoInterval(function () {
                      posY += 1;
                      sprite.color = new Color(255, 255, 255, a -= 12.75);
                      _this2.ListNode.setPosition(_this2.ListNode.position.x, posY, _this2.ListNode.position.z);
                    }, {
                      timer: 15,
                      count: 20,
                      complete: function complete() {
                        return res(0);
                      }
                    });
                  });
                  _context.next = 17;
                  return Promise.all([p1, _p]);
                case 17:
                  this.ListNode.active = false;
                case 18:
                  this.isAnimationing = false;
                  return _context.abrupt("return");
                case 20:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function changeSelectType() {
            return _changeSelectType.apply(this, arguments);
          }
          return changeSelectType;
        }();
        _proto.setSelectList = function setSelectList(option) {
          var _this3 = this;
          this.ListContainer.removeAllChildren();
          this.value = option["default"] !== void 0 ? [option["default"]] : [];
          this.multiple = option.multiple || false;
          var spriteList = [];
          if (option["default"] === void 0 && option.require) {
            error("Mandatory items must include available default values");
            return;
          }
          option.list.forEach(function (item) {
            var node = _this3.createItemNode();
            var sprite = node.getComponent(Sprite);
            spriteList.push(sprite);
            node.getChildByName("Key").getComponent(Label).string = item.key;
            node.on(Button.EventType.CLICK, function () {
              var index = _this3.value.indexOf(item.value);
              if (index !== -1) {
                if (!option.require || _this3.value.length > 1) {
                  _this3.value.splice(index, 1);
                  sprite.spriteFrame = _this3.DefaultSpriteFrame;
                }
              } else {
                if (_this3.multiple) {
                  _this3.value.push(item.value);
                  sprite.spriteFrame = _this3.SelectedSpriteFrame;
                } else {
                  spriteList.forEach(function (s) {
                    return s.spriteFrame = _this3.DefaultSpriteFrame;
                  });
                  _this3.value = [item.value];
                  sprite.spriteFrame = _this3.SelectedSpriteFrame;
                }
              }
              if (_this3.value.length === 1 && _this3.value[0] === item.value) _this3.TitleLabel.string = item.key;else if (_this3.value.length > 1) _this3.TitleLabel.string = "......";else _this3.TitleLabel.string = option.noneTitle || "请选择";
              option.onchange && option.onchange(_this3.value);
            });
            // 初始化展示
            var index = _this3.value.indexOf(item.value);
            if (index !== -1) sprite.spriteFrame = _this3.SelectedSpriteFrame;else sprite.spriteFrame = _this3.DefaultSpriteFrame;
            // 添加节点
            _this3.ListContainer.addChild(node);
          });
          // 初始化展示
          if (this.value.length === 1) {
            for (var i = 0; i < option.list.length; i++) {
              var item = option.list[i];
              if (item.value === this.value[0]) this.TitleLabel.string = item.key;
            }
          } else if (this.value.length > 1) this.TitleLabel.string = "......";else this.TitleLabel.string = option.noneTitle || "请选择";
          return;
        };
        _proto.createItemNode = function createItemNode() {
          return instantiate(this.TempItemNode);
        };
        return ModuleDropListPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "TitleLabel", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "TriangleNode", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "ListNode", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "ListContainer", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "TempItemNode", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "DefaultSpriteFrame", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "SelectedSpriteFrame", [_dec8], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ModuleProgressPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createClass, cclegacy, _decorator, Node, UITransform, Component;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      UITransform = module.UITransform;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "cd0c3pzfIhMTbDWjKs60GUE", "ModuleProgressPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ModuleProgressPrefab = exports('ModuleProgressPrefab', (_dec = ccclass('ModuleProgressPrefab'), _dec2 = property(Node), _dec3 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ModuleProgressPrefab, _Component);
        function ModuleProgressPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "ProgressTub", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "ProgressWhiteTub", _descriptor2, _assertThisInitialized(_this));
          _this.progressMaxWidth = 0;
          _this._progress = 0;
          // 是否在动画中
          _this.isAnimationing = false;
          _this.eventMap = new Map();
          return _this;
        }
        var _proto = ModuleProgressPrefab.prototype;
        _proto.onLoad = function onLoad() {
          // 获取进度条最大值
          this.progressMaxWidth = this.node.getChildByName("loading-mask").getComponent(UITransform).width;
          var normalPos = this._progress * this.progressMaxWidth - this.progressMaxWidth;
          this.ProgressWhiteTub.setPosition(normalPos, this.ProgressTub.position.y);
          this.ProgressTub.setPosition(normalPos, this.ProgressTub.position.y);
        }

        // 设置进度条
        ;

        _proto.setProgress = function setProgress(progress, force) {
          if (force === void 0) {
            force = false;
          }
          var normalPos = progress * this.progressMaxWidth - this.progressMaxWidth;
          if (force) {
            this.ProgressWhiteTub.setPosition(normalPos, this.ProgressTub.position.y);
            this.ProgressTub.setPosition(normalPos, this.ProgressTub.position.y);
          } else {
            if (progress > this.progress) this.ProgressWhiteTub.setPosition(normalPos, this.ProgressTub.position.y);else if (progress < this.progress) this.ProgressTub.setPosition(normalPos, this.ProgressTub.position.y);
          }
          this._progress = progress;
        };
        // 每一帧自动校准
        _proto.update = function update(dt) {
          var normalPos = this.progress * this.progressMaxWidth - this.progressMaxWidth;
          var speed = Math.max(Math.abs(this.ProgressTub.position.x - normalPos) * 2 * this.progressMaxWidth * 0.002, Math.abs(this.ProgressWhiteTub.position.x - normalPos) * 2 * this.progressMaxWidth * 0.002);
          if (this.ProgressWhiteTub.position.x !== normalPos || this.ProgressTub.position.x !== normalPos) this.isAnimationing = true;
          if (this.ProgressWhiteTub.position.x === normalPos && this.ProgressTub.position.x === normalPos && this.isAnimationing) {
            this.isAnimationing = false;
            this.emit("complete");
          }
          if (this.ProgressWhiteTub.position.x === normalPos) ;else if (Math.abs(this.ProgressWhiteTub.position.x - normalPos) <= this.progressMaxWidth * 0.02) {
            this.ProgressWhiteTub.setPosition(normalPos, this.ProgressTub.position.y);
            var progress = (this.progressMaxWidth + this.ProgressWhiteTub.position.x) / this.progressMaxWidth;
            this.emit("update", progress);
          } else if (Math.abs(this.ProgressWhiteTub.position.x - normalPos) > this.progressMaxWidth) {
            this.ProgressWhiteTub.setPosition(normalPos, this.ProgressTub.position.y);
            var _progress = (this.progressMaxWidth + this.ProgressWhiteTub.position.x) / this.progressMaxWidth;
            this.emit("update", _progress);
          } else {
            this.ProgressWhiteTub.setPosition(this.ProgressWhiteTub.position.x - dt * speed, this.ProgressTub.position.y);
            var _progress2 = (this.progressMaxWidth + this.ProgressWhiteTub.position.x) / this.progressMaxWidth;
            this.emit("update", _progress2);
          }
          if (this.ProgressTub.position.x === normalPos) ;else if (Math.abs(this.ProgressTub.position.x - normalPos) <= this.progressMaxWidth * 0.02) {
            this.ProgressTub.setPosition(normalPos, this.ProgressTub.position.y);
            var _progress3 = (this.progressMaxWidth + this.ProgressTub.position.x) / this.progressMaxWidth;
            this.emit("update", _progress3);
          } else if (Math.abs(this.ProgressTub.position.x - normalPos) > this.progressMaxWidth) {
            this.ProgressTub.setPosition(normalPos, this.ProgressTub.position.y);
            var _progress4 = (this.progressMaxWidth + this.ProgressTub.position.x) / this.progressMaxWidth;
            this.emit("update", _progress4);
          } else {
            this.ProgressTub.setPosition(this.ProgressTub.position.x + dt * speed, this.ProgressTub.position.y);
            var _progress5 = (this.progressMaxWidth + this.ProgressTub.position.x) / this.progressMaxWidth;
            this.emit("update", _progress5);
          }
        };
        _proto.emit = function emit(event) {
          for (var _len2 = arguments.length, arg = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
            arg[_key2 - 1] = arguments[_key2];
          }
          var set = this.eventMap.get(event);
          if (set) {
            set.forEach(function (c) {
              return c.apply(void 0, arg);
            });
          }
        };
        _proto.on = function on(event, callback) {
          var set = this.eventMap.get(event);
          if (!set) this.eventMap.set(event, set = new Set());
          set.add(callback);
        };
        _proto.off = function off(event, callback) {
          var set = this.eventMap.get(event);
          if (!set) return;
          if (!callback) return set.clear();
          set["delete"](callback);
        };
        _createClass(ModuleProgressPrefab, [{
          key: "progress",
          get: function get() {
            return this._progress;
          }
        }]);
        return ModuleProgressPrefab;
      }(Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "ProgressTub", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "ProgressWhiteTub", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ModuleToastPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Label, Color, Sprite, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
      Color = module.Color;
      Sprite = module.Sprite;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "a7f16aIMXpAl7eRTI24nTQY", "ModuleToastPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property,
        menu = _decorator.menu;
      var ModuleToastPrefab = exports('ModuleToastPrefab', (_dec = ccclass('ModuleToastPrefab'), _dec2 = property(Label), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ModuleToastPrefab, _ExtensionComponent);
        function ModuleToastPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "label", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ModuleToastPrefab.prototype;
        _proto.setToast = /*#__PURE__*/function () {
          var _setToast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(message, duration) {
            var _this2 = this;
            var sprite, posY, a;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (duration === void 0) {
                    duration = 1500;
                  }
                  if (duration <= 600) duration = 600;
                  sprite = this.node.getComponent(Sprite);
                  this.label.string = message;
                  posY = -20;
                  a = 0;
                  sprite.color = new Color(255, 255, 255, a);
                  this.node.setPosition(this.node.position.x, posY, this.node.position.z);
                  _context.next = 10;
                  return new Promise(function (res) {
                    _this2.setAutoInterval(function () {
                      posY += 1;
                      sprite.color = new Color(255, 255, 255, a += 12.75);
                      _this2.node.setPosition(_this2.node.position.x, posY, _this2.node.position.z);
                    }, {
                      timer: 15,
                      count: 20,
                      complete: function complete() {
                        return res(0);
                      }
                    });
                  });
                case 10:
                  _context.next = 12;
                  return new Promise(function (res) {
                    return setTimeout(res, Math.max(duration - 400, 10));
                  });
                case 12:
                  _context.next = 14;
                  return new Promise(function (res) {
                    _this2.setAutoInterval(function () {
                      posY -= 1;
                      sprite.color = new Color(255, 255, 255, a -= 12.75);
                      _this2.node.setPosition(_this2.node.position.x, posY, _this2.node.position.z);
                    }, {
                      timer: 15,
                      count: 20,
                      complete: function complete() {
                        return res(0);
                      }
                    });
                  });
                case 14:
                case "end":
                  return _context.stop();
              }
            }, _callee, this);
          }));
          function setToast(_x, _x2) {
            return _setToast.apply(this, arguments);
          }
          return setToast;
        }();
        return ModuleToastPrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "label", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ModuleVirtualListPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createClass, cclegacy, _decorator, Node, CCFloat, v2, UITransform, Size, ExtensionComponent;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      CCFloat = module.CCFloat;
      v2 = module.v2;
      UITransform = module.UITransform;
      Size = module.Size;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3;
      cclegacy._RF.push({}, "1a958w6q3VOVLgj0Jd3rWRh", "ModuleVirtualListPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property,
        menu = _decorator.menu;
      var ModuleVirtualListPrefab = exports('ModuleVirtualListPrefab', (_dec = ccclass('ModuleVirtualListPrefab'), _dec2 = property(Node), _dec3 = property(CCFloat), _dec4 = property(CCFloat), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ModuleVirtualListPrefab, _ExtensionComponent);
        function ModuleVirtualListPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 容器节点，用于存放列表项
          _initializerDefineProperty(_this, "content", _descriptor, _assertThisInitialized(_this));
          // 横向空距离
          _initializerDefineProperty(_this, "spaceX", _descriptor2, _assertThisInitialized(_this));
          // 纵向空距离
          _initializerDefineProperty(_this, "spaceY", _descriptor3, _assertThisInitialized(_this));
          // 渲染列表项的索引
          _this.renderIndexList = [];
          // 最大高度
          _this.maxHeight = 0;
          // 滚动距离
          _this._scrollTop = 0;
          // 内容宽高
          _this._contentSize = null;
          // 数据列表
          _this._dataList = [];
          // 数据转换为节点的函数
          _this._dataToNode = null;
          // 节点离开可视区域时的回调
          _this._nodeOffScreenCallback = null;
          // 是否在滚动中
          _this.isScrolling = false;
          // 开始时间
          _this.startTimer = 0;
          // 移动距离 
          _this.moveDistance = v2(0, 0);
          // 方向向量
          _this.direction = v2(0, 0);
          return _this;
        }
        var _proto = ModuleVirtualListPrefab.prototype;
        // 设置数据列表
        _proto.setDataList = function setDataList(dataList) {
          this._dataList = dataList;
        }

        // 设置数据转换为节点的函数
        ;

        _proto.setDataToNode = function setDataToNode(dataToNode) {
          this._dataToNode = dataToNode;
        }

        // 设置节点离开可视区域时的回调
        ;

        _proto.setNodeOffScreenCallback = function setNodeOffScreenCallback(nodeOffScreenCallback) {
          this._nodeOffScreenCallback = nodeOffScreenCallback;
        }

        // 启动列表
        ;

        _proto.setVirtualList = function setVirtualList(dataList, dataToNode, nodeOffScreenCallback) {
          if (dataToNode === void 0) {
            dataToNode = null;
          }
          if (nodeOffScreenCallback === void 0) {
            nodeOffScreenCallback = null;
          }
          // 渲染的节点索引列表
          this.renderIndexList.length = 0;
          // 初始化最大高度
          this.maxHeight = 0;
          // 清空内容
          this.content.removeAllChildren();
          // 设置数据列表
          this.setDataList(dataList);
          // 设置数据转换为节点的函数
          this.setDataToNode(dataToNode);
          // 设置节点离开可视区域时的回调
          this.setNodeOffScreenCallback(nodeOffScreenCallback);
          // 初次渲染列表
          this.renderList();
        }

        // 初始化
        ;

        _proto.onLoad = function onLoad() {
          this.registerEvent();
        }

        // 绑定事件
        ;

        _proto.registerEvent = function registerEvent() {
          this.content.on(Node.EventType.TOUCH_START, this.touchStartEvent, this, true);
          this.content.on(Node.EventType.TOUCH_MOVE, this.touchMoveEvent, this, true);
          this.content.on(Node.EventType.TOUCH_END, this.touchEndEvent, this, true);
          this.content.on(Node.EventType.TOUCH_CANCEL, this.touchEndEvent, this, true);
        };
        // 触摸开始事件
        _proto.touchStartEvent = function touchStartEvent(e) {
          this.isScrolling = true;
          this.startTimer = Date.now();
          this.moveDistance = v2(0, 0);
        }

        // 触摸移动事件
        ;

        _proto.touchMoveEvent = function touchMoveEvent(e) {
          if (this.isScrolling) {
            this.direction = e.getDelta();
            this.moveDistance.y += e.getDeltaY();
          }
        }

        // 触摸结束事件 
        ;

        _proto.touchEndEvent = function touchEndEvent(e, captureListeners) {
          this.isScrolling = false;
          // 不是点击
          if (Date.now() - this.startTimer > 200) ;
        }

        // 渲染列表
        ;

        _proto.renderList = function renderList() {
          var _this2 = this;
          // 获取容器节点宽高
          if (!this._contentSize) {
            var uiTransform = this.content.getComponent(UITransform);
            this._contentSize = new Size(uiTransform.width, uiTransform.height);
          }
          // 遍历渲染
          var spaceY = 0,
            spaceX = 0,
            currentMaxHeight = 0,
            hasEnterRenderArea = false,
            completeRender = true;
          // 渲染索引
          this.renderIndexList.length = 0;
          // 需要渲染的节点
          var needRenderNode = [];
          for (var _index = 0; _index < this._dataList.length; _index++) {
            var _data = this._dataList[_index];
            var _node = this._dataToNode && this._dataToNode(_data, _index);
            if (!_node) continue;
            var _uiTransform = _node.getComponent(UITransform);
            // 判断是否满足换行
            if (spaceX + _uiTransform.width > this._contentSize.width) {
              spaceX = 0;
              spaceY += currentMaxHeight + this.spaceY;
              currentMaxHeight = _uiTransform.height;
            } else {
              currentMaxHeight = Math.max(currentMaxHeight, _uiTransform.height);
            }
            // 判断是否在渲染范围内
            if (spaceY - this.scrollTop < this.contentSize.height && spaceY - this.scrollTop + _uiTransform.height > 0) {
              // 到达渲染范围
              hasEnterRenderArea = true;
              // 添加到需要渲染的队列
              needRenderNode.push({
                node: _node,
                index: _index,
                x: spaceX + _uiTransform.width / 2 - this._contentSize.width / 2,
                y: -(spaceY - this.scrollTop + _uiTransform.height / 2 - this._contentSize.height / 2)
              });
              this.renderIndexList.push(_index);
            }
            // 不在渲染范围
            else {
              // 已经经过需要渲染的区域后离开则后续不需要继续进行
              if (hasEnterRenderArea) {
                completeRender = false;
                break;
              }
            }
            // 添加行的移动位置
            spaceX += _uiTransform.width + this.spaceX;
          }
          // 是否全部都进行了渲染
          if (completeRender) {
            // 更新最大高度
            this.maxHeight = spaceY + currentMaxHeight;
          }
          // 渲染对比节点
          if (needRenderNode.length > 0) {
            var children = this.content.children;
            var _loop = function _loop() {
              var childrenNode = children[i];
              var item = needRenderNode.find(function (item) {
                return item.node === childrenNode;
              });
              // 移除不该渲染的节点
              if (!item) {
                _this2._nodeOffScreenCallback && _this2._nodeOffScreenCallback(childrenNode);
                _this2.content.removeChild(childrenNode);
              }
              // 更新位置
              else item.node.setPosition(item.x, item.y);
            };
            for (var i = 0; i < children.length; i++) {
              _loop();
            }
            // 渲染新增节点
            needRenderNode.forEach(function (item) {
              item.node.setPosition(item.x, item.y);
              if (item.node.parent !== _this2.content) _this2.content.addChild(item.node);
            });
          } else {
            this.content.removeAllChildren();
          }
        };
        // 每一帧根据方向向量移动
        _proto.update = function update(dt) {
          var reduceDown = 40;
          var lastScrollTop = this._scrollTop;
          this._scrollTop += this.direction.y * dt * 200;
          if (this.direction.y !== 0) {
            if (this.direction.y > 0) {
              this.direction.y -= dt * reduceDown;
              if (this.direction.y < 0) this.direction.y = 0;
            } else if (this.direction.y < 0) {
              this.direction.y += dt * reduceDown;
              if (this.direction.y > 0) this.direction.y = 0;
            }
          }
          if (this.maxHeight !== 0) {
            if (this.maxHeight < this.contentSize.height) this._scrollTop = 0;
            if (this.maxHeight - this.contentSize.height + 5 < this.scrollTop) this._scrollTop = this.maxHeight - this.contentSize.height + 5;
          }
          if (this.scrollTop < 0) this._scrollTop = 0;
          if (this._scrollTop !== lastScrollTop) this.renderList();
          return;
        };
        _createClass(ModuleVirtualListPrefab, [{
          key: "scrollTop",
          get: function get() {
            return this._scrollTop;
          }
        }, {
          key: "contentSize",
          get: function get() {
            return this._contentSize;
          }
        }]);
        return ModuleVirtualListPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "content", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "spaceX", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return 0;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "spaceY", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return 0;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Monopoly.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './AchivementManager.ts', './AchivementManager2.ts', './AchivementPrototype.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, achivementManager, RegisterAchivement, AchivementPrototype, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      RegisterAchivement = module.RegisterAchivement;
    }, function (module) {
      AchivementPrototype = module.AchivementPrototype;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "aae2ekZeKFKJp/5bZA1iXiN", "Monopoly", undefined);
      var LanguageEntryMonopoly = (_dec = RegisterLanguageEntry("Monopoly"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(LanguageEntryMonopoly, _LanguageEntry);
        function LanguageEntryMonopoly() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(LanguageEntryMonopoly, [{
          key: "chs",
          get: function get() {
            return "大富翁";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Monopoly";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "大富翁";
          }
        }]);
        return LanguageEntryMonopoly;
      }(LanguageEntry)) || _class);
      var LanguageEntryMonopolyDescription = (_dec2 = RegisterLanguageEntry("Monopoly Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(LanguageEntryMonopolyDescription, _LanguageEntry2);
        function LanguageEntryMonopolyDescription() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(LanguageEntryMonopolyDescription, [{
          key: "chs",
          get: function get() {
            return "获取 100000 金币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Get 100000 coins";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "100000 コインを獲得する";
          }
        }]);
        return LanguageEntryMonopolyDescription;
      }(LanguageEntry)) || _class2);
      var Monopoly = exports('Monopoly', (_dec3 = RegisterAchivement("Monopoly"), _dec3(_class3 = /*#__PURE__*/function (_AchivementPrototype) {
        _inheritsLoose(Monopoly, _AchivementPrototype);
        function Monopoly() {
          return _AchivementPrototype.apply(this, arguments) || this;
        }
        var _proto = Monopoly.prototype;
        // 图标
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  return _context2.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context.t0 = res;
                          _context.next = 4;
                          return assets.load("Texture/Achivement/Monopoly/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context.t1 = _context.sent.value;
                          (0, _context.t0)(_context.t1);
                        case 6:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  }))));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(Monopoly, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Monopoly").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Monopoly Description").getValue(settingManager.data.language);
          }
        }, {
          key: "progress",
          get: function get() {
            return {
              progress: achivementManager.data.achivementData.resource.addGold,
              maxProgress: 100000
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 10000,
              diamond: 1000
            };
          }
        }]);
        return Monopoly;
      }(AchivementPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MonsterManager.ts", ['cc', './CharacterPrototype.ts'], function (exports) {
  var cclegacy, CharacterPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }],
    execute: function () {
      exports({
        getAllMonsterMapKeys: getAllMonsterMapKeys,
        getMonsterKey: getMonsterKey,
        getMonsterPrototype: getMonsterPrototype
      });
      cclegacy._RF.push({}, "88618ACZBVCP5ZhbpTPJKwf", "MonsterManager", undefined);

      // 该文件用于管理游戏中的玩家角色的系统
      var registry = new Map();
      var registryReverse = new Map();
      var sortData = new Map();

      // 获取玩家角色排序
      var getMonsterSort = exports('getMonsterSort', function getMonsterSort(key) {
        return sortData.get(key) || 0;
      });

      // 注册到玩家角色列表
      var registerMonster = exports('registerMonster', function registerMonster(key, sort) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
          sortData.set(key, sort || 0);
        };
      });

      // 获取所有注册的key
      function getAllMonsterMapKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取原型
      function getMonsterPrototype(key) {
        return registry.get(key);
      }

      // 根据原型或者实例获取key
      function getMonsterKey(proto) {
        if (proto instanceof CharacterPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/MpMedicine.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BackpackManager.ts', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts', './FightMapManager.ts', './CharacterPrototype.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, backpackManager, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, RegisterMedicine, MedicineType, getItemKey, RegisterItem, getFightMapInstance, FromType;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      RegisterMedicine = module.RegisterMedicine;
      MedicineType = module.MedicineType;
      getItemKey = module.getItemKey;
      RegisterItem = module.RegisterItem;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      FromType = module.FromType;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "1ad1a40u3pGEJ46kUTJ1kW/", "MpMedicine", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Entry = (_dec = RegisterLanguageEntry("MpMedicine"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "魔法药水";
          }
        }, {
          key: "eng",
          get: function get() {
            return "MpMedicine";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "MpMedicine";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("MpMedicine Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "回复300魔法值";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Recover 300 MP";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "Recover 300MP";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2);
      var MpMedicine = exports('MpMedicine', (_dec3 = RegisterItem("MpMedicine"), _dec4 = RegisterMedicine("MpMedicine", MedicineType.MpMedicine), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(MpMedicine, _ItemPrototype);
        function MpMedicine() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = MpMedicine.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/MpMedicine/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = function use(number) {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return;
          fightInstance.player.increaseMp({
            increase: 300,
            fromType: FromType.medicine
          });
          backpackManager.data.reduceCount(getItemKey(MpMedicine), number);
          backpackManager.save();
        };
        _createClass(MpMedicine, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("MpMedicine").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("MpMedicine Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return false;
          }
        }]);
        return MpMedicine;
      }(ItemPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Normal.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ddfe6izh7FCfrRyry+HloGJ", "Normal", undefined);
      var Normal = exports('Normal', /*#__PURE__*/function () {
        function Normal() {}
        Normal.number = function number(num, fixed) {
          if (fixed === void 0) {
            fixed = 0;
          }
          if (num < 10000) return num.toFixed(fixed);
          if (num < 1000000) return (num / 1000).toFixed(fixed || 2) + "K";
          if (num < 100000000) return (num / 10000).toFixed(fixed || 2) + "W";
          return (num / 1000000).toFixed(fixed || 2) + "M";
        };
        return Normal;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Onmyoji.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './AssetManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillPrototype, RegisterSkill, LanguageEntry, getBaseModManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "510146w18NCULT329keYnGv", "Onmyoji", undefined);
      var Name = (_dec = RegisterLanguageEntry("Onmyoji"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "阴阳师";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Onmyoji";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "阴阳師";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("Onmyoji Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u63D0\u5347 " + (lv * 20 + 30) + " \u5149\u653B\u51FB\u548C " + (lv * 20 + 30) + " \u6697\u653B\u51FB";
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "Boost " + (lv * 20 + 30) + " light attack and " + (lv * 20 + 30) + " dark attack";
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u5149\u653B " + (lv * 20 + 30) + " \u548C \u6697\u653B " + (lv * 20 + 30) + " \u3092\u30A2\u30C3\u30D7";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var Enchanter = exports('Enchanter', (_dec3 = RegisterSkill("Onmyoji"), _dec4 = RegisterPlayerSkill("Onmyoji", "Brave", true, "DivineLight"), _dec5 = RegisterSkillUpLevel("Onmyoji", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(Enchanter, _SkillPrototype);
        function Enchanter() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = Enchanter.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/Onmyoji/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(Enchanter, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Onmyoji").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("Onmyoji Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "extraProperty",
          get: function get() {
            var lv = Math.max(0, this.instance.lv - 1);
            return {
              lightAttack: lv * 20 + 30,
              darkAttack: lv * 20 + 30
            };
          }
        }]);
        return Enchanter;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PhysicalAttackReinforcement.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './FightMapManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, getFightMapInstance;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      cclegacy._RF.push({}, "6294679BvFGUKGd5C7nxikp", "PhysicalAttackReinforcement", undefined);
      var PhysicalAttackReinforcement = exports('PhysicalAttackReinforcement', {
        icon: function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Reinforcement/PhysicalAttackReinforcement/spriteFrame", SpriteFrame);
                case 2:
                  return _context.abrupt("return", _context.sent.value);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }(),
        property: function property() {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return {};
          return {
            physicalAttack: Math.max(fightInstance.player.physicalAttack * 0.01, 1) // 1% max hp
          };
        }
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PhysicalDefenseReinforcement.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './FightMapManager.ts'], function (exports) {
  var _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, CcNative, getFightMapInstance;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      cclegacy._RF.push({}, "1eb24forxxOa7OG50+DiKOo", "PhysicalDefenseReinforcement", undefined);
      var PhysicalDefenseReinforcement = exports('PhysicalDefenseReinforcement', {
        icon: function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return new CcNative.Asset.AssetManager("ModBaseResource").load("Texture/FightMap/Reinforcement/PhysicalDefenseReinforcement/spriteFrame", SpriteFrame);
                case 2:
                  return _context.abrupt("return", _context.sent.value);
                case 3:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }(),
        property: function property() {
          var fightInstance = getFightMapInstance();
          if (!fightInstance) return {};
          return {
            physicalDefense: fightInstance.player.physicalDefense * 0.01 // 1% max physicalDefense
          };
        }
      });

      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PlayerCharacter.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageEntry.ts', './LanguageManager.ts'], function () {
  var _inheritsLoose, _createClass, cclegacy, LanguageEntry, RegisterLanguageEntry;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2;
      cclegacy._RF.push({}, "4b0649LR3lM+IOXJBArJ8rv", "PlayerCharacter", undefined);

      // 注册到语言表中
      var RoseKnightName = (_dec = RegisterLanguageEntry("RoseKnight"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(RoseKnightName, _LanguageEntry);
        function RoseKnightName() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(RoseKnightName, [{
          key: "chs",
          get:
          // 中文
          function get() {
            return "玫瑰骑士";
          }
          // 英文
        }, {
          key: "eng",
          get: function get() {
            return "Rose Knight";
          }
          // 日语
        }, {
          key: "jpn",
          get: function get() {
            return "ローズナイト";
          }
        }]);
        return RoseKnightName;
      }(LanguageEntry)) || _class); // 注册到语言表中
      var RoseKnightDesc = (_dec2 = RegisterLanguageEntry("RoseKnight Desc"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(RoseKnightDesc, _LanguageEntry2);
        function RoseKnightDesc() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(RoseKnightDesc, [{
          key: "chs",
          get:
          // 中文
          function get() {
            return "优雅而又高贵的骑士";
          }
          // 英文
        }, {
          key: "eng",
          get: function get() {
            return "A graceful and noble knight";
          }
          // 日语
        }, {
          key: "jpn",
          get: function get() {
            return "美しいそして高貴な騎士";
          }
        }]);
        return RoseKnightDesc;
      }(LanguageEntry)) || _class2);
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PlayerCharacterManager.ts", ['cc', './CharacterPrototype.ts'], function (exports) {
  var cclegacy, CharacterPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }],
    execute: function () {
      exports({
        getAllPlayerCharacterMapKeys: getAllPlayerCharacterMapKeys,
        getPlayerCharacterKey: getPlayerCharacterKey,
        getPlayerCharacterPrototype: getPlayerCharacterPrototype
      });
      cclegacy._RF.push({}, "f0a873wskxIVJL6M0kucAJ/", "PlayerCharacterManager", undefined);

      // 该文件用于管理游戏中的玩家角色的系统
      var registry = new Map();
      var registryReverse = new Map();
      var sortData = new Map();

      // 获取玩家角色排序
      var getPlayerCharacterSort = exports('getPlayerCharacterSort', function getPlayerCharacterSort(key) {
        return sortData.get(key) || 0;
      });

      // 注册到玩家角色列表
      var RegisterPlayerCharacter = exports('RegisterPlayerCharacter', function RegisterPlayerCharacter(key, sort) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
          sortData.set(key, sort || 0);
        };
      });

      // 获取所有注册的key
      function getAllPlayerCharacterMapKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取原型
      function getPlayerCharacterPrototype(key) {
        return registry.get(key);
      }

      // 根据原型或者实例获取key
      function getPlayerCharacterKey(proto) {
        if (proto instanceof CharacterPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/PlayerToPrefabMap.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports({
        bindPlayerToComponent: bindPlayerToComponent,
        getComponentByPlayer: getComponentByPlayer
      });
      cclegacy._RF.push({}, "ecd08HMRshIG5Tj/E9BO/do", "PlayerToPrefabMap", undefined);
      var PlayerToPrefabMap = new WeakMap();
      function getComponentByPlayer(player) {
        return PlayerToPrefabMap.get(player);
      }
      function bindPlayerToComponent(player, component) {
        PlayerToPrefabMap.set(player, component);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Property.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageEntry.ts', './LanguageManager.ts'], function () {
  var _inheritsLoose, _createClass, cclegacy, LanguageEntry, RegisterLanguageEntry;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5f24421ShVACrMN4CrPnBm4", "Property", undefined);
      (function (_dec, _class) {
        var _ = (_dec = RegisterLanguageEntry("maxHp"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
          _inheritsLoose(_, _LanguageEntry);
          function _() {
            return _LanguageEntry.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "生命值";
            }
          }, {
            key: "eng",
            get: function get() {
              return "MaxHP";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "最大HP";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class);
      })();
      (function (_dec2, _class2) {
        var _ = (_dec2 = RegisterLanguageEntry("maxMp"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
          _inheritsLoose(_, _LanguageEntry2);
          function _() {
            return _LanguageEntry2.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "魔法值";
            }
          }, {
            key: "eng",
            get: function get() {
              return "MaxMP";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "最大MP";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class2);
      })();
      (function (_dec3, _class3) {
        var _ = (_dec3 = RegisterLanguageEntry("physicalAttack"), _dec3(_class3 = /*#__PURE__*/function (_LanguageEntry3) {
          _inheritsLoose(_, _LanguageEntry3);
          function _() {
            return _LanguageEntry3.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "攻击力";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Attack";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "攻撃力";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class3);
      })();
      (function (_dec4, _class4) {
        var _ = (_dec4 = RegisterLanguageEntry("magicAttack"), _dec4(_class4 = /*#__PURE__*/function (_LanguageEntry4) {
          _inheritsLoose(_, _LanguageEntry4);
          function _() {
            return _LanguageEntry4.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "魔力值";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Magic";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "魔力值";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class4);
      })();
      (function (_dec5, _class5) {
        var _ = (_dec5 = RegisterLanguageEntry("physicalDefense"), _dec5(_class5 = /*#__PURE__*/function (_LanguageEntry5) {
          _inheritsLoose(_, _LanguageEntry5);
          function _() {
            return _LanguageEntry5.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "防御";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Defense";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "防御";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class5);
      })();
      (function (_dec6, _class6) {
        var _ = (_dec6 = RegisterLanguageEntry("magicDefense"), _dec6(_class6 = /*#__PURE__*/function (_LanguageEntry6) {
          _inheritsLoose(_, _LanguageEntry6);
          function _() {
            return _LanguageEntry6.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "魔抗";
            }
          }, {
            key: "eng",
            get: function get() {
              return "MagicDefense";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "魔抗";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class6);
      })();
      (function (_dec7, _class7) {
        var _ = (_dec7 = RegisterLanguageEntry("lightAttack"), _dec7(_class7 = /*#__PURE__*/function (_LanguageEntry7) {
          _inheritsLoose(_, _LanguageEntry7);
          function _() {
            return _LanguageEntry7.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "光攻击";
            }
          }, {
            key: "eng",
            get: function get() {
              return "LightAttack";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "光攻";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class7);
      })();
      (function (_dec8, _class8) {
        var _ = (_dec8 = RegisterLanguageEntry("darkAttack"), _dec8(_class8 = /*#__PURE__*/function (_LanguageEntry8) {
          _inheritsLoose(_, _LanguageEntry8);
          function _() {
            return _LanguageEntry8.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "暗攻击";
            }
          }, {
            key: "eng",
            get: function get() {
              return "DarkAttack";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "暗攻";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class8);
      })();
      (function (_dec9, _class9) {
        var _ = (_dec9 = RegisterLanguageEntry("lightResistance"), _dec9(_class9 = /*#__PURE__*/function (_LanguageEntry9) {
          _inheritsLoose(_, _LanguageEntry9);
          function _() {
            return _LanguageEntry9.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "光抗";
            }
          }, {
            key: "eng",
            get: function get() {
              return "LightResistance";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "光抗";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class9);
      })();
      (function (_dec10, _class10) {
        var _ = (_dec10 = RegisterLanguageEntry("darkResistance"), _dec10(_class10 = /*#__PURE__*/function (_LanguageEntry10) {
          _inheritsLoose(_, _LanguageEntry10);
          function _() {
            return _LanguageEntry10.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "暗抗";
            }
          }, {
            key: "eng",
            get: function get() {
              return "DarkResistance";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "暗抗";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class10);
      })();
      (function (_dec11, _class11) {
        var _ = (_dec11 = RegisterLanguageEntry("physicalPenetration"), _dec11(_class11 = /*#__PURE__*/function (_LanguageEntry11) {
          _inheritsLoose(_, _LanguageEntry11);
          function _() {
            return _LanguageEntry11.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "物理穿透";
            }
          }, {
            key: "eng",
            get: function get() {
              return "PhysicalPenetration";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "物理貫通";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class11);
      })();
      (function (_dec12, _class12) {
        var _ = (_dec12 = RegisterLanguageEntry("magicPenetration"), _dec12(_class12 = /*#__PURE__*/function (_LanguageEntry12) {
          _inheritsLoose(_, _LanguageEntry12);
          function _() {
            return _LanguageEntry12.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "魔法穿透";
            }
          }, {
            key: "eng",
            get: function get() {
              return "MagicPenetration";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "魔法貫通";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class12);
      })();
      (function (_dec13, _class13) {
        var _ = (_dec13 = RegisterLanguageEntry("criticalRate"), _dec13(_class13 = /*#__PURE__*/function (_LanguageEntry13) {
          _inheritsLoose(_, _LanguageEntry13);
          function _() {
            return _LanguageEntry13.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "暴击率";
            }
          }, {
            key: "eng",
            get: function get() {
              return "CriticalRate";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "暴擊率";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class13);
      })();
      (function (_dec14, _class14) {
        var _ = (_dec14 = RegisterLanguageEntry("criticalDamage"), _dec14(_class14 = /*#__PURE__*/function (_LanguageEntry14) {
          _inheritsLoose(_, _LanguageEntry14);
          function _() {
            return _LanguageEntry14.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "暴击伤害";
            }
          }, {
            key: "eng",
            get: function get() {
              return "CriticalDamage";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "暴擊ダメージ";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class14);
      })();
      (function (_dec15, _class15) {
        var _ = (_dec15 = RegisterLanguageEntry("attackSpeed"), _dec15(_class15 = /*#__PURE__*/function (_LanguageEntry15) {
          _inheritsLoose(_, _LanguageEntry15);
          function _() {
            return _LanguageEntry15.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "攻击速度";
            }
          }, {
            key: "eng",
            get: function get() {
              return "AttackSpeed";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "攻撃速度";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class15);
      })();
      (function (_dec16, _class16) {
        var _ = (_dec16 = RegisterLanguageEntry("coolDown"), _dec16(_class16 = /*#__PURE__*/function (_LanguageEntry16) {
          _inheritsLoose(_, _LanguageEntry16);
          function _() {
            return _LanguageEntry16.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "冷却缩减";
            }
          }, {
            key: "eng",
            get: function get() {
              return "CoolDown";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "クールダウン短縮";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class16);
      })();
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/reactive.ts", ['cc', './index8.ts', './baseHandlers.ts', './collectionHandlers.ts', './constants.ts', './ref.ts', './general.ts'], function (exports) {
  var cclegacy, warn, mutableHandlers, shallowReactiveHandlers, readonlyHandlers, shallowReadonlyHandlers, mutableCollectionHandlers, shallowCollectionHandlers, readonlyCollectionHandlers, shallowReadonlyCollectionHandlers, ReactiveFlags, isObject, toRawType, hasOwn, def;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      mutableHandlers = module.mutableHandlers;
      shallowReactiveHandlers = module.shallowReactiveHandlers;
      readonlyHandlers = module.readonlyHandlers;
      shallowReadonlyHandlers = module.shallowReadonlyHandlers;
    }, function (module) {
      mutableCollectionHandlers = module.mutableCollectionHandlers;
      shallowCollectionHandlers = module.shallowCollectionHandlers;
      readonlyCollectionHandlers = module.readonlyCollectionHandlers;
      shallowReadonlyCollectionHandlers = module.shallowReadonlyCollectionHandlers;
    }, function (module) {
      ReactiveFlags = module.ReactiveFlags;
    }, null, function (module) {
      isObject = module.isObject;
      toRawType = module.toRawType;
      hasOwn = module.hasOwn;
      def = module.def;
    }],
    execute: function () {
      exports({
        isProxy: isProxy,
        isReactive: isReactive,
        isReadonly: isReadonly,
        isShallow: isShallow,
        markRaw: markRaw,
        reactive: reactive,
        readonly: readonly,
        shallowReactive: shallowReactive,
        shallowReadonly: shallowReadonly,
        toRaw: toRaw
      });
      cclegacy._RF.push({}, "91366F+zDBKb6chfdSMIjpb", "reactive", undefined);
      var reactiveMap = exports('reactiveMap', new WeakMap());
      var shallowReactiveMap = exports('shallowReactiveMap', new WeakMap());
      var readonlyMap = exports('readonlyMap', new WeakMap());
      var shallowReadonlyMap = exports('shallowReadonlyMap', new WeakMap());
      var TargetType = /*#__PURE__*/function (TargetType) {
        TargetType[TargetType["INVALID"] = 0] = "INVALID";
        TargetType[TargetType["COMMON"] = 1] = "COMMON";
        TargetType[TargetType["COLLECTION"] = 2] = "COLLECTION";
        return TargetType;
      }(TargetType || {});
      function targetTypeMap(rawType) {
        switch (rawType) {
          case 'Object':
          case 'Array':
            return TargetType.COMMON;
          case 'Map':
          case 'Set':
          case 'WeakMap':
          case 'WeakSet':
            return TargetType.COLLECTION;
          default:
            return TargetType.INVALID;
        }
      }
      function getTargetType(value) {
        return value[ReactiveFlags.SKIP] || !Object.isExtensible(value) ? TargetType.INVALID : targetTypeMap(toRawType(value));
      }

      // only unwrap nested ref

      /**
       * Returns a reactive proxy of the object.
       *
       * The reactive conversion is "deep": it affects all nested properties. A
       * reactive object also deeply unwraps any properties that are refs while
       * maintaining reactivity.
       *
       * @example
       * ```js
       * const obj = reactive({ count: 0 })
       * ```
       *
       * @param target - The source object.
       * @see {@link https://vuejs.org/api/reactivity-core.html#reactive}
       */

      function reactive(target) {
        // if trying to observe a readonly proxy, return the readonly version.
        if (isReadonly(target)) {
          return target;
        }
        return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
      }
      /**
       * Shallow version of {@link reactive()}.
       *
       * Unlike {@link reactive()}, there is no deep conversion: only root-level
       * properties are reactive for a shallow reactive object. Property values are
       * stored and exposed as-is - this also means properties with ref values will
       * not be automatically unwrapped.
       *
       * @example
       * ```js
       * const state = shallowReactive({
       *   foo: 1,
       *   nested: {
       *     bar: 2
       *   }
       * })
       *
       * // mutating state's own properties is reactive
       * state.foo++
       *
       * // ...but does not convert nested objects
       * isReactive(state.nested) // false
       *
       * // NOT reactive
       * state.nested.bar++
       * ```
       *
       * @param target - The source object.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#shallowreactive}
       */
      function shallowReactive(target) {
        return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);
      }
      /**
       * Takes an object (reactive or plain) or a ref and returns a readonly proxy to
       * the original.
       *
       * A readonly proxy is deep: any nested property accessed will be readonly as
       * well. It also has the same ref-unwrapping behavior as {@link reactive()},
       * except the unwrapped values will also be made readonly.
       *
       * @example
       * ```js
       * const original = reactive({ count: 0 })
       *
       * const copy = readonly(original)
       *
       * watchEffect(() => {
       *   // works for reactivity tracking
       *   console.log(copy.count)
       * })
       *
       * // mutating original will trigger watchers relying on the copy
       * original.count++
       *
       * // mutating the copy will fail and result in a warning
       * copy.count++ // warning!
       * ```
       *
       * @param target - The source object.
       * @see {@link https://vuejs.org/api/reactivity-core.html#readonly}
       */
      function readonly(target) {
        return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
      }

      /**
       * Shallow version of {@link readonly()}.
       *
       * Unlike {@link readonly()}, there is no deep conversion: only root-level
       * properties are made readonly. Property values are stored and exposed as-is -
       * this also means properties with ref values will not be automatically
       * unwrapped.
       *
       * @example
       * ```js
       * const state = shallowReadonly({
       *   foo: 1,
       *   nested: {
       *     bar: 2
       *   }
       * })
       *
       * // mutating state's own properties will fail
       * state.foo++
       *
       * // ...but works on nested objects
       * isReadonly(state.nested) // false
       *
       * // works
       * state.nested.bar++
       * ```
       *
       * @param target - The source object.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#shallowreadonly}
       */
      function shallowReadonly(target) {
        return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);
      }
      function createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {
        if (!isObject(target)) {
          {
            warn("value cannot be made " + (isReadonly ? 'readonly' : 'reactive') + ": " + String(target));
          }
          return target;
        }
        // target is already a Proxy, return it.
        // exception: calling readonly() on a reactive object
        if (target[ReactiveFlags.RAW] && !(isReadonly && target[ReactiveFlags.IS_REACTIVE])) {
          return target;
        }
        // target already has corresponding Proxy
        var existingProxy = proxyMap.get(target);
        if (existingProxy) {
          return existingProxy;
        }
        // only specific value types can be observed.
        var targetType = getTargetType(target);
        if (targetType === TargetType.INVALID) {
          return target;
        }
        var proxy = new Proxy(target, targetType === TargetType.COLLECTION ? collectionHandlers : baseHandlers);
        proxyMap.set(target, proxy);
        return proxy;
      }

      /**
       * Checks if an object is a proxy created by {@link reactive()} or
       * {@link shallowReactive()} (or {@link ref()} in some cases).
       *
       * @example
       * ```js
       * isReactive(reactive({}))            // => true
       * isReactive(readonly(reactive({})))  // => true
       * isReactive(ref({}).value)           // => true
       * isReactive(readonly(ref({})).value) // => true
       * isReactive(ref(true))               // => false
       * isReactive(shallowRef({}).value)    // => false
       * isReactive(shallowReactive({}))     // => true
       * ```
       *
       * @param value - The value to check.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#isreactive}
       */
      function isReactive(value) {
        if (isReadonly(value)) {
          return isReactive(value[ReactiveFlags.RAW]);
        }
        return !!(value && value[ReactiveFlags.IS_REACTIVE]);
      }

      /**
       * Checks whether the passed value is a readonly object. The properties of a
       * readonly object can change, but they can't be assigned directly via the
       * passed object.
       *
       * The proxies created by {@link readonly()} and {@link shallowReadonly()} are
       * both considered readonly, as is a computed ref without a set function.
       *
       * @param value - The value to check.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#isreadonly}
       */
      function isReadonly(value) {
        return !!(value && value[ReactiveFlags.IS_READONLY]);
      }
      function isShallow(value) {
        return !!(value && value[ReactiveFlags.IS_SHALLOW]);
      }

      /**
       * Checks if an object is a proxy created by {@link reactive},
       * {@link readonly}, {@link shallowReactive} or {@link shallowReadonly()}.
       *
       * @param value - The value to check.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#isproxy}
       */
      function isProxy(value) {
        return value ? !!value[ReactiveFlags.RAW] : false;
      }

      /**
       * Returns the raw, original object of a Vue-created proxy.
       *
       * `toRaw()` can return the original object from proxies created by
       * {@link reactive()}, {@link readonly()}, {@link shallowReactive()} or
       * {@link shallowReadonly()}.
       *
       * This is an escape hatch that can be used to temporarily read without
       * incurring proxy access / tracking overhead or write without triggering
       * changes. It is **not** recommended to hold a persistent reference to the
       * original object. Use with caution.
       *
       * @example
       * ```js
       * const foo = {}
       * const reactiveFoo = reactive(foo)
       *
       * console.log(toRaw(reactiveFoo) === foo) // true
       * ```
       *
       * @param observed - The object for which the "raw" value is requested.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#toraw}
       */
      function toRaw(observed) {
        var raw = observed && observed[ReactiveFlags.RAW];
        return raw ? toRaw(raw) : observed;
      }
      /**
       * Marks an object so that it will never be converted to a proxy. Returns the
       * object itself.
       *
       * @example
       * ```js
       * const foo = markRaw({})
       * console.log(isReactive(reactive(foo))) // false
       *
       * // also works when nested inside other reactive objects
       * const bar = reactive({ foo })
       * console.log(isReactive(bar.foo)) // false
       * ```
       *
       * **Warning:** `markRaw()` together with the shallow APIs such as
       * {@link shallowReactive()} allow you to selectively opt-out of the default
       * deep reactive/readonly conversion and embed raw, non-proxied objects in your
       * state graph.
       *
       * @param value - The object to be marked as "raw".
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#markraw}
       */
      function markRaw(value) {
        if (!hasOwn(value, ReactiveFlags.SKIP) && Object.isExtensible(value)) {
          def(value, ReactiveFlags.SKIP, true);
        }
        return value;
      }

      /**
       * Returns a reactive proxy of the given value (if possible).
       *
       * If the given value is not an object, the original value itself is returned.
       *
       * @param value - The value for which a reactive proxy shall be created.
       */

      var toReactive = exports('toReactive', function toReactive(value) {
        return (
          // @ts-ignore
          isObject(value) ? reactive(value) : value
        );
      });

      /**
       * Returns a readonly proxy of the given value (if possible).
       *
       * If the given value is not an object, the original value itself is returned.
       *
       * @param value - The value for which a readonly proxy shall be created.
       */
      var toReadonly = exports('toReadonly', function toReadonly(value) {
        return (
          // @ts-ignore
          isObject(value) ? readonly(value) : value
        );
      });
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ref.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts', './constants.ts', './dep.ts', './reactive.ts', './general.ts'], function (exports) {
  var _createClass, cclegacy, warn, ReactiveFlags, TriggerOpTypes, TrackOpTypes, Dep, getDepFromReactive, isReactive, isProxy, toRaw, toReactive, isShallow, isReadonly, isFunction, isArray, isObject, hasChanged;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      ReactiveFlags = module.ReactiveFlags;
      TriggerOpTypes = module.TriggerOpTypes;
      TrackOpTypes = module.TrackOpTypes;
    }, function (module) {
      Dep = module.Dep;
      getDepFromReactive = module.getDepFromReactive;
    }, function (module) {
      isReactive = module.isReactive;
      isProxy = module.isProxy;
      toRaw = module.toRaw;
      toReactive = module.toReactive;
      isShallow = module.isShallow;
      isReadonly = module.isReadonly;
    }, function (module) {
      isFunction = module.isFunction;
      isArray = module.isArray;
      isObject = module.isObject;
      hasChanged = module.hasChanged;
    }],
    execute: function () {
      exports({
        customRef: customRef,
        isRef: isRef,
        proxyRefs: proxyRefs,
        ref: ref,
        shallowRef: shallowRef,
        toRef: toRef,
        toRefs: toRefs,
        toValue: toValue,
        triggerRef: triggerRef,
        unref: unref
      });
      var _ReactiveFlags$IS_REF, _ReactiveFlags$IS_SHA, _ReactiveFlags$IS_REF2, _ReactiveFlags$IS_REF3, _ReactiveFlags$IS_REF4, _ReactiveFlags$IS_REA;
      cclegacy._RF.push({}, "7a66c2ukdxNyrxGP7935x0K", "ref", undefined);

      /**
       * Checks if a value is a ref object.
       *
       * @param r - The value to inspect.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#isref}
       */

      function isRef(r) {
        return r ? r[ReactiveFlags.IS_REF] === true : false;
      }

      /**
       * Takes an inner value and returns a reactive and mutable ref object, which
       * has a single property `.value` that points to the inner value.
       *
       * @param value - The object to wrap in the ref.
       * @see {@link https://vuejs.org/api/reactivity-core.html#ref}
       */

      function ref(value) {
        return createRef(value, false);
      }

      /**
       * Shallow version of {@link ref()}.
       *
       * @example
       * ```js
       * const state = shallowRef({ count: 1 })
       *
       * // does NOT trigger change
       * state.value.count = 2
       *
       * // does trigger change
       * state.value = { count: 2 }
       * ```
       *
       * @param value - The "inner value" for the shallow ref.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#shallowref}
       */

      function shallowRef(value) {
        return createRef(value, true);
      }
      function createRef(rawValue, shallow) {
        if (isRef(rawValue)) {
          return rawValue;
        }
        return new RefImpl(rawValue, shallow);
      }

      /**
       * @internal
       */
      _ReactiveFlags$IS_REF = ReactiveFlags.IS_REF;
      _ReactiveFlags$IS_SHA = ReactiveFlags.IS_SHALLOW;
      var RefImpl = /*#__PURE__*/function () {
        function RefImpl(value, isShallow) {
          this._value = void 0;
          this._rawValue = void 0;
          this.dep = new Dep();
          this[_ReactiveFlags$IS_REF] = true;
          this[_ReactiveFlags$IS_SHA] = false;
          this._rawValue = isShallow ? value : toRaw(value);
          this._value = isShallow ? value : toReactive(value);
          this[ReactiveFlags.IS_SHALLOW] = isShallow;
        }
        _createClass(RefImpl, [{
          key: "value",
          get: function get() {
            {
              this.dep.track({
                target: this,
                type: TrackOpTypes.GET,
                key: 'value'
              });
            }
            return this._value;
          },
          set: function set(newValue) {
            var oldValue = this._rawValue;
            var useDirectValue = this[ReactiveFlags.IS_SHALLOW] || isShallow(newValue) || isReadonly(newValue);
            newValue = useDirectValue ? newValue : toRaw(newValue);
            if (hasChanged(newValue, oldValue)) {
              this._rawValue = newValue;
              this._value = useDirectValue ? newValue : toReactive(newValue);
              {
                this.dep.trigger({
                  target: this,
                  type: TriggerOpTypes.SET,
                  key: 'value',
                  newValue: newValue,
                  oldValue: oldValue
                });
              }
            }
          }
        }]);
        return RefImpl;
      }();
      /**
       * Force trigger effects that depends on a shallow ref. This is typically used
       * after making deep mutations to the inner value of a shallow ref.
       *
       * @example
       * ```js
       * const shallow = shallowRef({
       *   greet: 'Hello, world'
       * })
       *
       * // Logs "Hello, world" once for the first run-through
       * watchEffect(() => {
       *   console.log(shallow.value.greet)
       * })
       *
       * // This won't trigger the effect because the ref is shallow
       * shallow.value.greet = 'Hello, universe'
       *
       * // Logs "Hello, universe"
       * triggerRef(shallow)
       * ```
       *
       * @param ref - The ref whose tied effects shall be executed.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#triggerref}
       */
      function triggerRef(ref) {
        // ref may be an instance of ObjectRefImpl
        if (ref.dep) {
          {
            ref.dep.trigger({
              target: ref,
              type: TriggerOpTypes.SET,
              key: 'value',
              newValue: ref._value
            });
          }
        }
      }
      /**
       * Returns the inner value if the argument is a ref, otherwise return the
       * argument itself. This is a sugar function for
       * `val = isRef(val) ? val.value : val`.
       *
       * @example
       * ```js
       * function useFoo(x: number | Ref<number>) {
       *   const unwrapped = unref(x)
       *   // unwrapped is guaranteed to be number now
       * }
       * ```
       *
       * @param ref - Ref or plain value to be converted into the plain value.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#unref}
       */
      function unref(ref) {
        return isRef(ref) ? ref.value : ref;
      }

      /**
       * Normalizes values / refs / getters to values.
       * This is similar to {@link unref()}, except that it also normalizes getters.
       * If the argument is a getter, it will be invoked and its return value will
       * be returned.
       *
       * @example
       * ```js
       * toValue(1) // 1
       * toValue(ref(1)) // 1
       * toValue(() => 1) // 1
       * ```
       *
       * @param source - A getter, an existing ref, or a non-function value.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#tovalue}
       */
      function toValue(source) {
        return isFunction(source) ? source() : unref(source);
      }
      var shallowUnwrapHandlers = {
        get: function get(target, key, receiver) {
          return key === ReactiveFlags.RAW ? target : unref(Reflect.get(target, key, receiver));
        },
        set: function set(target, key, value, receiver) {
          var oldValue = target[key];
          if (isRef(oldValue) && !isRef(value)) {
            oldValue.value = value;
            return true;
          } else {
            return Reflect.set(target, key, value, receiver);
          }
        }
      };

      /**
       * Returns a proxy for the given object that shallowly unwraps properties that
       * are refs. If the object already is reactive, it's returned as-is. If not, a
       * new reactive proxy is created.
       *
       * @param objectWithRefs - Either an already-reactive object or a simple object
       * that contains refs.
       */
      function proxyRefs(objectWithRefs) {
        return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
      }
      _ReactiveFlags$IS_REF2 = ReactiveFlags.IS_REF;
      var CustomRefImpl = /*#__PURE__*/function () {
        function CustomRefImpl(factory) {
          this.dep = void 0;
          this._get = void 0;
          this._set = void 0;
          this[_ReactiveFlags$IS_REF2] = true;
          this._value = undefined;
          var dep = this.dep = new Dep();
          var _factory = factory(dep.track.bind(dep), dep.trigger.bind(dep)),
            get = _factory.get,
            set = _factory.set;
          this._get = get;
          this._set = set;
        }
        _createClass(CustomRefImpl, [{
          key: "value",
          get: function get() {
            return this._value = this._get();
          },
          set: function set(newVal) {
            this._set(newVal);
          }
        }]);
        return CustomRefImpl;
      }();
      /**
       * Creates a customized ref with explicit control over its dependency tracking
       * and updates triggering.
       *
       * @param factory - The function that receives the `track` and `trigger` callbacks.
       * @see {@link https://vuejs.org/api/reactivity-advanced.html#customref}
       */
      function customRef(factory) {
        return new CustomRefImpl(factory);
      }
      /**
       * Converts a reactive object to a plain object where each property of the
       * resulting object is a ref pointing to the corresponding property of the
       * original object. Each individual ref is created using {@link toRef()}.
       *
       * @param object - Reactive object to be made into an object of linked refs.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#torefs}
       */
      function toRefs(object) {
        if (!isProxy(object)) {
          warn("toRefs() expects a reactive object but received a plain one.");
        }
        var ret = isArray(object) ? new Array(object.length) : {};
        for (var _key2 in object) {
          ret[_key2] = propertyToRef(object, _key2);
        }
        return ret;
      }
      _ReactiveFlags$IS_REF3 = ReactiveFlags.IS_REF;
      var ObjectRefImpl = /*#__PURE__*/function () {
        function ObjectRefImpl(_object, _key, _defaultValue) {
          this[_ReactiveFlags$IS_REF3] = true;
          this._value = undefined;
          this._object = _object;
          this._key = _key;
          this._defaultValue = _defaultValue;
        }
        _createClass(ObjectRefImpl, [{
          key: "value",
          get: function get() {
            var val = this._object[this._key];
            return this._value = val === undefined ? this._defaultValue : val;
          },
          set: function set(newVal) {
            this._object[this._key] = newVal;
          }
        }, {
          key: "dep",
          get: function get() {
            return getDepFromReactive(toRaw(this._object), this._key);
          }
        }]);
        return ObjectRefImpl;
      }();
      _ReactiveFlags$IS_REF4 = ReactiveFlags.IS_REF;
      _ReactiveFlags$IS_REA = ReactiveFlags.IS_READONLY;
      var GetterRefImpl = /*#__PURE__*/function () {
        function GetterRefImpl(_getter) {
          this[_ReactiveFlags$IS_REF4] = true;
          this[_ReactiveFlags$IS_REA] = true;
          this._value = undefined;
          this._getter = _getter;
        }
        _createClass(GetterRefImpl, [{
          key: "value",
          get: function get() {
            return this._value = this._getter();
          }
        }]);
        return GetterRefImpl;
      }(); // @ts-ignore
      /**
       * Used to normalize values / refs / getters into refs.
       *
       * @example
       * ```js
       * // returns existing refs as-is
       * toRef(existingRef)
       *
       * // creates a ref that calls the getter on .value access
       * toRef(() => props.foo)
       *
       * // creates normal refs from non-function values
       * // equivalent to ref(1)
       * toRef(1)
       * ```
       *
       * Can also be used to create a ref for a property on a source reactive object.
       * The created ref is synced with its source property: mutating the source
       * property will update the ref, and vice-versa.
       *
       * @example
       * ```js
       * const state = reactive({
       *   foo: 1,
       *   bar: 2
       * })
       *
       * const fooRef = toRef(state, 'foo')
       *
       * // mutating the ref updates the original
       * fooRef.value++
       * console.log(state.foo) // 2
       *
       * // mutating the original also updates the ref
       * state.foo++
       * console.log(fooRef.value) // 3
       * ```
       *
       * @param source - A getter, an existing ref, a non-function value, or a
       *                 reactive object to create a property ref from.
       * @param [key] - (optional) Name of the property in the reactive object.
       * @see {@link https://vuejs.org/api/reactivity-utilities.html#toref}
       */
      function toRef(source, key, defaultValue) {
        if (isRef(source)) {
          return source;
        } else if (isFunction(source)) {
          return new GetterRefImpl(source);
        } else if (isObject(source) && arguments.length > 1) {
          return propertyToRef(source, key, defaultValue);
        } else {
          return ref(source);
        }
      }
      function propertyToRef(source, key, defaultValue) {
        var val = source[key];
        return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);
      }

      /**
       * This is a special exported interface for other packages to declare
       * additional types that should bail out for ref unwrapping. For example
       * \@vue/runtime-dom can declare it like so in its d.ts:
       *
       * ``` ts
       * declare module '@vue/reactivity' {
       *   export interface RefUnwrapBailTypes {
       *     runtimeDOMBailTypes: Node | Window
       *   }
       * }
       * ```
       */
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RemoteAsset.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _asyncToGenerator, _createClass, _regeneratorRuntime, cclegacy, assetManager;
  return {
    setters: [function (module) {
      _asyncToGenerator = module.asyncToGenerator;
      _createClass = module.createClass;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      assetManager = module.assetManager;
    }],
    execute: function () {
      exports('loadRemote', loadRemote);
      cclegacy._RF.push({}, "048bcGV2lVLU6f2QVBPlWqN", "RemoteAsset", undefined);
      var REMOTE_MAP = new Map();
      function loadRemote(_x, _x2) {
        return _loadRemote.apply(this, arguments);
      }
      function _loadRemote() {
        _loadRemote = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(path, options) {
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (options === void 0) {
                  options = null;
                }
                if (!REMOTE_MAP.get(path)) {
                  _context.next = 3;
                  break;
                }
                return _context.abrupt("return", REMOTE_MAP.get(path));
              case 3:
                return _context.abrupt("return", new Promise(function (res) {
                  assetManager.loadRemote(path, options, function (err, asset) {
                    if (err) throw err;
                    var assetPack = new RemoteAssetPack(asset, path);
                    if (options.cache) REMOTE_MAP.set(path, assetPack);
                    res(assetPack);
                  });
                }));
              case 4:
              case "end":
                return _context.stop();
            }
          }, _callee);
        }));
        return _loadRemote.apply(this, arguments);
      }
      var RemoteAssetPack = exports('RemoteAssetPack', /*#__PURE__*/function () {
        function RemoteAssetPack(asset, cachePath) {
          this.asset = asset;
          this.cachePath = cachePath;
        }
        var _proto = RemoteAssetPack.prototype;
        _proto.addRef = function addRef() {
          this.asset.addRef();
        };
        _proto.decRef = function decRef() {
          this.asset.decRef();
          if (this.asset.refCount === 0) {
            REMOTE_MAP["delete"](this.cachePath);
          }
        };
        _createClass(RemoteAssetPack, [{
          key: "value",
          get: function get() {
            return this.asset;
          }
        }]);
        return RemoteAssetPack;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ResourceManager.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Manager.ts', './Config.ts'], function (exports) {
  var _inheritsLoose, _createClass, cclegacy, Manager, BaseEventManagerData, Config;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Manager = module.Manager;
      BaseEventManagerData = module.BaseEventManagerData;
    }, function (module) {
      Config = module.Config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "d4d56dP67VIhpgyjM2BvdoS", "ResourceManager", undefined);
      var ResourcecDTO = function ResourcecDTO(data) {
        this.gold = 1000;
        this.diamond = 0;
        if (data) {
          this.gold = data.gold;
          this.diamond = data.diamond;
        }
      };
      var ResourcecData = exports('ResourcecData', /*#__PURE__*/function (_BaseEventManagerData) {
        _inheritsLoose(ResourcecData, _BaseEventManagerData);
        function ResourcecData(data) {
          var _this;
          _this = _BaseEventManagerData.call(this) || this;
          _this._gold = 10000;
          _this._diamond = 1000;
          if (data) {
            _this._gold = data.gold;
            _this._diamond = data.diamond;
          }
          return _this;
        }
        var _proto = ResourcecData.prototype;
        _proto.addGold = function addGold(value) {
          this._gold += value || 0;
          this.emit("goldChange", value);
        };
        _proto.reduceGold = function reduceGold(value) {
          this._gold -= value || 0;
          this.emit("goldChange", -value);
        };
        _proto.addDiamond = function addDiamond(value) {
          this._diamond += value || 0;
          this.emit("diamondChange", value);
        };
        _proto.reduceDiamond = function reduceDiamond(value) {
          this._diamond -= value || 0;
          this.emit("diamondChange", -value);
        };
        _createClass(ResourcecData, [{
          key: "gold",
          get: function get() {
            return this._gold;
          }
        }, {
          key: "diamond",
          get: function get() {
            return this._diamond;
          }
        }]);
        return ResourcecData;
      }(BaseEventManagerData));
      var resourceManager = exports('resourceManager', new Manager({
        storageKey: "slaughter:game:resource",
        descrypt: Config.descrypt,
        Constructor: ResourcecData,
        DtoCostructor: ResourcecDTO
      }));
      try {
        // @ts-ignore
        window.resourceManager = resourceManager;
      } catch (e) {}
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RoomPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _inheritsLoose, cclegacy, v2;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      v2 = module.v2;
    }],
    execute: function () {
      cclegacy._RF.push({}, "ad75cGgQC1Pmrxy8UyOeQAk", "RoomPrototype", undefined);
      // 基础房间类型的原型
      var RoomPrototype = exports('RoomPrototype', /*#__PURE__*/function () {
        function RoomPrototype(instance) {
          this.pos = v2(0, 0);
          this.size = v2(5, 5);
          // 是否是特殊房间
          this.isSpecialRoom = false;
          this.hasUsePosition = new Set();
          this.instance = instance;
          this.size.x = Math.floor(Math.random() * 4) + 4;
          this.size.y = Math.floor(Math.random() * 4) + 4;
        }

        // 获取可用坐标
        var _proto = RoomPrototype.prototype;
        _proto.getCanUsePosition = function getCanUsePosition() {
          var allPos = [];
          for (var y = 0; y < this.size.y; y++) {
            for (var x = 0; x < this.size.x; x++) {
              if (!this.hasUsePosition.has(x + "-" + y)) allPos.push(v2(x, y));
            }
          }
          if (allPos.length === 0) return null;
          var index = Math.floor(Math.random() * allPos.length);
          this.hasUsePosition.add(allPos[index].x + "-" + allPos[index].y);
          return allPos[index];
        };
        _proto.createMapAtlas = function createMapAtlas() {
          var result = [];
          for (var y = 0; y < this.size.y; y++) {
            result[y] = result[y] || [];
            for (var x = 0; x < this.size.x; x++) {
              var icon = this.instance.proto.floorIcon.floor[Math.floor(Math.random() * this.instance.proto.floorIcon.floor.length)];
              result[y][x] = result[y][x] || [icon];
            }
          }
          return result;
        };
        _proto.createMonsterData = function createMonsterData() {
          var result = [],
            count = Math.floor(Math.random() * Math.max(this.size.y, this.size.x) + 2);
          for (var i = 0; i < count; i++) {
            var monsterData = this.instance.proto.monsterData.monsters();
            var pos = this.getCanUsePosition();
            result.push({
              dto: monsterData,
              position: pos,
              isBoss: false,
              character: this.instance.createMonsterInstance(monsterData.dto)
            });
          }
          return result;
        };
        _proto.createTreasureData = function createTreasureData() {
          var result = [];
          var treasureLevel = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3];
          for (var i = 0; i < this.size.x + this.size.y + 2; i++) {
            // 3.5% 出现宝箱
            if (Math.random() > 0.05) continue;
            var level = treasureLevel[Math.floor(Math.random() * treasureLevel.length)];
            var pos = this.getCanUsePosition();
            result.push({
              position: pos,
              // 位置
              level: level,
              // 宝箱等级
              open: false,
              // 是否开启
              // 宝箱图标
              openIcon: this.instance.proto.treasureIcon.open[level - 1] || this.instance.proto.treasureIcon.open[0],
              // 宝箱关闭图标
              closeIcon: this.instance.proto.treasureIcon.close[level - 1] || this.instance.proto.treasureIcon.close[0]
            });
          }
          return result;
        };
        _proto.createObstacleData = function createObstacleData() {
          return [];
        };
        _proto.createReinforcementData = function createReinforcementData() {
          return [];
        };
        return RoomPrototype;
      }());

      // Boss房间
      var BossRoomPrototype = exports('BossRoomPrototype', /*#__PURE__*/function (_RoomPrototype) {
        _inheritsLoose(BossRoomPrototype, _RoomPrototype);
        function BossRoomPrototype() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _RoomPrototype.call.apply(_RoomPrototype, [this].concat(args)) || this;
          _this.pos = v2(0, 0);
          _this.size = v2(8, 5);
          _this.isSpecialRoom = true;
          return _this;
        }
        var _proto2 = BossRoomPrototype.prototype;
        _proto2.createMonsterData = function createMonsterData() {
          var result = [];
          var monsterData = this.instance.proto.monsterData.boss();
          var pos = v2(5, 2);
          result.push({
            dto: monsterData,
            position: pos,
            isBoss: true,
            character: this.instance.createMonsterInstance(monsterData.dto)
          });
          return result;
        };
        _proto2.createTreasureData = function createTreasureData() {
          var _this2 = this;
          var pos = [v2(5, 1), v2(5, 3)];
          return pos.map(function (pos) {
            return {
              position: pos,
              // 位置
              level: 4,
              // 宝箱等级
              open: false,
              // 是否开启
              // 宝箱图标
              openIcon: _this2.instance.proto.treasureIcon.open[4 - 1] || _this2.instance.proto.treasureIcon.open[0],
              // 宝箱关闭图标
              closeIcon: _this2.instance.proto.treasureIcon.close[4 - 1] || _this2.instance.proto.treasureIcon.close[0]
            };
          });
        };
        _proto2.createObstacleData = function createObstacleData() {
          var pos = [v2(4, 0), v2(4, 1), v2(4, 3), v2(4, 4)];
          return pos.map(function (pos) {
            return {
              position: pos
            };
          });
        };
        return BossRoomPrototype;
      }(RoomPrototype));

      // 宝箱房间
      var TreasureRoom = exports('TreasureRoom', /*#__PURE__*/function (_RoomPrototype2) {
        _inheritsLoose(TreasureRoom, _RoomPrototype2);
        function TreasureRoom() {
          var _this3;
          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            args[_key2] = arguments[_key2];
          }
          _this3 = _RoomPrototype2.call.apply(_RoomPrototype2, [this].concat(args)) || this;
          _this3.pos = v2(0, 0);
          _this3.size = v2(5, 5);
          _this3.isSpecialRoom = true;
          return _this3;
        }
        var _proto3 = TreasureRoom.prototype;
        _proto3.createMonsterData = function createMonsterData() {
          return [];
        };
        _proto3.createTreasureData = function createTreasureData() {
          var _this4 = this;
          return [v2(1, 1), v2(3, 1), v2(1, 3), v2(3, 3)].map(function (pos) {
            return {
              position: pos,
              // 位置
              level: 3,
              // 宝箱等级
              open: false,
              // 是否开启
              // 宝箱图标
              openIcon: _this4.instance.proto.treasureIcon.open[3 - 1] || _this4.instance.proto.treasureIcon.open[0],
              // 宝箱关闭图标
              closeIcon: _this4.instance.proto.treasureIcon.close[3 - 1] || _this4.instance.proto.treasureIcon.close[0]
            };
          });
        };
        return TreasureRoom;
      }(RoomPrototype));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RoseKnight.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './PlayerCharacterManager.ts', './AssetManager3.ts', './MonsterManager.ts', './MainLevelData.ts'], function (exports) {
  var _inheritsLoose, _asyncToGenerator, _regeneratorRuntime, _createClass, cclegacy, SpriteFrame, sp, settingManager, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, RegisterPlayerCharacter, getCustomModManager, registerMonster, hijackFloorData;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      RegisterPlayerCharacter = module.RegisterPlayerCharacter;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }, function (module) {
      registerMonster = module.registerMonster;
    }, function (module) {
      hijackFloorData = module.hijackFloorData;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class;
      cclegacy._RF.push({}, "e1027e6SeZEc5lJbXwv1kKG", "RoseKnight", undefined);
      hijackFloorData(function (floor, floorData) {
        floorData.monsters.push(RoseKnight);
        return floorData;
      });

      // 以装饰器来注册到所有角色列表中
      var RoseKnight = exports('RoseKnight', (_dec = RegisterCharacter("RoseKnight"), _dec2 = RegisterPlayerCharacter("RoseKnight"), _dec3 = registerMonster("RoseKnight"), _dec(_class = _dec2(_class = _dec3(_class = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(RoseKnight, _CharacterPrototype);
        function RoseKnight() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          // 角色基础属性
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 1500,
            maxMp: 180,
            physicalAttack: 55,
            magicAttack: 80,
            physicalDefense: 15,
            magicDefense: 15,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 0,
            magicPenetration: 10,
            lightAttack: 25,
            darkAttack: 25,
            attackSpeed: 1.0
          });
          // 角色成长属性 每次升级获得的属性提升
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 100,
            maxMp: 20,
            physicalAttack: 10,
            magicAttack: 5,
            physicalDefense: 5,
            magicDefense: 5,
            lightResistance: 4,
            darkResistance: 2
          });
          return _this;
        }
        var _proto = RoseKnight.prototype;
        // 获取角色头像的SpriteFrame
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  // 获取自定义资源管理器
                  assets = getCustomModManager(); // 加载头像资源
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/RoseKnight/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        }

        // 获取角色spine骨骼数据
        ;

        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // 获取自定义资源管理器
                  assets = getCustomModManager(); // 加载骨骼数据资源
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Player/RoseKnight/hero00031", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        }

        // 播放攻击动画
        ;

        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          // 获取实例对应的战斗组件
          var prefab = getComponentByCharacter(this.instance);
          // 如果实例不存在，则直接通过next()进行结算
          if (!prefab) return next();
          // 播放攻击动画
          prefab.playAnimation("Attack01", {
            // 播放次数
            count: 1,
            // 播放速度一般使用 攻击速度
            speed: this.instance.attackSpeed,
            //  帧事件
            frameEvent: {
              // Attack 事件
              name: "Attack",
              // 事件回调
              callback: function callback() {
                // 结算伤害
                next();
              }
            },
            // 动画结束回调
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        }
        // 播放技能动画
        ;

        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          // 获取实例对应的战斗组件
          var prefab = getComponentByCharacter(this.instance);
          // 如果实例不存在，则直接通过next()进行结算
          if (!prefab) return next();
          // 播放技能动画
          prefab.playAnimation("Attack02", {
            // 播放次数
            count: 1,
            // 播放速度一般使用 攻击速度
            speed: 1,
            //  帧事件
            frameEvent: {
              // Skill 事件
              name: "Skill",
              // 结算伤害
              callback: function callback() {
                return next();
              }
            },
            // 动画结束回调
            complete: function complete() {
              return animationEndCallback();
            }
          });
        }
        // 播放死亡动画
        ;

        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(RoseKnight, [{
          key: "name",
          get:
          // 角色名称
          function get() {
            return LanguageManager.getEntry("RoseKnight").getValue(settingManager.data.language);
          }

          // 角色描述
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("RoseKnight Desc").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get:
          // 角色动画配置
          // 支持idle和move两个动画
          function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return RoseKnight;
      }(CharacterPrototype)) || _class) || _class) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RoseSpikes.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './SkillConfig.ts', './LanguageEntry.ts', './LanguageManager.ts', './SkillPrototype.ts', './SkillManager.ts', './AssetManager3.ts', './CharacterPrototype.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, LanguageEntry, RegisterLanguageEntry, LanguageManager, SkillPrototype, RegisterSkill, getCustomModManager, DamageType, FromType;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "b15ceEZ6ZJGnr8cFmApPsLG", "RoseSpikes", undefined);

      // 语言条目
      var Name = (_dec = RegisterLanguageEntry("RoseSpikes"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "玫瑰荆棘";
          }
        }, {
          key: "eng",
          get: function get() {
            return "RoseSpikes";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "ローズスパイク";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class); // 语言条目
      var Description = (_dec2 = RegisterLanguageEntry("RoseSpikes Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u53D7\u5230\u653B\u51FB\u53CD\u5F39\u53D7\u5230\u4F24\u5BB3\u7684 " + (lv * 3 + 4) + "% \u7684\u771F\u5B9E\u4F24\u5BB3\u7ED9\u5BF9\u65B9";
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "Reflect " + (lv * 3 + 4) + "% of the damage taken as true damage to the attacker";
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "\u653B\u6483\u3092\u53D7\u3051\u305F " + (lv * 3 + 4) + "% \u306E\u30C0\u30E1\u30FC\u30B8\u3092\u653B\u6483\u8005\u306B\u53CD\u5C04";
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2); // 注册为玩家技能 "RoseThorn" 为技能id "RoseKnight" 为所属角色
      // true 为主动技能 false 为被动技能
      // "RoseThorn" 为技能的父技能
      var RoseThorn = exports('RoseThorn', (_dec3 = RegisterPlayerSkill("RoseSpikes", "RoseKnight", true, "RoseThorn"), _dec4 = RegisterSkillUpLevel("RoseSpikes", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec5 = RegisterSkill("RoseSpikes"), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(RoseThorn, _SkillPrototype);
        function RoseThorn() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = RoseThorn.prototype;
        // 技能图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = getCustomModManager();
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Skill/RoseSpikes/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        }

        // 生命值减少后
        ;

        _proto.afterReduceHp = function afterReduceHp(progress, next) {
          var lv = Math.max(0, this.instance.lv - 1);
          // 反弹物理伤害
          if (progress.type === DamageType.physic) {
            var damage = progress.reduce * (lv * 3 + 4) / 100;
            // 造成伤害
            progress.from.beDamage({
              atk: damage,
              type: DamageType.real,
              fromType: FromType.skill,
              from: this.instance.characterInstance
            });
          }
          next();
        };
        _createClass(RoseThorn, [{
          key: "name",
          get:
          // 技能名称
          function get() {
            return LanguageManager.getEntry("RoseSpikes").getValue(settingManager.data.language,
            // 将 等级 数据传入entry中，便于生成多语言文本时使用
            {
              lv: this.instance.lv
            });
          }

          // 技能描述
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("RoseSpikes Description").getValue(settingManager.data.language,
            // 将 等级 数据传入entry中，便于生成多语言文本时使用
            {
              lv: this.instance.lv
            });
          }
        }]);
        return RoseThorn;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/RoseThorn.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './SkillConfig.ts', './LanguageEntry.ts', './LanguageManager.ts', './SkillPrototype.ts', './SkillManager.ts', './Message.ts', './AssetManager3.ts', './AssetManager.ts', './SpineAnimation.ts', './CharacterToPrefabMap.ts', './FightMapManager.ts', './CharacterPrototype.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, Node, UITransform, sp, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, LanguageEntry, RegisterLanguageEntry, LanguageManager, SkillFailReason, SkillPrototype, RegisterSkill, message, getCustomModManager, getBaseModManager, SpineAnimation, getComponentByCharacter, getFightMapInstance, DamageType, FromType;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      Node = module.Node;
      UITransform = module.UITransform;
      sp = module.sp;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      message = module.message;
    }, function (module) {
      getCustomModManager = module.getCustomModManager;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "f6716dfNDlJ7owUjxB9k01n", "RoseThorn", undefined);

      // 语言条目
      var Name = (_dec = RegisterLanguageEntry("RoseThorn"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "蔷薇之刺";
          }
        }, {
          key: "eng",
          get: function get() {
            return "RoseThorn";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "ローズスパイア";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class); // 语言条目
      var Description = (_dec2 = RegisterLanguageEntry("RoseThorn Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8017: " + (Math.max(1, lv) * 20 + 40) + " \u9B54\u6CD5\u503C</color>\n\u51B7\u5374\u65F6\u95F4: " + (20 - lv * 1.5) + "s\n" + ("\u9020\u6210 " + (lv * 25 + 160) + "% \u653B\u51FB\u529B\u7684\u4F24\u5BB3\uFF0C\u56DE\u590D\u9020\u6210\u4F24\u5BB3\u7684 40% \u7684\u751F\u547D\u503C");
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>Cost: " + (Math.max(1, lv) * 20 + 40) + " MP</color>\nCooldown: " + (20 - lv * 1.5) + "s\n" + ("Deal " + (lv * 25 + 160) + "% of attack damage, and heal 40% of the damage dealt");
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8CBB: " + (Math.max(1, lv) * 20 + 40) + " MP</color>\n\u30AF\u30FC\u30EB\u30BF\u30A4\u30E0: " + (20 - lv * 1.5) + "\u79D2\n" + ("\u653B\u6483\u529B\u306E " + (lv * 25 + 160) + "% \u306E\u30C0\u30E1\u30FC\u30B8\u3092\u4E0E\u3048\u3001\u4E0E\u3048\u305F\u30C0\u30E1\u30FC\u30B8\u306E 40% \u3092\u56DE\u5FA9");
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2); // 注册为玩家技能 "RoseThorn" 为技能id "RoseKnight" 为所属角色
      var RoseThorn = exports('RoseThorn', (_dec3 = RegisterPlayerSkill("RoseThorn", "RoseKnight"), _dec4 = RegisterSkillUpLevel("RoseThorn", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec5 = RegisterSkill("RoseThorn"), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(RoseThorn, _SkillPrototype);
        function RoseThorn() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = RoseThorn.prototype;
        // 技能图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = getCustomModManager();
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Skill/RoseThorn/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        }

        // 技能消耗
        ;
        // 技能结算效果
        _proto.use = /*#__PURE__*/
        function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            var fightInstance, target, targetPrefab, node, spineAnimation, skeletonDataPack, lv, damage, heal;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // 战斗实例
                  fightInstance = getFightMapInstance();
                  if (fightInstance) {
                    _context2.next = 3;
                    break;
                  }
                  return _context2.abrupt("return");
                case 3:
                  // 获取对手
                  target = this.instance.characterInstance === fightInstance.player ? fightInstance.currentMonster : fightInstance.player; // 获取目标节点
                  targetPrefab = getComponentByCharacter(target);
                  if (targetPrefab) {
                    _context2.next = 7;
                    break;
                  }
                  return _context2.abrupt("return");
                case 7:
                  // 特效动画节点
                  node = new Node();
                  node.addComponent(UITransform);
                  spineAnimation = node.addComponent(SpineAnimation); // 获取特效spine资源
                  _context2.next = 12;
                  return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
                case 12:
                  skeletonDataPack = _context2.sent;
                  targetPrefab.node.addChild(node);
                  // 等待动画播放到生效的时间
                  _context2.next = 16;
                  return new Promise(function (res) {
                    node.setScale(1.2, 1.2);
                    node.setPosition(0, -120);
                    spineAnimation.skeletonData = skeletonDataPack.value;
                    //  播放特效动画
                    spineAnimation.playAnimation("skill_2", {
                      count: 1
                    });
                    // 监听特效动画帧事件
                    spineAnimation.listenFrameEvent("Skill", function () {
                      return res(null);
                    });
                  });
                case 16:
                  // 结算
                  lv = Math.max(0, this.instance.lv - 1); // 伤害
                  damage = (lv * 25 + 160) / 100 * useOption.use.physicalAttack; // 对目标造成伤害
                  target.beDamage({
                    atk: damage,
                    // 造成的伤害
                    type: DamageType.physic,
                    // 伤害类型
                    from: useOption.use,
                    // 伤害来源
                    fromType: FromType.skill // 伤害来源类型 技能 普攻 还是 buff
                  });
                  // 获取回复值
                  heal = 40 / 100 * damage; // 回复自己
                  useOption.use.beHeal({
                    heal: heal,
                    from: useOption.use,
                    fromType: FromType.skill
                  });
                case 21:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function use(_x2) {
            return _use.apply(this, arguments);
          }
          return use;
        }() // 技能使用失败回调
        ;

        _proto.useFail = function useFail(reason, progress) {
          // 技能失败原因 消耗不足
          if (reason === SkillFailReason.NotEnoughCoast) message.toast(new ( /*#__PURE__*/function (_LanguageEntry3) {
            _inheritsLoose(_class4, _LanguageEntry3);
            function _class4() {
              return _LanguageEntry3.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "当前法力值不足以使用该技能";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Not enough MP to use this skill";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "MPが足りません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language));
        };
        _createClass(RoseThorn, [{
          key: "name",
          get:
          // 技能名称
          function get() {
            return LanguageManager.getEntry("RoseThorn").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }

          // 技能描述
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("RoseThorn Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "cost",
          get: function get() {
            return {
              hp: 0,
              mp: Math.max(1, this.instance.lv - 1) * 20 + 40
            };
          }

          // 技能冷却时间
        }, {
          key: "coolTime",
          get: function get() {
            if (!this.instance.characterInstance) return 20 - this.instance.lv * 1.5;
            return (20 - this.instance.lv * 1.5) * (1 - this.instance.characterInstance.coolDown / (this.instance.characterInstance.coolDown + 150));
          }
        }]);
        return RoseThorn;
      }(SkillPrototype)) || _class3) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesLoadingCanvas.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LoadingManager.ts', './ModuleProgressPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Label, director, Component, LoadingManager, ModuleProgressPrefab;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Label = module.Label;
      director = module.director;
      Component = module.Component;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      ModuleProgressPrefab = module.ModuleProgressPrefab;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "f74b28k1wxHC7hfQygtRBMX", "ScenesLoadingCanvas", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesLoadingCanvas = exports('ScenesLoadingCanvas', (_dec = ccclass('ScenesLoadingCanvas'), _dec2 = property(Label), _dec3 = property(ModuleProgressPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesLoadingCanvas, _Component);
        function ScenesLoadingCanvas() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "progressLabel", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "progress", _descriptor2, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesLoadingCanvas.prototype;
        _proto.start = function start() {
          var _this2 = this;
          this.progress.setProgress(0, true);
          this.progress.on("update", function (progress) {
            return _this2.progressLabel.string = (progress * 100).toFixed(1) + "%";
          });
          LoadingManager.excuteLoadingQueue({
            stage: function stage(current, max) {
              return _this2.onStage(current, max);
            },
            loaded: function loaded() {
              return _this2.onLoaded();
            }
          });
        };
        _proto.onStage = function onStage(current, max) {
          this.progress.setProgress(current / max);
        };
        _proto.onLoaded = function onLoaded() {
          this.progress.setProgress(1);
          this.progress.on("complete", function () {
            return director.loadScene("Main");
          });
        };
        return ScenesLoadingCanvas;
      }(Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "progressLabel", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: null
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "progress", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: null
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesLoadingCanvasLogo.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Sprite, Color, Component;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Sprite = module.Sprite;
      Color = module.Color;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "0ba40PPrNVPnazcNqFzDC5T", "ScenesLoadingCanvasLogo", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesLoadingCanvasLogo = exports('ScenesLoadingCanvasLogo', (_dec = ccclass('ScenesLoadingCanvasLogo'), _dec(_class = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesLoadingCanvasLogo, _Component);
        function ScenesLoadingCanvasLogo() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _this.sprite = void 0;
          return _this;
        }
        var _proto = ScenesLoadingCanvasLogo.prototype;
        _proto.start = function start() {
          this.sprite = this.node.getComponent(Sprite);
          this.sprite.color = new Color(255, 255, 255, 0);
        };
        _proto.update = function update(dt) {
          this.sprite.color = new Color(255, 255, 255, this.sprite.color.a + dt * 100);
        };
        return ScenesLoadingCanvasLogo;
      }(Component)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvas.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './FightPrefab.ts', './index3.ts', './index6.ts', './CharacterInstance.ts', './CharacterManager2.ts', './EquipmentManager.ts', './SkillManager2.ts', './CharacterManager.ts'], function (exports) {
  var _inheritsLoose, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Component, find, Prefab, FightPrefab, CcNative, Rx, CharacterInstance, getCharacterPrototype, equipmentManager, skillManager, characterManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Component = module.Component;
      find = module.find;
      Prefab = module.Prefab;
    }, function (module) {
      FightPrefab = module.FightPrefab;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      CharacterInstance = module.CharacterInstance;
    }, function (module) {
      getCharacterPrototype = module.getCharacterPrototype;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      skillManager = module.skillManager;
    }, function (module) {
      characterManager = module.characterManager;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "72af5zG9eBGKLDFADbfdHOj", "ScenesMainCanvas", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvas = exports('ScenesMainCanvas', (_dec = ccclass('ScenesMainCanvas'), _dec(_class = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMainCanvas, _Component);
        function ScenesMainCanvas() {
          return _Component.apply(this, arguments) || this;
        }
        var _proto = ScenesMainCanvas.prototype;
        _proto.start = /*#__PURE__*/function () {
          var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // @ts-ignore
                  window.testFight = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(option) {
                    var _option$left, _option$left2, _option$left3, _option$left4, _option$left5, _option$left6, _option$right, _option$right2, _option$right3, _option$right4, _option$right5, _option$right6;
                    var leftCharacter, rightCharacter, parent, fightPrefab, node, successPos;
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          if (option === void 0) {
                            option = {
                              left: null,
                              right: null
                            };
                          }
                          console.log(skillManager.data.getSkillLevel, skillManager.data.skills);
                          leftCharacter = Rx.reactive(new CharacterInstance({
                            lv: ((_option$left = option.left) == null ? void 0 : _option$left.lv) || characterManager.data.lv,
                            equipments: ((_option$left2 = option.left) == null ? void 0 : _option$left2.equipments) || equipmentManager.data.equipment,
                            skills: ((_option$left3 = option.left) == null ? void 0 : _option$left3.skills) || skillManager.data.skills.map(function (s) {
                              return {
                                lv: skillManager.data.getSkillLevel(s),
                                prototype: s
                              };
                            }),
                            buffs: ((_option$left4 = option.left) == null ? void 0 : _option$left4.buffs) || [],
                            extraProperty: ((_option$left5 = option.left) == null ? void 0 : _option$left5.extraProperty) || {},
                            Proto: getCharacterPrototype((_option$left6 = option.left) == null ? void 0 : _option$left6.prototype) || getCharacterPrototype(characterManager.data.currentCharacter)
                          }));
                          rightCharacter = Rx.reactive(new CharacterInstance({
                            lv: ((_option$right = option.right) == null ? void 0 : _option$right.lv) || characterManager.data.lv,
                            equipments: ((_option$right2 = option.right) == null ? void 0 : _option$right2.equipments) || equipmentManager.data.equipment,
                            skills: ((_option$right3 = option.right) == null ? void 0 : _option$right3.skills) || skillManager.data.skills.map(function (s) {
                              return {
                                lv: skillManager.data.getSkillLevel(s),
                                prototype: s
                              };
                            }),
                            buffs: ((_option$right4 = option.right) == null ? void 0 : _option$right4.buffs) || [],
                            extraProperty: ((_option$right5 = option.right) == null ? void 0 : _option$right5.extraProperty) || {},
                            Proto: getCharacterPrototype((_option$right6 = option.right) == null ? void 0 : _option$right6.prototype) || getCharacterPrototype(characterManager.data.currentCharacter)
                          }));
                          parent = find("Canvas");
                          _context.next = 7;
                          return new CcNative.Asset.AssetManager("PrefabResource").load("FightPrefab/FightPrefab", Prefab);
                        case 7:
                          fightPrefab = _context.sent;
                          node = CcNative.instantiate(fightPrefab.value);
                          parent.addChild(node);
                          _context.next = 12;
                          return node.getComponent(FightPrefab).setFightAndStart({
                            player: "left",
                            leftCharacter: leftCharacter,
                            rightCharacter: rightCharacter
                          });
                        case 12:
                          successPos = _context.sent;
                          setTimeout(function () {
                            parent.removeChild(node);
                          }, 2000);
                          console.log(successPos + " 胜利");
                        case 15:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  }));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function start() {
            return _start.apply(this, arguments);
          }
          return start;
        }();
        return ScenesMainCanvas;
      }(Component)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasBlacksmith.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Diamond.ts', './Gold.ts', './index3.ts', './ExtensionComponent.ts', './LanguageEntry.ts', './index6.ts', './EquipmentItemPrefab.ts', './BackpackManager.ts', './EquipmentManager.ts', './ResourceManager.ts', './SettingManager.ts', './Message.ts', './EquipmentInstance.ts', './ItemInstance.ts', './EquipmentManager2.ts', './ItemManager.ts', './ScenesMainCanvasSound.ts', './ModuleVirtualListPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createClass, cclegacy, _decorator, Prefab, Sprite, Color, Label, RichText, ScrollView, Diamond, Gold, CcNative, ExtensionComponent, LanguageEntry, Rx, EquipmentItemPrefab, backpackManager, equipmentManager, resourceManager, settingManager, message, EquipmentInstance, ItemInstance, getEquipmentPrototype, getStrongMaterial, getEquipmentKey, getDecomposeMaterial, getItemPrototype, getItemKey, ScenesMainCanvasSound, ModuleVirtualListPrefab;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Sprite = module.Sprite;
      Color = module.Color;
      Label = module.Label;
      RichText = module.RichText;
      ScrollView = module.ScrollView;
    }, function (module) {
      Diamond = module.Diamond;
    }, function (module) {
      Gold = module.Gold;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      EquipmentItemPrefab = module.EquipmentItemPrefab;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      resourceManager = module.resourceManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      EquipmentInstance = module.EquipmentInstance;
    }, function (module) {
      ItemInstance = module.ItemInstance;
    }, function (module) {
      getEquipmentPrototype = module.getEquipmentPrototype;
      getStrongMaterial = module.getStrongMaterial;
      getEquipmentKey = module.getEquipmentKey;
      getDecomposeMaterial = module.getDecomposeMaterial;
    }, function (module) {
      getItemPrototype = module.getItemPrototype;
      getItemKey = module.getItemKey;
    }, function (module) {
      ScenesMainCanvasSound = module.ScenesMainCanvasSound;
    }, function (module) {
      ModuleVirtualListPrefab = module.ModuleVirtualListPrefab;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "d6e57JJugBCzKivS2jpTD65", "ScenesMainCanvasBlacksmith", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasBlacksmith = exports('ScenesMainCanvasBlacksmith', (_dec = ccclass('ScenesMainCanvasBlacksmith'), _dec2 = property(ScenesMainCanvasSound), _dec3 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMainCanvasBlacksmith, _ExtensionComponent);
        function ScenesMainCanvasBlacksmith() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "SoundController", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "EquipmentItemPrefab", _descriptor2, _assertThisInitialized(_this));
          _this.showType = Rx.ref(0);
          // 选择的装备
          _this.strengthenData = Rx.reactive({
            selectEquip: null
          });
          // 选择的装备
          _this.decomposeData = Rx.reactive({
            selectEquipList: []
          });
          // 所有强化装备列表的复制，用来避免重复渲染
          _this.allStrengthenEquipmentNodeMap = new Map();
          // 所有分解装备列表的复制，用来避免重复渲染
          _this.allDecomposeEquipmentNodeMap = new Map();
          return _this;
        }
        var _proto = ScenesMainCanvasBlacksmith.prototype;
        _proto.start = function start() {
          var _this2 = this;
          // 按钮发光
          var uiNode = this.node.getChildByName("Ui");
          this.effect(function () {
            uiNode.children.forEach(function (child) {
              return child.getComponent(Sprite).color = new Color(200, 200, 200);
            });
            uiNode.children[_this2.showType.value].getComponent(Sprite).color = new Color(255, 255, 255);
          });
          // 展示内容
          var blacksmithNode = this.node.getChildByName("Blackmith");
          this.effect(function () {
            blacksmithNode.children.forEach(function (child) {
              return child.active = false;
            });
            blacksmithNode.children[_this2.showType.value].active = true;
          });
          // 初始化强化
          this.initStrengthen();
          return;
        }

        // 展示类型切换
        ;

        _proto.showTypeChange = function showTypeChange(e, type) {
          this.showType.value = parseInt(type);
          if (this.showType.value === 0) {
            this.initStrengthen();
          } else if (this.showType.value === 1) {
            this.initDecompose();
          }
        }

        // 关闭
        ;

        _proto.close = function close() {
          this.node.active = false;
        }

        // 强化装备
        ;

        _proto.strengthenEquipment = function strengthenEquipment() {
          if (this.strengthenData.selectEquip) {
            var success = equipmentManager.data.strengthenEquipment(this.strengthenData.selectEquip.id, resourceManager, backpackManager);
            equipmentManager.save();
            resourceManager.save();
            backpackManager.save();
            this.initStrengthen();
          }
        }

        // 分解装备
        ;

        _proto.decomposeEquipment = function decomposeEquipment() {
          if (this.decomposeData.selectEquipList.length <= 0) {
            return message.toast(new ( /*#__PURE__*/function (_LanguageEntry) {
              _inheritsLoose(_class4, _LanguageEntry);
              function _class4() {
                return _LanguageEntry.apply(this, arguments) || this;
              }
              _createClass(_class4, [{
                key: "chs",
                get: function get() {
                  return "请选择要分解的装备";
                }
              }, {
                key: "eng",
                get: function get() {
                  return "Please select the equipment to decompose";
                }
              }, {
                key: "jpn",
                get: function get() {
                  return "分解する装備を選択してください";
                }
              }]);
              return _class4;
            }(LanguageEntry))().getValue(settingManager.data.language));
          }
          equipmentManager.data.decompose(this.decomposeData.selectEquipList.map(function (e) {
            return e.id;
          }), resourceManager, backpackManager);
          resourceManager.save();
          backpackManager.save();
          equipmentManager.save();
          this.initDecompose();
          this.SoundController.playGetAwardSound();
        }

        // 初始化强化
        ;

        _proto.initStrengthen = function initStrengthen() {
          this.renderStrengthenEquipment();
          this.renderStrengthenAllEquipment();
          return;
        }

        // 渲染强化装备
        ;

        _proto.renderStrengthenEquipment = function renderStrengthenEquipment() {
          var _this3 = this;
          var strengthenNode = this.node.getChildByName("Blackmith").getChildByName("Strengthen");
          var equipmentPrefab = strengthenNode.getChildByName("SelectedEquipmentIcon").getComponent(EquipmentItemPrefab);
          var nameLabel = strengthenNode.getChildByName("SelectedEquipmentName").getComponent(Label);
          var needGoldLabel = strengthenNode.getChildByName("NeedGold").getChildByName("Label").getComponent(Label);
          var needDiamondLabel = strengthenNode.getChildByName("NeedDiamond").getChildByName("Label").getComponent(Label);
          var propertyDescription = strengthenNode.getChildByName("SelectedEquipmentPropertyDescription").getComponent(RichText);
          var nextLevelPropertyDescription = strengthenNode.getChildByName("SelectedEquipmentNextLevelPropertyDescription").getComponent(RichText);
          if (!this.strengthenData.selectEquip) {
            equipmentPrefab.setInfo(null);
            needGoldLabel.string = needDiamondLabel.string = "0";
            nameLabel.string = propertyDescription.string = nextLevelPropertyDescription.string = "";
            var materialContent = strengthenNode.getChildByName("NeedItems").getComponent(ScrollView).content;
            // 渲染材料
            var children = Array.from(materialContent.children);
            materialContent.removeAllChildren();
            children.forEach(function (child) {
              return child.destroy();
            });
          } else if (this.strengthenData.selectEquip) {
            var instance = new EquipmentInstance({
              id: this.strengthenData.selectEquip.id,
              lv: this.strengthenData.selectEquip.lv,
              quality: this.strengthenData.selectEquip.quality,
              Proto: getEquipmentPrototype(this.strengthenData.selectEquip.prototype)
            });
            equipmentPrefab.setInfo(instance, function () {
              _this3.strengthenData.selectEquip = null;
              _this3.renderStrengthenEquipment();
              _this3.renderStrengthenAllEquipment();
            });
            nameLabel.string = instance.proto.name;
            propertyDescription.string = instance.proto.propertyDescription.split("\n\n")[0];
            if (instance.lv >= 10) {
              nextLevelPropertyDescription.string = "已满级";
            } else {
              var nextEquip = new EquipmentInstance({
                extraProperty: {},
                id: this.strengthenData.selectEquip.id,
                lv: instance.lv + 1,
                quality: instance.quality,
                Proto: instance.proto.constructor
              });
              nextLevelPropertyDescription.string = nextEquip.proto.propertyDescription.split("\n\n")[0];
            }
            var needMaterial = getStrongMaterial(getEquipmentKey(instance.proto), instance.lv);
            var _materialContent = strengthenNode.getChildByName("NeedItems").getComponent(ScrollView).content;
            if (!needMaterial) {
              needGoldLabel.string = needDiamondLabel.string = "0";
              // 渲染材料
              var _children = Array.from(_materialContent.children);
              _materialContent.removeAllChildren();
              _children.forEach(function (child) {
                return child.destroy();
              });
            } else {
              needGoldLabel.string = needMaterial.gold + "";
              needDiamondLabel.string = needMaterial.diamond + "";
              // 渲染材料
              var _children2 = Array.from(_materialContent.children);
              _materialContent.removeAllChildren();
              _children2.forEach(function (child) {
                return child.destroy();
              });
              // 渲染需要的item
              needMaterial.items.forEach(function (item) {
                var node = CcNative.instantiate(_this3.EquipmentItemPrefab);
                node.setScale(0.7, 0.7);
                node.getComponent(EquipmentItemPrefab).setInfo(new ItemInstance({
                  Proto: getItemPrototype(item.prototype),
                  count: item.count
                }));
                _materialContent.addChild(node);
              });
            }
          }
          return;
        };
        // 渲染所有装备
        _proto.renderStrengthenAllEquipment = function renderStrengthenAllEquipment() {
          var _this4 = this;
          // 根据装备渲染节点
          var setEquipment = function setEquipment(node, equipment) {
            var _this4$strengthenData2;
            node.getComponent(EquipmentItemPrefab).setInfo(new EquipmentInstance({
              id: equipment.id,
              lv: equipment.lv,
              quality: equipment.quality,
              Proto: getEquipmentPrototype(equipment.prototype)
            }), function () {
              var _this4$strengthenData;
              if (((_this4$strengthenData = _this4.strengthenData.selectEquip) == null ? void 0 : _this4$strengthenData.id) === equipment.id) {
                _this4.allStrengthenEquipmentNodeMap.forEach(function (data) {
                  return data.node.getComponent(Sprite).color = new Color(255, 255, 255);
                });
                _this4.strengthenData.selectEquip = null;
                node.getComponent(Sprite).color = new Color(255, 255, 255);
                _this4.renderStrengthenEquipment();
              } else {
                _this4.allStrengthenEquipmentNodeMap.forEach(function (data) {
                  return data.node.getComponent(Sprite).color = new Color(255, 255, 255);
                });
                _this4.strengthenData.selectEquip = equipment;
                node.getComponent(Sprite).color = new Color(180, 180, 180);
                _this4.renderStrengthenEquipment();
              }
            });
            if (((_this4$strengthenData2 = _this4.strengthenData.selectEquip) == null ? void 0 : _this4$strengthenData2.id) === equipment.id) {
              node.getComponent(Sprite).color = new Color(180, 180, 180);
            }
          };
          var strengthenNode = this.node.getChildByName("Blackmith").getChildByName("Strengthen");
          var virtualList = strengthenNode.getChildByName("ModuleVirtualListPrefab").getComponent(ModuleVirtualListPrefab);
          var equipments = [equipmentManager.data.equipment.weapon, equipmentManager.data.equipment.armor, equipmentManager.data.equipment.accessory, equipmentManager.data.equipment.shoes];
          equipmentManager.data.equipments.sort(function (a, b) {
            return b.quality - a.quality;
          }).forEach(function (e) {
            return equipments.push(e);
          });
          virtualList.setVirtualList(equipments, function (equipment) {
            var node;
            if (!equipment) return null;
            if (_this4.allStrengthenEquipmentNodeMap.has(equipment.id)) {
              var data = _this4.allStrengthenEquipmentNodeMap.get(equipment.id);
              node = data.node;
              if (data.json !== JSON.stringify(equipment)) {
                data.json = JSON.stringify(equipment);
                setEquipment(node, equipment);
              }
            } else {
              node = CcNative.instantiate(_this4.EquipmentItemPrefab);
              setEquipment(node, equipment);
              _this4.allStrengthenEquipmentNodeMap.set(equipment.id, {
                node: node,
                json: JSON.stringify(equipment)
              });
            }
            return node;
          });
        }

        // 初始化分解
        ;

        _proto.initDecompose = function initDecompose() {
          this.decomposeData.selectEquipList = [];
          this.renderDecomposeAllEquipment();
          this.renderDecomposeSelectedEquipment();
          return;
        };
        _proto.renderDecomposeSelectedEquipment = function renderDecomposeSelectedEquipment() {
          var _this5 = this;
          var decompositionNode = this.node.getChildByName("Blackmith").getChildByName("Decomposition");
          var contentNode = decompositionNode.getChildByName("RetrunMaterial").getComponent(ScrollView).content;
          var children = Array.from(contentNode.children);
          contentNode.removeAllChildren();
          children.forEach(function (child) {
            return child.destroy();
          });
          var material = {};
          this.decomposeData.selectEquipList.forEach(function (equipment) {
            var decomposeMaterial = getDecomposeMaterial(equipment.prototype, equipment.lv);
            if (!decomposeMaterial) return;
            var goldKey = getItemKey(Gold),
              diamondKey = getItemKey(Diamond);
            if (decomposeMaterial.gold) {
              if (!material[goldKey]) material[goldKey] = decomposeMaterial.gold;else material[goldKey] += decomposeMaterial.gold || 0;
            }
            if (decomposeMaterial.diamond) {
              if (!material[diamondKey]) material[diamondKey] = decomposeMaterial.diamond;else material[diamondKey] += decomposeMaterial.diamond || 0;
            }
            decomposeMaterial == null || decomposeMaterial.items.forEach(function (item) {
              if (material[item.prototype]) material[item.prototype] += item.count;else material[item.prototype] = item.count;
            });
          });
          Object.keys(material).forEach(function (key) {
            var node = CcNative.instantiate(_this5.EquipmentItemPrefab);
            node.getComponent(EquipmentItemPrefab).setInfo(new ItemInstance({
              Proto: getItemPrototype(key),
              count: material[key]
            }));
            contentNode.addChild(node);
          });
          return;
        };
        // 渲染所有待分解的装备
        _proto.renderDecomposeAllEquipment = function renderDecomposeAllEquipment() {
          var _this6 = this;
          // 根据装备渲染节点
          var setEquipment = function setEquipment(node, equipment) {
            node.getComponent(EquipmentItemPrefab).setInfo(new EquipmentInstance({
              id: equipment.id,
              lv: equipment.lv,
              quality: equipment.quality,
              Proto: getEquipmentPrototype(equipment.prototype)
            }), function () {
              // 如果没有选中
              var index = _this6.decomposeData.selectEquipList.indexOf(equipment);
              if (index === -1) {
                _this6.decomposeData.selectEquipList.push(equipment);
                node.getComponent(Sprite).color = new Color(150, 150, 150);
                _this6.renderDecomposeSelectedEquipment();
              } else {
                _this6.decomposeData.selectEquipList.splice(index, 1);
                node.getComponent(Sprite).color = new Color(255, 255, 255);
                _this6.renderDecomposeSelectedEquipment();
              }
            });
          };
          var decompositionNode = this.node.getChildByName("Blackmith").getChildByName("Decomposition");
          var virtualList = decompositionNode.getChildByName("ModuleVirtualListPrefab").getComponent(ModuleVirtualListPrefab);
          virtualList.setVirtualList(Array.from(equipmentManager.data.equipments).sort(function (a, b) {
            return a.quality - b.quality;
          }), function (equipment, index) {
            var node;
            if (!_this6.allDecomposeEquipmentNodeMap.has(equipment.id)) {
              node = CcNative.instantiate(_this6.EquipmentItemPrefab);
              _this6.allDecomposeEquipmentNodeMap.set(equipment.id, node);
              setEquipment(node, equipment);
            } else {
              node = _this6.allDecomposeEquipmentNodeMap.get(equipment.id);
            }
            return node;
          });
        };
        return ScenesMainCanvasBlacksmith;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "SoundController", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "EquipmentItemPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasData.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './UserBaseDataPrefab.ts', './Share.ts', './ExtensionComponent.ts', './index6.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, UserBaseDataPrefab, createPlayerInstance, ExtensionComponent, Rx;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
    }, function (module) {
      UserBaseDataPrefab = module.UserBaseDataPrefab;
    }, function (module) {
      createPlayerInstance = module.createPlayerInstance;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      Rx = module.Rx;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "7c7e9nWhc1AUa95mGMncfeN", "ScenesMainCanvasData", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasData = exports('ScenesMainCanvasData', (_dec = ccclass('ScenesMainCanvasData'), _dec2 = property(UserBaseDataPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMainCanvasData, _ExtensionComponent);
        function ScenesMainCanvasData() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "userBaseData", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesMainCanvasData.prototype;
        _proto.start = function start() {
          var _this2 = this;
          var character;
          this.effect(function () {
            // 根据本地信息生成角色对象
            character = Rx.reactive(createPlayerInstance());
            // @ts-ignore
            window.character = character;
            // 绑定渲染器
            _this2.userBaseData.bindCharacter(character, false);
          });
          return;
        };
        return ScenesMainCanvasData;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "userBaseData", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasLevelSelect.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ModuleDropListPrefab.ts', './LevelDataManager.ts', './FightMapManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Component, ModuleDropListPrefab, levelDataManager, enterFightMap;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Component = module.Component;
    }, function (module) {
      ModuleDropListPrefab = module.ModuleDropListPrefab;
    }, function (module) {
      levelDataManager = module.levelDataManager;
    }, function (module) {
      enterFightMap = module.enterFightMap;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "86deer33ONHXpkwlP48OxPz", "ScenesMainCanvasLevelSelect", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasLevelSelect = exports('ScenesMainCanvasLevelSelect', (_dec = ccclass('ScenesMainCanvasLevelSelect'), _dec2 = property(ModuleDropListPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMainCanvasLevelSelect, _Component);
        function ScenesMainCanvasLevelSelect() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "dropListLevelSelect", _descriptor, _assertThisInitialized(_this));
          // 当前选择的主关卡
          _this.currentMainLevel = 1;
          return _this;
        }
        var _proto = ScenesMainCanvasLevelSelect.prototype;
        // 初始化
        _proto.start = function start() {
          this.initMainLevelList();
        };
        // 初始化主关卡列表
        _proto.initMainLevelList = function initMainLevelList() {
          var _this2 = this;
          this.dropListLevelSelect.setSelectList({
            multiple: false,
            require: true,
            "default": 1,
            // 列表
            list: [{
              key: "1层",
              value: 1
            }, levelDataManager.data.mainLevelFloor > 20 ? {
              key: "21层",
              value: 21
            } : void 0, levelDataManager.data.mainLevelFloor > 40 ? {
              key: "41层",
              value: 41
            } : void 0, levelDataManager.data.mainLevelFloor > 60 ? {
              key: "61层",
              value: 61
            } : void 0, levelDataManager.data.mainLevelFloor > 80 ? {
              key: "81层",
              value: 81
            } : void 0].filter(function (v) {
              return v;
            }),
            onchange: function onchange(data) {
              _this2.currentMainLevel = data[0]; // 当前选择
            }
          });
        }

        // 进入关卡
        ;

        _proto.enterMainLevel = function enterMainLevel() {
          enterFightMap("MainLevelData", {
            customData: {
              floor: this.currentMainLevel
            }
          });
        }

        // 关闭回调
        ;

        _proto.closeLevelSelect = function closeLevelSelect() {
          this.node.active = false;
        };
        return ScenesMainCanvasLevelSelect;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "dropListLevelSelect", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasSkillList.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './DetailInfoPrefab.ts', './CharacterManager.ts', './SettingManager.ts', './SkillManager2.ts', './Message.ts', './Share.ts', './SkillConfig.ts', './index3.ts', './ExtensionComponent.ts', './LanguageManager.ts', './SkillInstance.ts', './SkillManager.ts', './ResourceManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Prefab, Graphics, Sprite, Label, Button, NodeEventType, Color, find, instantiate, DetailInfoPrefab, characterManager, settingManager, skillManager, message, createPlayerInstance, getPlayerSkillRootsNode, getPlayerSkillTreeFloor, isSkillPassive, getSkillUpLevelMaterial, CcNative, ExtensionComponent, LanguageManager, SkillInstance, getSkillPrototype, resourceManager;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Graphics = module.Graphics;
      Sprite = module.Sprite;
      Label = module.Label;
      Button = module.Button;
      NodeEventType = module.NodeEventType;
      Color = module.Color;
      find = module.find;
      instantiate = module.instantiate;
    }, function (module) {
      DetailInfoPrefab = module.DetailInfoPrefab;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      skillManager = module.skillManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      createPlayerInstance = module.createPlayerInstance;
    }, function (module) {
      getPlayerSkillRootsNode = module.getPlayerSkillRootsNode;
      getPlayerSkillTreeFloor = module.getPlayerSkillTreeFloor;
      isSkillPassive = module.isSkillPassive;
      getSkillUpLevelMaterial = module.getSkillUpLevelMaterial;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      SkillInstance = module.SkillInstance;
    }, function (module) {
      getSkillPrototype = module.getSkillPrototype;
    }, function (module) {
      resourceManager = module.resourceManager;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "8780bv1woxNu7mYy7UOgt+P", "ScenesMainCanvasSkillList", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasSkillList = exports('ScenesMainCanvasSkillList', (_dec = ccclass('ScenesMainCanvasSkillList'), _dec2 = property(Prefab), _dec3 = property(Graphics), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMainCanvasSkillList, _ExtensionComponent);
        function ScenesMainCanvasSkillList() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 详细信息预制体
          _initializerDefineProperty(_this, "DetailInfoPrefab", _descriptor, _assertThisInitialized(_this));
          // 技能item模板
          _this.SkillItemTempNode = null;
          _initializerDefineProperty(_this, "SkillTreeGraphics", _descriptor2, _assertThisInitialized(_this));
          // 移除触摸事件
          _this.removeTouchEvent = null;
          return _this;
        }
        var _proto = ScenesMainCanvasSkillList.prototype;
        // 可见时
        _proto.onEnable = function onEnable() {
          this.SkillTreeGraphics.clear();
          this.initEquipSkill();
          this.initSkillList();
        };
        _proto.onLoad = function onLoad() {
          var _this2 = this;
          // 获取模板节点
          this.SkillItemTempNode = this.node.getChildByName("SkillPanel").children[0];
          this.node.getChildByName("SkillPanel").removeChild(this.SkillItemTempNode);
          // 初始化技能列表
          this.effect(function () {
            return _this2.initEquipSkill();
          });
          // 初始化未携带的技能列表
          this.effect(function () {
            return _this2.initSkillList();
          });
        }

        // 设置模板节点
        ;

        _proto.setSkillItemTempNode = function setSkillItemTempNode(node, lv, icon, callback) {
          node.getChildByName("Icon").getComponent(Sprite).spriteFrame = icon;
          node.getChildByName("Level").getComponent(Label).string = lv > 0 ? "Lv: " + lv : "";
          node.on(Button.EventType.CLICK, function () {
            return callback();
          });
        };
        // 初始化携带的技能
        _proto.initEquipSkill = function initEquipSkill() {
          var _this3 = this;
          var posx = [-175, 0, 175];
          var skillContainerNode = this.node.getChildByName("SkillPanel");
          // 清空技能节点
          skillContainerNode.removeAllChildren();
          // 渲染技能
          skillManager.data.skills.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(proto, i) {
            var skillItemNode;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.next = 2;
                  return _this3.createdSkillItemNode(proto, [skillManager.data.getSkillLevel(proto) < 10 ? "uplevel" : "", "unload"]);
                case 2:
                  skillItemNode = _context.sent;
                  // 添加技能节点
                  skillContainerNode.addChild(skillItemNode);
                  // 设置坐标
                  skillItemNode.setPosition(posx[i], -15);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
          return;
        }

        // 初始化未携带的技能
        ;

        _proto.initSkillList = function initSkillList() {
          var _this4 = this;
          var maskNode = this.node.getChildByName("AllSkillPanel").getChildByName("Mask");
          var skillContainerNode = this.node.getChildByName("AllSkillPanel").getChildByName("Mask").getChildByName("Container");
          // 移除触摸事件
          if (this.removeTouchEvent) this.removeTouchEvent();
          // 清空技能节点
          skillContainerNode.removeAllChildren();
          // 获取技能树根节点
          var roots = getPlayerSkillRootsNode(characterManager.data.currentCharacter);
          if (!roots) return message.toast("获取技能树根节点失败");
          // 技能树对应的结构
          var skillTreeToMatrix = [];
          var skillTreeSkewPostion = new Map();
          // 生成技能树
          var currentLine = 0;
          var convertToMatrix = function convertToMatrix(skillNode, add) {
            if (add === void 0) {
              add = 0;
            }
            if (skillTreeToMatrix[skillNode.floor] == null) skillTreeToMatrix[skillNode.floor] = [];
            skillTreeToMatrix[skillNode.floor][currentLine] = skillNode;
            if (skillNode.children.length > 0) {
              skillNode.children.forEach(function (child) {
                return convertToMatrix(child, 1);
              });
            } else {
              currentLine += add;
            }
          };
          roots.forEach(function (r) {
            return convertToMatrix(r, 1);
          });
          // 生成技能节点坐标
          skillTreeToMatrix.forEach(function (list, y) {
            list == null || list.forEach(function (skillNode, x) {
              skillTreeSkewPostion.set(skillNode, {
                x: -180 + x * 190,
                y: 180 - y * 190
              });
            });
          });
          // 开始坐标对齐
          var aligningPosition = function aligningPosition(root) {
            root.children.forEach(function (c) {
              return aligningPosition(c);
            });
            if (root.children.length <= 1) return;
            if (root.children.length % 2 === 0) {
              var diIndex = root.children.length / 2 - 1;
              var gaoIndex = root.children.length / 2;
              var diNodeX = skillTreeSkewPostion.get(root.children[diIndex]).x;
              var gaoNodeX = skillTreeSkewPostion.get(root.children[gaoIndex]).x;
              skillTreeSkewPostion.get(root).x = diNodeX + (gaoNodeX - diNodeX) / 2;
            } else {
              var index = Math.floor(root.children.length / 2);
              skillTreeSkewPostion.get(root).x = skillTreeSkewPostion.get(root.children[index]).x;
            }
          };
          roots.forEach(function (r) {
            return aligningPosition(r);
          });
          // 画线
          var drowLine = function drowLine(root, parent) {
            if (parent === void 0) {
              parent = null;
            }
            if (parent === null) {
              root.children.forEach(function (c) {
                return drowLine(c, root);
              });
              return;
            }
            var point1 = skillTreeSkewPostion.get(root),
              point2 = skillTreeSkewPostion.get(parent);
            _this4.SkillTreeGraphics.lineWidth = 10;
            _this4.SkillTreeGraphics.moveTo(point1.x, point1.y);
            _this4.SkillTreeGraphics.lineTo(point2.x, point2.y);
            _this4.SkillTreeGraphics.close();
            _this4.SkillTreeGraphics.stroke();
            _this4.SkillTreeGraphics.fill();
            root.children.forEach(function (c) {
              return drowLine(c, root);
            });
          };
          roots.forEach(function (r) {
            return drowLine(r);
          });
          // 绘制技能节点
          var renderSkill = /*#__PURE__*/function () {
            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(skillNode) {
              var getMaskType, pos, skillItemNode;
              return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    skillNode.children.forEach(function (node) {
                      return renderSkill(node);
                    });
                    // 获取技能覆盖情况
                    getMaskType = function getMaskType(node) {
                      if (node.parent) {
                        if (skillManager.data.getSkillLevel(node.parent.key) === 0) return "unlearn";
                        if (skillManager.data.getSkillLevel(node.key) === 0) return "learn";
                      }
                      if (skillManager.data.getSkillLevel(node.key) === 0) return "learn";
                      return "none";
                    }; // 坐标
                    pos = skillTreeSkewPostion.get(skillNode); // 创建技能节点
                    _context2.next = 5;
                    return _this4.createdSkillItemNode(skillNode.key, [skillManager.data.skills.indexOf(skillNode.key) !== -1 ? "unload" : "", skillManager.data.getSkillLevel(skillNode.key) > 0 && skillManager.data.skills.indexOf(skillNode.key) === -1 && !isSkillPassive(characterManager.data.currentCharacter, skillNode.key) ? "eqiupment" : "", skillManager.data.getSkillLevel(skillNode.key) > 0 && skillManager.data.getSkillLevel(skillNode.key) < 10 ? "uplevel" : "", skillManager.data.getSkillLevel(skillNode.key) === 0 && skillNode.parent && skillManager.data.getSkillLevel(skillNode.parent.key) > 0 ? "learn" : "", skillManager.data.getSkillLevel(skillNode.key) === 0 && !skillNode.parent ? "learn" : ""], getMaskType(skillNode));
                  case 5:
                    skillItemNode = _context2.sent;
                    skillContainerNode.addChild(skillItemNode);
                    skillItemNode.setPosition(pos.x, pos.y);
                  case 8:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            }));
            return function renderSkill(_x3) {
              return _ref2.apply(this, arguments);
            };
          }();
          roots.forEach(function (r) {
            return renderSkill(r);
          });
          // 获取最大技能宽高
          var floors = getPlayerSkillTreeFloor(characterManager.data.currentCharacter);
          var maxWidth = 0,
            maxHeight = floors.length;
          floors.forEach(function (floor) {
            maxWidth = Math.max(maxWidth, floor);
          });
          // 触摸回调
          var touching = false;
          var movePos = {
            x: 0,
            y: 0
          };
          var c1 = function c1(e) {
            return touching = true;
          };
          var c2 = function c2(e) {
            return touching = false;
          };
          var c3 = function c3(e) {
            if (!touching) return;
            var pos = e.getDelta();
            movePos.x += pos.x;
            movePos.y += pos.y;
            if (movePos.x > 0) movePos.x = 0;
            if (movePos.y < 0) movePos.y = 0;
            if (movePos.x < -maxWidth * 190 + 520 / 2) movePos.x = -maxWidth * 190 + 520 / 2;
            if (movePos.y > maxHeight * 190) movePos.y = maxHeight * 190;
            skillContainerNode.setPosition(movePos.x, movePos.y);
          };
          maskNode.on(NodeEventType.TOUCH_START, c1);
          maskNode.on(NodeEventType.TOUCH_END, c2);
          maskNode.on(NodeEventType.TOUCH_CANCEL, c2);
          maskNode.on(NodeEventType.TOUCH_MOVE, c3);
          this.removeTouchEvent = function () {
            maskNode.off(NodeEventType.TOUCH_START, c1);
            maskNode.off(NodeEventType.TOUCH_END, c2);
            maskNode.off(NodeEventType.TOUCH_CANCEL, c2);
            maskNode.off(NodeEventType.TOUCH_MOVE, c3);
          };
          return;
        }

        // 创建技能节点
        ;

        _proto.createdSkillItemNode = /*#__PURE__*/
        function () {
          var _createdSkillItemNode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(prototype, btns, maskType) {
            var _this5 = this;
            var canvasNode, resultNode, instance, icon, clickCallback, maskNode;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  if (maskType === void 0) {
                    maskType = "none";
                  }
                  canvasNode = find('Canvas');
                  resultNode = instantiate(this.SkillItemTempNode);
                  instance = new SkillInstance({
                    lv: skillManager.data.getSkillLevel(prototype),
                    Proto: getSkillPrototype(prototype)
                  });
                  _context3.next = 6;
                  return instance.proto.icon();
                case 6:
                  icon = _context3.sent;
                  // 点击图标回调
                  clickCallback = function clickCallback() {
                    // 详细节点
                    var detailNode = CcNative.instantiate(_this5.DetailInfoPrefab);
                    var detailPrefab = detailNode.getComponent(DetailInfoPrefab);
                    var effect = _this5.effect(function () {
                      var material = getSkillUpLevelMaterial(prototype, skillManager.data.getSkillLevel(prototype));
                      // 实时创建技能实例跟随界面更新
                      var instance = new SkillInstance({
                        lv: skillManager.data.getSkillLevel(prototype),
                        characterInstance: createPlayerInstance(),
                        Proto: getSkillPrototype(prototype)
                      });
                      detailPrefab.setDetail({
                        // 界面内容
                        content: [{
                          title: instance.proto.name,
                          icon: icon,
                          rightMessage: (instance.lv > 0 ? "Lv: " + instance.lv + "\n\n" : "") + instance.proto.description + "\n\n\n" + (btns.indexOf("learn") !== -1 ? LanguageManager.getEntry("LevelUp").getValue(settingManager.data.language) : LanguageManager.getEntry("Learn").getValue(settingManager.data.language)) + LanguageManager.getEntry("Material").getValue(settingManager.data.language) + "\n\n" + LanguageManager.getEntry("Gold").getValue(settingManager.data.language) + ":" + material.gold + "\n" + LanguageManager.getEntry("Diamond").getValue(settingManager.data.language) + ":" + material.diamond,
                          // 按钮列表
                          buttons: [btns.indexOf("unload") !== -1 ? {
                            label: LanguageManager.getEntry("Unload").getValue(settingManager.data.language),
                            callback: function callback(close) {
                              skillManager.data.unloadSkill(prototype);
                              close();
                            }
                          } : null, btns.indexOf("eqiupment") !== -1 ? {
                            label: LanguageManager.getEntry("Equipment").getValue(settingManager.data.language),
                            callback: function callback(close) {
                              skillManager.data.equipSkill(prototype);
                              close();
                            }
                          } : null, btns.indexOf("uplevel") !== -1 ? {
                            label: LanguageManager.getEntry("Levelup").getValue(settingManager.data.language),
                            callback: function callback(close) {
                              skillManager.data.upgradeSkill(prototype, resourceManager);
                              resourceManager.save();
                              skillManager.save();
                              if (skillManager.data.getSkillLevel(prototype) >= 10) {
                                close();
                              }
                            }
                          } : null, btns.indexOf("learn") !== -1 ? {
                            label: LanguageManager.getEntry("Learn").getValue(settingManager.data.language),
                            callback: function callback(close) {
                              skillManager.data.learnSkill(prototype, resourceManager);
                              resourceManager.save();
                              skillManager.save();
                              close();
                            }
                          } : null]
                        }],
                        // 关闭回调
                        closeCallback: function closeCallback() {
                          canvasNode.removeChild(detailNode);
                          effect.effect.stop();
                        }
                      });
                    });
                    canvasNode.addChild(detailNode);
                  }; // 设置技能节点
                  this.setSkillItemTempNode(resultNode, skillManager.data.getSkillLevel(prototype), icon, clickCallback);
                  // 设置技能节点mask
                  maskNode = resultNode.getChildByName("Mask");
                  if (maskType === "learn") {
                    maskNode.active = true;
                    maskNode.getComponent(Sprite).color = new Color(0, 0, 0, 200);
                  } else if (maskType === "unLearn") {
                    maskNode.active = true;
                    maskNode.addComponent(Button);
                    maskNode.getComponent(Sprite).color = new Color(0, 0, 0, 255);
                  } else if (maskType === "none") {
                    maskNode.active = false;
                  }
                  return _context3.abrupt("return", resultNode);
                case 12:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function createdSkillItemNode(_x4, _x5, _x6) {
            return _createdSkillItemNode.apply(this, arguments);
          }
          return createdSkillItemNode;
        }() // 关闭界面
        ;

        _proto.closeSkillPanel = function closeSkillPanel() {
          this.node.active = false;
        };
        return ScenesMainCanvasSkillList;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "DetailInfoPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "SkillTreeGraphics", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasSound.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, AudioSource, Component;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      AudioSource = module.AudioSource;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "63162wJFstNkrWXPSmK601O", "ScenesMainCanvasSound", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasSound = exports('ScenesMainCanvasSound', (_dec = ccclass('ScenesMainCanvasSound'), _dec2 = property(AudioSource), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMainCanvasSound, _Component);
        function ScenesMainCanvasSound() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "getAwardSound", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesMainCanvasSound.prototype;
        _proto.playGetAwardSound = function playGetAwardSound() {
          // 播放获得奖励的音效
          this.getAwardSound.play();
        };
        return ScenesMainCanvasSound;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "getAwardSound", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMainCanvasUi.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './BackpackPrefab.ts', './TaskPrefab.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Node, Prefab, Component, find, CcNative, BackpackPrefab, TaskPrefab, TaskType;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      Prefab = module.Prefab;
      Component = module.Component;
      find = module.find;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      BackpackPrefab = module.BackpackPrefab;
    }, function (module) {
      TaskPrefab = module.TaskPrefab;
      TaskType = module.TaskType;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6;
      cclegacy._RF.push({}, "1e2634BHepEb6Y75WBQauBx", "ScenesMainCanvasUi", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMainCanvasUi = exports('ScenesMainCanvasUi', (_dec = ccclass('ScenesMainCanvasUi'), _dec2 = property(Node), _dec3 = property(Prefab), _dec4 = property(Node), _dec5 = property(Prefab), _dec6 = property(Node), _dec7 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMainCanvasUi, _Component);
        function ScenesMainCanvasUi() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          // 关卡选择节点
          _initializerDefineProperty(_this, "levelSelectNode", _descriptor, _assertThisInitialized(_this));
          // 背包预制体
          _initializerDefineProperty(_this, "backpackPrefab", _descriptor2, _assertThisInitialized(_this));
          // 技能节点
          _initializerDefineProperty(_this, "skillNode", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "taskPrefab", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "strengthNode", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "placeholderNode", _descriptor6, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesMainCanvasUi.prototype;
        // 初始化
        _proto.start = function start() {
          this.levelSelectNode.active = false;
        }

        // 开启设置
        ;

        _proto.openSetting = /*#__PURE__*/
        function () {
          var _openSetting = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var manager, settingPrefab, settingNode;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  manager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context.next = 3;
                  return manager.load("SettingPrefab", Prefab, true);
                case 3:
                  settingPrefab = _context.sent;
                  settingNode = CcNative.instantiate(settingPrefab.value);
                  find("Canvas").addChild(settingNode);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function openSetting() {
            return _openSetting.apply(this, arguments);
          }
          return openSetting;
        }() // 开启关卡选择
        ;

        _proto.openLevelSelect = /*#__PURE__*/
        function () {
          var _openLevelSelect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  this.levelSelectNode.active = true;
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function openLevelSelect() {
            return _openLevelSelect.apply(this, arguments);
          }
          return openLevelSelect;
        }() // 开启背包界面
        ;

        _proto.openBackpack = /*#__PURE__*/
        function () {
          var _openBackpack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
            var node;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  node = CcNative.instantiate(this.backpackPrefab);
                  node.getComponent(BackpackPrefab).onClose(function () {
                    if (node && node.isValid) node.destroy();
                  });
                  this.placeholderNode.addChild(node);
                case 3:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function openBackpack() {
            return _openBackpack.apply(this, arguments);
          }
          return openBackpack;
        }() // 开启技能界面
        ;

        _proto.openSkill = /*#__PURE__*/
        function () {
          var _openSkill = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  this.skillNode.active = true;
                case 1:
                case "end":
                  return _context4.stop();
              }
            }, _callee4, this);
          }));
          function openSkill() {
            return _openSkill.apply(this, arguments);
          }
          return openSkill;
        }() // 开启成就界面
        ;

        _proto.openAchievement = /*#__PURE__*/
        function () {
          var _openAchievement = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
            var node, taskPrefab;
            return _regeneratorRuntime().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  node = CcNative.instantiate(this.taskPrefab);
                  taskPrefab = node.getComponent(TaskPrefab);
                  taskPrefab.taskType = TaskType.achivement;
                  node.getComponent(TaskPrefab).onClose(function () {
                    if (node && node.isValid) node.destroy();
                  });
                  this.placeholderNode.addChild(node);
                case 5:
                case "end":
                  return _context5.stop();
              }
            }, _callee5, this);
          }));
          function openAchievement() {
            return _openAchievement.apply(this, arguments);
          }
          return openAchievement;
        }() // 开启每日任务
        ;

        _proto.openDailyTask = /*#__PURE__*/
        function () {
          var _openDailyTask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
            var node, taskPrefab;
            return _regeneratorRuntime().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  node = CcNative.instantiate(this.taskPrefab);
                  taskPrefab = node.getComponent(TaskPrefab);
                  taskPrefab.taskType = TaskType.dayTask;
                  node.getComponent(TaskPrefab).onClose(function () {
                    if (node && node.isValid) node.destroy();
                  });
                  this.placeholderNode.addChild(node);
                case 5:
                case "end":
                  return _context6.stop();
              }
            }, _callee6, this);
          }));
          function openDailyTask() {
            return _openDailyTask.apply(this, arguments);
          }
          return openDailyTask;
        }() // 开启强化界面
        ;

        _proto.openStrength = /*#__PURE__*/
        function () {
          var _openStrength = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
            return _regeneratorRuntime().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  this.strengthNode.active = true;
                case 1:
                case "end":
                  return _context7.stop();
              }
            }, _callee7, this);
          }));
          function openStrength() {
            return _openStrength.apply(this, arguments);
          }
          return openStrength;
        }();
        return ScenesMainCanvasUi;
      }(Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "levelSelectNode", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "backpackPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "skillNode", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "taskPrefab", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "strengthNode", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "placeholderNode", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvas.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Component;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "54e492KglRIHoR1ZE+GrE7Q", "ScenesMapCanvas", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvas = exports('ScenesMapCanvas', (_dec = ccclass('ScenesMapCanvas'), _dec(_class = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMapCanvas, _Component);
        function ScenesMapCanvas() {
          return _Component.apply(this, arguments) || this;
        }
        var _proto = ScenesMapCanvas.prototype;
        _proto.start = function start() {};
        _proto.update = function update(deltaTime) {};
        return ScenesMapCanvas;
      }(Component)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasFial.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, Sprite, Color, director, ExtensionComponent;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Sprite = module.Sprite;
      Color = module.Color;
      director = module.director;
    }, function (module) {
      ExtensionComponent = module.default;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "07c4c4v6YFMTo20WcD/C8ZN", "ScenesMapCanvasFial", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasFial = exports('ScenesMapCanvasFial', (_dec = ccclass('ScenesMapCanvasFial'), _dec(_class = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMapCanvasFial, _ExtensionComponent);
        function ScenesMapCanvasFial() {
          return _ExtensionComponent.apply(this, arguments) || this;
        }
        var _proto = ScenesMapCanvasFial.prototype;
        _proto.plaFialAnimation = function plaFialAnimation() {
          var sprite = this.node.getChildByName("Sprite").getComponent(Sprite);
          sprite.color = new Color(0, 0, 0, 0);
          this.setAutoInterval(function () {
            sprite.color = new Color(0, 0, 0, sprite.color.a + 10);
          }, {
            count: 25,
            timer: 20
          });
        };
        _proto.returnToMain = function returnToMain() {
          director.loadScene("Main");
        };
        return ScenesMapCanvasFial;
      }(ExtensionComponent)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasMap.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './SpineAnimation.ts', './FightMapInstance.ts', './FightMapManager.ts', './ScenesMapCanvasPlayer.ts', './index3.ts', './FightPrefab.ts', './CharacterManager2.ts', './Message.ts', './FightProgress.ts', './ResourceManager.ts', './BackpackManager.ts', './EquipmentManager.ts', './Share.ts', './CharacterManager.ts', './AchivementManager.ts', './ScenesMapCanvasFial.ts', './LanguageEntry.ts', './SettingManager.ts', './LanguageManager.ts', './ScenesMapCanvasSound.ts', './Normal.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, _createClass, cclegacy, _decorator, Node, NodeEventType, UITransform, Sprite, instantiate, Label, Vec2, ScrollView, Prefab, Color, ExtensionComponent, SpineAnimation, MapDistribution, getFightMapInstance, ScenesMapCanvasPlayer, CcNative, FightPrefab, getCharacterKey, message, Progress, resourceManager, backpackManager, equipmentManager, createId, characterManager, achivementManager, ScenesMapCanvasFial, LanguageEntry, settingManager, LanguageManager, ScenesMapCanvasSound, Normal;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      NodeEventType = module.NodeEventType;
      UITransform = module.UITransform;
      Sprite = module.Sprite;
      instantiate = module.instantiate;
      Label = module.Label;
      Vec2 = module.Vec2;
      ScrollView = module.ScrollView;
      Prefab = module.Prefab;
      Color = module.Color;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      MapDistribution = module.MapDistribution;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      ScenesMapCanvasPlayer = module.ScenesMapCanvasPlayer;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      FightPrefab = module.FightPrefab;
    }, function (module) {
      getCharacterKey = module.getCharacterKey;
    }, function (module) {
      message = module.message;
    }, function (module) {
      Progress = module.Progress;
    }, function (module) {
      resourceManager = module.resourceManager;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      createId = module.createId;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      ScenesMapCanvasFial = module.ScenesMapCanvasFial;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ScenesMapCanvasSound = module.ScenesMapCanvasSound;
    }, function (module) {
      Normal = module.Normal;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6;
      cclegacy._RF.push({}, "69790UXb3xF6rV+yp6qZW1o", "ScenesMapCanvasMap", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var mapWidth = exports('mapWidth', 130),
        mapHeight = exports('mapHeight', 130);
      var ScenesMapCanvasMap = exports('ScenesMapCanvasMap', (_dec = ccclass('ScenesMapCanvasMap'), _dec2 = property(Node), _dec3 = property(Node), _dec4 = property(Node), _dec5 = property(Node), _dec6 = property(Node), _dec7 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMapCanvasMap, _ExtensionComponent);
        function ScenesMapCanvasMap() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "PlayerNode", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "SoundNode", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "FialNode", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "MiniMapContentNode", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "FightContentNode", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "TrangleNode", _descriptor6, _assertThisInitialized(_this));
          _this.instance = getFightMapInstance();
          // 地图模板节点
          _this.templateMapItem = null;
          // 小地图模板节点
          _this.templateMiniMapItem = null;
          // 怪物模板节点
          _this.templateMonsterItem = null;
          // 障碍物模板节点
          _this.templateObstacleItem = null;
          // 宝箱模板节点
          _this.templatetreasureItem = null;
          // 强化符文模板节点
          _this.templateReinforcementItem = null;
          // 所有地图节点
          _this.mapItems = [];
          // 所有强化符文节点
          _this.reinforcementItems = [];
          // 所有怪物节点
          _this.monsterItems = [];
          // 所有小地图节点
          _this.miniMapItems = [];
          // 是否结束
          _this.stopMoving = null;
          // 是否是取消的移动还是到达终点的移动
          _this.isCancelMoving = false;
          return _this;
        }
        var _proto = ScenesMapCanvasMap.prototype;
        _proto.start = function start() {
          this.templateMapItem = this.node.getChildByName("MapContent").getChildByName("MapItem");
          this.templateMonsterItem = this.node.getChildByName("MonsterContent").getChildByName("MonsterItem");
          this.templateObstacleItem = this.node.getChildByName("ObstacleContent").getChildByName("ObstacleIcon");
          this.templatetreasureItem = this.node.getChildByName("TreasureContent").getChildByName("TreasureIcon");
          this.templateReinforcementItem = this.node.getChildByName("ReinforcementContent").getChildByName("ReinforcementItem");
          this.templateMiniMapItem = this.MiniMapContentNode.children[0];
          this.templateMapItem.parent = null;
          this.templateMonsterItem.parent = null;
          this.templateMiniMapItem.parent = null;
          this.templatetreasureItem.parent = null;
          this.createFightMap();
          this.createMiniFightMap();
          this.createMonster();
          this.renderMonster();
          this.renderTreasure();
          this.renderObstacle();
          this.renderReinforcement();
          this.renderFightMap();
          this.renderMiniMap();
        }

        // 创建战斗地图
        ;

        _proto.createFightMap = function createFightMap() {
          var _this2 = this;
          // 创建地图渲染节点
          this.instance.mapAtlas.forEach(function (list, y) {
            if (!list) return;
            _this2.mapItems[y] = _this2.mapItems[y] || [];
            list.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(spriteList, x) {
              var node, icon, maskNode, i, getSprite, spriteFrame, spriteNode, uiTransform, sprite;
              return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    node = _this2.mapItems[y][x] = instantiate(_this2.templateMapItem);
                    icon = node.getChildByName("Icon");
                    maskNode = node.getChildByName("Mask");
                    i = 0;
                  case 4:
                    if (!(i < spriteList.length)) {
                      _context2.next = 19;
                      break;
                    }
                    getSprite = spriteList[i];
                    _context2.next = 8;
                    return getSprite();
                  case 8:
                    spriteFrame = _context2.sent;
                    spriteNode = new Node();
                    uiTransform = spriteNode.addComponent(UITransform);
                    sprite = spriteNode.addComponent(Sprite);
                    sprite.sizeMode = Sprite.SizeMode.CUSTOM;
                    uiTransform.setContentSize(mapWidth, mapHeight);
                    sprite.spriteFrame = spriteFrame;
                    icon.addChild(spriteNode);
                  case 16:
                    i++;
                    _context2.next = 4;
                    break;
                  case 19:
                    node.on(NodeEventType.TOUCH_START, function () {
                      _this2.mapItems.forEach(function (col) {
                        return col.forEach(function (n) {
                          if (n) n.getChildByName("Mask").active = false;
                        });
                      });
                      maskNode.active = true;
                    });
                    node.on(NodeEventType.TOUCH_END, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
                      return _regeneratorRuntime().wrap(function _callee$(_context) {
                        while (1) switch (_context.prev = _context.next) {
                          case 0:
                            maskNode.active = false;
                            if (_this2.instance.mapDistribution[y] && _this2.instance.mapDistribution[y][x] && !_this2.instance.mapDistribution[y][x].includes(MapDistribution.OBSTACLE) && !_this2.instance.mapDistribution[y][x].includes(MapDistribution.WALL)) _this2.moveTo(x, y);
                          case 2:
                          case "end":
                            return _context.stop();
                        }
                      }, _callee);
                    })));
                    node.on(NodeEventType.TOUCH_CANCEL, function () {
                      return maskNode.active = false;
                    });
                  case 22:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            })));
          });
          return;
        }

        // 创建小地图
        ;

        _proto.createMiniFightMap = function createMiniFightMap() {
          var _this3 = this;
          this.instance.mapAtlas.forEach(function (list, y) {
            if (!list) return;
            list.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(spriteList, x) {
              var miniMap;
              return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                while (1) switch (_context3.prev = _context3.next) {
                  case 0:
                    if (spriteList) {
                      _context3.next = 2;
                      break;
                    }
                    return _context3.abrupt("return");
                  case 2:
                    if (!(!_this3.instance.mapDistribution[y] || !_this3.instance.mapDistribution[y][x] || _this3.instance.mapDistribution[y][x].includes(MapDistribution.WALL))) {
                      _context3.next = 4;
                      break;
                    }
                    return _context3.abrupt("return");
                  case 4:
                    // 小地图
                    miniMap = instantiate(_this3.templateMiniMapItem);
                    miniMap.getComponent(UITransform).width = 15;
                    miniMap.getComponent(UITransform).height = 15;
                    if (!_this3.miniMapItems[y]) _this3.miniMapItems[y] = [];
                    if (spriteList.length > 0) _this3.miniMapItems[y][x] = miniMap;else _this3.miniMapItems[y][x] = null;
                  case 9:
                  case "end":
                    return _context3.stop();
                }
              }, _callee3);
            })));
          });
          // 地图名称
          this.node.getChildByName("MapName").getComponent(Label).string = this.instance.proto.name;
          return;
        }

        // 创建怪物节点
        ;

        _proto.createMonster = function createMonster() {
          var _this4 = this;
          this.instance.monsterData.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(monsterData) {
            var node, stop, spineAnimation;
            return _regeneratorRuntime().wrap(function _callee4$(_context4) {
              while (1) switch (_context4.prev = _context4.next) {
                case 0:
                  node = instantiate(_this4.templateMonsterItem);
                  if (!_this4.monsterItems[monsterData.position.y]) _this4.monsterItems[monsterData.position.y] = [];
                  stop = null;
                  node.on(NodeEventType.TOUCH_START, function (event) {
                    event.preventSwallow = true;
                    stop = _this4.setAutoInterval(function () {
                      _this4.showMonsterProperty(monsterData.position);
                      stop = null;
                    }, {
                      timer: 500,
                      count: 1
                    });
                  });
                  node.on(NodeEventType.TOUCH_END, function (event) {
                    if (stop) {
                      event.preventSwallow = true;
                      stop && stop();
                    }
                  });
                  node.on(NodeEventType.TOUCH_CANCEL, function (event) {
                    event.preventSwallow = true;
                    stop && stop();
                  });
                  _this4.monsterItems[monsterData.position.y][monsterData.position.x] = node;
                  node.setPosition(monsterData.position.x * mapWidth - mapWidth / 2, -monsterData.position.y * mapHeight + mapHeight / 2);
                  if (monsterData.isBoss) node.setScale(node.scale.x * 1.5, node.scale.y * 1.5);
                  spineAnimation = node.getChildByName('Spine').getComponent(SpineAnimation);
                  _context4.next = 12;
                  return monsterData.character.proto.skeletonData();
                case 12:
                  spineAnimation.skeletonData = _context4.sent;
                  spineAnimation.playAnimation(monsterData.character.proto.animation.animations.idle);
                case 14:
                case "end":
                  return _context4.stop();
              }
            }, _callee4);
          })));
          return;
        }

        // 按区域显示地图
        ;

        _proto.renderFightMap = function renderFightMap() {
          // 显示区域
          var areax = 4,
            areay = 6;
          var content = this.node.getChildByName("MapContent");
          // 需要添加的节点
          var needRenderNode = [];
          for (var y = this.instance.playerPosition.y - areay; y <= this.instance.playerPosition.y + areay; y++) {
            for (var x = this.instance.playerPosition.x - areax; x <= this.instance.playerPosition.x + areax; x++) {
              var _this$mapItems$y;
              var node = (_this$mapItems$y = this.mapItems[y]) == null ? void 0 : _this$mapItems$y[x];
              if (!node) continue;
              needRenderNode.push(node);
              node.setPosition(x * mapWidth - mapWidth / 2, -y * mapWidth + mapWidth / 2);
            }
          }
          // 移除不需要的节点
          var childrens = Array.from(content.children);
          childrens.forEach(function (node) {
            var index = needRenderNode.indexOf(node);
            // 移除不需要的节点
            if (index === -1) content.removeChild(node);
            // 避免反复添加
            else needRenderNode.splice(index, 1);
          });
          // 添加需要的节点
          needRenderNode.forEach(function (node) {
            return content.addChild(node);
          });
          return;
        }

        // 渲染小地图
        ;

        _proto.renderMiniMap = function renderMiniMap() {
          var _this5 = this;
          var miniAreax = 8,
            miniAreay = 8;
          var needRenderNode = [];
          for (var y = this.instance.playerPosition.y - miniAreay; y <= this.instance.playerPosition.y + miniAreay; y++) {
            for (var x = this.instance.playerPosition.x - miniAreax; x <= this.instance.playerPosition.x + miniAreax; x++) {
              var _this$miniMapItems$y, _this$instance$mapDis;
              var node = (_this$miniMapItems$y = this.miniMapItems[y]) == null ? void 0 : _this$miniMapItems$y[x];
              if (!node) continue;
              // 可视范围内
              node.setPosition(x * 15 - 15 / 2, -y * 15 + 15 / 2);
              var bossIcon = node.getChildByName("BossIcon");
              var monsterIcon = node.getChildByName("MonsterIcon");
              var endIcon = node.getChildByName("EndIcon");
              var treasureIcon = node.getChildByName("TreasureIcon");
              var reinforcementIcon = node.getChildByName("ReinforcementIcon");
              bossIcon.active = false;
              monsterIcon.active = false;
              endIcon.active = false;
              treasureIcon.active = false;
              reinforcementIcon.active = false;
              // 添加渲染队列 
              needRenderNode.push(node);
              // 根据分布记录渲染
              var mapDistribution = ((_this$instance$mapDis = this.instance.mapDistribution[y]) == null ? void 0 : _this$instance$mapDis[x]) || [];
              if (mapDistribution.includes(MapDistribution.MONSTER)) {
                if (mapDistribution.includes(MapDistribution.BOSS)) bossIcon.active = true;else monsterIcon.active = true;
                continue;
              }
              if (mapDistribution.includes(MapDistribution.TREASURE)) {
                treasureIcon.active = true;
                continue;
              }
              if (mapDistribution.includes(MapDistribution.REINFORCEMENT)) {
                reinforcementIcon.active = true;
                continue;
              }
              if (mapDistribution.includes(MapDistribution.END_POSITION)) endIcon.active = true;
            }
          }
          // 移除不需要的节点
          var childrens = Array.from(this.MiniMapContentNode.children);
          childrens.forEach(function (node) {
            var index = needRenderNode.indexOf(node);
            // 移除不需要的节点
            if (index === -1) _this5.MiniMapContentNode.removeChild(node);else needRenderNode.splice(index, 1);
          });
          // 添加需要的节点
          needRenderNode.forEach(function (node) {
            return _this5.MiniMapContentNode.addChild(node);
          });
        }

        // 显示怪物 
        ;

        _proto.renderMonster = function renderMonster() {
          var _this6 = this;
          var areax = 4,
            areay = 6;
          var content = this.node.getChildByName("MonsterContent");
          var needRenderNode = [];
          this.monsterItems.forEach(function (list, y) {
            list.forEach(function (monsterNode, x) {
              if (!monsterNode) return;
              // 是否在显示范围内
              if (Math.abs(x - _this6.instance.playerPosition.x) > areax || Math.abs(y - _this6.instance.playerPosition.y) > areay) return;
              needRenderNode.push({
                position: new Vec2(x, y),
                node: monsterNode
              });
            });
          });
          // 移除不需要的节点
          var childrens = Array.from(content.children);
          childrens.forEach(function (node) {
            var index = needRenderNode.findIndex(function (item) {
              return item.node === node;
            });
            // 移除不需要的节点
            if (index === -1) content.removeChild(node);else needRenderNode.splice(index, 1);
          });
          // 添加需要的节点
          needRenderNode.forEach(function (data) {
            var monsterInstance = null;
            content.addChild(data.node);
            for (var i = 0; i < _this6.instance.monsterData.length; i++) {
              var monster = _this6.instance.monsterData[i];
              if (monster.position.equals(data.position)) monsterInstance = monster.character;
            }
            if (!monsterInstance) return;
            var spineAnimation = data.node.getChildByName('Spine').getComponent(SpineAnimation);
            spineAnimation.playAnimation(monsterInstance.proto.animation.animations.idle);
          });
          return;
        }

        // 显示宝箱
        ;

        _proto.renderTreasure = function renderTreasure() {
          var _this7 = this;
          var content = this.node.getChildByName("TreasureContent");
          var children = content.children;
          content.removeAllChildren();
          children.forEach(function (child) {
            return child.destroy();
          });
          this.instance.treasureData.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(treasureData) {
            var node, icon, _icon;
            return _regeneratorRuntime().wrap(function _callee5$(_context5) {
              while (1) switch (_context5.prev = _context5.next) {
                case 0:
                  node = instantiate(_this7.templatetreasureItem);
                  node.setPosition(treasureData.position.x * mapWidth - mapWidth / 2, -treasureData.position.y * mapHeight + mapHeight / 2, 0);
                  if (!treasureData.open) {
                    _context5.next = 9;
                    break;
                  }
                  _context5.next = 5;
                  return treasureData.openIcon();
                case 5:
                  icon = _context5.sent;
                  node.getComponent(Sprite).spriteFrame = icon;
                  _context5.next = 13;
                  break;
                case 9:
                  _context5.next = 11;
                  return treasureData.closeIcon();
                case 11:
                  _icon = _context5.sent;
                  node.getComponent(Sprite).spriteFrame = _icon;
                case 13:
                  content.addChild(node);
                case 14:
                case "end":
                  return _context5.stop();
              }
            }, _callee5);
          })));
          return;
        }

        // 显示障碍物
        ;

        _proto.renderObstacle = function renderObstacle() {
          var _this8 = this;
          var content = this.node.getChildByName("ObstacleContent");
          content.removeAllChildren();
          this.instance.obstacleData.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(obstacleData) {
            var node, icon;
            return _regeneratorRuntime().wrap(function _callee6$(_context6) {
              while (1) switch (_context6.prev = _context6.next) {
                case 0:
                  node = instantiate(_this8.templateObstacleItem);
                  node.setPosition(obstacleData.position.x * mapWidth - mapWidth / 2, -obstacleData.position.y * mapHeight + mapHeight / 2, 0);
                  icon = _this8.instance.proto.obstacleIcon[Math.floor(Math.random() * _this8.instance.proto.obstacleIcon.length)];
                  _context6.next = 5;
                  return icon();
                case 5:
                  node.getComponent(Sprite).spriteFrame = _context6.sent;
                  node.getComponent(UITransform).width = mapWidth;
                  node.getComponent(UITransform).height = mapWidth;
                  content.addChild(node);
                case 9:
                case "end":
                  return _context6.stop();
              }
            }, _callee6);
          })));
        }

        // 显示强化符文
        ;

        _proto.renderReinforcement = function renderReinforcement() {
          var _this9 = this;
          var content = this.node.getChildByName("ReinforcementContent");
          content.removeAllChildren();
          this.reinforcementItems = [];
          this.instance.reinforcementData.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(reinforcementData) {
            var node, icon;
            return _regeneratorRuntime().wrap(function _callee7$(_context7) {
              while (1) switch (_context7.prev = _context7.next) {
                case 0:
                  node = null;
                  node = instantiate(_this9.templateReinforcementItem);
                  node.setPosition(reinforcementData.position.x * mapWidth - mapWidth / 2, -reinforcementData.position.y * mapHeight + mapHeight / 2, 0);
                  if (!_this9.reinforcementItems[reinforcementData.position.y]) _this9.reinforcementItems[reinforcementData.position.y] = [];
                  _this9.reinforcementItems[reinforcementData.position.y][reinforcementData.position.x] = node;
                  _context7.next = 7;
                  return reinforcementData.data.icon();
                case 7:
                  icon = _context7.sent;
                  node.getComponent(Sprite).spriteFrame = icon;
                  content.addChild(node);
                case 10:
                case "end":
                  return _context7.stop();
              }
            }, _callee7);
          })));
        };
        // 移动到指定位置
        _proto.moveTo = /*#__PURE__*/
        function () {
          var _moveTo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(x, y) {
            var _this10 = this;
            return _regeneratorRuntime().wrap(function _callee9$(_context9) {
              while (1) switch (_context9.prev = _context9.next) {
                case 0:
                  return _context9.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(res) {
                    var movePath, stop, stopRes, spineAnimation, scenesMapCanvasPlayer, i, obstacle;
                    return _regeneratorRuntime().wrap(function _callee8$(_context8) {
                      while (1) switch (_context8.prev = _context8.next) {
                        case 0:
                          if (!_this10.stopMoving) {
                            _context8.next = 3;
                            break;
                          }
                          _context8.next = 3;
                          return _this10.stopMoving();
                        case 3:
                          // 寻路算法
                          movePath = _this10.instance.findPath({
                            x: _this10.instance.playerPosition.x,
                            y: _this10.instance.playerPosition.y
                          }, {
                            x: x,
                            y: y
                          }); // 根据路径移动
                          stop = false, stopRes = null;
                          _this10.stopMoving = function () {
                            stop = true;
                            _this10.isCancelMoving = true;
                            return new Promise(function (res) {
                              return stopRes = function stopRes() {
                                return res(null);
                              };
                            });
                          };
                          // 循环执行移动路径
                          spineAnimation = _this10.PlayerNode.getComponent(ScenesMapCanvasPlayer).spineAnimation; // 播放动画
                          if (!_this10.isCancelMoving) spineAnimation.playAnimation(_this10.instance.player.proto.animation.animations.move, {
                            animationCache: true
                          });
                          scenesMapCanvasPlayer = _this10.PlayerNode.getComponent(ScenesMapCanvasPlayer);
                          _this10.isCancelMoving = false;
                          i = 0;
                        case 11:
                          if (!(i < movePath.length)) {
                            _context8.next = 34;
                            break;
                          }
                          if (!stop) {
                            _context8.next = 14;
                            break;
                          }
                          return _context8.abrupt("break", 34);
                        case 14:
                          // 移动转向
                          _this10.turnDirection(movePath[i]);
                          // 遇到障碍物则停止移动并且出发相关效果
                          obstacle = _this10.isObstacle({
                            x: _this10.instance.playerPosition.x,
                            y: _this10.instance.playerPosition.y
                          }, movePath[i]); // 判断下一步是否是怪物
                          if (!(obstacle.type === "monster")) {
                            _context8.next = 19;
                            break;
                          }
                          _this10.encounterMonster(obstacle.nextPos);
                          return _context8.abrupt("break", 34);
                        case 19:
                          if (!(obstacle.type === "treasure")) {
                            _context8.next = 22;
                            break;
                          }
                          _this10.encounterTreasure(obstacle.nextPos);
                          return _context8.abrupt("break", 34);
                        case 22:
                          if (!(obstacle.type === "end")) {
                            _context8.next = 25;
                            break;
                          }
                          _this10.onLeave();
                          return _context8.abrupt("break", 34);
                        case 25:
                          // 判断下一步是否是强化符文
                          if (obstacle.type === "reinforcement") {
                            _this10.encounterReinforcecment(obstacle.nextPos);
                          }
                          // 移动
                          _context8.next = 28;
                          return scenesMapCanvasPlayer.movePlayer(movePath[i]);
                        case 28:
                          _this10.renderFightMap();
                          _this10.renderMiniMap();
                          _this10.renderMonster();
                        case 31:
                          i++;
                          _context8.next = 11;
                          break;
                        case 34:
                          // 播放等待动画
                          if (!_this10.isCancelMoving) spineAnimation.playAnimation(_this10.instance.player.proto.animation.animations.idle);
                          res(null);
                          if (stopRes) stopRes();
                          _this10.stopMoving = null;
                        case 38:
                        case "end":
                          return _context8.stop();
                      }
                    }, _callee8);
                  }))));
                case 1:
                case "end":
                  return _context9.stop();
              }
            }, _callee9);
          }));
          function moveTo(_x9, _x10) {
            return _moveTo.apply(this, arguments);
          }
          return moveTo;
        }() // 转向回调
        ;

        _proto.turnDirection = /*#__PURE__*/
        function () {
          var _turnDirection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(direction) {
            var spineAnimation;
            return _regeneratorRuntime().wrap(function _callee10$(_context10) {
              while (1) switch (_context10.prev = _context10.next) {
                case 0:
                  spineAnimation = this.PlayerNode.getComponent(ScenesMapCanvasPlayer).spineAnimation;
                  if (direction === "left") {
                    spineAnimation.node.setScale(-Math.abs(spineAnimation.node.scale.x), spineAnimation.node.scale.y);
                    this.TrangleNode.angle = 90;
                  }
                  if (direction === "right") {
                    spineAnimation.node.setScale(Math.abs(spineAnimation.node.scale.x), spineAnimation.node.scale.y);
                    this.TrangleNode.angle = -90;
                  }
                  if (direction === "up") {
                    this.TrangleNode.angle = 0;
                  }
                  if (direction === "down") {
                    this.TrangleNode.angle = 180;
                  }
                case 5:
                case "end":
                  return _context10.stop();
              }
            }, _callee10, this);
          }));
          function turnDirection(_x12) {
            return _turnDirection.apply(this, arguments);
          }
          return turnDirection;
        }() // 遭遇怪物回调
        ;

        _proto.encounterMonster = /*#__PURE__*/
        function () {
          var _encounterMonster = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(monsterPos) {
            var _this11 = this;
            var monsterNode, monsterData, parent, fightPrefab, node, successDirect;
            return _regeneratorRuntime().wrap(function _callee11$(_context11) {
              while (1) switch (_context11.prev = _context11.next) {
                case 0:
                  if (this.monsterItems[monsterPos.y]) {
                    _context11.next = 2;
                    break;
                  }
                  return _context11.abrupt("return");
                case 2:
                  if (this.monsterItems[monsterPos.y][monsterPos.x]) {
                    _context11.next = 4;
                    break;
                  }
                  return _context11.abrupt("return");
                case 4:
                  monsterNode = this.monsterItems[monsterPos.y][monsterPos.x]; // 怪物数据
                  monsterData = this.instance.monsterData.find(function (monsterD) {
                    return monsterD.position.x === monsterPos.x && monsterD.position.y === monsterPos.y;
                  }); // 怪物不存在
                  if (monsterData) {
                    _context11.next = 8;
                    break;
                  }
                  return _context11.abrupt("return");
                case 8:
                  // 开始战斗
                  parent = this.FightContentNode;
                  _context11.next = 11;
                  return new CcNative.Asset.AssetManager("PrefabResource").load("FightPrefab/FightPrefab", Prefab);
                case 11:
                  fightPrefab = _context11.sent;
                  node = CcNative.instantiate(fightPrefab.value);
                  parent.addChild(node);
                  _context11.next = 16;
                  return node.getComponent(FightPrefab).setFightAndStart({
                    player: "left",
                    leftCharacter: this.instance.player,
                    rightCharacter: monsterData.character,
                    onStart: function onStart() {
                      _this11.instance.currentMonster = monsterData.character;
                    }
                  });
                case 16:
                  successDirect = _context11.sent;
                  if (!(successDirect === "left")) {
                    _context11.next = 27;
                    break;
                  }
                  this.instance.removeMonster(monsterPos);
                  this.moveTo(monsterPos.x, monsterPos.y);
                  this.instance.player.emitProgress("fightSuccessEnd", new Progress());
                  this.instance.currentMonster = null;
                  this.winSettlement(monsterData);
                  monsterNode.parent = this.monsterItems[monsterPos.y][monsterPos.x] = null;
                  monsterNode.destroy();
                  _context11.next = 33;
                  break;
                case 27:
                  this.instance.currentMonster = null;
                  if (!(this.instance.player.hp <= 0)) {
                    _context11.next = 33;
                    break;
                  }
                  _context11.next = 31;
                  return new Promise(function (res) {
                    return setTimeout(res, 500);
                  });
                case 31:
                  this.FialNode.active = true;
                  this.FialNode.getComponent(ScenesMapCanvasFial).plaFialAnimation();
                case 33:
                  parent.removeChild(node);
                case 34:
                case "end":
                  return _context11.stop();
              }
            }, _callee11, this);
          }));
          function encounterMonster(_x13) {
            return _encounterMonster.apply(this, arguments);
          }
          return encounterMonster;
        }() // 遭遇宝箱回调
        ;

        _proto.encounterTreasure = function encounterTreasure(treasurePos) {
          var treasureData;
          this.instance.treasureData.forEach(function (treasure) {
            if (treasure.position.x === treasurePos.x && treasure.position.y === treasurePos.y) treasureData = treasure;
          });
          if (!treasureData || treasureData.open) return;
          var reward = this.instance.proto.getTreasureGoldReward(treasureData.level);
          var getItems = [];
          reward.items.forEach(function (item) {
            getItems.push(backpackManager.data.addItem(item.prototype, item.count));
          });
          var getEquipments = [];
          reward.equipments.forEach(function (equip) {
            getEquipments.push(equipmentManager.data.addEquipment(equip.prototype, equip.quality));
          });
          backpackManager.save();
          equipmentManager.save();
          message.congratulations(reward.gold, reward.diamond, getItems, getEquipments);
          treasureData.open = true;
          // 播放音效
          this.SoundNode.getComponent(ScenesMapCanvasSound).playGetAwardSound();
          // 渲染宝箱
          this.renderTreasure();
        }

        // 遭遇强化符文
        ;

        _proto.encounterReinforcecment = /*#__PURE__*/
        function () {
          var _encounterReinforcecment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(rineforcecmentPos) {
            var _this12 = this;
            var node, reinforcementData, playDestroyAnimation;
            return _regeneratorRuntime().wrap(function _callee13$(_context13) {
              while (1) switch (_context13.prev = _context13.next) {
                case 0:
                  if (this.reinforcementItems[rineforcecmentPos.y]) {
                    _context13.next = 2;
                    break;
                  }
                  return _context13.abrupt("return");
                case 2:
                  if (this.reinforcementItems[rineforcecmentPos.y][rineforcecmentPos.x]) {
                    _context13.next = 4;
                    break;
                  }
                  return _context13.abrupt("return");
                case 4:
                  node = this.reinforcementItems[rineforcecmentPos.y][rineforcecmentPos.x]; // 符文数据
                  reinforcementData = this.instance.reinforcementData.find(function (v) {
                    return v.position.x === rineforcecmentPos.x && v.position.y === rineforcecmentPos.y;
                  });
                  this.instance.removeReinforcement(rineforcecmentPos);
                  playDestroyAnimation = /*#__PURE__*/function () {
                    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
                      return _regeneratorRuntime().wrap(function _callee12$(_context12) {
                        while (1) switch (_context12.prev = _context12.next) {
                          case 0:
                            return _context12.abrupt("return", new Promise(function (res) {
                              var sprite = node.getComponent(Sprite);
                              var rgba = new Color(255, 255, 255, 255);
                              var posY = node.position.y;
                              _this12.setAutoInterval(function () {
                                sprite.color = rgba;
                                node.setPosition(node.x, posY);
                                posY += 2.5;
                                rgba = new Color(255, 255, 255, rgba.a - 9);
                              }, {
                                timer: 35,
                                count: 30,
                                complete: function complete() {
                                  return res(null);
                                }
                              });
                            }));
                          case 1:
                          case "end":
                            return _context12.stop();
                        }
                      }, _callee12);
                    }));
                    return function playDestroyAnimation() {
                      return _ref9.apply(this, arguments);
                    };
                  }();
                  this.instance.player.addProperty(reinforcementData.data.property());
                  _context13.next = 11;
                  return playDestroyAnimation();
                case 11:
                  this.reinforcementItems[rineforcecmentPos.y][rineforcecmentPos.x] = node.parent = null;
                  node.destroy();
                case 13:
                case "end":
                  return _context13.stop();
              }
            }, _callee13, this);
          }));
          function encounterReinforcecment(_x14) {
            return _encounterReinforcecment.apply(this, arguments);
          }
          return encounterReinforcecment;
        }() // 离开回调
        ;

        _proto.onLeave = /*#__PURE__*/
        function () {
          var _onLeave = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {
            var confirm;
            return _regeneratorRuntime().wrap(function _callee14$(_context14) {
              while (1) switch (_context14.prev = _context14.next) {
                case 0:
                  _context14.next = 2;
                  return message.confirm(new ( /*#__PURE__*/function (_LanguageEntry) {
                    _inheritsLoose(_class4, _LanguageEntry);
                    function _class4() {
                      return _LanguageEntry.apply(this, arguments) || this;
                    }
                    _createClass(_class4, [{
                      key: "chs",
                      get: function get() {
                        return "提示";
                      }
                    }, {
                      key: "eng",
                      get: function get() {
                        return "Hint";
                      }
                    }, {
                      key: "jpn",
                      get: function get() {
                        return "ヒント";
                      }
                    }]);
                    return _class4;
                  }(LanguageEntry))().getValue(settingManager.data.language), new ( /*#__PURE__*/function (_LanguageEntry2) {
                    _inheritsLoose(_class5, _LanguageEntry2);
                    function _class5() {
                      return _LanguageEntry2.apply(this, arguments) || this;
                    }
                    _createClass(_class5, [{
                      key: "chs",
                      get: function get() {
                        return "是否要离开本关卡？";
                      }
                    }, {
                      key: "eng",
                      get: function get() {
                        return "Do you want to leave this level?";
                      }
                    }, {
                      key: "jpn",
                      get: function get() {
                        return "本レベルを離れますか？";
                      }
                    }]);
                    return _class5;
                  }(LanguageEntry))().getValue(settingManager.data.language), LanguageManager.getEntry("Confirm").getValue(settingManager.data.language), LanguageManager.getEntry("Cancel").getValue(settingManager.data.language));
                case 2:
                  confirm = _context14.sent;
                  // 下一关
                  if (confirm) this.instance.proto.onLeave();
                case 4:
                case "end":
                  return _context14.stop();
              }
            }, _callee14, this);
          }));
          function onLeave() {
            return _onLeave.apply(this, arguments);
          }
          return onLeave;
        }() // 战斗胜利结算
        ;

        _proto.winSettlement = function winSettlement(monsterData) {
          var exp = monsterData.dto.dropExp();
          var gold = monsterData.dto.dropGold();
          var diamond = monsterData.dto.dropDiamond();
          var dropItems = monsterData.dto.dropItems;
          var dropEquipments = monsterData.dto.dropEquipments;
          var items = [];
          var equipments = [];
          characterManager.data.addExp(exp);
          characterManager.save();
          resourceManager.data.addGold(gold);
          resourceManager.data.addDiamond(diamond);
          resourceManager.save();
          var hasGetReward = false;
          for (var i = 0; i < dropItems.length; i++) {
            if (hasGetReward) break;
            if (dropItems[i].posibility() > Math.random()) {
              var count = dropItems[i].count();
              backpackManager.data.addItem(dropItems[i].item, count);
              items.push({
                prototype: dropItems[i].item,
                count: count
              });
              hasGetReward = true;
            }
          }
          for (var _i = 0; _i < dropEquipments.length; _i++) {
            if (hasGetReward) break;
            if (dropEquipments[_i].posibility() > Math.random()) {
              var dto = {
                lv: 1,
                id: createId(),
                extraProperty: {},
                prototype: dropEquipments[_i].equipment,
                quality: dropEquipments[_i].quality()
              };
              equipmentManager.data.addEquipment(dto.prototype, dto.quality);
              equipments.push(dto);
              hasGetReward = true;
            }
          }
          // 展示奖励
          if (diamond > 0 || items.length > 0 || equipments.length > 0) message.congratulations(0, diamond, items, equipments);
          // 展示金币经验奖励
          this.PlayerNode.getComponent(ScenesMapCanvasPlayer).playRewardAnimation(gold, exp);
          // 添加击杀记录
          achivementManager.data.addKillRecord(getCharacterKey(monsterData.character.proto));
          backpackManager.save();
          equipmentManager.save();
          achivementManager.save();
        }

        // 判断下一步是否是障碍物
        ;

        _proto.isObstacle = function isObstacle(pos, next) {
          var _this13 = this;
          var isMonster = function isMonster(nextPos) {
            for (var i = 0; i < _this13.instance.monsterData.length; i++) {
              var monsterData = _this13.instance.monsterData[i];
              if (monsterData.position.x === nextPos.x && monsterData.position.y === nextPos.y) {
                return true;
              }
            }
          };
          var isEnd = function isEnd(nextPos) {
            return nextPos.x === _this13.instance.endPosition.x && nextPos.y === _this13.instance.endPosition.y;
          };
          var isTreasure = function isTreasure(nextPos) {
            for (var i = 0; i < _this13.instance.treasureData.length; i++) {
              var treasureData = _this13.instance.treasureData[i];
              if (treasureData.position.x === nextPos.x && treasureData.position.y === nextPos.y) {
                return true;
              }
            }
          };
          var isReinforcement = function isReinforcement(nextPos) {
            for (var i = 0; i < _this13.instance.reinforcementData.length; i++) {
              var reinforcementData = _this13.instance.reinforcementData[i];
              if (reinforcementData.position.x === nextPos.x && reinforcementData.position.y === nextPos.y) {
                return true;
              }
            }
          };
          var nextPos;
          switch (next) {
            case "up":
              {
                nextPos = {
                  x: pos.x,
                  y: pos.y - 1
                };
                if (isMonster(nextPos)) return {
                  type: "monster",
                  nextPos: nextPos
                };
                if (isEnd(nextPos)) return {
                  type: "end",
                  nextPos: nextPos
                };
                if (isTreasure(nextPos)) return {
                  type: "treasure",
                  nextPos: nextPos
                };
                if (isReinforcement(nextPos)) return {
                  type: "reinforcement",
                  nextPos: nextPos
                };
                break;
              }
            case "down":
              {
                nextPos = {
                  x: pos.x,
                  y: pos.y + 1
                };
                if (isMonster(nextPos)) return {
                  type: "monster",
                  nextPos: nextPos
                };
                if (isEnd(nextPos)) return {
                  type: "end",
                  nextPos: nextPos
                };
                if (isTreasure(nextPos)) return {
                  type: "treasure",
                  nextPos: nextPos
                };
                if (isReinforcement(nextPos)) return {
                  type: "reinforcement",
                  nextPos: nextPos
                };
                break;
              }
            case "left":
              {
                nextPos = {
                  x: pos.x - 1,
                  y: pos.y
                };
                if (isMonster(nextPos)) return {
                  type: "monster",
                  nextPos: nextPos
                };
                if (isEnd(nextPos)) return {
                  type: "end",
                  nextPos: nextPos
                };
                if (isTreasure(nextPos)) return {
                  type: "treasure",
                  nextPos: nextPos
                };
                if (isReinforcement(nextPos)) return {
                  type: "reinforcement",
                  nextPos: nextPos
                };
                break;
              }
            case "right":
              {
                nextPos = {
                  x: pos.x + 1,
                  y: pos.y
                };
                if (isMonster(nextPos)) return {
                  type: "monster",
                  nextPos: nextPos
                };
                if (isEnd(nextPos)) return {
                  type: "end",
                  nextPos: nextPos
                };
                if (isTreasure(nextPos)) return {
                  type: "treasure",
                  nextPos: nextPos
                };
                if (isReinforcement(nextPos)) return {
                  type: "reinforcement",
                  nextPos: nextPos
                };
                break;
              }
          }
          return {
            type: "road",
            nextPos: nextPos
          };
        }

        // 展示怪物属性
        ;

        _proto.showMonsterProperty = function showMonsterProperty(monsterPos) {
          var monsterData = this.instance.monsterData.find(function (m) {
            return m.position.equals(monsterPos);
          });
          if (!monsterData) return;
          var detailInfo = this.node.getChildByName("MonsterDetailInfo");
          detailInfo.active = true;
          monsterData.character.proto.skeletonData().then(function (sk) {
            if (!sk) return;
            var spineAnimation = detailInfo.getChildByName("Spine").getComponent(SpineAnimation);
            spineAnimation.skeletonData = sk;
            spineAnimation.playAnimation(monsterData.character.proto.animation.animations.idle);
          });

          // 渲染其他属性
          var label = detailInfo.getChildByName("Detail").getComponent(ScrollView).content.getComponent(Label);
          label.string = "";
          var property = [{
            key: "maxHp",
            force: false,
            fixed: 0,
            rate: 1,
            exit: ""
          }, {
            key: "maxMp",
            force: false,
            fixed: 0,
            rate: 1,
            exit: ""
          }, {
            key: "physicalAttack",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "magicAttack",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "lightAttack",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "darkAttack",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "physicalDefense",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "magicDefense",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "lightResistance",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "darkResistance",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "physicalPenetration",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "magicPenetration",
            force: false,
            fixed: 1,
            rate: 1,
            exit: ""
          }, {
            key: "criticalRate",
            force: false,
            fixed: 1,
            rate: 100,
            exit: "%"
          }, {
            key: "criticalDamage",
            force: false,
            fixed: 1,
            rate: 100,
            exit: "%"
          }, {
            key: "attackSpeed",
            force: true,
            fixed: 2,
            rate: 1,
            exit: ""
          }];
          property.forEach(function (setting) {
            label.string += LanguageManager.getEntry(setting.key).getValue(settingManager.data.language) + ": " + Normal.number(monsterData.character[setting.key] * setting.rate, setting.fixed) + setting.exit + "\n";
          });

          // 简介
          detailInfo.getChildByName("Description").getComponent(Label).string = monsterData.character.proto.description;
        }

        // 隐藏怪物属性
        ;

        _proto.hideMonsterProperty = function hideMonsterProperty() {
          this.node.getChildByName("MonsterDetailInfo").active = false;
        };
        _proto.update = function update(dt) {
          // 同步虚拟坐标
          var pos = this.PlayerNode.getComponent(ScenesMapCanvasPlayer).virtualPosition;
          this.node.getChildByName("MapContent").setPosition(-pos.x, -pos.y);
          this.node.getChildByName("MonsterContent").setPosition(-pos.x, -pos.y);
          this.node.getChildByName("ObstacleContent").setPosition(-pos.x, -pos.y);
          this.node.getChildByName("TreasureContent").setPosition(-pos.x, -pos.y);
          this.node.getChildByName("ReinforcementContent").setPosition(-pos.x, -pos.y);
          this.node.getChildByName("EndIcon").setPosition(-pos.x - mapWidth / 2 + this.instance.endPosition.x * mapWidth, -pos.y + mapHeight / 2 - this.instance.endPosition.y * mapHeight);
          this.MiniMapContentNode.setPosition(-pos.x * 15 / mapWidth, -pos.y * 15 / mapWidth);
        };
        return ScenesMapCanvasMap;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "PlayerNode", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "SoundNode", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "FialNode", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "MiniMapContentNode", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "FightContentNode", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "TrangleNode", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasMedicine.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './LanguageEntry.ts', './ModuleVirtualListPrefab.ts', './index6.ts', './EquipmentItemPrefab.ts', './BackpackManager.ts', './LevelDataManager.ts', './SettingManager.ts', './Message.ts', './ItemInstance.ts', './ItemManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _createClass, cclegacy, _decorator, Node, Sprite, instantiate, Color, ExtensionComponent, LanguageEntry, ModuleVirtualListPrefab, Rx, EquipmentItemPrefab, backpackManager, levelDataManager, settingManager, message, ItemInstance, getMedicineItemPrototype;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      Sprite = module.Sprite;
      instantiate = module.instantiate;
      Color = module.Color;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      ModuleVirtualListPrefab = module.ModuleVirtualListPrefab;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      EquipmentItemPrefab = module.EquipmentItemPrefab;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      levelDataManager = module.levelDataManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      ItemInstance = module.ItemInstance;
    }, function (module) {
      getMedicineItemPrototype = module.getMedicineItemPrototype;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4;
      cclegacy._RF.push({}, "e264bgOGbxL+Z9vKjrJPYgI", "ScenesMapCanvasMedicine", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasMedicine = exports('ScenesMapCanvasMedicine', (_dec = ccclass('ScenesMapCanvasMedicine'), _dec2 = property(Node), _dec3 = property(Node), _dec4 = property(Node), _dec5 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMapCanvasMedicine, _ExtensionComponent);
        function ScenesMapCanvasMedicine() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 所有item界面
          _initializerDefineProperty(_this, "AllMedicinePanel", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "HasSelectMeidicinePanel", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "allMedicineItemTemplate", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "selectedMedicineItemTemplate", _descriptor4, _assertThisInitialized(_this));
          // 当前是否显示所有
          _this.showAll = Rx.ref(false);
          // 是否在动画中
          _this.isAnimation = false;
          // 选择的item
          _this.selectItems = Rx.reactive(Array.from(levelDataManager.data.medicineList));
          // 药品时间
          _this.medicineTime = Rx.ref(0);
          return _this;
        }
        var _proto = ScenesMapCanvasMedicine.prototype;
        // 初始化
        _proto.start = function start() {
          var _this2 = this;
          // 移除模板
          this.allMedicineItemTemplate.parent = null;
          this.selectedMedicineItemTemplate.parent = null;
          // 渲染所有物品
          this.renderAllMedicine();
          // 渲染物品
          this.effect(function () {
            return _this2.renderMedicine();
          });
          // 计时
          this.effect(function () {
            var content = _this2.HasSelectMeidicinePanel.getChildByName("HasSelectMeidicine");
            if (_this2.medicineTime.value > 0) {
              content.children.forEach(function (node) {
                var mask = node.getChildByName("Mask");
                mask.active = true;
                mask.getComponent(Sprite).fillRange = _this2.medicineTime.value / 1000;
              });
            } else {
              content.children.forEach(function (node) {
                var mask = node.getChildByName("Mask");
                mask.active = false;
              });
            }
          });
        }

        // 渲染物品
        ;

        _proto.renderMedicine = function renderMedicine() {
          var _this3 = this;
          var content = this.HasSelectMeidicinePanel.getChildByName("HasSelectMeidicine");
          var children = Array.from(content.children);
          content.removeAllChildren();
          children.forEach(function (c) {
            return c.destroy();
          });
          this.selectItems.forEach(function (item) {
            var _backpackManager$data;
            var count = (_backpackManager$data = backpackManager.data.items.find(function (dto) {
              return dto.prototype === item;
            })) == null ? void 0 : _backpackManager$data.count;
            if (!count) return;
            var node = instantiate(_this3.selectedMedicineItemTemplate);
            var mask = node.getChildByName("Mask");
            mask.active = false;
            var instance = new ItemInstance({
              Proto: getMedicineItemPrototype(item),
              count: count
            });
            node.getChildByName("EquipmentItemPrefab").getComponent(EquipmentItemPrefab).setInfo(instance,
            // 点击事件
            function () {
              if (_this3.medicineTime.value > 0) return message.toast(new ( /*#__PURE__*/function (_LanguageEntry) {
                _inheritsLoose(_class4, _LanguageEntry);
                function _class4() {
                  return _LanguageEntry.apply(this, arguments) || this;
                }
                _createClass(_class4, [{
                  key: "chs",
                  get: function get() {
                    return "药剂冷却中";
                  }
                }, {
                  key: "eng",
                  get: function get() {
                    return "Medicine cooling down";
                  }
                }, {
                  key: "jpn",
                  get: function get() {
                    return "薬物の冷却中";
                  }
                }]);
                return _class4;
              }(LanguageEntry))().getValue(settingManager.data.language));
              _this3.medicineTime.value = 1000;
              _this3.setAutoInterval(function () {
                return _this3.medicineTime.value -= 20;
              }, {
                timer: 20,
                count: 50
              });
              // 物品使用
              backpackManager.data.useItem(instance, 1);
              _this3.renderAllMedicine();
            });
            content.addChild(node);
          });
        }

        // 渲染所有物品列表
        ;

        _proto.renderAllMedicine = function renderAllMedicine() {
          var _this4 = this;
          // 虚拟列表
          var moduleVirtualListPrefab = this.AllMedicinePanel.getChildByName("ModuleVirtualListPrefab").getComponent(ModuleVirtualListPrefab);
          // 药品items
          var items = backpackManager.data.items.map(function (itemDto) {
            if (itemDto.count > 0 && getMedicineItemPrototype(itemDto.prototype)) return itemDto;
            return null;
          }).filter(function (d) {
            return d;
          });
          // 设置虚拟列表
          moduleVirtualListPrefab.setVirtualList(items, function (dto) {
            var node = instantiate(_this4.allMedicineItemTemplate);
            var mask = node.getChildByName("Mask");
            // 如果已经选择则遮罩
            if (_this4.selectItems.includes(dto.prototype)) mask.active = true;else mask.active = false;
            // 绑定点击事件
            node.getChildByName("EquipmentItemPrefab").getComponent(EquipmentItemPrefab).setInfo(new ItemInstance({
              Proto: getMedicineItemPrototype(dto.prototype),
              count: dto.count
            }),
            // 绑定点击事件
            function () {
              var index = _this4.selectItems.indexOf(dto.prototype);
              if (index !== -1) {
                _this4.selectItems.splice(index, 1);
                mask.active = false;
                levelDataManager.data.removeMedicine(dto.prototype);
                levelDataManager.save();
              } else {
                if (_this4.selectItems.length >= 4) return message.toast("");
                _this4.selectItems.push(dto.prototype);
                mask.active = true;
                levelDataManager.data.addMedicine(dto.prototype, backpackManager);
                backpackManager.save();
                levelDataManager.save();
              }
            });
            return node;
          });
        }

        // 展示隐藏所有
        ;

        _proto.showOrHideAllPanel = function showOrHideAllPanel() {
          var _this5 = this;
          if (this.isAnimation) return;
          this.isAnimation = true;
          var panel = this.AllMedicinePanel.getChildByName("Panel");
          var moduleVirtualListPrefab = this.AllMedicinePanel.getChildByName("ModuleVirtualListPrefab");
          var sprite = panel.getComponent(Sprite);
          var moduleVirtualListPrefabSprite = moduleVirtualListPrefab.getComponent(Sprite);
          if (this.showAll.value) {
            //隐藏
            this.showAll.value = false;
            panel.setPosition(0, 0);
            sprite.color = moduleVirtualListPrefabSprite.color = new Color(255, 255, 255, 255);
            this.setAutoInterval(function () {
              panel.setPosition(panel.position.x - 4, 0);
              moduleVirtualListPrefab.setPosition(panel.position.x - 4, 0);
              sprite.color = moduleVirtualListPrefabSprite.color = new Color(255, 255, 255, sprite.color.a - 12);
            }, {
              count: 25,
              timer: 20,
              complete: function complete() {
                _this5.AllMedicinePanel.active = false;
                _this5.isAnimation = false;
              }
            });
          } else {
            // 展示
            this.showAll.value = true;
            this.AllMedicinePanel.active = true;
            panel.setPosition(-100, 0);
            sprite.color = moduleVirtualListPrefabSprite.color = new Color(255, 255, 255, 0);
            this.setAutoInterval(function () {
              panel.setPosition(panel.position.x + 4, 0);
              moduleVirtualListPrefab.setPosition(panel.position.x + 4, 0);
              sprite.color = moduleVirtualListPrefabSprite.color = new Color(255, 255, 255, sprite.color.a + 12);
            }, {
              count: 25,
              timer: 20,
              complete: function complete() {
                _this5.isAnimation = false;
              }
            });
          }
          return;
        }

        // 隐藏整个药箱
        ;

        _proto.hideAllMedicinePanel = function hideAllMedicinePanel() {
          var _this6 = this;
          if (this.node.position.x === -300) {
            this.setAutoInterval(function () {
              return _this6.node.setPosition(_this6.node.position.x - 4, 0);
            }, {
              timer: 15,
              count: 30
            });
          }
          if (this.node.position.x === -420) {
            this.setAutoInterval(function () {
              return _this6.node.setPosition(_this6.node.position.x + 4, 0);
            }, {
              timer: 15,
              count: 30
            });
          }
        };
        return ScenesMapCanvasMedicine;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "AllMedicinePanel", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "HasSelectMeidicinePanel", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "allMedicineItemTemplate", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "selectedMedicineItemTemplate", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasPlayer.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './UserBaseDataPrefab.ts', './FightMapManager.ts', './ScenesMapCanvasMap.ts', './SpineAnimation.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Node, v2, Label, ExtensionComponent, UserBaseDataPrefab, getFightMapInstance, mapWidth, mapHeight, SpineAnimation;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Node = module.Node;
      v2 = module.v2;
      Label = module.Label;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      UserBaseDataPrefab = module.UserBaseDataPrefab;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      mapWidth = module.mapWidth;
      mapHeight = module.mapHeight;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "bc068Cd1vxPYo9gM8QMIu+h", "ScenesMapCanvasPlayer", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasPlayer = exports('ScenesMapCanvasPlayer', (_dec = ccclass('ScenesMapCanvasPlayer'), _dec2 = property(Node), _dec3 = property(UserBaseDataPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMapCanvasPlayer, _ExtensionComponent);
        function ScenesMapCanvasPlayer() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 虚空背景
          _initializerDefineProperty(_this, "emptyBackground", _descriptor, _assertThisInitialized(_this));
          // 角色数据预制体
          _initializerDefineProperty(_this, "userBaseDataPrefab", _descriptor2, _assertThisInitialized(_this));
          // spineAnimation 实例
          _this.spineAnimation = null;
          // 战斗数据实例
          _this.instance = getFightMapInstance();
          // 虚拟坐标
          _this.virtualPosition = v2(mapWidth / 2, -mapHeight / 2);
          return _this;
        }
        var _proto = ScenesMapCanvasPlayer.prototype;
        // 开始
        _proto.start = function start() {
          var _this2 = this;
          // 绑定角色spine
          this.spineAnimation = this.node.getChildByName("Spine").getComponent(SpineAnimation);
          this.instance.player.proto.skeletonData().then(function (skele) {
            _this2.spineAnimation.skeletonData = skele;
            _this2.spineAnimation.playAnimation(_this2.instance.player.proto.animation.animations.idle);
          });
          // 初始位置
          this.virtualPosition = v2(this.instance.playerPosition.x * mapWidth - mapWidth / 2, this.instance.playerPosition.y * -mapHeight + mapHeight / 2);
        }

        // 角色移动
        ;

        _proto.movePlayer = /*#__PURE__*/
        function () {
          var _movePlayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(type) {
            var _this3 = this;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", new Promise(function (res) {
                    var timer = 10,
                      count = 25;
                    switch (type) {
                      case "up":
                        {
                          _this3.setAutoInterval(function () {
                            _this3.virtualPosition = v2(_this3.virtualPosition.x, _this3.virtualPosition.y + mapHeight / count);
                          }, {
                            timer: timer,
                            count: count,
                            complete: function complete() {
                              _this3.instance.playerPosition.y -= 1;
                              res(null);
                            }
                          });
                          break;
                        }
                      case "down":
                        {
                          _this3.setAutoInterval(function () {
                            _this3.virtualPosition = v2(_this3.virtualPosition.x, _this3.virtualPosition.y - mapHeight / count);
                          }, {
                            timer: timer,
                            count: count,
                            complete: function complete() {
                              _this3.instance.playerPosition.y += 1;
                              res(null);
                            }
                          });
                          break;
                        }
                      case "left":
                        {
                          _this3.setAutoInterval(function () {
                            _this3.virtualPosition = v2(_this3.virtualPosition.x - mapWidth / count, _this3.virtualPosition.y);
                          }, {
                            timer: timer,
                            count: count,
                            complete: function complete() {
                              _this3.instance.playerPosition.x -= 1;
                              res(null);
                            }
                          });
                          break;
                        }
                      case "right":
                        {
                          _this3.setAutoInterval(function () {
                            _this3.virtualPosition = v2(_this3.virtualPosition.x + mapWidth / count, _this3.virtualPosition.y);
                          }, {
                            timer: timer,
                            count: count,
                            complete: function complete() {
                              _this3.instance.playerPosition.x += 1;
                              res(null);
                            }
                          });
                          break;
                        }
                    }
                    return;
                  }));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function movePlayer(_x) {
            return _movePlayer.apply(this, arguments);
          }
          return movePlayer;
        }() // 展示金币经验奖励
        ;

        _proto.playRewardAnimation = function playRewardAnimation(gold, exp) {
          // 展示奖励
          var rewardMessageNode = this.node.getChildByName("RewardMessage");
          var goldRewardNode = rewardMessageNode.getChildByName("GoldReward");
          var expRewardNode = rewardMessageNode.getChildByName("ExpReward");
          rewardMessageNode.setPosition(0, 130);
          if (gold > 0) {
            goldRewardNode.active = true;
            goldRewardNode.getChildByName("Count").getComponent(Label).string = "+" + gold;
          }
          if (exp > 0) {
            expRewardNode.active = true;
            expRewardNode.getChildByName("Count").getComponent(Label).string = "+" + exp;
          }
          this.setAutoInterval(function () {
            rewardMessageNode.setPosition(0, rewardMessageNode.y + 1);
          }, {
            timer: 20,
            count: 60,
            complete: function complete() {
              return expRewardNode.active = goldRewardNode.active = false;
            }
          });
        };
        return ScenesMapCanvasPlayer;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "emptyBackground", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "userBaseDataPrefab", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasSound.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, AudioSource, Component;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      AudioSource = module.AudioSource;
      Component = module.Component;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "828efOE7tRGHZOBwSg29niU", "ScenesMapCanvasSound", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasSound = exports('ScenesMapCanvasSound', (_dec = ccclass('ScenesMapCanvasSound'), _dec2 = property(AudioSource), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMapCanvasSound, _Component);
        function ScenesMapCanvasSound() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "getAwardSound", _descriptor, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesMapCanvasSound.prototype;
        _proto.playGetAwardSound = function playGetAwardSound() {
          // 播放获得奖励的音效
          this.getAwardSound.play();
        };
        return ScenesMapCanvasSound;
      }(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "getAwardSound", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasUi.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BackpackPrefab.ts', './SettingManager.ts', './Message.ts', './FightMapManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, _createClass, cclegacy, _decorator, Prefab, Node, Component, find, CcNative, LanguageEntry, LanguageManager, BackpackPrefab, settingManager, message, exitFightMap;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Prefab = module.Prefab;
      Node = module.Node;
      Component = module.Component;
      find = module.find;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BackpackPrefab = module.BackpackPrefab;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      exitFightMap = module.exitFightMap;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2;
      cclegacy._RF.push({}, "be8cayBdDVNj6vUNnfaCdF+", "ScenesMapCanvasUi", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasUi = exports('ScenesMapCanvasUi', (_dec = ccclass('ScenesMapCanvasUi'), _dec2 = property(Prefab), _dec3 = property(Node), _dec(_class = (_class2 = /*#__PURE__*/function (_Component) {
        _inheritsLoose(ScenesMapCanvasUi, _Component);
        function ScenesMapCanvasUi() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _Component.call.apply(_Component, [this].concat(args)) || this;
          // 背包预制体
          _initializerDefineProperty(_this, "backpackPrefab", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "placeholderNode", _descriptor2, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = ScenesMapCanvasUi.prototype;
        // 开启设置
        _proto.openSetting = /*#__PURE__*/
        function () {
          var _openSetting = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var manager, settingPrefab, settingNode;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  manager = new CcNative.Asset.AssetManager("PrefabResource");
                  _context.next = 3;
                  return manager.load("SettingPrefab", Prefab, true);
                case 3:
                  settingPrefab = _context.sent;
                  settingNode = CcNative.instantiate(settingPrefab.value);
                  find("Canvas").addChild(settingNode);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function openSetting() {
            return _openSetting.apply(this, arguments);
          }
          return openSetting;
        }() // 开启背包
        ;

        _proto.openBagpack = /*#__PURE__*/
        function () {
          var _openBagpack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            var node;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  node = CcNative.instantiate(this.backpackPrefab);
                  node.getComponent(BackpackPrefab).onClose(function () {
                    if (node && node.isValid) node.destroy();
                  });
                  this.placeholderNode.addChild(node);
                case 3:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function openBagpack() {
            return _openBagpack.apply(this, arguments);
          }
          return openBagpack;
        }();
        _proto.leaveMap = /*#__PURE__*/function () {
          var _leaveMap = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
            var confirm;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  _context3.next = 2;
                  return message.confirm(new ( /*#__PURE__*/function (_LanguageEntry) {
                    _inheritsLoose(_class4, _LanguageEntry);
                    function _class4() {
                      return _LanguageEntry.apply(this, arguments) || this;
                    }
                    _createClass(_class4, [{
                      key: "chs",
                      get: function get() {
                        return "提示";
                      }
                    }, {
                      key: "eng",
                      get: function get() {
                        return "Hint";
                      }
                    }, {
                      key: "jpn",
                      get: function get() {
                        return "ヒント";
                      }
                    }]);
                    return _class4;
                  }(LanguageEntry))().getValue(settingManager.data.language), new ( /*#__PURE__*/function (_LanguageEntry2) {
                    _inheritsLoose(_class5, _LanguageEntry2);
                    function _class5() {
                      return _LanguageEntry2.apply(this, arguments) || this;
                    }
                    _createClass(_class5, [{
                      key: "chs",
                      get: function get() {
                        return "是否要离开本关卡？";
                      }
                    }, {
                      key: "eng",
                      get: function get() {
                        return "Do you want to leave this level?";
                      }
                    }, {
                      key: "jpn",
                      get: function get() {
                        return "本レベルを離れますか？";
                      }
                    }]);
                    return _class5;
                  }(LanguageEntry))().getValue(settingManager.data.language), LanguageManager.getEntry("Confirm").getValue(settingManager.data.language), LanguageManager.getEntry("Cancel").getValue(settingManager.data.language));
                case 2:
                  confirm = _context3.sent;
                  if (confirm) {
                    _context3.next = 5;
                    break;
                  }
                  return _context3.abrupt("return");
                case 5:
                  // 离开关卡
                  exitFightMap();
                case 6:
                case "end":
                  return _context3.stop();
              }
            }, _callee3);
          }));
          function leaveMap() {
            return _leaveMap.apply(this, arguments);
          }
          return leaveMap;
        }();
        return ScenesMapCanvasUi;
      }(Component), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "backpackPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "placeholderNode", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/ScenesMapCanvasUserState.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './ExtensionComponent.ts', './index6.ts', './UserBaseDataPrefab.ts', './EquipmentManager.ts', './FightMapManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, ExtensionComponent, Rx, UserBaseDataPrefab, equipmentManager, getFightMapInstance;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      UserBaseDataPrefab = module.UserBaseDataPrefab;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "2b3d1yh8RFCt65dpMhdufd1", "ScenesMapCanvasUserState", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var ScenesMapCanvasUserState = exports('ScenesMapCanvasUserState', (_dec = ccclass('ScenesMapCanvasUserState'), _dec2 = property(UserBaseDataPrefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(ScenesMapCanvasUserState, _ExtensionComponent);
        function ScenesMapCanvasUserState() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          // 角色数据预制体
          _initializerDefineProperty(_this, "userBaseDataPrefab", _descriptor, _assertThisInitialized(_this));
          // 战斗数据实例
          _this.instance = getFightMapInstance();
          return _this;
        }
        var _proto = ScenesMapCanvasUserState.prototype;
        // 初始化
        _proto.start = function start() {
          this.initState();
        }

        // 初始化状态绑定
        ;

        _proto.initState = function initState() {
          var _this2 = this;
          // 绑定角色数据并且监听装备变化
          this.effect(function () {
            return _this2.userBaseDataPrefab.bindCharacter(_this2.instance.player);
          });
          this.effect(function () {
            Object.keys(equipmentManager.data.equipment).forEach(function (key) {
              return equipmentManager.data.equipment[key];
            });
            var hp = Rx.toRaw(_this2.instance).player.hp;
            var mp = Rx.toRaw(_this2.instance).player.mp;
            var player = _this2.instance.createPlayerInstance();
            player.hp = hp;
            player.mp = mp;
            _this2.instance.player = player;
          });
        };
        return ScenesMapCanvasUserState;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "userBaseDataPrefab", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SealingBelt.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "bd0a0gLuF5F6o5zvd9l1f4W", "SealingBelt", undefined);
      var SealingBelt_Entry = (_dec = RegisterLanguageEntry("SealingBelt"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(SealingBelt_Entry, _LanguageEntry);
        function SealingBelt_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(SealingBelt_Entry, [{
          key: "chs",
          get: function get() {
            return "封印腰带";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Sealing Belt";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "封印ベルト";
          }
        }]);
        return SealingBelt_Entry;
      }(LanguageEntry)) || _class);
      var SealingBelt_Description_Entry = (_dec2 = RegisterLanguageEntry("SealingBelt Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(SealingBelt_Description_Entry, _LanguageEntry2);
        function SealingBelt_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(SealingBelt_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "靠近点，似乎能听到前主人的惨叫";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Ordinary Sealing Belt";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "普通の封印ベルト";
          }
        }]);
        return SealingBelt_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var SealingBelt = exports('SealingBelt', (_dec3 = RegisterEquipment("SealingBelt"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(SealingBelt, _EquipmentPrototype);
        function SealingBelt() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            maxMp: 50,
            criticalRate: 0.05,
            magicPenetration: 5
          }).setProperty("criticalRate", function (critical) {
            return critical + Math.floor(_this.instance.lv / 3) / 100 + (_this.suitCount >= twoSuit ? 0.05 : 0);
          }).setProperty("magicPenetration", function (magicPenetration) {
            return magicPenetration + (_this.suitCount >= oneSuit ? 5 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            maxMp: 10,
            magicPenetration: 1
          });
          return _this;
        }
        var _proto = SealingBelt.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/Sealing/SealingBelt/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(SealingBelt, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SealingBelt").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SealingBelt Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Accessory;
          }
        }, {
          key: "suit",
          get: function get() {
            return "Sealing";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("maxMp").getValue(settingManager.data.language) + ": " + this.instance.maxMp.toFixed(0) + "\n";
            res += LanguageManager.getEntry("magicPenetration").getValue(settingManager.data.language) + ": " + this.instance.magicPenetration.toFixed(2) + "\n";
            res += LanguageManager.getEntry("criticalRate").getValue(settingManager.data.language) + ": " + (this.instance.criticalRate * 100).toFixed(2) + "%\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("magicPenetration").getValue(settingManager.data.language) + ": +5" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("criticalRate").getValue(settingManager.data.language) + ": +5%" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return SealingBelt;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SealingRobe.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "3420bGB7wBJ0pJOYXF6f2N0", "SealingRobe", undefined);
      var SealingRobe_Entry = (_dec = RegisterLanguageEntry("SealingRobe"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(SealingRobe_Entry, _LanguageEntry);
        function SealingRobe_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Entry, [{
          key: "chs",
          get: function get() {
            return "封印长袍";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Sealing Robe";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "封印ローブ";
          }
        }]);
        return SealingRobe_Entry;
      }(LanguageEntry)) || _class);
      var SealingRobe_Description_Entry = (_dec2 = RegisterLanguageEntry("SealingRobe Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(SealingRobe_Description_Entry, _LanguageEntry2);
        function SealingRobe_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(SealingRobe_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "衣服上面还有点汗味混着点...血腥味？";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Ordinary Sealing Robe";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "普通の封印ローブ";
          }
        }]);
        return SealingRobe_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var SealingRobe = exports('SealingRobe', (_dec3 = RegisterEquipment("SealingRobe"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(SealingRobe, _EquipmentPrototype);
        function SealingRobe() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 30,
            maxMp: 20,
            magicDefense: 3,
            physicalDefense: 3
          }).setProperty("magicDefense", function (magicDefense) {
            return magicDefense + (_this.suitCount >= oneSuit ? 3 : 0) + (_this.suitCount >= twoSuit ? 3 : 0);
          }).setProperty("physicalDefense", function (physicalDefense) {
            return physicalDefense + (_this.suitCount >= oneSuit ? 3 : 0) + (_this.suitCount >= twoSuit ? 3 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 5,
            maxMp: 5,
            magicDefense: 1,
            physicalDefense: 1
          });
          return _this;
        }
        var _proto = SealingRobe.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/Sealing/SealingRobe/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(SealingRobe, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SealingRobe").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SealingRobe Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Armor;
          }
        }, {
          key: "suit",
          get: function get() {
            return "Sealing";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": " + this.instance.magicDefense.toFixed(0) + "\n";
            res += LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": " + this.instance.physicalDefense.toFixed(0) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": +3 " + LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": +3 " + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("magicDefense").getValue(settingManager.data.language) + ": +6 " + LanguageManager.getEntry("physicalDefense").getValue(settingManager.data.language) + ": +6 " + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return SealingRobe;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SealingShose.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "04999Qnb5xHGYifleiZamfB", "SealingShose", undefined);
      var Entry = (_dec = RegisterLanguageEntry("SealingShose"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "封印法杖";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Sealing Staff";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "封印の杖";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("SealingShose Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "这法杖还挺沉的，也足够锋利";
          }
        }, {
          key: "eng",
          get: function get() {
            return "This staff is quite heavy and sharp enough.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "この杖は重くて十分鋭い";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var SealingShose = exports('SealingShose', (_dec3 = RegisterEquipment("SealingShose"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(SealingShose, _EquipmentPrototype);
        function SealingShose() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            lightResistance: 3,
            darkResistance: 3
          }).setProperty("coolDown", function (coolDown) {
            return coolDown + (_this.suitCount >= oneSuit ? 10 : 0) + (_this.suitCount >= twoSuit ? 10 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            lightResistance: 1,
            darkResistance: 1
          });
          return _this;
        }
        var _proto = SealingShose.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/Sealing/SealingShose/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(SealingShose, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SealingShose").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SealingShose Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Shoes;
          }
        }, {
          key: "suit",
          get: function get() {
            return "Sealing";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("lightResistance").getValue(settingManager.data.language) + ": " + this.instance.lightResistance.toFixed(0) + "\n";
            res += LanguageManager.getEntry("darkResistance").getValue(settingManager.data.language) + ": " + this.instance.darkResistance.toFixed(0) + "\n";
            if (this.instance.coolDown !== 0) {
              res += LanguageManager.getEntry("coolDown").getValue(settingManager.data.language) + ": " + this.instance.coolDown.toFixed(0) + "\n";
            }
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("coolDown").getValue(settingManager.data.language) + ": +10" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("coolDown").getValue(settingManager.data.language) + ": +10" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return SealingShose;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SealingWeapon.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "d7290jusq9NLIB3MQmh+ixd", "SealingWeapon", undefined);
      var Entry = (_dec = RegisterLanguageEntry("SealingWeapon"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "封印法杖";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Sealing Staff";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "封印の杖";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("SealingWeapon Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "这法杖还挺沉的，也足够锋利";
          }
        }, {
          key: "eng",
          get: function get() {
            return "This staff is quite heavy and sharp enough.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "この杖は重くて十分鋭い";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var SealingWeapon = exports('SealingWeapon', (_dec3 = RegisterEquipment("SealingWeapon"), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(SealingWeapon, _EquipmentPrototype);
        function SealingWeapon() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            physicalAttack: 5,
            magicAttack: 25,
            attackSpeed: 1.15
          }).setProperty("physicalAttack", function (physicalAttack) {
            return physicalAttack + (_this.suitCount >= oneSuit ? 5 : 0);
          }).setProperty("magicAttack", function (magicAttack) {
            return magicAttack + (_this.suitCount >= oneSuit ? 15 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalAttack: 2,
            magicAttack: 7
          });
          return _this;
        }
        var _proto = SealingWeapon.prototype;
        // icon图标
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/Sealing/SealingWeapon/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(SealingWeapon, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SealingWeapon").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SealingWeapon Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Weapon;
          }
        }, {
          key: "suit",
          get: function get() {
            return "Sealing";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": " + this.instance.physicalAttack.toFixed(0) + "\n";
            res += LanguageManager.getEntry("magicAttack").getValue(settingManager.data.language) + ": " + this.instance.magicAttack.toFixed(0) + "\n";
            res += LanguageManager.getEntry("attackSpeed").getValue(settingManager.data.language) + ": " + this.instance.attackSpeed.toFixed(2) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": +5" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("magicAttack").getValue(settingManager.data.language) + ": +15" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return SealingWeapon;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Set.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageEntry.ts', './LanguageManager.ts'], function () {
  var _inheritsLoose, _createClass, cclegacy, LanguageEntry, RegisterLanguageEntry;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
    }],
    execute: function () {
      cclegacy._RF.push({}, "07947sBVr1PhYOqtBWk5GzC", "Set", undefined);
      (function (_dec, _class) {
        var _ = (_dec = RegisterLanguageEntry("BeginnerKit"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
          _inheritsLoose(_, _LanguageEntry);
          function _() {
            return _LanguageEntry.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "新手套装";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Beginner Kit";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "初心者セット";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class);
      })();
      (function (_dec2, _class2) {
        var _ = (_dec2 = RegisterLanguageEntry("Sealing"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
          _inheritsLoose(_, _LanguageEntry2);
          function _() {
            return _LanguageEntry2.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "封印套装";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Sealing Set";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "封印セット";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class2);
      })();
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SettingManager.ts", ['cc', './LangaugeType.ts', './Manager.ts', './Config.ts'], function (exports) {
  var cclegacy, AllLanguageType, Manager, Config;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      AllLanguageType = module.AllLanguageType;
    }, function (module) {
      Manager = module.Manager;
    }, function (module) {
      Config = module.Config;
    }],
    execute: function () {
      cclegacy._RF.push({}, "b3ed3089QxIipzEwVkd32os", "SettingManager", undefined);
      var SettingDTO = function SettingDTO(data) {
        // 背景音乐
        this.backVolume = 0;
        // 音效音乐
        this.effectVolume = 0;
        // 语言
        this.language = AllLanguageType.chs;
        if (data) {
          this.backVolume = data.backVolume || 0;
          this.effectVolume = data.effectVolume || 0;
          this.language = data.language || AllLanguageType.chs;
        }
      };
      var SettingData = exports('SettingData', function SettingData(data) {
        // 背景音乐
        this.backVolume = 0.5;
        // 音效音乐
        this.effectVolume = 0.5;
        // 语言
        this.language = AllLanguageType.chs;
        if (data) {
          this.backVolume = data.backVolume || 0;
          this.effectVolume = data.effectVolume || 0;
          this.language = data.language || AllLanguageType.chs;
        }
      });
      var settingManager = exports('settingManager', new Manager({
        storageKey: "slaughter:game:setting",
        descrypt: Config.descrypt,
        Constructor: SettingData,
        DtoCostructor: SettingDTO
      }));
      try {
        // @ts-ignore
        window.settingManager = settingManager;
      } catch (e) {}
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SettingPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './ExtensionComponent.ts', './index3.ts', './LoadingManager.ts', './ModuleDropListPrefab.ts', './Config.ts'], function (exports) {
  var _applyDecoratedDescriptor, _asyncToGenerator, _regeneratorRuntime, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Slider, Prefab, settingManager, ExtensionComponent, CcNative, LoadingManager, ModuleDropListPrefab, Config;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Slider = module.Slider;
      Prefab = module.Prefab;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      ModuleDropListPrefab = module.ModuleDropListPrefab;
    }, function (module) {
      Config = module.Config;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _class, _class2, _descriptor, _descriptor2, _descriptor3;
      cclegacy._RF.push({}, "992b2Jw0mhJeY+7ba27S/Oy", "SettingPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var SettingPrefab = exports('SettingPrefab', (_dec = ccclass('SettingPrefab'), _dec2 = property(ModuleDropListPrefab), _dec3 = property(Slider), _dec4 = property(Slider), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(SettingPrefab, _ExtensionComponent);
        function SettingPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "dropList", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "backVolumeSlider", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "effectVolumeSlider", _descriptor3, _assertThisInitialized(_this));
          return _this;
        }
        var _proto = SettingPrefab.prototype;
        _proto.start = function start() {
          this.dropList.setSelectList({
            multiple: false,
            require: true,
            "default": settingManager.data.language,
            // 列表
            list: Config.languages,
            onchange: function onchange(data) {
              var lan = data[0];
              settingManager.data.language = lan;
              settingManager.save();
            }
          });
          this.backVolumeSlider.progress = settingManager.data.backVolume;
          this.effectVolumeSlider.progress = settingManager.data.effectVolume;
        };
        _proto.backSlider = function backSlider() {
          settingManager.data.backVolume = this.backVolumeSlider.progress;
          settingManager.save();
        };
        _proto.effectSlider = function effectSlider() {
          settingManager.data.effectVolume = this.effectVolumeSlider.progress;
          settingManager.save();
        };
        _proto.closeSetting = function closeSetting() {
          this.node.active = false;
        };
        return SettingPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "dropList", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "backVolumeSlider", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "effectVolumeSlider", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));

      // 预加载
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var manager;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              manager = new CcNative.Asset.AssetManager("PrefabResource");
              _context.next = 3;
              return manager.load("SettingPrefab", Prefab, true);
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/shapeFlags.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5e0580NUI5BsqkSfEy5rqu+", "shapeFlags", undefined);
      var ShapeFlags = exports('ShapeFlags', function (ShapeFlags) {
        ShapeFlags[ShapeFlags["ELEMENT"] = 1] = "ELEMENT";
        ShapeFlags[ShapeFlags["FUNCTIONAL_COMPONENT"] = 2] = "FUNCTIONAL_COMPONENT";
        ShapeFlags[ShapeFlags["STATEFUL_COMPONENT"] = 4] = "STATEFUL_COMPONENT";
        ShapeFlags[ShapeFlags["TEXT_CHILDREN"] = 8] = "TEXT_CHILDREN";
        ShapeFlags[ShapeFlags["ARRAY_CHILDREN"] = 16] = "ARRAY_CHILDREN";
        ShapeFlags[ShapeFlags["SLOTS_CHILDREN"] = 32] = "SLOTS_CHILDREN";
        ShapeFlags[ShapeFlags["TELEPORT"] = 64] = "TELEPORT";
        ShapeFlags[ShapeFlags["SUSPENSE"] = 128] = "SUSPENSE";
        ShapeFlags[ShapeFlags["COMPONENT_SHOULD_KEEP_ALIVE"] = 256] = "COMPONENT_SHOULD_KEEP_ALIVE";
        ShapeFlags[ShapeFlags["COMPONENT_KEPT_ALIVE"] = 512] = "COMPONENT_KEPT_ALIVE";
        ShapeFlags[ShapeFlags["COMPONENT"] = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT] = "COMPONENT";
        return ShapeFlags;
      }({}));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Share.ts", ['cc', './CharacterInstance.ts', './CharacterManager2.ts', './CharacterManager.ts', './EquipmentManager.ts', './SkillManager2.ts', './SkillConfig.ts'], function (exports) {
  var cclegacy, CharacterInstance, getCharacterPrototype, characterManager, equipmentManager, skillManager, getPlayerAllPassiveSkills;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      CharacterInstance = module.CharacterInstance;
    }, function (module) {
      getCharacterPrototype = module.getCharacterPrototype;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      skillManager = module.skillManager;
    }, function (module) {
      getPlayerAllPassiveSkills = module.getPlayerAllPassiveSkills;
    }],
    execute: function () {
      exports({
        createId: createId,
        createPlayerInstance: createPlayerInstance
      });
      cclegacy._RF.push({}, "e3e72lujYlEU4jquwhAe0H3", "Share", undefined);

      // 创建玩家实例配置

      // 根据玩家数据创建角色实例
      function createPlayerInstance(opiotns) {
        if (opiotns === void 0) {
          opiotns = {};
        }
        var characterData = characterManager.data;
        var skillData = skillManager.data;
        var equipmentData = equipmentManager.data;
        // 获取角色所有被动技能
        var playerAllPassiveSkills = getPlayerAllPassiveSkills(characterData.currentCharacter);
        // 创建角色
        var skills = [];
        var passive = playerAllPassiveSkills.map(function (key) {
          return {
            lv: skillData.skillLevel[key],
            prototype: key
          };
        });
        skillData.skills.forEach(function (skillProto) {
          return skills.push({
            lv: skillData.skillLevel[skillProto],
            prototype: skillProto
          });
        });
        passive.forEach(function (skillDto) {
          if (skillDto.lv > 0) skills.push(skillDto);
        });
        var instance = new CharacterInstance({
          lv: characterData.lv,
          // 主动技能和被动技能
          skills: skills,
          equipments: equipmentData.equipment,
          Proto: getCharacterPrototype(characterData.currentCharacter),
          extraProperty: opiotns.extra || {}
        });
        return instance;
      }
      var id = 0;
      var date = Date.now();
      // 创建id
      function createId() {
        return date + "_" + id++;
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkeletonSoldier.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "74e96iLnNxIaLNWl+xansZz", "SkeletonSoldier", undefined);
      var SkeletonSoldier_Entry = (_dec = RegisterLanguageEntry("SkeletonSoldier"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(SkeletonSoldier_Entry, _LanguageEntry);
        function SkeletonSoldier_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(SkeletonSoldier_Entry, [{
          key: "chs",
          get: function get() {
            return "骷髅士兵";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Skeleton Soldier";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "スケルトン兵士";
          }
        }]);
        return SkeletonSoldier_Entry;
      }(LanguageEntry)) || _class);
      var SkeletonSoldier_Description_Entry = (_dec2 = RegisterLanguageEntry("SkeletonSoldier Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(SkeletonSoldier_Description_Entry, _LanguageEntry2);
        function SkeletonSoldier_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(SkeletonSoldier_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "一种由黑暗魔法复活的骷髅战士，他们无畏死亡，永远忠诚于他们的主人。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A skeleton warrior resurrected by dark magic, they fear no death and are forever loyal to their master.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "闇の魔法によって復活したスケルトン戦士で、死を恐れず、主人に永遠に忠実です。";
          }
        }]);
        return SkeletonSoldier_Description_Entry;
      }(LanguageEntry)) || _class2);
      var SkeletonSoldier = exports('SkeletonSoldier', (_dec3 = RegisterCharacter("SkeletonSoldier"), _dec4 = registerMonster("SkeletonSoldier"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(SkeletonSoldier, _CharacterPrototype);
        function SkeletonSoldier() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 150,
            maxMp: 30,
            physicalAttack: 35,
            magicAttack: 20,
            physicalDefense: 10,
            magicDefense: 10,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 10,
            magicPenetration: 10,
            lightResistance: -25,
            darkResistance: 25,
            attackSpeed: 1.2
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 30,
            maxMp: 5,
            physicalAttack: 5,
            magicAttack: 3,
            physicalDefense: 3,
            magicDefense: 3
          });
          return _this;
        }
        var _proto = SkeletonSoldier.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Monster/SkeletonSoldier/hero00023", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(SkeletonSoldier, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SkeletonSoldier").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SkeletonSoldier Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return SkeletonSoldier;
      }(CharacterPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkillConfig.ts", ['cc', './SkillPrototype.ts'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null],
    execute: function () {
      exports({
        getPlayerAllPassiveSkills: getPlayerAllPassiveSkills,
        getPlayerSkillRootsNode: getPlayerSkillRootsNode,
        getPlayerSkillTreeFloor: getPlayerSkillTreeFloor,
        getSkillUpLevelMaterial: getSkillUpLevelMaterial,
        isSkillBelongToPlayer: isSkillBelongToPlayer,
        isSkillPassive: isSkillPassive
      });
      cclegacy._RF.push({}, "cb3dfnpYeNGdKW8j2vfx6Ex", "SkillConfig", undefined);

      // k 技能key player 玩家key parent 父节点key

      var SkillNode = exports('SkillNode', function SkillNode(key,
      // 技能key
      SkillPrototype,
      // 技能原型
      children,
      // 子节点
      player,
      // 所属玩家
      floor,
      // 层数
      parent,
      // 父节点
      isPassive // 是否被动
      ) {
        this.key = key;
        this.SkillPrototype = SkillPrototype;
        this.children = children;
        this.player = player;
        this.floor = floor;
        this.parent = parent;
        this.isPassive = isPassive;
      });

      // 等待添加的回调
      var WaitAddNode = new Set();
      // 所有玩家技能根节点
      var PlayerSkillRoot = new Map();
      // 玩家技能表
      var PlayerSkillTable = new Map();
      // 玩家技能树每一层的技能数量
      var PlayerSkillTreeFloor = new Map();

      // 注册到玩家技能表
      var RegisterPlayerSkill = exports('RegisterPlayerSkill', function RegisterPlayerSkill(key, player, isPassive, parent) {
        if (isPassive === void 0) {
          isPassive = false;
        }
        return function (T) {
          var playerSkillTreeFloor = PlayerSkillTreeFloor.get(player) || [];
          PlayerSkillTreeFloor.set(player, playerSkillTreeFloor);
          // 注册为子技能
          var registerToChild = function registerToChild() {
            var skillList = PlayerSkillTable.get(player) || [];
            for (var i = 0; i < skillList.length; i++) {
              var skillNode = skillList[i];
              if (skillNode.key === parent) {
                var node = new SkillNode(key, T, [], player, skillNode.floor + 1, skillNode, isPassive);
                skillNode.children.push(node);
                var skillTable = PlayerSkillTable.get(player) || [];
                PlayerSkillTable.set(player, skillTable);
                skillTable.push(node);
                playerSkillTreeFloor[skillNode.floor + 1] = (playerSkillTreeFloor[skillNode.floor + 1] || 0) + 1;
                WaitAddNode["delete"](registerToChild);
                foreach();
                return true;
              }
            }
            return false;
          };
          var foreach = function foreach() {
            return new Set(WaitAddNode).forEach(function (c) {
              if (c()) WaitAddNode["delete"](c);
            });
          };
          // 注册为根技能
          if (!parent) {
            var roots = PlayerSkillRoot.get(player) || [];
            PlayerSkillRoot.set(player, roots);
            var node = new SkillNode(key, T, [], player, 0, null, isPassive);
            roots.push(node);
            var skillTable = PlayerSkillTable.get(player) || [];
            PlayerSkillTable.set(player, skillTable);
            skillTable.push(node);
            playerSkillTreeFloor[0] = (playerSkillTreeFloor[0] || 0) + 1;
            foreach();
            return;
          }
          // 添加失败，等待添加，每次添加一个技能则尝试再次添加
          if (!registerToChild()) WaitAddNode.add(registerToChild);
        };
      });

      // 获取玩家技能树根节点
      function getPlayerSkillRootsNode(player) {
        return PlayerSkillRoot.get(player) || [];
      }

      // 判断技能是否属于某个角色
      function isSkillBelongToPlayer(skill, player) {
        var skills = PlayerSkillTable.get(player);
        var result = false;
        for (var i = 0; i < skills.length; i++) {
          var s = skills[i];
          if (skill === s.key) return true;
        }
        return result;
      }

      // 获取玩家所有被动技能
      function getPlayerAllPassiveSkills(player) {
        var skills = PlayerSkillTable.get(player) || [];
        return skills.map(function (skill) {
          if (skill.isPassive) return skill.key;else return void 0;
        }).filter(function (skill) {
          return skill;
        });
      }

      // 判断技能是否为被动技能
      function isSkillPassive(player, skill) {
        var skills = PlayerSkillTable.get(player) || [];
        var result = false;
        for (var i = 0; i < skills.length; i++) {
          var s = skills[i];
          if (skill === s.key) return s.isPassive;
        }
        return result;
      }

      // 获取玩家技能树层级
      function getPlayerSkillTreeFloor(player) {
        return PlayerSkillTreeFloor.get(player) || [];
      }

      // 技能升级需要的材料

      var SkillUpLevelConfig = new Map();
      var RegisterSkillUpLevel = exports('RegisterSkillUpLevel', function RegisterSkillUpLevel(key, getCallback) {
        return function (T) {
          SkillUpLevelConfig.set(key, getCallback);
        };
      });
      function getSkillUpLevelMaterial(key, level) {
        var _SkillUpLevelConfig$g;
        return ((_SkillUpLevelConfig$g = SkillUpLevelConfig.get(key)) == null ? void 0 : _SkillUpLevelConfig$g(level)) || {
          gold: 0,
          diamond: 0
        };
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkillInstance.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, cclegacy;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "3d9b0tsgbZIUY4diArp0/ci", "SkillInstance", undefined);
      var SkillInstance = exports('SkillInstance', /*#__PURE__*/function () {
        // 构造器
        function SkillInstance(option) {
          // 技能等级
          this.lv = 1;
          // 携带技能的角色
          this.characterInstance = null;
          // 对应的原型
          this.proto = null;
          // 冷却时间
          this._coolTime = 0;
          this._interval = 0;
          this.characterInstance = option.characterInstance;
          this.proto = new option.Proto(this);
          this.lv = option.lv;
        }
        _createClass(SkillInstance, [{
          key: "coolTime",
          get: function get() {
            return this._coolTime;
          },
          set: function set(value) {
            var _this = this;
            this._coolTime = value * 1000;
            clearInterval(this._interval);
            var lastTime = Date.now();
            this._interval = setInterval(function () {
              var now = Date.now();
              _this._coolTime = Math.max(0, _this._coolTime - (now - lastTime));
              lastTime = now;
              if (_this._coolTime <= 0) {
                _this._coolTime = 0;
                clearInterval(_this._interval);
              }
            }, 100);
          }
        }]);
        return SkillInstance;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkillManager.ts", ['cc', './SkillPrototype.ts'], function (exports) {
  var cclegacy, SkillPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      SkillPrototype = module.SkillPrototype;
    }],
    execute: function () {
      exports({
        getAllSkillKeys: getAllSkillKeys,
        getSkillKey: getSkillKey,
        getSkillPrototype: getSkillPrototype
      });
      cclegacy._RF.push({}, "433d9Qtyc1CDbXEc/4iW2HK", "SkillManager", undefined);

      // 该文件用于管理游戏中的技能系统
      var registry = new Map();
      var registryReverse = new Map();

      // 装备用品注册装饰器
      var RegisterSkill = exports('RegisterSkill', function RegisterSkill(key) {
        return function (T) {
          registry.set(key, T);
          registryReverse.set(T, key);
        };
      });

      // 获取所有注册的装备原型key
      function getAllSkillKeys() {
        return Array.from(registry.keys());
      }

      // 根据key获取装备原型
      function getSkillPrototype(key) {
        return registry.get(key);
      }

      // 根据装备原型或者实例获取key
      function getSkillKey(proto) {
        if (proto instanceof SkillPrototype) {
          // @ts-ignore
          return registryReverse.get(proto.constructor);
        }
        return registryReverse.get(proto);
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkillManager2.ts", ['cc', './Manager.ts', './Config.ts', './Message.ts', './SkillConfig.ts', './CharacterManager.ts', './SkillManager.ts'], function (exports) {
  var cclegacy, Manager, Config, message, isSkillBelongToPlayer, getSkillUpLevelMaterial, characterManager, getSkillPrototype;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      Manager = module.Manager;
    }, function (module) {
      Config = module.Config;
    }, function (module) {
      message = module.message;
    }, function (module) {
      isSkillBelongToPlayer = module.isSkillBelongToPlayer;
      getSkillUpLevelMaterial = module.getSkillUpLevelMaterial;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      getSkillPrototype = module.getSkillPrototype;
    }],
    execute: function () {
      cclegacy._RF.push({}, "9cb577ND9tOTblpq4IppZ9+", "SkillManager", undefined);
      var SkillManagerDTO = function SkillManagerDTO(data) {
        // 已经装备的技能
        this.skills = [];
        // 所有技能等级
        this.skillLevel = {};
        if (data) {
          this.skills = data.skills;
          this.skillLevel = data.skillLevel;
        }
      };
      var SkillData = exports('SkillData', /*#__PURE__*/function () {
        function SkillData(data) {
          var _this = this;
          // 已经装备的技能
          this.skills = [];
          // 所有技能等级
          this.skillLevel = {};
          if (data) {
            this.skills = data.skills;
            this.skillLevel = data.skillLevel;
            // 剔除不存在的技能
            for (var _key in Object.keys(this.skillLevel)) {
              if (getSkillPrototype(_key) === null) delete this.skillLevel[_key];
            }
          }
          // 响应式更换角色时，重新获取技能
          characterManager.data.on("changeCharacter", function () {
            characterManager.data.currentCharacter;
            _this.skills = [];
          });
          return;
        }

        // 获取技能等级
        var _proto = SkillData.prototype;
        _proto.getSkillLevel = function getSkillLevel(prototype) {
          return this.skillLevel[prototype] || 0;
        }

        // 卸下技能
        ;

        _proto.unloadSkill = function unloadSkill(prototype) {
          var index = -1;
          this.skills.forEach(function (skillProto, i) {
            if (skillProto === prototype) index = i;
          });
          if (index !== -1) this.skills.splice(index, 1);
          skillManager.save();
        }

        // 装备技能
        ;

        _proto.equipSkill = function equipSkill(prototype) {
          if (this.skills.length >= 3) {
            message.toast("技能数量已达到上限");
            return;
          }
          if (this.skills[prototype] <= 0) {
            message.toast("该技能还未学习");
            return;
          }
          var is = isSkillBelongToPlayer(prototype, characterManager.data.currentCharacter);
          if (is) this.skills.push(prototype);else message.toast("该技能不属于当前角色");
          skillManager.save();
        }

        // 升级技能
        ;

        _proto.upgradeSkill = function upgradeSkill(prototype, resourceManager) {
          // 获取技能等级
          var level = this.getSkillLevel(prototype);
          if (level >= 10) {
            message.toast("技能等级已达到上限");
            return;
          }
          // 获取升级材料
          var upMaterial = getSkillUpLevelMaterial(prototype, level);
          if (upMaterial.gold > resourceManager.data.gold) {
            message.toast("金币不足");
            return;
          }
          if (upMaterial.diamond > resourceManager.data.diamond) {
            message.toast("钻石不足");
            return;
          }
          // 减少资源
          resourceManager.data.reduceGold(upMaterial.gold);
          resourceManager.data.reduceDiamond(upMaterial.diamond);
          // 升级技能
          this.skillLevel[prototype] = (this.skillLevel[prototype] || 0) + 1;
        }

        // 学习技能
        ;

        _proto.learnSkill = function learnSkill(prototype, resourceManager) {
          // 获取升级材料
          var upMaterial = getSkillUpLevelMaterial(prototype, 0);
          if (upMaterial.gold > resourceManager.data.gold) {
            message.toast("金币不足");
            return;
          }
          if (upMaterial.diamond > resourceManager.data.diamond) {
            message.toast("钻石不足");
            return;
          }
          // 减少资源
          resourceManager.data.reduceGold(upMaterial.gold);
          resourceManager.data.reduceDiamond(upMaterial.diamond);
          // 升级技能
          this.skillLevel[prototype] = (this.skillLevel[prototype] || 0) + 1;
        };
        return SkillData;
      }());
      var skillManager = exports('skillManager', new Manager({
        storageKey: "slaughter:game:skill",
        descrypt: Config.descrypt,
        Constructor: SkillData,
        DtoCostructor: SkillManagerDTO
      }));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SkillPrototype.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, log;
  return {
    setters: [function (module) {
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      log = module.log;
    }],
    execute: function () {
      cclegacy._RF.push({}, "5f53ffAHOxMEosfyfDwAX4I", "SkillPrototype", undefined);
      var SkillFailReason = exports('SkillFailReason', /*#__PURE__*/function (SkillFailReason) {
        SkillFailReason[SkillFailReason["NotEnoughCoast"] = 0] = "NotEnoughCoast";
        SkillFailReason[SkillFailReason["CoolDown"] = 1] = "CoolDown";
        return SkillFailReason;
      }({})); // 冷却中
      var SkillPrototype = exports('SkillPrototype', /*#__PURE__*/function () {
        // 保存对应的实例
        function SkillPrototype(instance) {
          this.instance = instance;
        }
        // 图标信息 Sprite
        var _proto = SkillPrototype.prototype;
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  return _context.abrupt("return", Promise.resolve(null));
                case 1:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }() // 技能使用失败回调
        ;

        _proto.useFail = function useFail(reason, progress) {
          if (reason == SkillFailReason.NotEnoughCoast) {
            log("消耗不足", progress.cost);
          } else if (reason == SkillFailReason.CoolDown) {
            log("冷却中" + (progress.coolTime / 1000).toFixed(2) + "s");
          }
        }
        // 使用技能回调
        ;

        _proto.use = /*#__PURE__*/
        function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function use(_x) {
            return _use.apply(this, arguments);
          }
          return use;
        }() // 创建原型实例的回调
        ;

        _proto.onCreate = function onCreate() {};
        _createClass(SkillPrototype, [{
          key: "name",
          get:
          // 名称信息
          function get() {
            return "Equipment Name";
          }
          // 描述信息
        }, {
          key: "description",
          get: function get() {
            return "Equipment Description";
          }
          // 技能消耗
        }, {
          key: "cost",
          get: function get() {
            return {
              hp: 0,
              mp: 0
            };
          }
          // 技能冷却
        }, {
          key: "coolTime",
          get: function get() {
            return 15;
          }
          // 学习消耗
        }, {
          key: "learnCost",
          get: function get() {
            return {
              gold: 0,
              diamond: 0
            };
          }
          // 额外属性
        }, {
          key: "extraProperty",
          get: function get() {
            return {};
          }
        }]);
        return SkillPrototype;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SnowKing.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './CharacterPrototype.ts', './CharacterManager2.ts', './CharacterToPrefabMap.ts', './MonsterManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, AudioClip, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, CharacterPrototype, RegisterCharacter, getComponentByCharacter, registerMonster;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      AudioClip = module.AudioClip;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      CharacterPrototype = module.CharacterPrototype;
    }, function (module) {
      RegisterCharacter = module.RegisterCharacter;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      registerMonster = module.registerMonster;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _class3;
      cclegacy._RF.push({}, "9472aWkjJxA2qm22neF0p60", "SnowKing", undefined);
      var Entry = (_dec = RegisterLanguageEntry("SnowKing"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Entry, _LanguageEntry);
        function Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Entry, [{
          key: "chs",
          get: function get() {
            return "雪王";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Snow King";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "雪王";
          }
        }]);
        return Entry;
      }(LanguageEntry)) || _class);
      var Description_Entry = (_dec2 = RegisterLanguageEntry("SnowKing Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description_Entry, _LanguageEntry2);
        function Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description_Entry, [{
          key: "chs",
          get: function get() {
            return "雪王是来自北方的神秘生物，拥有强大的力量和冰冻技能。";
          }
        }, {
          key: "eng",
          get: function get() {
            return "The Snow King is a mysterious creature from the north, possessing great power and ice-based abilities.";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "雪王は北から来た神秘生物で、強力な力と氷の能力を持っています。";
          }
        }]);
        return Description_Entry;
      }(LanguageEntry)) || _class2);
      var SnowKing = exports('SnowKing', (_dec3 = RegisterCharacter("SnowKing"), _dec4 = registerMonster("SnowKing"), _dec3(_class3 = _dec4(_class3 = /*#__PURE__*/function (_CharacterPrototype) {
        _inheritsLoose(SnowKing, _CharacterPrototype);
        function SnowKing() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _CharacterPrototype.call.apply(_CharacterPrototype, [this].concat(args)) || this;
          _this.baseProperty = new BasePrototypeProperty({
            maxHp: 350,
            maxMp: 40,
            physicalAttack: 70,
            magicAttack: 50,
            physicalDefense: 10,
            magicDefense: 10,
            criticalRate: 0.05,
            criticalDamage: 1.5,
            physicalPenetration: 5,
            magicPenetration: 10,
            lightResistance: -10,
            darkResistance: -10,
            attackSpeed: 0.6
          });
          _this.growProperty = new BasePrototypeProperty({
            maxHp: 100,
            maxMp: 15,
            physicalAttack: 30,
            magicAttack: 20,
            physicalDefense: 5,
            magicDefense: 5
          });
          return _this;
        }
        var _proto = SnowKing.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Player/Brave/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.skeletonData = function skeletonData() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context2.t0 = res;
                  _context2.next = 4;
                  return assets.load("Spine/Monster/SnowKing/hero00073", sp.SkeletonData, true);
                case 4:
                  _context2.t1 = _context2.sent.value;
                  (0, _context2.t0)(_context2.t1);
                case 6:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          })));
        };
        _proto.playAttackAnimation = function playAttackAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack01", {
            count: 1,
            speed: this.instance.attackSpeed,
            frameEvent: {
              name: "Attack",
              callback: function callback() {
                next();
                // 播放音效
                new CcNative.Asset.AssetManager("ModBaseResource").load("Sound/Character/Player/atk1", AudioClip).then(function (audio) {
                  return prefab.playSound(audio.value);
                });
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
          return;
        };
        _proto.playSkillAnimation = function playSkillAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return next();
          prefab.playAnimation("Attack02", {
            count: 1,
            speed: 1,
            frameEvent: {
              name: "Skill",
              callback: function callback() {
                return next();
              }
            },
            complete: function complete() {
              return animationEndCallback();
            }
          });
        };
        _proto.playDieAnimation = function playDieAnimation(progress, animationEndCallback, next) {
          var prefab = getComponentByCharacter(this.instance);
          if (!prefab) return;
          prefab.playAnimation("BeAttack", {
            count: 1,
            speed: 1,
            complete: function complete() {
              animationEndCallback();
              next();
            }
          });
        };
        _createClass(SnowKing, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SnowKing").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("SnowKing Description").getValue(settingManager.data.language);
          }
        }, {
          key: "animation",
          get: function get() {
            return {
              animations: {
                idle: "Idle",
                move: "Run"
              }
            };
          }
        }]);
        return SnowKing;
      }(CharacterPrototype)) || _class3) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Spear.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './BasePrototypeProperty.ts', './EquipmentPrototype.ts', './EquipmentManager2.ts', './ItemManager.ts', './Stone.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, BasePrototypeProperty, EquipmentType, getQualityColor, getQualityName, EquipmentPrototype, RegisterEquipment, getItemKey, Stone;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      BasePrototypeProperty = module.BasePrototypeProperty;
    }, function (module) {
      EquipmentType = module.EquipmentType;
      getQualityColor = module.getQualityColor;
      getQualityName = module.getQualityName;
      EquipmentPrototype = module.EquipmentPrototype;
    }, function (module) {
      RegisterEquipment = module.RegisterEquipment;
    }, function (module) {
      getItemKey = module.getItemKey;
    }, function (module) {
      Stone = module.Stone;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "f5a24eN5qlH8rg12Jq0HKJD", "Spear", undefined);
      var Spear_Entry = (_dec = RegisterLanguageEntry("Spear"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Spear_Entry, _LanguageEntry);
        function Spear_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Spear_Entry, [{
          key: "chs",
          get: function get() {
            return "长矛";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Spear";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "槍";
          }
        }]);
        return Spear_Entry;
      }(LanguageEntry)) || _class);
      var Spear_Description_Entry = (_dec2 = RegisterLanguageEntry("Spear Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Spear_Description_Entry, _LanguageEntry2);
        function Spear_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Spear_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "一把普通的木矛";
          }
        }, {
          key: "eng",
          get: function get() {
            return "A common wooden spear";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "普通の木の槍";
          }
        }]);
        return Spear_Description_Entry;
      }(LanguageEntry)) || _class2); // 套装效果 所需数量1 所需数量2
      var oneSuit = 2,
        twoSuit = 4;
      var Spear = exports('Spear', (_dec3 = RegisterEquipment("Spear", function (lv) {
        if (lv >= 10) return null;
        return {
          gold: lv * 500 + 1000,
          diamond: lv * 5 + 20,
          items: [{
            prototype: getItemKey(Stone),
            count: lv * 2 + 5
          }]
        };
      }, function (lv) {
        return {
          gold: lv * 200 + 500,
          diamond: lv * 2 + 10,
          items: [{
            prototype: getItemKey(Stone),
            count: lv + 2
          }]
        };
      }), _dec3(_class3 = /*#__PURE__*/function (_EquipmentPrototype) {
        _inheritsLoose(Spear, _EquipmentPrototype);
        function Spear() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _EquipmentPrototype.call.apply(_EquipmentPrototype, [this].concat(args)) || this;
          // 基础属性
          _this.baseProperty = new BasePrototypeProperty({
            physicalAttack: 15,
            attackSpeed: 1.25
          }).setProperty("physicalAttack", function (atk) {
            return atk + (_this.suitCount >= oneSuit ? 10 : 0);
          }).setProperty("attackSpeed", function (speed) {
            return speed + (_this.suitCount >= twoSuit ? 0.15 : 0);
          });
          // 成长属性
          _this.growProperty = new BasePrototypeProperty({
            physicalAttack: 3
          });
          return _this;
        }
        var _proto = Spear.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Equipment/BeginnerKit/Spear/spriteFrame", SpriteFrame);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _createClass(Spear, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Spear").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Spear Description").getValue(settingManager.data.language);
          }
        }, {
          key: "type",
          get: function get() {
            return EquipmentType.Weapon;
          }
        }, {
          key: "suit",
          get: function get() {
            return "BeginnerKit";
          }
        }, {
          key: "propertyDescription",
          get: function get() {
            var res = "";
            // 基础属性
            res += "Lv: " + this.instance.lv + "\n" + LanguageManager.getEntry("Quality").getValue(settingManager.data.language) + ": <color=" + getQualityColor(this.instance.quality) + ">" + LanguageManager.getEntry(getQualityName(this.instance.quality)).getValue(settingManager.data.language) + "</color>\n";
            res += LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": " + this.instance.physicalAttack.toFixed(1) + "\n";
            res += LanguageManager.getEntry("attackSpeed").getValue(settingManager.data.language) + ": " + this.instance.attackSpeed.toFixed(1) + "\n";
            // 套装属性
            var suitEntryStr = LanguageManager.getEntry(this.suit).getValue(settingManager.data.language);
            res += "\n" + (this.suitCount >= oneSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + oneSuit + "): " + LanguageManager.getEntry("physicalAttack").getValue(settingManager.data.language) + ": +10" + (this.suitCount >= oneSuit ? "</color>" : "") + "\n";
            res += "" + (this.suitCount >= twoSuit ? "<color=#00ff00>" : "") + suitEntryStr + "(" + twoSuit + "): " + LanguageManager.getEntry("attackSpeed").getValue(settingManager.data.language) + ": +0.15" + (this.suitCount >= twoSuit ? "</color>" : "") + "\n";
            return res;
          }
        }]);
        return Spear;
      }(EquipmentPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SpineAnimation.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc'], function (exports) {
  var _inheritsLoose, cclegacy, _decorator, error, sp;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      error = module.error;
      sp = module.sp;
    }],
    execute: function () {
      var _dec, _class;
      cclegacy._RF.push({}, "d6bb29QNS9GhpuSLT0flgFw", "SpineAnimation", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var SpineAnimation = exports('SpineAnimation', (_dec = ccclass('SpineAnimation'), _dec(_class = /*#__PURE__*/function (_sp$Skeleton) {
        _inheritsLoose(SpineAnimation, _sp$Skeleton);
        function SpineAnimation() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _sp$Skeleton.call.apply(_sp$Skeleton, [this].concat(args)) || this;
          // 是否已经开启帧时间监听
          _this.hasOpenFrameEvent = false;
          // 帧事件列表
          _this.frameEventMap = new Map();
          return _this;
        }
        var _proto = SpineAnimation.prototype;
        // 播放动画
        // name 动画名称 count 动画播放次数
        _proto.playAnimation = function playAnimation(name, option) {
          var _this2 = this;
          if (option === void 0) {
            option = {};
          }
          var count = option.count || -1;
          var speed = option.speed || 1;
          var temScale = this.timeScale;
          this.timeScale = speed;
          var promise = new Promise(function (res) {
            _this2.clearAnimation(0);
            _this2.addAnimation(0, name, count === 1 ? false : true);
            _this2.setCompleteListener(function () {
              if (count === -1) return;
              if (count > 0) count--;
              if (count === 0) {
                _this2.timeScale = temScale;
                return res();
              }
            });
          });
          return promise;
        }

        // 挂点
        ;

        _proto.setSocket = function setSocket(socketPath, node) {
          if (!node || node.parent) {
            return error("node is not exit or is already have a parent");
          }
          this.node.addChild(node);
          var socket = new sp.SpineSocket(socketPath, node);
          this.sockets.push(socket);
          this.sockets = this.sockets;
        }

        // 移除挂点
        ;

        _proto.removeSocket = function removeSocket(socketPath, node) {
          if (!node) {
            var sockets = this.sockets.filter(function (socket) {
              return socket.path !== socketPath;
            });
            this.sockets = sockets;
          } else {
            var _sockets = this.sockets.filter(function (socket) {
              return socket.path !== socketPath && socket.target !== node;
            });
            this.sockets = _sockets;
            node.parent = null;
          }
        };
        // 监听帧事件
        _proto.listenFrameEvent = function listenFrameEvent(event, callback) {
          var _this3 = this;
          if (!this.hasOpenFrameEvent) {
            this.setEventListener(function (_, e) {
              var _this3$frameEventMap$;
              (_this3$frameEventMap$ = _this3.frameEventMap.get(e.data.name)) == null || _this3$frameEventMap$.forEach(function (c) {
                return c(e);
              });
            });
            this.hasOpenFrameEvent = true;
          }
          var arr = this.frameEventMap.get(event);
          if (!arr) this.frameEventMap.set(event, arr = new Set());
          arr.add(callback);
        }

        // 移除帧事件
        ;

        _proto.removeFrameEvent = function removeFrameEvent(event, callback) {
          if (!callback) this.frameEventMap["delete"](event);
          var set = this.frameEventMap.get(event);
          if (set) set["delete"](callback);
          if (set && set.size <= 0) this.frameEventMap["delete"](event);
        };
        return SpineAnimation;
      }(sp.Skeleton)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Stone.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './BackpackManager.ts', './SettingManager.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './ItemPrototype.ts', './ItemManager.ts', './EquipmentManager.ts', './EquipmentManager2.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, SpriteFrame, backpackManager, settingManager, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, ItemPrototype, getItemKey, RegisterItem, equipmentManager, getAllEquipmentKeys;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      backpackManager = module.backpackManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      ItemPrototype = module.ItemPrototype;
    }, function (module) {
      getItemKey = module.getItemKey;
      RegisterItem = module.RegisterItem;
    }, function (module) {
      equipmentManager = module.equipmentManager;
    }, function (module) {
      getAllEquipmentKeys = module.getAllEquipmentKeys;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "3a0f2zkR/pEWYWluoGSyjxI", "Stone", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var Brave_Entry = (_dec = RegisterLanguageEntry("Stone"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Brave_Entry, _LanguageEntry);
        function Brave_Entry() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Brave_Entry, [{
          key: "chs",
          get: function get() {
            return "石头";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Stone";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "石です";
          }
        }]);
        return Brave_Entry;
      }(LanguageEntry)) || _class);
      var Brave_Description_Entry = (_dec2 = RegisterLanguageEntry("Stone Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Brave_Description_Entry, _LanguageEntry2);
        function Brave_Description_Entry() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Brave_Description_Entry, [{
          key: "chs",
          get: function get() {
            return "似乎没有什么用处";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Seems to be useless";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "何の役にも立たないようです";
          }
        }]);
        return Brave_Description_Entry;
      }(LanguageEntry)) || _class2);
      var Stone = exports('Stone', (_dec3 = RegisterItem("Stone"), _dec3(_class3 = /*#__PURE__*/function (_ItemPrototype) {
        _inheritsLoose(Stone, _ItemPrototype);
        function Stone() {
          return _ItemPrototype.apply(this, arguments) || this;
        }
        var _proto = Stone.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            var assets;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  assets = new CcNative.Asset.AssetManager("ModBaseResource");
                  _context.t0 = res;
                  _context.next = 4;
                  return assets.load("Texture/Item/Stone/spriteFrame", SpriteFrame, true);
                case 4:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = function use(number) {
          var equipmentKey = getAllEquipmentKeys()[Math.floor(Math.random() * getAllEquipmentKeys().length)];
          equipmentManager.data.addEquipment(equipmentKey);
          backpackManager.data.reduceCount(getItemKey(Stone), number);
          backpackManager.save();
          equipmentManager.save();
        };
        _createClass(Stone, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("Stone").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("Stone Description").getValue(settingManager.data.language);
          }
        }, {
          key: "canUse",
          get: function get() {
            return true;
          }
        }]);
        return Stone;
      }(ItemPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/StorageDTO.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      cclegacy._RF.push({}, "21e5af+n15GLbsnB0Wx1gPM", "StorageDTO", undefined);
      // 加密解密
      function xorEncryptDecrypt(input, key) {
        var output = "";
        for (var i = 0; i < input.length; i++) {
          var xorResult = input.charCodeAt(i) ^ key.charCodeAt(i % key.length);
          output += String.fromCharCode(xorResult);
        }
        return output;
      }
      var key = 'asfsajuoawslgonmas52d4g6s5g5ds4hg65ds';
      var StorageDTO = exports('StorageDTO', /*#__PURE__*/function () {
        // 构造器
        function StorageDTO(key, data, timer) {
          if (timer === void 0) {
            timer = -1;
          }
          // 存储的键
          this.key = '';
          // 存储的数据
          this.data = null;
          // 存储时间
          this.timer = -1;
          this.key = key;
          this.data = data;
          this.timer = timer;
        }

        // 删除
        StorageDTO.delet = function delet(key) {
          localStorage.removeItem(key);
        }

        // 存储
        ;

        StorageDTO.save = function save(storage, encipher) {
          if (encipher === void 0) {
            encipher = false;
          }
          var storageData = JSON.stringify(storage);
          localStorage.setItem(storage.key, encipher ? xorEncryptDecrypt(storageData, key) : storageData);
        }

        // 读取
        ;

        StorageDTO.read = function read(key, decrypt) {
          if (decrypt === void 0) {
            decrypt = false;
          }
          var storage = localStorage.getItem(key);
          if (!storage) return null;
          try {
            var storageData = JSON.parse(decrypt ? xorEncryptDecrypt(storage, key) : storage);
            if (storageData.timer === -1 || storageData.timer < Date.now()) return storageData;else StorageDTO.delet(key);
          } catch (e) {}
          return null;
        };
        return StorageDTO;
      }());
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/SunShining.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageManager.ts', './SettingManager.ts', './SkillConfig.ts', './SkillPrototype.ts', './SkillManager.ts', './LanguageEntry.ts', './FightMapManager.ts', './CharacterPrototype.ts', './SpineAnimation.ts', './CharacterToPrefabMap.ts', './LoadingManager.ts', './Message.ts', './AssetManager.ts', './Burn.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, sp, Node, UITransform, RegisterLanguageEntry, LanguageManager, settingManager, RegisterPlayerSkill, RegisterSkillUpLevel, SkillFailReason, SkillPrototype, RegisterSkill, LanguageEntry, getFightMapInstance, DamageType, FromType, SpineAnimation, getComponentByCharacter, LoadingManager, message, getBaseModManager, Burn;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
      sp = module.sp;
      Node = module.Node;
      UITransform = module.UITransform;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }, function (module) {
      RegisterPlayerSkill = module.RegisterPlayerSkill;
      RegisterSkillUpLevel = module.RegisterSkillUpLevel;
    }, function (module) {
      SkillFailReason = module.SkillFailReason;
      SkillPrototype = module.SkillPrototype;
    }, function (module) {
      RegisterSkill = module.RegisterSkill;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      getFightMapInstance = module.getFightMapInstance;
    }, function (module) {
      DamageType = module.DamageType;
      FromType = module.FromType;
    }, function (module) {
      SpineAnimation = module.SpineAnimation;
    }, function (module) {
      getComponentByCharacter = module.getComponentByCharacter;
    }, function (module) {
      LoadingManager = module.LoadingManager;
    }, function (module) {
      message = module.message;
    }, function (module) {
      getBaseModManager = module.getBaseModManager;
    }, function (module) {
      Burn = module.Burn;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _dec4, _dec5, _class3;
      cclegacy._RF.push({}, "ad84elTRqNJ/JuItgVfDP2G", "SunShining", undefined);
      var Name = (_dec = RegisterLanguageEntry("SunShining"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(Name, _LanguageEntry);
        function Name() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(Name, [{
          key: "chs",
          get: function get() {
            return "阳光普照";
          }
        }, {
          key: "eng",
          get: function get() {
            return "SunShining";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "サンシニング";
          }
        }]);
        return Name;
      }(LanguageEntry)) || _class);
      var Description = (_dec2 = RegisterLanguageEntry("SunShining Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(Description, _LanguageEntry2);
        function Description() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(Description, [{
          key: "chs",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8017: " + (Math.max(1, lv) * 20 + 40) + " \u9B54\u6CD5\u503C</color>\n\u51B7\u5374\u65F6\u95F4: " + (20 - lv * 1.5) + "s\n" + ("\u9020\u6210 " + (Math.max(1, lv) * 10 + 60) + "% \u9B54\u529B\u503C\u7684\u9B54\u6CD5\u4F24\u5E76\u6DFB\u52A0\u70E7\u4F24: \u6BCF\u79D2\u9020\u6210 " + (Math.max(1, lv) * 10 + 60) * 0.35 + " \u7684\u771F\u5B9E\u4F24\u5BB3");
          }
        }, {
          key: "eng",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>Cost: " + (Math.max(1, lv) * 20 + 40) + " Mana</color>\nCooldown: " + (20 - lv * 1.5) + "s\n" + ("Deals " + (Math.max(1, lv) * 10 + 60) + "% of magic damage and applies Burn: " + (Math.max(1, lv) * 10 + 60) * 0.35 + " damage per second");
          }
        }, {
          key: "jpn",
          get: function get() {
            var lv = Math.max(0, this.data.lv - 1);
            return "<color=0E70FB>\u6D88\u8CBB: " + (Math.max(1, lv) * 20 + 40) + " \u30DE\u30CA</color>\n\u30AF\u30FC\u30EB\u30BF\u30A4\u30E0: " + (20 - lv * 1.5) + "s\n" + ("\u9B54\u529B\u306E " + (Math.max(1, lv) * 10 + 60) + "% \u306E\u9B54\u6CD5\u30C0\u30E1\u30FC\u30B8\u3092\u4E0E\u3048\u3001\u304B\u3064\u70E7\u4F24\u3092\u4ED8\u4E0E: \u6BCE\u79D2 " + (Math.max(1, lv) * 10 + 60) * 0.35 + " \u306E\u30C0\u30E1\u30FC\u30B8");
          }
        }]);
        return Description;
      }(LanguageEntry)) || _class2);
      var Fireball = exports('Fireball', (_dec3 = RegisterSkill("SunShining"), _dec4 = RegisterPlayerSkill("SunShining", "Apollo"), _dec5 = RegisterSkillUpLevel("SunShining", function (lv) {
        return {
          diamond: lv * 50 + 150,
          gold: Math.pow(2, lv) * 100 + 100
        };
      }), _dec3(_class3 = _dec4(_class3 = _dec5(_class3 = /*#__PURE__*/function (_SkillPrototype) {
        _inheritsLoose(Fireball, _SkillPrototype);
        function Fireball() {
          return _SkillPrototype.apply(this, arguments) || this;
        }
        var _proto = Fireball.prototype;
        _proto.icon = function icon() {
          return new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _context.t0 = res;
                  _context.next = 3;
                  return getBaseModManager().load("Texture/Skill/DivineLight/spriteFrame", SpriteFrame, true);
                case 3:
                  _context.t1 = _context.sent.value;
                  (0, _context.t0)(_context.t1);
                case 5:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          })));
        };
        _proto.use = /*#__PURE__*/function () {
          var _use = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(useOption) {
            var fightInstance, target, targetPrefab, node, spineAnimation, skeletonDataPack, magicReduce;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  // 战斗实例
                  fightInstance = getFightMapInstance();
                  if (fightInstance) {
                    _context2.next = 3;
                    break;
                  }
                  return _context2.abrupt("return");
                case 3:
                  target = this.instance.characterInstance === fightInstance.player ? fightInstance.currentMonster : fightInstance.player; // 获取目标节点
                  targetPrefab = getComponentByCharacter(target);
                  if (targetPrefab) {
                    _context2.next = 7;
                    break;
                  }
                  return _context2.abrupt("return");
                case 7:
                  // 播放特效动画
                  node = new Node();
                  node.addComponent(UITransform);
                  spineAnimation = node.addComponent(SpineAnimation);
                  _context2.next = 12;
                  return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
                case 12:
                  skeletonDataPack = _context2.sent;
                  targetPrefab.node.addChild(node);
                  _context2.next = 16;
                  return new Promise(function (res) {
                    node.setScale(1.2, 1.2);
                    node.setPosition(0, -120);
                    spineAnimation.skeletonData = skeletonDataPack.value;
                    spineAnimation.playAnimation("skill_2", {
                      count: 1
                    });
                    spineAnimation.listenFrameEvent("Skill", function () {
                      return res(null);
                    });
                  });
                case 16:
                  magicReduce = Math.max(useOption.use.magicAttack * ((Math.max(1, this.instance.lv - 1) * 10 + 60) / 100), 1);
                  target.beDamage({
                    atk: magicReduce,
                    type: DamageType.magic,
                    from: fightInstance.player,
                    fromType: FromType.skill
                  });
                  target.addBuff({
                    Proto: Burn,
                    from: fightInstance.player,
                    data: {
                      damage: magicReduce * 0.35
                    }
                  });
                case 19:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function use(_x2) {
            return _use.apply(this, arguments);
          }
          return use;
        }();
        _proto.useFail = function useFail(reason, progress) {
          if (reason === SkillFailReason.NotEnoughCoast) message.toast(new ( /*#__PURE__*/function (_LanguageEntry3) {
            _inheritsLoose(_class4, _LanguageEntry3);
            function _class4() {
              return _LanguageEntry3.apply(this, arguments) || this;
            }
            _createClass(_class4, [{
              key: "chs",
              get: function get() {
                return "当前法力值不足以使用该技能";
              }
            }, {
              key: "eng",
              get: function get() {
                return "Not enough MP to use this skill";
              }
            }, {
              key: "jpn",
              get: function get() {
                return "MPが足りません";
              }
            }]);
            return _class4;
          }(LanguageEntry))().getValue(settingManager.data.language));
        };
        _createClass(Fireball, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("SunShining").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            var character = this.instance.characterInstance;
            if (!character) return "";
            return LanguageManager.getEntry("SunShining Description").getValue(settingManager.data.language, {
              lv: this.instance.lv
            });
          }
        }, {
          key: "cost",
          get: function get() {
            return {
              mp: Math.max(1, this.instance.lv - 1) * 20 + 40,
              hp: 0
            };
          }
        }, {
          key: "coolTime",
          get: function get() {
            if (!this.instance.characterInstance) return 20 - this.instance.lv * 1.5;
            return (20 - this.instance.lv * 1.5) * (1 - this.instance.characterInstance.coolDown / (this.instance.characterInstance.coolDown + 150));
          }
        }]);
        return Fireball;
      }(SkillPrototype)) || _class3) || _class3) || _class3));

      // 预加载特效动画 
      LoadingManager.addLoadingQueue( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return getBaseModManager().load("Spine/Effect/0001/Hero_5404_effect", sp.SkeletonData, true);
            case 2:
              _context3.next = 4;
              return getBaseModManager().load("Texture/Skill/DivineLight/spriteFrame", SpriteFrame, true);
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      })));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/TaskPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './AchivementManager2.ts', './ModuleProgressPrefab.ts', './ExtensionComponent.ts', './AchivementManager.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, cclegacy, _decorator, Enum, ScrollView, instantiate, Label, Sprite, Button, getAllAchivements, isDayTask, getAchivementKey, ModuleProgressPrefab, ExtensionComponent, achivementManager, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Enum = module.Enum;
      ScrollView = module.ScrollView;
      instantiate = module.instantiate;
      Label = module.Label;
      Sprite = module.Sprite;
      Button = module.Button;
    }, function (module) {
      getAllAchivements = module.getAllAchivements;
      isDayTask = module.isDayTask;
      getAchivementKey = module.getAchivementKey;
    }, function (module) {
      ModuleProgressPrefab = module.ModuleProgressPrefab;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _dec2, _class, _class2, _descriptor;
      cclegacy._RF.push({}, "fe03aE/lcBCvpVrpS7RwWlN", "TaskPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var TaskType = exports('TaskType', Enum({
        dayTask: "dayTask",
        achivement: "achievement"
      }));
      var TaskPrefab = exports('TaskPrefab', (_dec = ccclass('TaskPrefab'), _dec2 = property({
        type: TaskType
      }), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(TaskPrefab, _ExtensionComponent);
        function TaskPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "taskType", _descriptor, _assertThisInitialized(_this));
          // 关闭回调
          _this._onClose = function () {};
          return _this;
        }
        var _proto = TaskPrefab.prototype;
        _proto.start = function start() {
          if (this.taskType == "dayTask") {
            this.initDayTask();
          } else if (this.taskType == "achievement") {
            this.initAchivement();
          }
          return;
        };
        _proto.initDayTask = function initDayTask() {
          var _this2 = this;
          // 容器节点
          var contentNode = this.node.getChildByName("Container").getComponent(ScrollView).content;
          // 绑定展示
          var tempItemNode = contentNode.getChildByName("TemAchivement");
          this.effect(function () {
            // 清空内容节点
            contentNode.removeAllChildren();
            // 获取所有成就
            var allAchivement = Array.from(getAllAchivements());
            // 遍历成就
            for (var i = 0; i < allAchivement.length; i++) {
              var achivement = allAchivement[i];
              if (!isDayTask(achivement) || !achivement.open || achivementManager.data.hasGetReward(getAchivementKey(achivement))) continue;
              // 克隆节点
              var itemNode = instantiate(tempItemNode);
              _this2.initNode(itemNode, achivement);
              contentNode.addChild(itemNode);
            }
          });
        };
        _proto.initAchivement = function initAchivement() {
          var _this3 = this;
          // 容器节点
          var contentNode = this.node.getChildByName("Container").getComponent(ScrollView).content;
          // 绑定展示
          var tempItemNode = contentNode.getChildByName("TemAchivement");
          this.effect(function () {
            // 清空内容节点
            contentNode.removeAllChildren();
            // 获取所有成就
            var allAchivement = Array.from(getAllAchivements());
            // 遍历成就
            for (var i = 0; i < allAchivement.length; i++) {
              var achivement = allAchivement[i];
              if (isDayTask(achivement) || !achivement.open) continue;
              // 克隆节点
              var itemNode = instantiate(tempItemNode);
              _this3.initNode(itemNode, achivement);
              contentNode.addChild(itemNode);
            }
          });
        }

        // 初始化节点
        ;

        _proto.initNode = function initNode(node, achivement) {
          var titleLabel = node.getChildByName("Name").getComponent(Label);
          var sprite = node.getChildByName("Icon").getComponent(Sprite);
          var descriptionLabel = node.getChildByName("Description").getComponent(Label);
          var progressPrefab = node.getChildByName("Progress").getComponent(ModuleProgressPrefab);
          var getRewardBtn = node.getChildByName("GetReward").getComponent(Button);
          var progressLabel = node.getChildByName("ProgressLabel").getComponent(Label);
          var buttonNode = node.getChildByName("GetReward");
          titleLabel.string = achivement.name;
          descriptionLabel.string = achivement.description;
          achivement.icon().then(function (spriteFrame) {
            return sprite.spriteFrame = spriteFrame;
          });
          progressPrefab.setProgress(Math.min(1, achivement.progress.progress / achivement.progress.maxProgress));
          progressLabel.string = Math.min(100, achivement.progress.progress / achivement.progress.maxProgress * 100).toFixed(2) + "%";
          buttonNode.getChildByName("Label").getComponent(Label).string = LanguageManager.getEntry("GetReward").getValue(settingManager.data.language);
          var progress = achivement.progress;
          if (progress.progress / progress.maxProgress >= 1 && !achivementManager.data.hasGetReward(getAchivementKey(achivement))) getRewardBtn.node.active = true;else getRewardBtn.node.active = false;
          getRewardBtn.node.on(Button.EventType.CLICK, function () {
            if (achivement.progress.progress / achivement.progress.maxProgress >= 1) achivementManager.data.getRewardTask(getAchivementKey(achivement));
            achivementManager.save();
          });
        };
        _proto.onClose = function onClose(fn) {
          this._onClose = fn;
        }

        // 关闭成就
        ;

        _proto.closeAchivement = function closeAchivement() {
          this.node.active = false;
          this._onClose();
        };
        return TaskPrefab;
      }(ExtensionComponent), _descriptor = _applyDecoratedDescriptor(_class2.prototype, "taskType", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return "achievement";
        }
      }), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/toDisplayString.ts", ['cc', './index5.ts', './general.ts', './constants.ts'], function (exports) {
  var cclegacy, isString, isArray, isObject, objectToString, isFunction, isMap, isSymbol, isSet, isPlainObject, ReactiveFlags;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }, null, function (module) {
      isString = module.isString;
      isArray = module.isArray;
      isObject = module.isObject;
      objectToString = module.objectToString;
      isFunction = module.isFunction;
      isMap = module.isMap;
      isSymbol = module.isSymbol;
      isSet = module.isSet;
      isPlainObject = module.isPlainObject;
    }, function (module) {
      ReactiveFlags = module.ReactiveFlags;
    }],
    execute: function () {
      cclegacy._RF.push({}, "250ffkmSmNFcanMRlURfq35", "toDisplayString", undefined);

      // can't use isRef here since @vue/shared has no deps
      var isRef = function isRef(val) {
        return !!(val && val[ReactiveFlags.IS_REF] === true);
      };

      /**
       * For converting {{ interpolation }} values to displayed strings.
       * @private
       */
      var toDisplayString = exports('toDisplayString', function toDisplayString(val) {
        return isString(val) ? val : val == null ? '' : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);
      });
      var replacer = function replacer(_key, val) {
        if (isRef(val)) {
          return replacer(_key, val.value);
        } else if (isMap(val)) {
          var _ref2;
          return _ref2 = {}, _ref2["Map(" + val.size + ")"] = Array.from(val.entries()).reduce(function (entries, _ref, i) {
            var key = _ref[0],
              val = _ref[1];
            entries[stringifySymbol(key, i) + ' =>'] = val;
            return entries;
          }, {}), _ref2;
        } else if (isSet(val)) {
          var _ref3;
          return _ref3 = {}, _ref3["Set(" + val.size + ")"] = Array.from(val.values()).map(function (v) {
            return stringifySymbol(v);
          }), _ref3;
        } else if (isSymbol(val)) {
          return stringifySymbol(val);
        } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {
          // native elements
          return String(val);
        }
        return val;
      };
      var stringifySymbol = function stringifySymbol(v, i) {
        var _description;
        if (i === void 0) {
          i = '';
        }
        return (
          // Symbol.description in es2019+ so we need to cast here to pass
          // the lib: es2016 check
          isSymbol(v) ? "Symbol(" + ((_description = v.description) != null ? _description : i) + ")" : v
        );
      };
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/Ui.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './LanguageEntry.ts', './LanguageManager.ts'], function () {
  var _inheritsLoose, _createClass, cclegacy, LanguageEntry, RegisterLanguageEntry;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
    }, function (module) {
      cclegacy = module.cclegacy;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
    }],
    execute: function () {
      cclegacy._RF.push({}, "23202WQVlVFS6Iu5koVHmf2", "Ui", undefined);
      (function (_dec, _class) {
        var _ = (_dec = RegisterLanguageEntry("Loading..."), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
          _inheritsLoose(_, _LanguageEntry);
          function _() {
            return _LanguageEntry.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "加载中...";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Loading...";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "読み込み中...";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class);
      })();
      (function (_dec2, _class2) {
        var _ = (_dec2 = RegisterLanguageEntry("Close"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
          _inheritsLoose(_, _LanguageEntry2);
          function _() {
            return _LanguageEntry2.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "关闭";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Close";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "閉じる";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class2);
      })();
      (function (_dec3, _class3) {
        var _ = (_dec3 = RegisterLanguageEntry("Language"), _dec3(_class3 = /*#__PURE__*/function (_LanguageEntry3) {
          _inheritsLoose(_, _LanguageEntry3);
          function _() {
            return _LanguageEntry3.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "语言";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Language";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "言語";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class3);
      })();
      (function (_dec4, _class4) {
        var _ = (_dec4 = RegisterLanguageEntry("Setting"), _dec4(_class4 = /*#__PURE__*/function (_LanguageEntry4) {
          _inheritsLoose(_, _LanguageEntry4);
          function _() {
            return _LanguageEntry4.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "设置";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Settings";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "設定";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class4);
      })();
      (function (_dec5, _class5) {
        var _ = (_dec5 = RegisterLanguageEntry("BackVolume"), _dec5(_class5 = /*#__PURE__*/function (_LanguageEntry5) {
          _inheritsLoose(_, _LanguageEntry5);
          function _() {
            return _LanguageEntry5.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "背景音量";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Back Volume";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "背景の音量";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class5);
      })();
      (function (_dec6, _class6) {
        var _ = (_dec6 = RegisterLanguageEntry("EffectVolume"), _dec6(_class6 = /*#__PURE__*/function (_LanguageEntry6) {
          _inheritsLoose(_, _LanguageEntry6);
          function _() {
            return _LanguageEntry6.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "特效音量";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Effect Volume";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "効果の音量";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class6);
      })();
      (function (_dec7, _class7) {
        var _ = (_dec7 = RegisterLanguageEntry("LevelSelect"), _dec7(_class7 = /*#__PURE__*/function (_LanguageEntry7) {
          _inheritsLoose(_, _LanguageEntry7);
          function _() {
            return _LanguageEntry7.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "副本选择";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Level Select";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "レベル選択";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class7);
      })();
      (function (_dec8, _class8) {
        var _ = (_dec8 = RegisterLanguageEntry("LevelUp"), _dec8(_class8 = /*#__PURE__*/function (_LanguageEntry8) {
          _inheritsLoose(_, _LanguageEntry8);
          function _() {
            return _LanguageEntry8.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "升级";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Level Up";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "レベルアップ";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class8);
      })();
      (function (_dec9, _class9) {
        var _ = (_dec9 = RegisterLanguageEntry("Backpack"), _dec9(_class9 = /*#__PURE__*/function (_LanguageEntry9) {
          _inheritsLoose(_, _LanguageEntry9);
          function _() {
            return _LanguageEntry9.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "背包";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Backpack";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "バックパック";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class9);
      })();
      (function (_dec10, _class10) {
        var _ = (_dec10 = RegisterLanguageEntry("Skill"), _dec10(_class10 = /*#__PURE__*/function (_LanguageEntry10) {
          _inheritsLoose(_, _LanguageEntry10);
          function _() {
            return _LanguageEntry10.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "技能";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Skill";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "スキル";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class10);
      })();
      (function (_dec11, _class11) {
        var _ = (_dec11 = RegisterLanguageEntry("Unload"), _dec11(_class11 = /*#__PURE__*/function (_LanguageEntry11) {
          _inheritsLoose(_, _LanguageEntry11);
          function _() {
            return _LanguageEntry11.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "卸下";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Unload";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "アンロード";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class11);
      })();
      (function (_dec12, _class12) {
        var _ = (_dec12 = RegisterLanguageEntry("Equipment"), _dec12(_class12 = /*#__PURE__*/function (_LanguageEntry12) {
          _inheritsLoose(_, _LanguageEntry12);
          function _() {
            return _LanguageEntry12.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "装备";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Equipment";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "装備";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class12);
      })();
      (function (_dec13, _class13) {
        var _ = (_dec13 = RegisterLanguageEntry("Quality"), _dec13(_class13 = /*#__PURE__*/function (_LanguageEntry13) {
          _inheritsLoose(_, _LanguageEntry13);
          function _() {
            return _LanguageEntry13.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "品质";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Quality";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "品質";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class13);
      })();
      (function (_dec14, _class14) {
        var _ = (_dec14 = RegisterLanguageEntry("Ordinary"), _dec14(_class14 = /*#__PURE__*/function (_LanguageEntry14) {
          _inheritsLoose(_, _LanguageEntry14);
          function _() {
            return _LanguageEntry14.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "普通";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Ordinary";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "普通";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class14);
      })();
      (function (_dec15, _class15) {
        var _ = (_dec15 = RegisterLanguageEntry("Fine"), _dec15(_class15 = /*#__PURE__*/function (_LanguageEntry15) {
          _inheritsLoose(_, _LanguageEntry15);
          function _() {
            return _LanguageEntry15.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "精良";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Fine";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "精良";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class15);
      })();
      (function (_dec16, _class16) {
        var _ = (_dec16 = RegisterLanguageEntry("Rare"), _dec16(_class16 = /*#__PURE__*/function (_LanguageEntry16) {
          _inheritsLoose(_, _LanguageEntry16);
          function _() {
            return _LanguageEntry16.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "稀有";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Rare";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "希少";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class16);
      })();
      (function (_dec17, _class17) {
        var _ = (_dec17 = RegisterLanguageEntry("Epic"), _dec17(_class17 = /*#__PURE__*/function (_LanguageEntry17) {
          _inheritsLoose(_, _LanguageEntry17);
          function _() {
            return _LanguageEntry17.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "史诗";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Epic";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "エピック";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class17);
      })();
      (function (_dec18, _class18) {
        var _ = (_dec18 = RegisterLanguageEntry("Legendary"), _dec18(_class18 = /*#__PURE__*/function (_LanguageEntry18) {
          _inheritsLoose(_, _LanguageEntry18);
          function _() {
            return _LanguageEntry18.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "传说";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Legendary";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "伝説";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class18);
      })();
      (function (_dec19, _class19) {
        var _ = (_dec19 = RegisterLanguageEntry("Mythic"), _dec19(_class19 = /*#__PURE__*/function (_LanguageEntry19) {
          _inheritsLoose(_, _LanguageEntry19);
          function _() {
            return _LanguageEntry19.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "神话";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Mythic";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "神話";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class19);
      })();
      (function (_dec20, _class20) {
        var _ = (_dec20 = RegisterLanguageEntry("Equipment"), _dec20(_class20 = /*#__PURE__*/function (_LanguageEntry20) {
          _inheritsLoose(_, _LanguageEntry20);
          function _() {
            return _LanguageEntry20.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "装备";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Equipment";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "装備";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class20);
      })();
      (function (_dec21, _class21) {
        var _ = (_dec21 = RegisterLanguageEntry("Item"), _dec21(_class21 = /*#__PURE__*/function (_LanguageEntry21) {
          _inheritsLoose(_, _LanguageEntry21);
          function _() {
            return _LanguageEntry21.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "物品";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Item";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "アイテム";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class21);
      })();
      (function (_dec22, _class22) {
        var _ = (_dec22 = RegisterLanguageEntry("Use"), _dec22(_class22 = /*#__PURE__*/function (_LanguageEntry22) {
          _inheritsLoose(_, _LanguageEntry22);
          function _() {
            return _LanguageEntry22.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "使用";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Use";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "使用";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class22);
      })();
      (function (_dec23, _class23) {
        var _ = (_dec23 = RegisterLanguageEntry("Count"), _dec23(_class23 = /*#__PURE__*/function (_LanguageEntry23) {
          _inheritsLoose(_, _LanguageEntry23);
          function _() {
            return _LanguageEntry23.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "数量";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Count";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "数量";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class23);
      })();
      (function (_dec24, _class24) {
        var _ = (_dec24 = RegisterLanguageEntry("Levelup"), _dec24(_class24 = /*#__PURE__*/function (_LanguageEntry24) {
          _inheritsLoose(_, _LanguageEntry24);
          function _() {
            return _LanguageEntry24.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "升级";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Levelup";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "レベルアップ";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class24);
      })();
      (function (_dec25, _class25) {
        var _ = (_dec25 = RegisterLanguageEntry("Gold"), _dec25(_class25 = /*#__PURE__*/function (_LanguageEntry25) {
          _inheritsLoose(_, _LanguageEntry25);
          function _() {
            return _LanguageEntry25.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "金币";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Gold";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "ゴールド";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class25);
      })();
      (function (_dec26, _class26) {
        var _ = (_dec26 = RegisterLanguageEntry("Diamond"), _dec26(_class26 = /*#__PURE__*/function (_LanguageEntry26) {
          _inheritsLoose(_, _LanguageEntry26);
          function _() {
            return _LanguageEntry26.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "钻石";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Diamond";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "ダイヤモンド";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class26);
      })();
      (function (_dec27, _class27) {
        var _ = (_dec27 = RegisterLanguageEntry("Material"), _dec27(_class27 = /*#__PURE__*/function (_LanguageEntry27) {
          _inheritsLoose(_, _LanguageEntry27);
          function _() {
            return _LanguageEntry27.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "材料";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Material";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "素材";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class27);
      })();
      (function (_dec28, _class28) {
        var _ = (_dec28 = RegisterLanguageEntry("Learn"), _dec28(_class28 = /*#__PURE__*/function (_LanguageEntry28) {
          _inheritsLoose(_, _LanguageEntry28);
          function _() {
            return _LanguageEntry28.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "学习";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Learn";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "学習";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class28);
      })();
      (function (_dec29, _class29) {
        var _ = (_dec29 = RegisterLanguageEntry("Escape"), _dec29(_class29 = /*#__PURE__*/function (_LanguageEntry29) {
          _inheritsLoose(_, _LanguageEntry29);
          function _() {
            return _LanguageEntry29.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "逃离";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Escape";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "逃げる";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class29);
      })();
      (function (_dec30, _class30) {
        var _ = (_dec30 = RegisterLanguageEntry("Achivement"), _dec30(_class30 = /*#__PURE__*/function (_LanguageEntry30) {
          _inheritsLoose(_, _LanguageEntry30);
          function _() {
            return _LanguageEntry30.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "成就";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Achivement";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "成績";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class30);
      })();
      (function (_dec31, _class31) {
        var _ = (_dec31 = RegisterLanguageEntry("DayTask"), _dec31(_class31 = /*#__PURE__*/function (_LanguageEntry31) {
          _inheritsLoose(_, _LanguageEntry31);
          function _() {
            return _LanguageEntry31.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "每日任务";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Daily Task";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "毎日タスク";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class31);
      })();
      (function (_dec32, _class32) {
        var _ = (_dec32 = RegisterLanguageEntry("GetReward"), _dec32(_class32 = /*#__PURE__*/function (_LanguageEntry32) {
          _inheritsLoose(_, _LanguageEntry32);
          function _() {
            return _LanguageEntry32.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "获得奖励";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Get Reward";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "報酬を得る";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class32);
      })();
      (function (_dec33, _class33) {
        var _ = (_dec33 = RegisterLanguageEntry("EquipmentCanNotBeStrengthened"), _dec33(_class33 = /*#__PURE__*/function (_LanguageEntry33) {
          _inheritsLoose(_, _LanguageEntry33);
          function _() {
            return _LanguageEntry33.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "装备无法强化";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Equipment can not be strengthened";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "装備は強化できません";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class33);
      })();
      (function (_dec34, _class34) {
        var _ = (_dec34 = RegisterLanguageEntry("NotEnoughGold"), _dec34(_class34 = /*#__PURE__*/function (_LanguageEntry34) {
          _inheritsLoose(_, _LanguageEntry34);
          function _() {
            return _LanguageEntry34.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "金币不足";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Not enough gold";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "ゴールドが足りません";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class34);
      })();
      (function (_dec35, _class35) {
        var _ = (_dec35 = RegisterLanguageEntry("NotEnoughDiamond"), _dec35(_class35 = /*#__PURE__*/function (_LanguageEntry35) {
          _inheritsLoose(_, _LanguageEntry35);
          function _() {
            return _LanguageEntry35.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "钻石不足";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Not enough diamond";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "ダイヤが足りません";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class35);
      })();
      (function (_dec36, _class36) {
        var _ = (_dec36 = RegisterLanguageEntry("EquipmentMaxLevel"), _dec36(_class36 = /*#__PURE__*/function (_LanguageEntry36) {
          _inheritsLoose(_, _LanguageEntry36);
          function _() {
            return _LanguageEntry36.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "装备已达最大等级";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Equipment has reached max level";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "装備は最大レベルに達しました";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class36);
      })();
      (function (_dec37, _class37) {
        var _ = (_dec37 = RegisterLanguageEntry("NotEnoughDiamond"), _dec37(_class37 = /*#__PURE__*/function (_LanguageEntry37) {
          _inheritsLoose(_, _LanguageEntry37);
          function _() {
            return _LanguageEntry37.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "钻石不足";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Not enough diamond";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "ダイヤが足りません";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class37);
      })();
      (function (_dec38, _class38) {
        var _ = (_dec38 = RegisterLanguageEntry("Blacksmith"), _dec38(_class38 = /*#__PURE__*/function (_LanguageEntry38) {
          _inheritsLoose(_, _LanguageEntry38);
          function _() {
            return _LanguageEntry38.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "铁匠屋";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Blacksmith";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "鍛冶屋";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class38);
      })();
      (function (_dec39, _class39) {
        var _ = (_dec39 = RegisterLanguageEntry("Strengthen"), _dec39(_class39 = /*#__PURE__*/function (_LanguageEntry39) {
          _inheritsLoose(_, _LanguageEntry39);
          function _() {
            return _LanguageEntry39.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "强化";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Strengthen";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "強化";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class39);
      })();
      (function (_dec40, _class40) {
        var _ = (_dec40 = RegisterLanguageEntry("Decomposition"), _dec40(_class40 = /*#__PURE__*/function (_LanguageEntry40) {
          _inheritsLoose(_, _LanguageEntry40);
          function _() {
            return _LanguageEntry40.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "分解";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Decomposition";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "分解";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class40);
      })();
      (function (_dec41, _class41) {
        var _ = (_dec41 = RegisterLanguageEntry("NotEnoughItems"), _dec41(_class41 = /*#__PURE__*/function (_LanguageEntry41) {
          _inheritsLoose(_, _LanguageEntry41);
          function _() {
            return _LanguageEntry41.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "物品不足";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Not enough items";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "アイテムが足りません";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class41);
      })();
      (function (_dec42, _class42) {
        var _ = (_dec42 = RegisterLanguageEntry("Warning"), _dec42(_class42 = /*#__PURE__*/function (_LanguageEntry42) {
          _inheritsLoose(_, _LanguageEntry42);
          function _() {
            return _LanguageEntry42.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "警告";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Warning";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "警告";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class42);
      })();
      (function (_dec43, _class43) {
        var _ = (_dec43 = RegisterLanguageEntry("Confirm"), _dec43(_class43 = /*#__PURE__*/function (_LanguageEntry43) {
          _inheritsLoose(_, _LanguageEntry43);
          function _() {
            return _LanguageEntry43.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "确认";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Confirm";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "確認";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class43);
      })();
      (function (_dec44, _class44) {
        var _ = (_dec44 = RegisterLanguageEntry("Cancel"), _dec44(_class44 = /*#__PURE__*/function (_LanguageEntry44) {
          _inheritsLoose(_, _LanguageEntry44);
          function _() {
            return _LanguageEntry44.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "取消";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Cancel";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "キャンセル";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class44);
      })();
      (function (_dec45, _class45) {
        var _ = (_dec45 = RegisterLanguageEntry("Fail Label"), _dec45(_class45 = /*#__PURE__*/function (_LanguageEntry45) {
          _inheritsLoose(_, _LanguageEntry45);
          function _() {
            return _LanguageEntry45.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "又是一个不知名的尸骨，埋藏在这个被人遗忘之地";
            }
          }, {
            key: "eng",
            get: function get() {
              return "It's another unknown skeleton, buried in this forgotten place";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "これはまた、忘れられた場所に埋まっている未知のスケルトンです";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class45);
      })();
      (function (_dec46, _class46) {
        var _ = (_dec46 = RegisterLanguageEntry("PlaceOfTrials"), _dec46(_class46 = /*#__PURE__*/function (_LanguageEntry46) {
          _inheritsLoose(_, _LanguageEntry46);
          function _() {
            return _LanguageEntry46.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "试炼之地";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Place of Trials";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "試練の地";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class46);
      })();
      (function (_dec47, _class47) {
        var _ = (_dec47 = RegisterLanguageEntry("Enter"), _dec47(_class47 = /*#__PURE__*/function (_LanguageEntry47) {
          _inheritsLoose(_, _LanguageEntry47);
          function _() {
            return _LanguageEntry47.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "进入";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Enter";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "入る";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class47);
      })();
      (function (_dec48, _class48) {
        var _ = (_dec48 = RegisterLanguageEntry("Leave"), _dec48(_class48 = /*#__PURE__*/function (_LanguageEntry48) {
          _inheritsLoose(_, _LanguageEntry48);
          function _() {
            return _LanguageEntry48.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "离开";
            }
          }, {
            key: "eng",
            get: function get() {
              return "Leave";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "出る";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class48);
      })();
      (function (_dec49, _class49) {
        var _ = (_dec49 = RegisterLanguageEntry("GoIntoBattle"), _dec49(_class49 = /*#__PURE__*/function (_LanguageEntry49) {
          _inheritsLoose(_, _LanguageEntry49);
          function _() {
            return _LanguageEntry49.apply(this, arguments) || this;
          }
          _createClass(_, [{
            key: "chs",
            get: function get() {
              return "出战";
            }
          }, {
            key: "eng",
            get: function get() {
              return "GoIntoBattle";
            }
          }, {
            key: "jpn",
            get: function get() {
              return "戦う";
            }
          }]);
          return _;
        }(LanguageEntry)) || _class49);
      })();
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/UseGold.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './AchivementManager.ts', './AchivementManager2.ts', './AchivementPrototype.ts', './index3.ts', './LanguageEntry.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _inheritsLoose, _createClass, _asyncToGenerator, _regeneratorRuntime, cclegacy, SpriteFrame, achivementManager, RegisterAchivement, AchivementPrototype, CcNative, LanguageEntry, RegisterLanguageEntry, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _inheritsLoose = module.inheritsLoose;
      _createClass = module.createClass;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      SpriteFrame = module.SpriteFrame;
    }, function (module) {
      achivementManager = module.achivementManager;
    }, function (module) {
      RegisterAchivement = module.RegisterAchivement;
    }, function (module) {
      AchivementPrototype = module.AchivementPrototype;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      LanguageEntry = module.LanguageEntry;
    }, function (module) {
      RegisterLanguageEntry = module.RegisterLanguageEntry;
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _class, _dec2, _class2, _dec3, _class3;
      cclegacy._RF.push({}, "76502I6rglJ64AZOcEfMn0O", "UseGold", undefined);
      var LanguageEntryMonopoly = (_dec = RegisterLanguageEntry("UseGold"), _dec(_class = /*#__PURE__*/function (_LanguageEntry) {
        _inheritsLoose(LanguageEntryMonopoly, _LanguageEntry);
        function LanguageEntryMonopoly() {
          return _LanguageEntry.apply(this, arguments) || this;
        }
        _createClass(LanguageEntryMonopoly, [{
          key: "chs",
          get: function get() {
            return "使用金币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Use Gold";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "金を使う";
          }
        }]);
        return LanguageEntryMonopoly;
      }(LanguageEntry)) || _class);
      var LanguageEntryMonopolyDescription = (_dec2 = RegisterLanguageEntry("UseGold Description"), _dec2(_class2 = /*#__PURE__*/function (_LanguageEntry2) {
        _inheritsLoose(LanguageEntryMonopolyDescription, _LanguageEntry2);
        function LanguageEntryMonopolyDescription() {
          return _LanguageEntry2.apply(this, arguments) || this;
        }
        _createClass(LanguageEntryMonopolyDescription, [{
          key: "chs",
          get: function get() {
            return "使用 1000 金币";
          }
        }, {
          key: "eng",
          get: function get() {
            return "Use 100000 coins";
          }
        }, {
          key: "jpn",
          get: function get() {
            return "100000 コインを使う";
          }
        }]);
        return LanguageEntryMonopolyDescription;
      }(LanguageEntry)) || _class2);
      var Monopoly = exports('Monopoly', (_dec3 = RegisterAchivement("UseGold", true), _dec3(_class3 = /*#__PURE__*/function (_AchivementPrototype) {
        _inheritsLoose(Monopoly, _AchivementPrototype);
        function Monopoly() {
          return _AchivementPrototype.apply(this, arguments) || this;
        }
        var _proto = Monopoly.prototype;
        // 图标
        _proto.icon = /*#__PURE__*/
        function () {
          var _icon = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  return _context2.abrupt("return", new Promise( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(res) {
                    var assets;
                    return _regeneratorRuntime().wrap(function _callee$(_context) {
                      while (1) switch (_context.prev = _context.next) {
                        case 0:
                          assets = new CcNative.Asset.AssetManager("ModBaseResource");
                          _context.t0 = res;
                          _context.next = 4;
                          return assets.load("Texture/Achivement/UseGold/spriteFrame", SpriteFrame, true);
                        case 4:
                          _context.t1 = _context.sent.value;
                          (0, _context.t0)(_context.t1);
                        case 6:
                        case "end":
                          return _context.stop();
                      }
                    }, _callee);
                  }))));
                case 1:
                case "end":
                  return _context2.stop();
              }
            }, _callee2);
          }));
          function icon() {
            return _icon.apply(this, arguments);
          }
          return icon;
        }();
        _createClass(Monopoly, [{
          key: "name",
          get: function get() {
            return LanguageManager.getEntry("UseGold").getValue(settingManager.data.language);
          }
        }, {
          key: "description",
          get: function get() {
            return LanguageManager.getEntry("UseGold Description").getValue(settingManager.data.language);
          }
        }, {
          key: "progress",
          get: function get() {
            return {
              progress: achivementManager.data.dayTaskData.resource.reduceGold,
              maxProgress: 1000
            };
          }
        }, {
          key: "rewards",
          get: function get() {
            return {
              gold: 2500,
              diamond: 10
            };
          }
        }]);
        return Monopoly;
      }(AchivementPrototype)) || _class3));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/UserBaseDataPrefab.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './Normal.ts', './ExtensionComponent.ts', './ModuleProgressPrefab.ts', './CharacterManager.ts', './index3.ts', './FightBuffItemPrefab.ts', './index6.ts', './LanguageManager.ts', './SettingManager.ts'], function (exports) {
  var _applyDecoratedDescriptor, _inheritsLoose, _initializerDefineProperty, _assertThisInitialized, _asyncToGenerator, _regeneratorRuntime, cclegacy, _decorator, Sprite, Label, Node, Prefab, ScrollView, Normal, ExtensionComponent, ModuleProgressPrefab, characterManager, CcNative, FightBuffItemPrefab, Rx, LanguageManager, settingManager;
  return {
    setters: [function (module) {
      _applyDecoratedDescriptor = module.applyDecoratedDescriptor;
      _inheritsLoose = module.inheritsLoose;
      _initializerDefineProperty = module.initializerDefineProperty;
      _assertThisInitialized = module.assertThisInitialized;
      _asyncToGenerator = module.asyncToGenerator;
      _regeneratorRuntime = module.regeneratorRuntime;
    }, function (module) {
      cclegacy = module.cclegacy;
      _decorator = module._decorator;
      Sprite = module.Sprite;
      Label = module.Label;
      Node = module.Node;
      Prefab = module.Prefab;
      ScrollView = module.ScrollView;
    }, function (module) {
      Normal = module.Normal;
    }, function (module) {
      ExtensionComponent = module.default;
    }, function (module) {
      ModuleProgressPrefab = module.ModuleProgressPrefab;
    }, function (module) {
      characterManager = module.characterManager;
    }, function (module) {
      CcNative = module.CcNative;
    }, function (module) {
      FightBuffItemPrefab = module.FightBuffItemPrefab;
    }, function (module) {
      Rx = module.Rx;
    }, function (module) {
      LanguageManager = module.LanguageManager;
    }, function (module) {
      settingManager = module.settingManager;
    }],
    execute: function () {
      var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8;
      cclegacy._RF.push({}, "295e2ohhU1FWqzcAgC6hrBB", "UserBaseDataPrefab", undefined);
      var ccclass = _decorator.ccclass,
        property = _decorator.property;
      var UserBaseDataPrefab = exports('UserBaseDataPrefab', (_dec = ccclass('UserBaseDataPrefab'), _dec2 = property(Sprite), _dec3 = property(ModuleProgressPrefab), _dec4 = property(ModuleProgressPrefab), _dec5 = property(ModuleProgressPrefab), _dec6 = property(Label), _dec7 = property(Label), _dec8 = property(Node), _dec9 = property(Prefab), _dec(_class = (_class2 = /*#__PURE__*/function (_ExtensionComponent) {
        _inheritsLoose(UserBaseDataPrefab, _ExtensionComponent);
        function UserBaseDataPrefab() {
          var _this;
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }
          _this = _ExtensionComponent.call.apply(_ExtensionComponent, [this].concat(args)) || this;
          _initializerDefineProperty(_this, "avatar", _descriptor, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "hpProgress", _descriptor2, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "mpProgress", _descriptor3, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "expProgress", _descriptor4, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "numberLabel", _descriptor5, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "levelLabel", _descriptor6, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "buffContainer", _descriptor7, _assertThisInitialized(_this));
          _initializerDefineProperty(_this, "FightBuffItemPrefab", _descriptor8, _assertThisInitialized(_this));
          _this.effectList = [];
          // 修改是否展示详细信息
          _this.showDetailProperty = Rx.ref(false);
          return _this;
        }
        var _proto = UserBaseDataPrefab.prototype;
        _proto.bindCharacter = /*#__PURE__*/function () {
          var _bindCharacter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(characterInstance, showBuff) {
            var _this2 = this;
            var globalId, runner1, runner2, runner3, runner4, runner5;
            return _regeneratorRuntime().wrap(function _callee2$(_context2) {
              while (1) switch (_context2.prev = _context2.next) {
                case 0:
                  if (showBuff === void 0) {
                    showBuff = true;
                  }
                  characterInstance = Rx.reactive(characterInstance);
                  this.effectList.forEach(function (r) {
                    return r.effect.stop();
                  });
                  this.effectList = [];
                  globalId = 0; // 隐藏buff列表
                  if (!showBuff) this.buffContainer.active = false;
                  // 渲染头像
                  runner1 = this.effect(function () {
                    var id = ++globalId;
                    characterInstance.proto.icon().then(function (res) {
                      if (globalId === id) _this2.avatar.spriteFrame = res;
                    });
                  }); // 渲染血条
                  runner2 = this.effect(function () {
                    _this2.numberLabel.string = "\n" + Normal.number(characterInstance.hp * characterInstance.maxHp) + "/" + Normal.number(characterInstance.maxHp) + "\n" + (Normal.number(characterInstance.mp * characterInstance.maxMp) + "/" + Normal.number(characterInstance.maxMp) + "\n") + (Normal.number(characterManager.data.exp) + "/" + Normal.number(characterManager.data.maxExp) + "\n");
                    _this2.hpProgress.setProgress(characterInstance.hp);
                    _this2.mpProgress.setProgress(characterInstance.mp);
                    _this2.expProgress.setProgress(characterManager.data.exp / characterManager.data.maxExp);
                    _this2.levelLabel.string = characterManager.data.lv + "";
                  }); // 渲染buff
                  runner3 = this.effect(function () {
                    _this2.buffContainer.removeAllChildren();
                    characterInstance.buffs.forEach( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(buff) {
                      var itemNode;
                      return _regeneratorRuntime().wrap(function _callee$(_context) {
                        while (1) switch (_context.prev = _context.next) {
                          case 0:
                            itemNode = CcNative.instantiate(_this2.FightBuffItemPrefab);
                            itemNode.getComponent(FightBuffItemPrefab).setBuffData(buff);
                            _this2.buffContainer.addChild(itemNode);
                          case 3:
                          case "end":
                            return _context.stop();
                        }
                      }, _callee);
                    })));
                  }); // 渲染角色信息
                  runner4 = this.effect(function () {
                    return _this2.initDetail(characterInstance);
                  }); // 渲染角色信息
                  runner5 = this.effect(function () {
                    return _this2.node.getChildByName("DetailProoerty").active = _this2.showDetailProperty.value;
                  });
                  this.effectList.push(runner1, runner2, runner3, runner4, runner5);
                case 12:
                case "end":
                  return _context2.stop();
              }
            }, _callee2, this);
          }));
          function bindCharacter(_x, _x2) {
            return _bindCharacter.apply(this, arguments);
          }
          return bindCharacter;
        }() // 初始化详细信息
        ;

        _proto.initDetail = /*#__PURE__*/
        function () {
          var _initDetail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(characterInstance) {
            var detailPropertyNode, avatarSprite, label, property;
            return _regeneratorRuntime().wrap(function _callee3$(_context3) {
              while (1) switch (_context3.prev = _context3.next) {
                case 0:
                  detailPropertyNode = this.node.getChildByName("DetailProoerty");
                  avatarSprite = detailPropertyNode.getChildByName("Avatar").getComponent(Sprite);
                  detailPropertyNode.getChildByName("Title").getComponent(Label).string = characterInstance.proto.name;
                  detailPropertyNode.getChildByName("Detail").getComponent(ScrollView).content.getComponent(Label).string = characterInstance.proto.description;
                  // 渲染其他属性
                  label = detailPropertyNode.getChildByName("Property").getComponent(ScrollView).content.getComponent(Label);
                  label.string = "";
                  property = [{
                    key: "maxHp",
                    force: false,
                    fixed: 0,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "maxMp",
                    force: false,
                    fixed: 0,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "physicalAttack",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "magicAttack",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "lightAttack",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "darkAttack",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "physicalDefense",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "magicDefense",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "lightResistance",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "darkResistance",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "physicalPenetration",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "magicPenetration",
                    force: false,
                    fixed: 1,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "criticalRate",
                    force: false,
                    fixed: 1,
                    rate: 100,
                    exit: "%"
                  }, {
                    key: "criticalDamage",
                    force: false,
                    fixed: 1,
                    rate: 100,
                    exit: "%"
                  }, {
                    key: "coolDown",
                    force: true,
                    fixed: 0,
                    rate: 1,
                    exit: ""
                  }, {
                    key: "attackSpeed",
                    force: true,
                    fixed: 2,
                    rate: 1,
                    exit: ""
                  }];
                  property.forEach(function (setting) {
                    label.string += LanguageManager.getEntry(setting.key).getValue(settingManager.data.language) + ": " + Normal.number(characterInstance[setting.key] * setting.rate) + setting.exit + "\n";
                  });
                  _context3.next = 10;
                  return characterInstance.proto.icon();
                case 10:
                  avatarSprite.spriteFrame = _context3.sent;
                case 11:
                case "end":
                  return _context3.stop();
              }
            }, _callee3, this);
          }));
          function initDetail(_x4) {
            return _initDetail.apply(this, arguments);
          }
          return initDetail;
        }();
        // 改变展示用户详细信息
        _proto.openShowUserDetail = function openShowUserDetail() {
          this.showDetailProperty.value = true;
        };
        _proto.closeShowUserDetail = function closeShowUserDetail() {
          this.showDetailProperty.value = false;
        };
        return UserBaseDataPrefab;
      }(ExtensionComponent), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, "avatar", [_dec2], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, "hpProgress", [_dec3], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, "mpProgress", [_dec4], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, "expProgress", [_dec5], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, "numberLabel", [_dec6], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, "levelLabel", [_dec7], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, "buffContainer", [_dec8], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      }), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, "FightBuffItemPrefab", [_dec9], {
        configurable: true,
        enumerable: true,
        writable: true,
        initializer: function initializer() {
          return null;
        }
      })), _class2)) || _class));
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/warning.ts", ['cc'], function (exports) {
  var cclegacy;
  return {
    setters: [function (module) {
      cclegacy = module.cclegacy;
    }],
    execute: function () {
      exports('warn', warn);
      cclegacy._RF.push({}, "45bd9sWEA1NeI+/9p/ytLp7", "warning", undefined);
      function warn(msg) {
        var _console;
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        (_console = console).warn.apply(_console, ["[Vue warn] " + msg].concat(args));
      }
      cclegacy._RF.pop();
    }
  };
});

System.register("chunks:///_virtual/watch.ts", ['./rollupPluginModLoBabelHelpers.js', 'cc', './index8.ts', './constants.ts', './effect.ts', './effectScope.ts', './reactive.ts', './ref.ts', './general.ts'], function (exports) {
  var _createForOfIteratorHelperLoose, cclegacy, warn, ReactiveFlags, ReactiveEffect, pauseTracking, resetTracking, EffectFlags, getCurrentScope, isShallow, isReactive, isRef, isArray, isFunction, isObject, isSet, isMap, isPlainObject, EMPTY_OBJ, NOOP, remove, hasChanged;
  return {
    setters: [function (module) {
      _createForOfIteratorHelperLoose = module.createForOfIteratorHelperLoose;
    }, function (module) {
      cclegacy = module.cclegacy;
      warn = module.warn;
    }, null, function (module) {
      ReactiveFlags = module.ReactiveFlags;
    }, function (module) {
      ReactiveEffect = module.ReactiveEffect;
      pauseTracking = module.pauseTracking;
      resetTracking = module.resetTracking;
      EffectFlags = module.EffectFlags;
    }, function (module) {
      getCurrentScope = module.getCurrentScope;
    }, function (module) {
      isShallow = module.isShallow;
      isReactive = module.isReactive;
    }, function (module) {
      isRef = module.isRef;
    }, function (module) {
      isArray = module.isArray;
      isFunction = module.isFunction;
      isObject = module.isObject;
      isSet = module.isSet;
      isMap = module.isMap;
      isPlainObject = module.isPlainObject;
      EMPTY_OBJ = module.EMPTY_OBJ;
      NOOP = module.NOOP;
      remove = module.remove;
      hasChanged = module.hasChanged;
    }],
    execute: function () {
      exports({
        getCurrentWatcher: getCurrentWatcher,
        onWatcherCleanup: onWatcherCleanup,
        traverse: traverse,
        watch: watch
      });
      cclegacy._RF.push({}, "03aed4wg4pPoIKxLm7x5inG", "watch", undefined);

      // it is essential to keep these values unchanged.
      var WatchErrorCodes = exports('WatchErrorCodes', /*#__PURE__*/function (WatchErrorCodes) {
        WatchErrorCodes[WatchErrorCodes["WATCH_GETTER"] = 2] = "WATCH_GETTER";
        WatchErrorCodes[WatchErrorCodes["WATCH_CALLBACK"] = 3] = "WATCH_CALLBACK";
        WatchErrorCodes[WatchErrorCodes["WATCH_CLEANUP"] = 4] = "WATCH_CLEANUP";
        return WatchErrorCodes;
      }({}));
      // initial value for watchers to trigger on undefined initial values
      var INITIAL_WATCHER_VALUE = {};
      var cleanupMap = new WeakMap();
      var activeWatcher = undefined;

      /**
       * Returns the current active effect if there is one.
       */
      function getCurrentWatcher() {
        return activeWatcher;
      }

      /**
       * Registers a cleanup callback on the current active effect. This
       * registered cleanup callback will be invoked right before the
       * associated effect re-runs.
       *
       * @param cleanupFn - The callback function to attach to the effect's cleanup.
       * @param failSilently - if `true`, will not throw warning when called without
       * an active effect.
       * @param owner - The effect that this cleanup function should be attached to.
       * By default, the current active effect.
       */
      function onWatcherCleanup(cleanupFn, failSilently, owner) {
        if (failSilently === void 0) {
          failSilently = false;
        }
        if (owner === void 0) {
          owner = activeWatcher;
        }
        if (owner) {
          var cleanups = cleanupMap.get(owner);
          if (!cleanups) cleanupMap.set(owner, cleanups = []);
          cleanups.push(cleanupFn);
        } else if (!failSilently) {
          warn("onWatcherCleanup() was called when there was no active watcher" + " to associate with.");
        }
      }
      function watch(source, cb, options) {
        if (options === void 0) {
          options = EMPTY_OBJ;
        }
        var _options = options,
          immediate = _options.immediate,
          deep = _options.deep,
          once = _options.once,
          scheduler = _options.scheduler,
          augmentJob = _options.augmentJob,
          call = _options.call;
        var warnInvalidSource = function warnInvalidSource(s) {
          (options.onWarn || warn)("Invalid watch source: ", s, "A watch source can only be a getter/effect function, a ref, " + "a reactive object, or an array of these types.");
        };
        var reactiveGetter = function reactiveGetter(source) {
          // traverse will happen in wrapped getter below
          if (deep) return source;
          // for `deep: false | 0` or shallow reactive, only traverse root-level properties
          if (isShallow(source) || deep === false || deep === 0) return traverse(source, 1);
          // for `deep: undefined` on a reactive object, deeply traverse all properties
          return traverse(source);
        };
        var effect;
        var getter;
        var cleanup;
        var boundCleanup;
        var forceTrigger = false;
        var isMultiSource = false;
        if (isRef(source)) {
          getter = function getter() {
            return source.value;
          };
          forceTrigger = isShallow(source);
        } else if (isReactive(source)) {
          getter = function getter() {
            return reactiveGetter(source);
          };
          forceTrigger = true;
        } else if (isArray(source)) {
          isMultiSource = true;
          forceTrigger = source.some(function (s) {
            return isReactive(s) || isShallow(s);
          });
          getter = function getter() {
            return source.map(function (s) {
              if (isRef(s)) {
                return s.value;
              } else if (isReactive(s)) {
                return reactiveGetter(s);
              } else if (isFunction(s)) {
                return call ? call(s, WatchErrorCodes.WATCH_GETTER) : s();
              } else {
                warnInvalidSource(s);
              }
            });
          };
        } else if (isFunction(source)) {
          if (cb) {
            // getter with cb
            getter = call ? function () {
              return call(source, WatchErrorCodes.WATCH_GETTER);
            } : source;
          } else {
            // no cb -> simple effect
            getter = function getter() {
              if (cleanup) {
                pauseTracking();
                try {
                  cleanup();
                } finally {
                  resetTracking();
                }
              }
              var currentEffect = activeWatcher;
              activeWatcher = effect;
              try {
                return call ? call(source, WatchErrorCodes.WATCH_CALLBACK, [boundCleanup]) : source(boundCleanup);
              } finally {
                activeWatcher = currentEffect;
              }
            };
          }
        } else {
          getter = NOOP;
          warnInvalidSource(source);
        }
        if (cb && deep) {
          var baseGetter = getter;
          var depth = deep === true ? Infinity : deep;
          getter = function getter() {
            return traverse(baseGetter(), depth);
          };
        }
        var scope = getCurrentScope();
        var watchHandle = function watchHandle() {
          effect.stop();
          if (scope && scope.active) {
            remove(scope.effects, effect);
          }
        };
        if (once && cb) {
          var _cb = cb;
          cb = function cb() {
            _cb.apply(void 0, arguments);
            watchHandle();
          };
        }
        var oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;
        var job = function job(immediateFirstRun) {
          if (!(effect.flags & EffectFlags.ACTIVE) || !effect.dirty && !immediateFirstRun) {
            return;
          }
          if (cb) {
            // watch(source, cb)
            var newValue = effect.run();
            if (deep || forceTrigger || (isMultiSource ? newValue.some(function (v, i) {
              return hasChanged(v, oldValue[i]);
            }) : hasChanged(newValue, oldValue))) {
              // cleanup before running cb again
              if (cleanup) {
                cleanup();
              }
              var currentWatcher = activeWatcher;
              activeWatcher = effect;
              try {
                var _args = [newValue,
                // pass undefined as the old value when it's changed for the first time
                oldValue === INITIAL_WATCHER_VALUE ? undefined : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue, boundCleanup];
                call ? call(cb, WatchErrorCodes.WATCH_CALLBACK, _args) :
                // @ts-expect-error
                cb.apply(void 0, _args);
                oldValue = newValue;
              } finally {
                activeWatcher = currentWatcher;
              }
            }
          } else {
            // watchEffect
            effect.run();
          }
        };
        if (augmentJob) {
          augmentJob(job);
        }
        effect = new ReactiveEffect(getter);
        effect.scheduler = scheduler ? function () {
          return scheduler(job, false);
        } : job;
        boundCleanup = function boundCleanup(fn) {
          return onWatcherCleanup(fn, false, effect);
        };
        cleanup = effect.onStop = function () {
          var cleanups = cleanupMap.get(effect);
          if (cleanups) {
            if (call) {
              call(cleanups, WatchErrorCodes.WATCH_CLEANUP);
            } else {
              for (var _iterator = _createForOfIteratorHelperLoose(cleanups), _step; !(_step = _iterator()).done;) {
                var _cleanup = _step.value;
                _cleanup();
              }
            }
            cleanupMap["delete"](effect);
          }
        };
        {
          effect.onTrack = options.onTrack;
          effect.onTrigger = options.onTrigger;
        }

        // initial run
        if (cb) {
          if (immediate) {
            job(true);
          } else {
            oldValue = effect.run();
          }
        } else if (scheduler) {
          scheduler(job.bind(null, true), true);
        } else {
          effect.run();
        }
        watchHandle.pause = effect.pause.bind(effect);
        watchHandle.resume = effect.resume.bind(effect);
        watchHandle.stop = watchHandle;
        return watchHandle;
      }
      function traverse(value, depth, seen) {
        if (depth === void 0) {
          depth = Infinity;
        }
        if (depth <= 0 || !isObject(value) || value[ReactiveFlags.SKIP]) {
          return value;
        }
        seen = seen || new Set();
        if (seen.has(value)) {
          return value;
        }
        seen.add(value);
        depth--;
        if (isRef(value)) {
          traverse(value.value, depth, seen);
        } else if (isArray(value)) {
          for (var i = 0; i < value.length; i++) {
            traverse(value[i], depth, seen);
          }
        } else if (isSet(value) || isMap(value)) {
          value.forEach(function (v) {
            traverse(v, depth, seen);
          });
        } else if (isPlainObject(value)) {
          for (var key in value) {
            traverse(value[key], depth, seen);
          }
          for (var _iterator2 = _createForOfIteratorHelperLoose(Object.getOwnPropertySymbols(value)), _step2; !(_step2 = _iterator2()).done;) {
            var _key = _step2.value;
            if (Object.prototype.propertyIsEnumerable.call(value, _key)) {
              traverse(value[_key], depth, seen);
            }
          }
        }
        return value;
      }
      cclegacy._RF.pop();
    }
  };
});

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});